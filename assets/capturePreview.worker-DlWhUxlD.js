self.onmessage=async n=>{const{imageData:s,width:o,height:r}=n.data;if(!s){self.postMessage({error:"받은 이미지 데이터가 없습니다"});return}try{const e=new OffscreenCanvas(o,r),t=e.getContext("2d");if(!t)throw new Error("OffscreenCanvas 컨텍스트가 없음");t.putImageData(s,0,0);const a=await e.convertToBlob({type:"image/webp",quality:.8});if(!a){self.postMessage({error:"Blob 생성 실패"});return}const f=new File([a],"thumbnail.webp",{type:"image/webp"});self.postMessage({thumbnail:f})}catch(e){self.postMessage({error:e})}};
