import{c as zp,g as fE}from"./index-DRjF_FHU.js";import{c as EA}from"./react-72mb-naO.js";import"./jsx-runtime-DR9Q75dM.js";const Cg="BOOLOCK_SYSTEM_",ba="CSS_",NF=r=>`${Cg}${r}`,HF=r=>r.startsWith(Cg)?r.slice(Cg.length):r,PF=r=>r.startsWith(ba)?r:`${ba}${r}`,fa=r=>r.startsWith(ba)?r.replace(ba,""):r;var IC={exports:{}};(function(r,s){(function(i,n){r.exports=n()})(zp,function(){var i={},n,c,a,h,p,d,g,f,B,w,C,v,_,I,D,F,k,x,P,H,Z,L,G,ie,me,te,ae,re,Ve,ne,Ne,kt,Ke,mt,Qt,Mt,Bt,Nt,We,nt,lt,Ht,ni,j,ee,ue,Te,Oe,St,be,pt,jA,nu,R,q,rl,Fe,Ef,ve,li,il,ci,ai,lu,Bo,sl,ol,wo,yf,cu,TA,Ir,au,uu,nl,hu,_o,ll,du,pu,If,Tf,kf,ji,Sf,cl,Ff,Co,al,Uf,ul,Rf,hl,gu,fu,dl,pl,gl,bo,Df,fl,xf,Of,$l,Lf,$u,qi,Qf,ml,mu,Bu,Mf,Bl,Zi,wl,Nf,wu,_u,Hf,Pf,ui,Gf,vo,Cu,kA,qA,Vf,bu,_l,vu,Kf,Eu,Eo,Wf,es,yo,Cl,zf,Xf,Yf,Tr,gt,Io,zt,Jf,jf,qf,Zf,e$,t$,A$,yu,ZA,ts,Iu,r$,i$,s$,o$,n$,l$,c$,a$,u$,Tu,h$,As,bl,d$,rs,ku,Su,Fu,vl,El,Uu,p$,Ru,Du,xu,Ou,Lu,Qu,Mu,g$,To,Nu,yl,Il,SA,Hu,Pu,ko,Gu,Vu,f$,Tl,Ku,$$,m$,B$,w$,_$,is,Wu,zu,ss,kl,C$,b$,Xu,Yu,er,Ju,ju,v$,E$,y$,I$,qu,T$,Zu,k$,hi,So,Sl,Fl,di,eh,Ul,th,ze,S$,os,ns,F$,Ah,Rl,ls,rh,pi,Fo,ih,sh,U$,R$,D$,oh,x$,nh,Uo,O$,L$,Q$,M$,Ro,lh,N$,Do,ch,xo,H$,P$,kr,ah,FA,G$,V$,uh,K$,gi,hh,W$,z$,X$,Y$,J$,dh,j$,q$,Dl,Z$,em,ph,xl,gh,Ol,fh,$h,cs,fi,tr,Sr,Ll,UA,tm,Am,rm,im,mh,sm,Bh,Ql,om,nm,lm,wh,Ml,_h,Nl,cm,am,um,hm,Fr,J,Pt,ct,Le,RA,as,W,Xe,Ch,dm,Hl,bh,pm,vh,Pl,Eh,yh,gm,Ih,fm,Gl,$m,mm,Bm,wm,_m,Th,Cm,Oo,Lo,bm,kh,Sh,Fh,Uh,Vl,Rh,vm,Em,ym,us,Dh,Im,Kl,eA,Tm,Ur,xh,km,Qo,Oh,Lh,Qh,Mh,Nh,Hh,Ph,Gh,Vh,Kh,Sm,Fm,Um,Rm,Dm,xm,Om,Lm,Qm,Wh,zh,Xh,Yh,Jh,jh,qh,Wl,Mo,Zh,Mm,ed,td,Ad,rd,id,sd,od,nd,ld,cd,Nm,Hm,Pm,ad,Gm,Vm,Km,Wm,zm,Q;n=function(e,t,A,o){if(!(e instanceof M)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const l=t.toLowerCase();if(!A)throw Error("Can not register a null value");let u=Rr[e],m=zl[e];if(u||(u=Rr[e]=Object.create(null),m=zl[e]=Object.create(null)),c(e,A),!o&&u[l]&&u[l]!==A)throw Error('Name "'+l+'" with type "'+e+'" already registered.');u[l]=A,m[l]=t},c=function(e,t){switch(e){case String(M.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},a=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const A=Rr[e];A&&A[t]?(delete Rr[e][t],delete zl[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},h=function(e,t,A){e=`${e}`.toLowerCase(),t=t.toLowerCase();const o=Rr[e];if(!o||!o[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",A)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return o[t]},p=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),(e=Rr[e])?!!e[t]:!1},d=function(e,t,A){return h(e,t,A)},g=function(e,t,A){return h(e,t,A)},f=function(e,t,A){e=`${e}`.toLowerCase();var o=Rr[e];if(!o){if(o=`Unable to find [${e}] in the registry.`,A)throw Error(`${o} You must require or register a ${e} plugin.`);return console.warn(o),null}if(!t)return o;e=zl[e],A=Object.create(null);for(const l of Object.keys(o))A[e[l]]=o[l];return A},B=function(e,t,A){return t=t.plugins[String(e)]||DA,typeof t=="function"?t:d(e,t,A)},w=function(){return"blockly-"+(_v++).toString(36)},C=function(){return Ym.genUid()},i.setRecordUndo$$module$build$src$core$events$utils=function(e){hs=e},v=function(){return hs},_=function(e){ql.fireInternal(e)},I=function(e){if(x()){if(!_i.length)try{requestAnimationFrame(()=>{setTimeout(D,0)})}catch{setTimeout(D,0)}_i.push(e)}},D=function(){var e=F(_i,!0);_i.length=0;for(let A=0,o;o=e[A];A++)if(o.workspaceId){var t=ie(o.workspaceId);t&&t.fireChangeListener(o)}e=new Set(e.map(A=>A.workspaceId));for(const A of e){if(!A||(e=ie(A),!e))continue;e=e.getUndoStack();let o;for(t=e.length;0<t;t--){const l=e[t-1];if(l.group==="")break;if(o===void 0)o=l.group;else if(l.group!==o)break}o&&t!=e.length-1&&(t=e.splice(t,e.length-t),t=F(t,!0),e.push(...t))}},F=function(e,t){e=e.slice(),t||e.reverse();const A=[],o=Object.create(null);for(let m=0,b;b=e[m];m++)if(!b.isNull()){var l=[b.isUiEvent?Yl:b.type,b.blockId,b.workspaceId].join(" "),u=o[l];const T=u?u.event:null;u?b.type===i.MOVE$$module$build$src$core$events$utils&&u.index===m-1?(l=b,T.newParentId=l.newParentId,T.newInputName=l.newInputName,T.newCoordinate=l.newCoordinate,l.reason&&(T.reason?(l=new Set(l.reason.concat(T.reason)),T.reason=Array.from(l)):T.reason=l.reason),u.index=m):b.type===i.CHANGE$$module$build$src$core$events$utils&&b.element===T.element&&b.name===T.name?T.newValue=b.newValue:b.type===Dr?(u=b,T.viewTop=u.viewTop,T.viewLeft=u.viewLeft,T.scale=u.scale,T.oldScale=u.oldScale):(b.type!==ir||T.type!==xA)&&(o[l]={event:b,index:m},A.push(b)):(o[l]={event:b,index:m},A.push(b))}e=A.filter(function(m){return!m.isNull()}),t||e.reverse();for(let m=1,b;b=e[m];m++)b.type===i.CHANGE$$module$build$src$core$events$utils&&b.element==="mutation"&&e.unshift(e.splice(m,1)[0]);return e},k=function(){for(let e=0,t;t=_i[e];e++)t.recordUndo=!1},i.disable$$module$build$src$core$events$utils=function(){Xl++},i.enable$$module$build$src$core$events$utils=function(){Xl--},x=function(){return Xl===0},i.getGroup$$module$build$src$core$events$utils=function(){return hd},i.setGroup$$module$build$src$core$events$utils=function(e){ql.setGroupInternal(e)},P=function(e){hd=typeof e=="boolean"?e?C():"":e},H=function(e){const t=[];e=e.getDescendants(!1);for(let A=0,o;o=e[A];A++)t[A]=o.id;return t},Z=function(e,t){const A=L(e.type);if(!A)throw Error("Unknown event type.");return A.fromJson(e,t)},L=function(e){const t=d(M.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},G=function(e){if((e.type===i.MOVE$$module$build$src$core$events$utils||e.type===i.CREATE$$module$build$src$core$events$utils)&&e.workspaceId){var t=ie(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const A=hs;try{hs=!1;const o=e.getParent();if(o&&!o.hasDisabledReason(Jl)){const l=e.getDescendants(!1);for(let u=0,m;m=l[u];u++)m.setDisabledReason(!1,Jl)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setDisabledReason(!0,Jl),e=e.getNextBlock();while(e)}finally{hs=A}}}},ie=function(e){return Ho[e]||null},me=function(){const e=[];for(const t in Ho)e.push(Ho[t]);return e},te=function(e){Ho[e.id]=e},ae=function(e){delete Ho[e.id]},re=function(){return Jm},Ve=function(e){Jm=e},ne=function(){return Ci},i.setSelected$$module$build$src$core$common=function(e){if(Ci!==e){var t,A,o,l,u,m,b=new(L(ps))((o=(t=Ci)==null?void 0:t.id)!=null?o:null,(l=e==null?void 0:e.id)!=null?l:null,(m=(u=e==null?void 0:e.workspace.id)!=null?u:(A=Ci)==null?void 0:A.workspace.id)!=null?m:"");_(b);var T;(T=Ci)==null||T.unselect(),Ci=e;var V;(V=Ci)==null||V.select()}},Ne=function(){return jm},kt=function(e){jm=e},Ke=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),A=e.getCachedParentSvgSize();var o=t.parentElement;if(o instanceof HTMLElement){var l=o.offsetWidth;o=o.offsetHeight,A.width!==l&&(t.setAttribute("width",l+"px"),e.setCachedParentSvgSize(l,null)),A.height!==o&&(t.setAttribute("height",o+"px"),e.setCachedParentSvgSize(null,o)),e.resize()}},mt=function(e,t){const A=Object.create(null),o=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=o.indexOf(e),o.splice(e,o.length-e));for(let l=0,u;u=o[l];l++)A[u.type]?A[u.type]++:A[u.type]=1;return A},Qt=function(e){return function(){this.jsonInit(e)}},Mt=function(e){qm.defineBlocksWithJsonArrayInternal(e)},Bt=function(e){i.defineBlocks$$module$build$src$core$common(i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let A=0;A<e.length;A++){const o=e[A];if(!o){console.warn(`Block definition #${A} in JSON array is ${o}. Skipping`);continue}const l=o.type;l?t[l]={init:Qt(o)}:console.warn(`Block definition #${A} in JSON array is missing a type attribute. Skipping.`)}return t},i.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const A=e[t];t in Gt&&console.warn(`Block definition "${t}" overwrites previous definition.`),Gt[t]=A}},Nt=function(e,t){We(),ec=setTimeout(function(){t&&t.handleRightClick(e)},Cv)},We=function(){ec&&(clearTimeout(ec),ec=0)},nt=function(){Zl=null},lt=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&ni(e)},Ht=function(e){return`${e.pointerId}`},ni=function(e){const t=Ht(e);return Zl?Zl===t:e.type==="pointerdown"?(Zl=t,!0):!1},j=function(e,t,A,o,l){function u(b){(l||lt(b))&&(A?o.call(A,b):o(b))}const m=[];if(t in bi)for(let b=0;b<bi[t].length;b++){const T=bi[t][b];e.addEventListener(T,u,!1),m.push([e,T,u])}else e.addEventListener(t,u,!1),m.push([e,t,u]);return m},ee=function(e,t,A,o){function l(m){A?o.call(A,m):o(m)}const u=[];if(t in bi)for(let m=0;m<bi[t].length;m++){const b=bi[t][m];e.addEventListener(b,l,!1),u.push([e,b,l])}else e.addEventListener(t,l,!1),u.push([e,t,l]);return u},ue=function(e){const t=e[e.length-1][2];for(;e.length;){const[A,o,l]=e.pop();A.removeEventListener(o,l,!1)}return t},Te=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},Oe=function(e){return e.ctrlKey&&md?!0:e.button===2},St=function(e,t,A){const o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,A||(A=t.getScreenCTM().inverse()),o.matrixTransform(A)},be=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*aB,y:e.deltaY*aB};case 2:return{x:e.deltaX*uB,y:e.deltaY*uB}}},pt=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},jA=function(e){if(Bd)throw Error("CSS already injected");wd+=`
`+e},nu=function(e,t){Bd||(Bd=!0,e&&(e=t.replace(/[\\/]$/,""),t=wd.replace(/<<<PATH>>>/g,e),wd="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},R=function(e,t,A){e=document.createElementNS(Vo,`${e}`);for(const o in t)e.setAttribute(o,`${t[o]}`);return A&&A.appendChild(e),e},q=function(e,t){return t=t.split(" "),t.every(A=>e.classList.contains(A))?!1:(e.classList.add(...t),!0)},rl=function(e,t){e.classList.remove(...t.split(" "))},Fe=function(e,t){return t=t.split(" "),t.every(A=>!e.classList.contains(A))?!1:(e.classList.remove(...t),!0)},Ef=function(e,t){return e.classList.contains(t)},ve=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},li=function(e,t){const A=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");A?t.insertBefore(e,A):t.appendChild(e)},il=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},ci=function(){Cd++,gA||(gA=Object.create(null))},ai=function(){Cd--,Cd||(gA=null)},lu=function(e){const t=e.textContent+`
`+e.className.baseVal;let A;if(gA&&(A=gA[t]))return A;try{A=e.getComputedTextLength()}catch{return 8*e.textContent.length}return gA&&(gA[t]=A),A},Bo=function(e,t,A,o){return sl(e,t+"pt",A,o)},sl=function(e,t,A,o){const l=e.textContent;e=l+`
`+e.className.baseVal;var u;return gA&&(u=gA[e])||(rc||(u=document.createElement("canvas"),u.className="blocklyComputeCanvas",document.body.appendChild(u),rc=u.getContext("2d")),rc.font=A+" "+t+" "+o,u=l?rc.measureText(l).width:0,gA&&(gA[e]=u)),u},ol=function(e,t,A,o){const l=document.createElement("span");l.style.font=A+" "+t+" "+o,l.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.style.display="flex",t.style.position="fixed",t.style.top="0",t.style.left="0",t.appendChild(l),t.appendChild(e),document.body.appendChild(t),A={height:0,baseline:0};try{t.style.alignItems="baseline",A.baseline=e.offsetTop-l.offsetTop,t.style.alignItems="flex-end",A.height=e.offsetTop-l.offsetTop}finally{document.body.removeChild(t)}return A},wo=function(e){return dB.getSizeInternal(e)},yf=function(e){if(TA(e,"display")!=="none")return cu(e);const t=e.style,A=t.display,o=t.visibility,l=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const u=e.offsetWidth;return e=e.offsetHeight,t.display=A,t.position=l,t.visibility=o,new pe(u,e)},cu=function(e){return new pe(e.offsetWidth,e.offsetHeight)},TA=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},Ir=function(e){const t=new N(0,0);e=e.getBoundingClientRect();var A=document.documentElement;return A=new N(window.pageXOffset||A.scrollLeft,window.pageYOffset||A.scrollTop),t.x=e.left+A.x,t.y=e.top+A.y,t},au=function(){const e=document.body,t=document.documentElement;return new N(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},uu=function(e){const t=parseFloat(TA(e,"borderLeftWidth")),A=parseFloat(TA(e,"borderRightWidth")),o=parseFloat(TA(e,"borderTopWidth"));return e=parseFloat(TA(e,"borderBottomWidth")),new ke(o,e,t,A)},nl=function(e,t,A){e=hu(e,t,A),t.scrollLeft=e.x,t.scrollTop=e.y},hu=function(e,t,A){var o=Ir(e),l=Ir(t),u=uu(t);const m=o.x-l.x-u.left;return o=o.y-l.y-u.top,l=cu(e),e=t.clientWidth-l.width,l=t.clientHeight-l.height,u=t.scrollLeft,t=t.scrollTop,A?(u+=m-e/2,t+=o-l/2):(u+=Math.min(m,Math.max(m-e,0)),t+=Math.min(o,Math.max(o-l,0))),new N(u,t)},_o=function(e){const t=new N(0,0);var A=e.x&&e.getAttribute("x");const o=e.y&&e.getAttribute("y");return A&&(t.x=parseInt(A)),o&&(t.y=parseInt(o)),(A=(A=e.getAttribute("transform"))&&A.match(pB))&&(t.x+=Number(A[1]),A[3]&&(t.y+=Number(A[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(gB))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},ll=function(e){let t=0,A=0;for(;e;){const o=_o(e);if(t+=o.x,A+=o.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new N(t,A)},du=function(){const e=au();return new ke(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},pu=function(){const e=document.documentElement,t=window;return new N(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},If=function(e,t){var A=t.x;t=t.y;const o=e.getInjectionDiv().getBoundingClientRect();return A=new N(A-o.left,t-o.top),t=e.getOriginOffsetInPixels(),N.difference(A,t).scale(1/e.scale)},Tf=function(e,t){var A=t.scale(e.scale);t=A.x,A=A.y;const o=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new N(t+o.left+e.x,A+o.top+e.y)},kf=function(e){({document:sc=sc,DOMParser:Ko=Ko,XMLSerializer:Wo=Wo}=e),ic=new Ko,bd=new Wo},i.createElement$$module$build$src$core$utils$xml=function(e){return sc.createElementNS(fB,e)},i.createTextNode$$module$build$src$core$utils$xml=function(e){return sc.createTextNode(e)},i.textToDom$$module$build$src$core$utils$xml=function(e){let t=ic.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=ic.parseFromString(e,"text/html"))&&t.body.firstChild&&t.body.firstChild.nodeName.toLowerCase()==="xml")return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},ji=function(e){return Sf(bd.serializeToString(e))},Sf=function(e){return e.replace(yv,t=>`&#${t.charCodeAt(0)};`)},cl=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=fu(e),e=Rf(e)),Ff(e),e):null},Ff=function(e){const t=e.kind;if(e=e.contents,t&&t!==$B&&t!==vd)throw Error("Invalid toolbox kind "+t+". Please supply either "+$B+" or "+vd);if(!e)throw Error("Toolbox must have a contents attribute.")},Co=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:hl(e):[]},al=function(e){return mB.hasCategoriesInternal(e)},Uf=function(e){if(!e)return!1;const t=e.kind;return t?t===vd:!!e.contents.filter(function(A){return A.kind.toUpperCase()==="CATEGORY"}).length},ul=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},Rf=function(e){const t={contents:hl(e)};return e instanceof Node&&gu(e,t),t},hl=function(e){const t=[];let A=e.childNodes;A||(A=e);for(let o=0,l;l=A[o];o++){if(!l.tagName)continue;e={};const u=l.tagName.toUpperCase();e.kind=u,u==="BLOCK"?e.blockxml=l:l.childNodes&&0<l.childNodes.length&&(e.contents=hl(l)),gu(l,e),t.push(e)}return t},gu=function(e,t){for(let A=0;A<e.attributes.length;A++){const o=e.attributes[A];o.nodeName.includes("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[o.nodeName.replace("css-","")]=o.value):t[o.nodeName]=o.value}},fu=function(e){let t=null;if(e)if(typeof e=="string"){if(t=i.textToDom$$module$build$src$core$utils$xml(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},dl=function(e,t,A,o,l,u){const m=u.scrollbar&&u.scrollbar.canScrollVertically();return e.horizontal===bs.LEFT?(A=l.absoluteMetrics.left+A,m&&u.RTL&&(A+=Ye.scrollbarThickness)):(A=l.absoluteMetrics.left+l.viewMetrics.width-t.width-A,m&&!u.RTL&&(A-=Ye.scrollbarThickness)),e.vertical===ar.TOP?e=l.absoluteMetrics.top+o:(e=l.absoluteMetrics.top+l.viewMetrics.height-t.height-o,u.scrollbar&&u.scrollbar.canScrollHorizontally()&&(e-=Ye.scrollbarThickness)),new ke(e,e+t.height,A,A+t.width)},pl=function(e,t){return{horizontal:t.toolboxMetrics.position===se.LEFT||e.horizontalLayout&&!e.RTL?bs.RIGHT:bs.LEFT,vertical:t.toolboxMetrics.position===se.BOTTOM?ar.TOP:ar.BOTTOM}},gl=function(e,t,A,o){const l=e.left,u=e.right-e.left,m=e.bottom-e.top;for(let b=0;b<o.length;b++){const T=o[b];e.intersects(T)&&(e=A===Lr.UP?T.top-m-t:T.bottom+t,e=new ke(e,e+m,l,l+u),b=-1)}return e},bo=function(e,t){wB(e,t)},Df=function(e){wB=e},fl=function(e,t){bB.confirmInternal(e,t)},xf=function(e,t){_B(e,t)},Of=function(e){_B=e},$l=function(e,t,A){CB(e,t,A)},Lf=function(e){CB=e},$u=function(e){return e.getVariableModel!==void 0},qi=function(e){return e.getProcedureDef!==void 0},Qf=function(e){return e.getProcedureCall!==void 0&&e.renameProcedure!==void 0},i.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let A=0;A<e.length;A++){const o=e[A].getVarModels();if(o)for(let l=0;l<o.length;l++){const u=o[l];u.getId()&&t.add(u)}}return Array.from(t.values())},i.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let o=0,l;l=e[o];o++){var A=l.getDeveloperVariables;if(A){A=A();for(let u=0;u<A.length;u++)t.add(A[u])}}return Array.from(t.values())},ml=function(e){let t=[];const A=document.createElement("button");return A.setAttribute("text","%{BKY_NEW_VARIABLE}"),A.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(o){Zi(o.getTargetWorkspace())}),t.push(A),e=mu(e),t=t.concat(e)},mu=function(e){e=e.getVariablesOfType("");const t=[];if(0<e.length){var A=e[e.length-1];if(Gt.variables_set){var o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set"),o.setAttribute("gap",Gt.math_change?"8":"24"),o.appendChild(ui(A)),t.push(o)}if(Gt.math_change&&(o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","math_change"),o.setAttribute("gap",Gt.variables_get?"20":"8"),o.appendChild(ui(A)),A=i.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),o.appendChild(A),t.push(o)),Gt.variables_get){e.sort(Yo.compareByName);for(let l=0,u;u=e[l];l++)A=i.createElement$$module$build$src$core$utils$xml("block"),A.setAttribute("type","variables_get"),A.setAttribute("gap","8"),A.appendChild(ui(u)),t.push(A)}}return t},Bu=function(e){return EB.generateUniqueNameInternal(e)},Mf=function(e){return Bl(Td.charAt(0),e.getAllVariableNames())},Bl=function(e,t){if(!t.length)return e;const A=Td;let o="",l=A.indexOf(e);for(;;){let u=!1;for(let m=0;m<t.length;m++)if(t[m].toLowerCase()===e){u=!0;break}if(!u)break;l++,l===A.length&&(l=0,o=`${Number(o)+1}`),e=A.charAt(l)+o}return e},Zi=function(e,t,A){function o(u){wl(i.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,u,function(m){if(m){var b=wu(m,e);if(b){if(b.type===l)var T=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",b.name);else T=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,T=T.replace("%1",b.name).replace("%2",b.type);bo(T,function(){o(m)})}else e.createVariable(m,l),t&&t(m)}else t&&t(null)})}const l=A||"";o("")},i.renameVariable$$module$build$src$core$variables=function(e,t,A){function o(l){const u=i.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.name);wl(u,l,function(m){if(m){var b=Nf(m,t.type,e),T=_u(t.name,m,e);if(b||T){var V="";b?V=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",b.name).replace("%2",b.type):T&&(V=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",m).replace("%2",T)),bo(V,function(){o(m)})}else e.renameVariableById(t.getId(),m),A&&A(m)}else A&&A(null)})}o("")},wl=function(e,t,A){$l(e,t,function(o){o&&(o=o.replace(/[\s\xa0]+/g," ").trim(),o===i.Msg$$module$build$src$core$msg.RENAME_VARIABLE||o===i.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(o=null),A(o)})},Nf=function(e,t,A){A=A.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let o=0,l;l=A[o];o++)if(l.name.toLowerCase()===e&&l.type!==t)return l;return null},wu=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let A=0,o;o=t[A];A++)if(o.name.toLowerCase()===e)return o;return null},_u=function(e,t,A){return A.getProcedureMap().getProcedures().length?Hf(e,t,A):Pf(e,t,A)},Hf=function(e,t,A){e=e.toLowerCase(),t=t.toLowerCase(),A=A.getProcedureMap().getProcedures();for(const l of A){var o=l.getParameters().filter($u).map(u=>u.getVariableModel().name);if(o&&(A=o.some(u=>u.toLowerCase()===e),o=o.some(u=>u.toLowerCase()===t),A&&o))return l.getName()}return null},Pf=function(e,t,A){e=e.toLowerCase(),t=t.toLowerCase(),A=A.getAllBlocks(!1);for(const l of A){if(!qi(l))continue;A=l.getProcedureDef();var o=A[1];const u=o.some(m=>m.toLowerCase()===e);if(o=o.some(m=>m.toLowerCase()===t),u&&o)return A[0]}return null},ui=function(e){const t=i.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=i.createTextNode$$module$build$src$core$utils$xml(e.name),t.appendChild(e),t},i.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,A,o){let l=i.getVariable$$module$build$src$core$variables(e,t,A,o);return l||(l=Gf(e,t,A,o)),l},i.getVariable$$module$build$src$core$variables=function(e,t,A,o){const l=e.getPotentialVariableMap();let u=null;if(t&&(u=e.getVariableById(t),!u&&l&&(u=l.getVariableById(t)),u))return u;if(A){if(o===void 0)throw Error("Tried to look up a variable by name without a type");u=e.getVariable(A,o),!u&&l&&(u=l.getVariable(A,o))}return u},Gf=function(e,t,A,o){const l=e.getPotentialVariableMap();return A||(A=Bu(e.isFlyout?e.targetWorkspace:e)),l?l.createVariable(A,o,t):e.createVariable(A,o,t)},vo=function(e,t){e=e.getAllVariables();const A=[];if(t.length!==e.length)for(let o=0;o<e.length;o++){const l=e[o];t.includes(l)||A.push(l)}return A},Cu=function(e){return bu(e),Vf()?(_l(),Promise.resolve()):(vs||(vs=new Promise(t=>{Fd=t,yB=window.requestAnimationFrame(()=>{_l(),t()})})),vs)},kA=function(){return vs||Promise.resolve()},qA=function(e){e||window.cancelAnimationFrame(yB),_l(e),!e&&Fd&&Fd()},Vf=function(){return oB},bu=function(e){kd.add(e),Sd.set(e,i.getGroup$$module$build$src$core$events$utils());const t=e.getParent();t?bu(t):nc.add(e)},_l=function(e){const t=e?new Set([e]):new Set([...nc].map(u=>u.workspace)),A=[...nc].filter(Kf).filter(u=>t.has(u.workspace));for(var o of A)Eu(o);for(const u of t)u.resizeContents();for(var l of A)o=l.getRelativeToSurfaceXY(),l.updateComponentLocations(o);for(const u of A)l=i.getGroup$$module$build$src$core$events$utils(),(o=Sd.get(u))&&i.setGroup$$module$build$src$core$events$utils(o),u.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(l);for(const u of A)vu(u);e||(vs=null)},vu=function(e){nc.delete(e),kd.delete(e),Sd.delete(e);for(const t of e.getChildren(!1))vu(t)},Kf=function(e){return!e.isDisposed()&&!e.getParent()},Eu=function(e){if(kd.has(e)&&e.initialized){for(const t of e.getChildren(!1))Eu(t);e.renderEfficiently()}},Eo=function(e,t){n(M.SERIALIZER,e,t)},Wf=function(e){a(M.SERIALIZER,e)},es=function(e,{addCoordinates:t=!1,saveIds:A=!0}={}){const o=e.workspace,l=Object.create(null);return l.height=e.getSize().height,l.width=e.getSize().width,A&&(l.id=e.id),t&&(t=e.getRelativeToSurfaceXY(),l.x=o.RTL?o.getWidth()-t.x:t.x,l.y=t.y),e.getText()&&(l.text=e.getText()),e.isCollapsed()&&(l.collapsed=!0),e.isOwnEditable()||(l.editable=!1),e.isOwnMovable()||(l.movable=!1),e.isOwnDeletable()||(l.deletable=!1),l},yo=function(e,t,{recordUndo:A=!1}={}){const o=v();if(i.setRecordUndo$$module$build$src$core$events$utils(A),A=t.newComment(e.id),e.text!==void 0&&A.setText(e.text),e.x!==void 0||e.y!==void 0){const u=A.getRelativeToSurfaceXY();let m,b=(m=e.x)!=null?m:u.x;b=t.RTL?t.getWidth()-b:b;var l;t=(l=e.y)!=null?l:u.y,A.moveTo(new N(b,t))}if(e.width!==void 0||e.height){l=A.getSize();let u,m;A.setSize(new pe((u=e.width)!=null?u:l.width,(m=e.height)!=null?m:l.height))}return e.collapsed!==void 0&&A.setCollapsed(e.collapsed),e.editable!==void 0&&A.setEditable(e.editable),e.movable!==void 0&&A.setMovable(e.movable),e.deletable!==void 0&&A.setDeletable(e.deletable),i.setRecordUndo$$module$build$src$core$events$utils(o),A},Cl=function(e,t){n(M.PASTER,e,t)},zf=function(e){a(M.PASTER,e)},Xf=function(e){const t=e.workspace,A=e.getRelativeToSurfaceXY(),o=new N(0,0),l=t.getTopComments(!1).filter(u=>u.id!==e.id).map(u=>u.getRelativeToSurfaceXY());for(;Yf(N.sum(A,o),l);)o.translate(t.RTL?-30:30,30);e.moveTo(N.sum(A,o))},Yf=function(e,t){return t.some(A=>1>=Math.abs(A.x-e.x)&&1>=Math.abs(A.y-e.y))},Tr=function(e,t){e.setAttribute(Sv,t)},gt=function(e,t,A){Array.isArray(A)&&(A=A.join(" ")),e.setAttribute(kv+t,`${A}`)},Io=function(e){return e.saveState!==void 0&&e.loadState!==void 0},zt=function(e,{addCoordinates:t=!1,addInputBlocks:A=!0,addNextBlocks:o=!0,doFullSerialization:l=!0,saveIds:u=!0}={}){if(e.isInsertionMarker())return null;const m={type:e.type,id:u?e.id:void 0};return t&&jf(e,m),Jf(e,m),qf(e,m,l),Zf(e,m,l),e$(e,m,l),A&&t$(e,m,l,u),o&&A$(e,m,l,u),m},Jf=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},jf=function(e,t){const A=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(A.RTL?A.getWidth()-e.x:e.x),t.y=Math.round(e.y)},qf=function(e,t,A){e.saveExtraState?(e=e.saveExtraState(A),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=FA(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Zf=function(e,t,A){const o=Object.create(null);for(const l of e.getIcons())Io(l)&&(e=l.saveState(A))&&(o[l.getType().toString()]=e);Object.keys(o).length&&(t.icons=o)},e$=function(e,t,A){const o=Object.create(null);for(let l=0;l<e.inputList.length;l++){const u=e.inputList[l];for(let m=0;m<u.fieldRow.length;m++){const b=u.fieldRow[m];b.isSerializable()&&(o[b.name]=b.saveState(A))}}Object.keys(o).length&&(t.fields=o)},t$=function(e,t,A,o){const l=Object.create(null);for(let u=0;u<e.inputList.length;u++){const m=e.inputList[u];if(!m.connection)continue;const b=yu(m.connection,A,o);b&&(l[m.name]=b)}Object.keys(l).length&&(t.inputs=l)},A$=function(e,t,A,o){e.nextConnection&&(e=yu(e.nextConnection,A,o))&&(t.next=e)},yu=function(e,t,A){const o=e.getShadowState(!0);if(e=e.targetBlock(),!o&&!e)return null;const l=Object.create(null);return o&&(l.shadow=o),e&&!e.isShadow()&&(l.block=zt(e,{doFullSerialization:t,saveIds:A})),l},ZA=function(e,t,{recordUndo:A=!1}={}){return e=ts(e,t,{recordUndo:A}),t.rendered&&qA(),e},ts=function(e,t,{parentConnection:A,isShadow:o=!1,recordUndo:l=!1}={}){const u=v();i.setRecordUndo$$module$build$src$core$events$utils(l),(l=i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),i.disable$$module$build$src$core$events$utils();const m=t.getAllVariables();let b;try{b=Iu(e,t,{parentConnection:A,isShadow:o})}finally{i.enable$$module$build$src$core$events$utils()}if(r$(t,m),x()&&_(new(L(i.CREATE$$module$build$src$core$events$utils))(b)),i.setGroup$$module$build$src$core$events$utils(l),i.setRecordUndo$$module$build$src$core$events$utils(u),t.rendered){const T=b;setTimeout(()=>{T.disposed||T.setConnectionTracking(!0)},1)}return b},Iu=function(e,t,{parentConnection:A,isShadow:o=!1}={}){if(!e.type)throw new DB(e);const l=t.newBlock(e.type,e.id);return l.setShadow(o),i$(l,e),s$(l,e),o$(l,e),n$(A,l,e),l$(l,e),c$(l,e),a$(l,e),u$(l,e),h$(l,t.rendered),l},r$=function(e,t){if(x())for(e=vo(e,t),t=0;t<e.length;t++){const A=e[t];_(new(L(rr))(A))}},i$=function(e,t){let A=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const o=e.workspace;A=o.RTL?o.getWidth()-A:A,e.moveBy(A,t)},s$=function(e,t){if(t.collapsed&&e.setCollapsed(!0),t.deletable===!1&&e.setDeletable(!1),t.movable===!1&&e.setMovable(!1),t.editable===!1&&e.setEditable(!1),t.enabled===!1&&e.setDisabledReason(!0,tA),Array.isArray(t.disabledReasons))for(const A of t.disabledReasons)e.setDisabledReason(!0,A);t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},o$=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(i.textToDom$$module$build$src$core$utils$xml(t.extraState)))},n$=function(e,t,A){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new OB(A);if(e.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var o=t.outputConnection;if(!o)throw new jo("output",t,A)}else if(o=t.previousConnection,!o)throw new jo("previous",t,A);if(!e.connect(o)){const l=t.workspace.connectionChecker;throw new xB(l.getErrorMessage(l.canConnectWithReason(o,e,!1),o,e),e.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,A)}}},l$=function(e,t){if(t.icons){var A=Object.keys(t.icons);for(const l of A){A=t.icons[l];var o=e.getIcon(l);if(!o){if(o=d(M.ICON,l,!1),!o)throw new LB(l,e,t);o=new o(e),e.addIcon(o)}Io(o)&&o.loadState(A)}}},c$=function(e,t){if(t.fields){var A=Object.keys(t.fields);for(let o=0;o<A.length;o++){const l=A[o],u=t.fields[l],m=e.getField(l);m?m.loadState(u):console.warn(`Ignoring non-existant field ${l} in block ${e.type}`)}}},a$=function(e,t){if(t.inputs){var A=Object.keys(t.inputs);for(let o=0;o<A.length;o++){const l=A[o],u=e.getInput(l);if(!u||!u.connection)throw new jo(l,e,t);Tu(u.connection,t.inputs[l])}}},u$=function(e,t){if(t.next){if(!e.nextConnection)throw new jo("next",e,t);Tu(e.nextConnection,t.next)}},Tu=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&Iu(t.block,e.getSourceBlock().workspace,{parentConnection:e})},h$=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const A of e.getIcons())A.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},As=function(e){return e.bubbleIsVisible!==void 0&&e.setBubbleVisible!==void 0},bl=function(e){return e*Math.PI/180},d$=function(e){return 180*e/Math.PI},rs=function(e,t,A){if(A<e){const o=A;A=e,e=o}return Math.max(e,Math.min(t,A))},ku=function(){document.querySelector(".blocklyDropDownDiv")||(Be=document.createElement("div"),Be.className="blocklyDropDownDiv",(Ne()||document.body).appendChild(Be),ks=document.createElement("div"),ks.className="blocklyDropDownContent",Be.appendChild(ks),Ui=document.createElement("div"),Ui.className="blocklyDropDownArrow",Be.appendChild(Ui),Be.style.opacity="0",Be.style.transition="transform "+dc+"s, opacity "+dc+"s",Be.addEventListener("focusin",function(){q(Be,"blocklyFocused")}),Be.addEventListener("focusout",function(){Fe(Be,"blocklyFocused")}))},Su=function(e){Hd=e},Fu=function(){return Qr},vl=function(){return ks},El=function(){ks.textContent="",ks.style.width=""},Uu=function(e,t){Be.style.backgroundColor=e,Be.style.borderColor=t},p$=function(e,t,A,o){return Ou(Du(t),e,A,o)},Ru=function(e,t,A){return NB=!0,Ou(xu(e),e,t,A)},Du=function(e){var t=e.getSvgRoot();const A=e.workspace.scale,o=e.height*A;return e=e.width*A,t=Ir(t),new ke(t.y,t.y+o,t.x,t.x+e)},xu=function(e){return e=e.getScaledBBox(),new ke(e.top,e.bottom,e.left,e.right)},Ou=function(e,t,A,o){const l=e.left+(e.right-e.left)/2,u=e.bottom;e=e.top,o&&(e+=o),o=t.getSourceBlock();let m=o.workspace;for(;m.options.parentWorkspace;)m=m.options.parentWorkspace;return Su(m.getParentSvg().parentNode),Lu(t,o.RTL,l,u,l,e,A)},Lu=function(e,t,A,o,l,u,m){return Qr=e,Fi=m||null,Be.style.direction=t?"rtl":"ltr",e=re(),Is=e.getRenderer().getClassName(),Ts=e.getTheme().getClassName(),Is&&q(Be,Is),Ts&&q(Be,Ts),Hu(A,o,l,u)},Qu=function(e,t,A,o){return e=To(e,A.left,A.right,o.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+Md,arrowX:e.arrowX,arrowY:-(Zo/2+Qd),arrowAtTop:!0,arrowVisible:!0}},Mu=function(e,t,A,o){return e=To(e,A.left,A.right,o.width),{initialX:e.divX,initialY:t-o.height,finalX:e.divX,finalY:t-o.height-Md,arrowX:e.arrowX,arrowY:o.height-2*Qd-Zo/2,arrowAtTop:!1,arrowVisible:!0}},g$=function(e,t,A){return e=To(e,t.left,t.right,A.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},To=function(e,t,A,o){return t=rs(t,e-o/2,A-o),e=e-Zo/2-t,A=MB,e=rs(A,e,o-A-Zo),{arrowX:e,divX:t}},Nu=function(){return!!Qr},yl=function(e,t){return Qr===e?(t?SA():Il(),!0):!1},Il=function(){Be.style.transform="translate(0, 0)",Be.style.opacity="0",Nd=setTimeout(function(){SA()},1e3*dc),Fi&&(Fi(),Fi=null)},SA=function(){Nu()&&(Nd&&clearTimeout(Nd),Be.style.transform="",Be.style.left="",Be.style.top="",Be.style.opacity="0",Be.style.display="none",Be.style.backgroundColor="",Be.style.borderColor="",Fi&&(Fi(),Fi=null),El(),Qr=null,Is&&(Fe(Be,Is),Is=""),Ts&&(Fe(Be,Ts),Ts=""),re().markFocused())},Hu=function(e,t,A,o){e=Pd.getPositionMetrics(e,t,A,o),e.arrowVisible?(Ui.style.display="",Ui.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",Ui.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Ui.style.display="none",t=Math.floor(e.initialX),A=Math.floor(e.initialY),o=Math.floor(e.finalX);const l=Math.floor(e.finalY);return Be.style.left=t+"px",Be.style.top=A+"px",Be.style.display="block",Be.style.opacity="1",Be.style.transform="translate("+(o-t)+"px,"+(l-A)+"px)",!!e.arrowAtTop},Pu=function(){if(Qr){var e=Qr.getSourceBlock();e=NB?xu(Qr):Du(e);const t=e.left+(e.right-e.left)/2;Hu(t,e.bottom,t,e.top)}else Il()},ko=function(e){return e.length?e.reduce(function(t,A){return t.length<A.length?t:A}).length:0},Gu=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let A=0;t=t||ko(e);let o;for(o=0;o<t;o++){for(var l=e[0][o],u=1;u<e.length;u++)if(l!==e[u][o])return A;l===" "&&(A=o+1)}for(l=1;l<e.length;l++)if((u=e[l][o])&&u!==" ")return A;return t},Vu=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let A=0;t=t||ko(e);let o;for(o=0;o<t;o++){for(var l=e[0].substr(-o-1,1),u=1;u<e.length;u++)if(l!==e[u].substr(-o-1,1))return A;l===" "&&(A=o+1)}for(l=1;l<e.length;l++)if((u=e[l].charAt(e[l].length-o-1))&&u!==" ")return A;return t},i.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split(`
`);for(let A=0;A<e.length;A++)e[A]=f$(e[A],t);return e.join(`
`)},f$=function(e,t){if(e.length<=t)return e;const A=e.trim().split(/\s+/);for(var o=0;o<A.length;o++)A[o].length>t&&(t=A[o].length);var l=-1/0;let u,m=1;do{o=l,u=e,e=[],l=A.length/m;let b=1;for(let T=0;T<A.length-1;T++)b<(T+1.5)/l?(b++,e[T]=!0):e[T]=!1;e=Ku(A,e,t),l=Tl(A,e,t),e=$$(A,e),m++}while(l>o);return u},Tl=function(e,t,A){const o=[0],l=[];for(var u=0;u<e.length;u++)o[o.length-1]+=e[u].length,t[u]===!0?(o.push(0),l.push(e[u].charAt(e[u].length-1))):t[u]===!1&&o[o.length-1]++;for(e=Math.max(...o),t=0,u=0;u<o.length;u++)t-=2*Math.pow(Math.abs(A-o[u]),1.5),t-=Math.pow(e-o[u],1.5),".?!".includes(l[u])?t+=A/3:",;)]}".includes(l[u])&&(t+=A/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(t+=.5),t},Ku=function(e,t,A){let o=Tl(e,t,A),l;for(let u=0;u<t.length-1;u++){if(t[u]===t[u+1])continue;const m=[].concat(t);m[u]=!m[u],m[u+1]=!m[u+1];const b=Tl(e,m,A);b>o&&(o=b,l=m)}return l?Ku(e,l,A):t},$$=function(e,t){const A=[];for(let o=0;o<e.length;o++)A.push(e[o]),t[o]!==void 0&&A.push(t[o]?`
`:" ");return A.join("")},i.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},m$=function(e){pc=e},B$=function(){return pc},w$=function(){return tn},_$=function(){return At},is=function(e){if(e=Wu(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},Wu=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},zu=function(){document.querySelector(".blocklyTooltipDiv")||(At=document.createElement("div"),At.className="blocklyTooltipDiv",(Ne()||document.body).appendChild(At))},ss=function(e){e.mouseOverWrapper_=ee(e,"pointerover",null,C$),e.mouseOutWrapper_=ee(e,"pointerout",null,b$),e.addEventListener("pointermove",Xu,!1)},kl=function(e){e&&(ue(e.mouseOverWrapper_),ue(e.mouseOutWrapper_),e.removeEventListener("pointermove",Xu))},C$=function(e){Fs||(e=Wu(e.currentTarget),AA!==e&&(er(),An=null,AA=e),clearTimeout(PB))},b$=function(e){Fs||(PB=setTimeout(function(){An=AA=null,er()},1),clearTimeout(Ri),Ri=0)},Xu=function(e){if(AA&&AA.tooltip&&!Fs)if(tn){const t=Gd-e.pageX;e=Vd-e.pageY,Math.sqrt(t*t+e*e)>GB&&er()}else An!==AA&&(clearTimeout(Ri),Gd=e.pageX,Vd=e.pageY,Ri=setTimeout(I$,VB))},Yu=function(){An=AA=null,er()},er=function(){tn&&(tn=!1,At&&(At.style.display="none")),Ri&&(clearTimeout(Ri),Ri=0)},Ju=function(){er(),Fs=!0},ju=function(){Fs=!1},v$=function(){At&&AA&&(typeof pc=="function"?pc(At,AA):E$())},E$=function(){var e=is(AA);e=i.wrap$$module$build$src$core$utils$string(e,HB),e=e.split(`
`);for(let t=0;t<e.length;t++){const A=document.createElement("div");A.appendChild(document.createTextNode(e[t])),At.appendChild(A)}},y$=function(e){const t=document.documentElement.clientWidth,A=document.documentElement.clientHeight;let o=Gd;o=e?o-(Kd+At.offsetWidth):o+Kd;let l=Vd+Wd;return l+At.offsetHeight>A+window.scrollY&&(l-=At.offsetHeight+2*Wd),e?o=Math.max(gc-window.scrollX,o):o+At.offsetWidth>t+window.scrollX-2*gc&&(o=t-At.offsetWidth-2*gc),{x:o,y:l}},I$=function(){if(!Fs&&(An=AA,At)){At.textContent="",v$();var e=AA.RTL;At.style.direction=e?"rtl":"ltr",At.style.display="block",tn=!0;var{x:t,y:A}=y$(e);At.style.left=t+"px",At.style.top=A+"px"}},qu=function(){return zd},T$=function(e){zd=e},Zu=function(){return Xd},k$=function(e){Xd=e},hi=function(e){e=`${e}`.toLowerCase().trim();var t=KB[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var A=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return A&&(e=Number(A[1]),t=Number(A[2]),A=Number(A[3]),0<=e&&256>e&&0<=t&&256>t&&0<=A&&256>A)?So(e,t,A):null},So=function(e,t,A){return t=e<<16|t<<8|A,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},Sl=function(e){return e=hi(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},Fl=function(e,t,A){let o=0,l=0,u=0;if(t===0)u=l=o=A;else{const m=Math.floor(e/60),b=e/60-m;e=A*(1-t);const T=A*(1-t*b);switch(t=A*(1-t*(1-b)),m){case 1:o=T,l=A,u=e;break;case 2:o=e,l=A,u=t;break;case 3:o=e,l=T,u=A;break;case 4:o=t,l=e,u=A;break;case 5:o=A,l=e,u=T;break;case 6:case 0:o=A,l=t,u=e}}return So(Math.floor(o),Math.floor(l),Math.floor(u))},di=function(e,t,A){return e=hi(e),!e||(t=hi(t),!t)?null:(e=Sl(e),t=Sl(t),So(Math.round(t[0]+A*(e[0]-t[0])),Math.round(t[1]+A*(e[1]-t[1])),Math.round(t[2]+A*(e[2]-t[2]))))},eh=function(e){return Fl(e,zd,255*Xd)},Ul=function(e,t,A){const o=[];var l=e.split("");l.push("");var u=0;e=[];let m=null;for(let V=0;V<l.length;V++){var b=l[V];if(u===0)if(b==="%")(u=e.join(""))&&o.push(u),e.length=0,u=1;else if(A&&b===`
`){const De=e.join("");De&&o.push(De),e.length=0,o.push(b)}else e.push(b);else if(u===1)b==="%"?(e.push(b),u=0):t&&"0"<=b&&"9">=b?(u=2,m=b,(b=e.join(""))&&o.push(b),e.length=0):b==="{"?u=3:(e.push("%",b),u=0);else if(u===2)if("0"<=b&&"9">=b)m+=b;else{var T=void 0;o.push(parseInt((T=m)!=null?T:"",10)),V--,u=0}else u===3&&(b===""?(e.splice(0,0,"%{"),V--,u=0):b!=="}"?e.push(b):(u=e.join(""),/[A-Z]\w*/i.test(u)?(b=u.toUpperCase(),(b=b.startsWith("BKY_")?b.substring(4):null)&&b in i.Msg$$module$build$src$core$msg?(u=i.Msg$$module$build$src$core$msg[b],typeof u=="string"?Array.prototype.push.apply(o,Ul(u,t,A)):t?o.push(`${u}`):o.push(u)):o.push("%{"+u+"}")):o.push("%{"+u+"}"),u=e.length=0))}for((t=e.join(""))&&o.push(t),T=[],e.length=0,l=0;l<o.length;l++)typeof o[l]!="string"||A&&o[l]===`
`?((t=e.join(""))&&T.push(t),e.length=0,T.push(o[l])):e.push(o[l]);return(t=e.join(""))&&T.push(t),e.length=0,T},th=function(e){return Ul(e,!0,!0)},ze=function(e){return typeof e!="string"?e:(e=Ul(e,!1,!1),e.length?String(e[0]):"")},S$=function(e){let t=!0;const A=i.Msg$$module$build$src$core$msg,o=e.match(/%{BKY_[A-Z]\w*}/gi);if(o)for(let l=0;l<o.length;l++){const u=o[l].toUpperCase();A[u.slice(6,-1)]===void 0&&(console.warn("No message string for "+o[l]+" in "+e),t=!1)}return t},os=function(e){const t=typeof e=="string"?ze(e):e;var A=Number(t);if(!isNaN(A)&&0<=A&&360>=A)return{hue:A,hex:Fl(A,qu(),255*Zu())};if(A=hi(t))return{hue:null,hex:A};throw A='Invalid colour: "'+t+'"',e!==t&&(A+=' (from "'+e+'")'),Error(A)},ns=function(){return $A},F$=function(e){if($A=e,e===null){let t;(t=document.querySelector("."+$c))==null||t.remove()}},Ah=function(){const e=Ne()||document.body;document.querySelector("."+$c)?$A=document.querySelector("."+$c):($A=document.createElement("div"),$A.className=$c),e.appendChild($A)},Rl=function(e,t,A,o){if(ls(),Us=e,fc=A,A=$A){if(A.style.direction=t?"rtl":"ltr",A.style.display="block",!o&&e instanceof Se){let m;o=(m=e.getSourceBlock())==null?void 0:m.workspace}var l;Yd=(l=o)!=null?l:null;var u;e=(u=o)!=null?u:re(),Rs=e.getRenderer().getClassName(),Ds=e.getTheme().getClassName(),Rs&&q(A,Rs),Ds&&q(A,Ds)}},ls=function(){if(rh()){Us=null;var e=$A;e&&(e.style.display="none",e.style.left="",e.style.top="",fc&&fc(),fc=null,e.textContent="",Rs&&(Fe(e,Rs),Rs=""),Ds&&(Fe(e,Ds),Ds=""),re().markFocused())}},rh=function(){return!!Us},pi=function(e){Us===e&&ls()},Fo=function(e){Yd!==null&&Yd!==e||ls()},ih=function(e,t,A){$A.style.left=e+"px",$A.style.top=t+"px",$A.style.height=A+"px"},sh=function(e,t,A,o){const l=R$(e,t,A);e=U$(e,t,A,o),0>l?ih(e,0,A.height+l):ih(e,l,A.height)},U$=function(e,t,A,o){return o?Math.min(Math.max(t.right-A.width,e.left),e.right-A.width):Math.max(Math.min(t.left,e.right-A.width),e.left)},R$=function(e,t,A){return t.bottom+A.height>=e.bottom?t.top-A.height:t.bottom},D$=function(e){return!(e==null||!e.repositionForWindowResize)},oh=function(){D$(Us)&&Us.repositionForWindowResize()||ls()},x$=function(){return mc},nh=function(e){mc=e},Uo=function(e,t,A,o){if(Rl(WB,A,lh,o),t.length){var l=O$(t,A,e);Bc=l,L$(l,e,A),setTimeout(function(){l.focus()},1),mc=null}else Ro()},O$=function(e,t,A){const o=new Od;o.setRole(fA.MENU);for(let l=0;l<e.length;l++){const u=e[l],m=new Ld(u.text);m.setRightToLeft(t),m.setRole(fA.MENUITEM),o.addChild(m),m.setEnabled(u.enabled),u.enabled&&m.onAction(function(){Ro(),requestAnimationFrame(()=>{setTimeout(()=>{u.callback(u.scope,A)},0)})},{})}return o},L$=function(e,t,A){const o=du();t=new ke(t.clientY+o.top,t.clientY+o.top,t.clientX+o.left,t.clientX+o.left),Q$(e);const l=e.getSize();A&&(t.left+=l.width,t.right+=l.width,o.left+=l.width,o.right+=l.width),sh(o,t,l,A),e.focus()},Q$=function(e){var t=ns();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),q(t,"blocklyContextMenu"),j(t,"contextmenu",null,M$),e.focus()},M$=function(e){e.preventDefault(),e.stopPropagation()},Ro=function(){pi(WB),mc=null},lh=function(){Bc&&(Bc.dispose(),Bc=null)},i.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{i.disable$$module$build$src$core$events$utils();let A;try{A=t instanceof Element?gi(t,e.workspace):ts(t,e.workspace);const o=e.getRelativeToSurfaceXY();o.x=e.RTL?o.x-i.config$$module$build$src$core$config.snapRadius:o.x+i.config$$module$build$src$core$config.snapRadius,o.y+=2*i.config$$module$build$src$core$config.snapRadius,A.moveBy(o.x,o.y)}finally{i.enable$$module$build$src$core$events$utils()}return x()&&!A.isShadow()&&_(new(L(i.CREATE$$module$build$src$core$events$utils))(A)),i.setSelected$$module$build$src$core$common(A),A}},N$=function(e,t=!1){const A=i.createElement$$module$build$src$core$utils$xml("xml");var o=ch(i.allUsedVarModels$$module$build$src$core$variables(e));o.hasChildNodes()&&A.appendChild(o);for(const l of e.getTopComments())A.appendChild(Do(l,t));for(e=e.getTopBlocks(!0),o=0;o<e.length;o++)A.appendChild(xo(e[o],t));return A},Do=function(e,t=!1){const A=i.createElement$$module$build$src$core$utils$xml("comment");t||A.setAttribute("id",e.id),t=e.workspace;const o=e.getRelativeToSurfaceXY();return o.x=t.RTL?t.getWidth()-o.x:o.x,A.setAttribute("x",`${o.x}`),A.setAttribute("y",`${o.y}`),A.setAttribute("w",`${e.getSize().width}`),A.setAttribute("h",`${e.getSize().height}`),e.getText()&&(A.textContent=e.getText()),e.isCollapsed()&&A.setAttribute("collapsed","true"),e.isOwnEditable()||A.setAttribute("editable","false"),e.isOwnMovable()||A.setAttribute("movable","false"),e.isOwnDeletable()||A.setAttribute("deletable","false"),A},ch=function(e){const t=i.createElement$$module$build$src$core$utils$xml("variables");for(let A=0;A<e.length;A++){const o=e[A],l=i.createElement$$module$build$src$core$utils$xml("variable");l.appendChild(i.createTextNode$$module$build$src$core$utils$xml(o.name)),o.type&&l.setAttribute("type",o.type),l.id=o.getId(),t.appendChild(l)}return t},xo=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let A=0;if(e.workspace.RTL&&(A=e.workspace.getWidth()),t=kr(e,t),ph(t)){const o=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?A-o.x:o.x))),t.setAttribute("y",String(Math.round(o.y)))}return t},H$=function(e){if(e.isSerializable()){const t=i.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},P$=function(e,t){for(let A=0;A<e.inputList.length;A++){const o=e.inputList[A];for(let l=0;l<o.fieldRow.length;l++){const u=H$(o.fieldRow[l]);u&&t.appendChild(u)}}},kr=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?kr(t):new DocumentFragment;const A=i.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(A.setAttribute("type",e.type),t||(A.id=e.id),e.mutationToDom){var o=e.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&A.appendChild(o)}if(P$(e,A),o=e.getCommentText()){var l=e.getIcon(tt.COMMENT),u=l.getBubbleSize();l=l.bubbleIsVisible();var m=i.createElement$$module$build$src$core$utils$xml("comment");m.appendChild(i.createTextNode$$module$build$src$core$utils$xml(o)),m.setAttribute("pinned",`${l}`),m.setAttribute("h",String(u.height)),m.setAttribute("w",String(u.width)),A.appendChild(m)}for(e.data&&(o=i.createElement$$module$build$src$core$utils$xml("data"),o.appendChild(i.createTextNode$$module$build$src$core$utils$xml(e.data)),A.appendChild(o)),o=0;o<e.inputList.length;o++){u=e.inputList[o];var b=void 0;if(l=!0,u.type!==i.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&u.type!==i.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){m=u.connection.targetBlock(),u.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE?b=i.createElement$$module$build$src$core$utils$xml("value"):u.type===i.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(b=i.createElement$$module$build$src$core$utils$xml("statement"));const V=u.connection.getShadowDom();!V||m&&m.isShadow()||b.appendChild(ah(V,t)),m&&(m=kr(m,t),m.nodeType===cr.ELEMENT_NODE&&(b.appendChild(m),l=!1)),b.setAttribute("name",u.name),l||A.appendChild(b)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&A.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&A.setAttribute("collapsed","true"),e.isEnabled()||A.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||A.setAttribute("deletable","false"),e.isOwnMovable()||A.setAttribute("movable","false"),e.isOwnEditable()||A.setAttribute("editable","false"),b=e.getNextBlock();let T;return b&&(o=kr(b,t),o.nodeType===cr.ELEMENT_NODE&&(T=i.createElement$$module$build$src$core$utils$xml("next"),T.appendChild(o),A.appendChild(T))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||b&&b.isShadow()||T.appendChild(ah(e,t)),A},ah=function(e,t){let A=e=e.cloneNode(!0),o;for(;A;)if(t&&A.nodeName==="shadow"&&A.removeAttribute("id"),A.firstChild)A=A.firstChild;else{for(;A&&!A.nextSibling;){o=A,A=A.parentNode;let l;o.nodeType===cr.TEXT_NODE&&o.data.trim()===""&&((l=A)==null?void 0:l.firstChild)!==o&&ve(o)}A&&(o=A,A=A.nextSibling,o.nodeType===cr.TEXT_NODE&&o.data.trim()===""&&ve(o))}return e},FA=function(e){return ji(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},G$=function(e){e=FA(e).split("<");let t="";for(let A=1;A<e.length;A++){const o=e[A];o[0]==="/"&&(t=t.substring(2)),e[A]=t+"<"+o,o[0]!=="/"&&o.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},V$=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=i.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},i.domToWorkspace$$module$build$src$core$xml=function(e,t){let A=0;t.RTL&&(A=t.getWidth());const o=[];ci();const l=i.getGroup$$module$build$src$core$events$utils();l||i.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let u=!0;try{for(let m=0,b;b=e.childNodes[m];m++){const T=b.nodeName.toLowerCase(),V=b;if(T==="block"||T==="shadow"&&!v()){const De=gi(V,t);o.push(De.id);let Ue;const Vt=parseInt((Ue=V.getAttribute("x"))!=null?Ue:"10",10);let Ks;const Bn=parseInt((Ks=V.getAttribute("y"))!=null?Ks:"10",10);isNaN(Vt)||isNaN(Bn)||De.moveBy(t.RTL?A-Vt:Vt,Bn,["create"]),u=!1}else{if(T==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(T==="comment")uh(V,t);else if(T==="variables"){if(u)hh(V,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");u=!1}}}}finally{i.setGroup$$module$build$src$core$events$utils(l),t.setResizesEnabled&&t.setResizesEnabled(!0),t.rendered&&qA(),ai()}return _(new(L(wi))(t)),o},uh=function(e,t){var A;const o=(A=e.getAttribute("id"))!=null?A:void 0;A=t.rendered?new wc(t,o):new cc(t,o);var l;A.setText((l=e.textContent)!=null?l:"");var u;l=parseInt((u=e.getAttribute("x"))!=null?u:"",10);let m;u=parseInt((m=e.getAttribute("y"))!=null?m:"",10),isNaN(l)||isNaN(u)||(l=t.RTL?t.getWidth()-l:l,A.moveTo(new N(l,u)));var b;t=parseInt((b=e.getAttribute("w"))!=null?b:"",10);let T;return b=parseInt((T=e.getAttribute("h"))!=null?T:"",10),isNaN(t)||isNaN(b)||A.setSize(new pe(t,b)),e.getAttribute("collapsed")==="true"&&A.setCollapsed(!0),e.getAttribute("editable")==="false"&&A.setEditable(!1),e.getAttribute("movable")==="false"&&A.setMovable(!1),e.getAttribute("deletable")==="false"&&A.setDeletable(!1),A},K$=function(e,t){if(!t.getBlocksBoundingBox)return i.domToWorkspace$$module$build$src$core$xml(e,t);var A=t.getBlocksBoundingBox();if(e=i.domToWorkspace$$module$build$src$core$xml(e,t),A&&A.top!==A.bottom){var o=A.bottom;A=t.RTL?A.right:A.left;var l=1/0;let u=-1/0,m=1/0;for(let b=0;b<e.length;b++){const T=t.getBlockById(e[b]).getRelativeToSurfaceXY();T.y<m&&(m=T.y),T.x<l&&(l=T.x),T.x>u&&(u=T.x)}for(o=o-m+10,A=t.RTL?A-u:A-l,l=0;l<e.length;l++)t.getBlockById(e[l]).moveBy(A,o,["create"])}return e},i.domToBlock$$module$build$src$core$xml=function(e,t){return e=gi(e,t),t.rendered&&qA(),e},gi=function(e,t){i.disable$$module$build$src$core$events$utils();var A=t.getAllVariables();let o;try{if(o=Dl(e,t),t.rendered){const l=o,u=o.getDescendants(!1);l.setConnectionTracking(!1);for(let m=u.length-1;0<=m;m--)u[m].initSvg();for(let m=u.length-1;0<=m;m--)u[m].queueRender();setTimeout(function(){l.disposed||l.setConnectionTracking(!0)},1),t.resizeContents()}else{const l=o.getDescendants(!1);for(let u=l.length-1;0<=u;u--)l[u].initModel()}}finally{i.enable$$module$build$src$core$events$utils()}if(x()){for(e=vo(t,A),t=0;t<e.length;t++)A=e[t],_(new(L(rr))(A));_(new(L(i.CREATE$$module$build$src$core$events$utils))(o))}return o},hh=function(e,t){for(let o=0;o<e.children.length;o++){var A=e.children[o];const l=A.getAttribute("type"),u=A.getAttribute("id");if(A=A.textContent,!A)break;t.createVariable(A,l,u)}},W$=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let A=0;A<e.children.length;A++){const o=e.children[A];if(o.nodeType!==cr.TEXT_NODE)switch(o.nodeName.toLowerCase()){case"mutation":t.mutation.push(o);break;case"comment":t.comment.push(o);break;case"data":t.data.push(o);break;case"title":case"field":t.field.push(o);break;case"value":case"statement":t.input.push(o);break;case"next":t.next.push(o);break;default:console.warn("Ignoring unknown tag: "+o.nodeName)}}return t},z$=function(e,t){let A=!1;for(let o=0;o<e.length;o++){const l=e[o];t.domToMutation&&(t.domToMutation(l),t.initSvg&&(A=!0))}return A},X$=function(e,t){for(let o=0;o<e.length;o++){var A=e[o];const l=A.textContent,u=A.getAttribute("pinned")==="true";let m;const b=parseInt((m=A.getAttribute("w"))!=null?m:"50",10);let T;A=parseInt((T=A.getAttribute("h"))!=null?T:"50",10),t.setCommentText(l);const V=t.getIcon(tt.COMMENT);isNaN(b)||isNaN(A)||V.setBubbleSize(new pe(b,A)),V.setBubbleVisible(u),setTimeout(()=>V.setBubbleVisible(u),1)}},Y$=function(e,t){for(let A=0;A<e.length;A++)t.data=e[A].textContent},J$=function(e,t){for(let A=0;A<e.length;A++){const o=e[A],l=o.getAttribute("name");l?Z$(t,l,o):console.warn(`Ignoring unnamed field in block ${t.type}`)}},dh=function(e){let t=null,A=null;for(let o=0;o<e.childNodes.length;o++){const l=e.childNodes[o];ph(l)&&(l.nodeName.toLowerCase()==="block"?t=l:l.nodeName.toLowerCase()==="shadow"&&(A=l))}return{childBlockElement:t,childShadowElement:A}},j$=function(e,t,A,o){for(let u=0;u<e.length;u++){var l=e[u];const m=l.getAttribute("name"),b=m?A.getInput(m):null;if(!b){console.warn("Ignoring non-existent input "+m+" in block "+o);break}if(l=dh(l),l.childBlockElement){if(!b.connection)throw TypeError("Input connection does not exist.");Dl(l.childBlockElement,t,b.connection,!1)}if(l.childShadowElement){let T;(T=b.connection)==null||T.setShadowDom(l.childShadowElement)}}},q$=function(e,t,A){for(let o=0;o<e.length;o++){const l=dh(e[o]);if(l.childBlockElement){if(!A.nextConnection)throw TypeError("Next statement does not exist.");if(A.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Dl(l.childBlockElement,t,A.nextConnection,!0)}l.childShadowElement&&A.nextConnection&&A.nextConnection.setShadowDom(l.childShadowElement)}},Dl=function(e,t,A,o){var l;const u=e.getAttribute("type");if(!u)throw TypeError("Block type unspecified: "+e.outerHTML);var m=(l=e.getAttribute("id"))!=null?l:void 0;l=t.newBlock(u,m),m=W$(e);const b=z$(m.mutation,l);if(X$(m.comment,l),Y$(m.data,l),A)if(o)if(l.previousConnection)A.connect(l.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(l.outputConnection)A.connect(l.outputConnection);else if(l.previousConnection)A.connect(l.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(J$(m.field,l),j$(m.input,t,l,u),q$(m.next,t,l),b&&l.initSvg(),(t=e.getAttribute("inline"))&&l.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&l.setDisabledReason(t==="true"||t==="disabled",tA),t=e.getAttribute("disabled-reasons"),t!==null)for(var T of t.split(","))l.setDisabledReason(!0,decodeURIComponent(T));if((T=e.getAttribute("deletable"))&&l.setDeletable(T==="true"),(T=e.getAttribute("movable"))&&l.setMovable(T==="true"),(T=e.getAttribute("editable"))&&l.setEditable(T==="true"),(T=e.getAttribute("collapsed"))&&l.setCollapsed(T==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=l.getChildren(!1),T=0;T<e.length;T++)if(!e[T].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");l.setShadow(!0)}return l},Z$=function(e,t,A){const o=e.getField(t);o?o.fromXml(A):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},em=function(e){for(let t=0;t<e.childNodes.length;t++){const A=e.childNodes[t];if(A.nodeName.toLowerCase()==="next"){e.removeChild(A);break}}},ph=function(e){return e.nodeType===cr.ELEMENT_NODE},xl=function(e){if(!(100<e.getDescendants(!1).length)){var t=e.workspace,A=e.getSvgRoot();t.getAudioManager().play("delete");var o=e.getRelativeToSurfaceXY(),l=A.cloneNode(!0);l.setAttribute("transform","translate("+o.x+","+o.y+")");var u;(u=t.getLayerManager())==null||u.appendToAnimationLayer({getSvgRoot:()=>l}),gh(l,{x:o.x,y:o.y,width:e.width,height:e.height},t.RTL,new Date)}},gh=function(e,t,A,o){const l=(new Date().getTime()-o.getTime())/150;1<l?ve(e):(e.setAttribute("transform","translate("+(t.x+(A?-1:1)*t.width/2*l)+","+(t.y+t.height/2*l)+") scale("+(1-l)+")"),setTimeout(gh,10,e,t,A,o))},Ol=function(e){var t=e.workspace;const A=t.scale;if(t.getAudioManager().play("click"),!(1>A)){var o=t.getSvgXY(e.getSvgRoot());e.outputConnection?(o.x+=(e.RTL?3:-3)*A,o.y+=13*A):e.previousConnection&&(o.x+=(e.RTL?-23:23)*A,o.y+=3*A);var l=R(y.CIRCLE,{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());e=R(y.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*A},l),t=R(y.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},l),e.beginElement(),t.beginElement(),setTimeout(()=>void ve(l),150)}},fh=function(e){if(cs(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),sn=e,$h(e,t,new Date)}},$h=function(e,t,A){const o=(new Date().getTime()-A.getTime())/200;let l="";1>=o&&(l=`skewX(${Math.round(Math.sin(o*Math.PI*3)*(1-o)*t)})`,_c=setTimeout($h,10,e,t,A)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${l}`)},cs=function(){sn&&(_c&&(clearTimeout(_c),_c=null),sn.getSvgRoot().setAttribute("transform",sn.getTranslation()),sn=null)},fi=function(e){return e.getRelativeToSurfaceXY!==void 0&&e.isMovable!==void 0&&e.startDrag!==void 0&&e.drag!==void 0&&e.endDrag!==void 0&&e.revertDrag!==void 0},tr=function(e,t){for(const A in t)e[A]=t[A]!==null&&typeof t[A]=="object"?tr(e[A]||Object.create(null),t[A]):t[A];return e},Sr=function(e){return e.getProcedureModel!==void 0&&e.doProcedureUpdate!==void 0&&e.isProcedureDef!==void 0},Ll=function(e){return e.startPublishing!==void 0&&e.stopPublishing!==void 0},UA=function(e,t){n(M.FIELD,e,t)},tm=function(e){a(M.FIELD,e)},i.fromJson$$module$build$src$core$field_registry=function(e){return JB.fromJsonInternal(e)},Am=function(e){const t=g(M.FIELD,e.type);return t?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},rm=function(e){let t=!1;const A=e.map(([m,b])=>typeof m=="string"?[ze(m),b]:(t=!0,[m.alt!==null?Object.assign({},m,{alt:ze(m.alt)}):Object.assign({},m),b]));if(t||2>e.length)return{options:A};var o=A.map(([m])=>m),l=ko(o);e=Gu(o,l);const u=Vu(o,l);return!e&&!u||l<=e+u?{options:A}:(l=e?o[0].substring(0,e-1):void 0,o=u?o[0].substr(1-u):void 0,{options:im(A,e,u),prefix:l,suffix:o})},im=function(e,t,A){return e.map(([o,l])=>[o.substring(t,o.length-A),l])},mh=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let A=0;A<e.length;A++){const o=e[A];Array.isArray(o)?typeof o[1]!="string"?(t=!0,console.error("Invalid option["+A+"]: Each FieldDropdown option id must be a string. Found "+o[1]+" in: ",o)):o[0]&&typeof o[0]!="string"&&typeof o[0].src!="string"&&(t=!0,console.error("Invalid option["+A+"]: Each FieldDropdown option must have a string label or image description. Found"+o[0]+" in: ",o)):(t=!0,console.error("Invalid option["+A+"]: Each FieldDropdown option must be an array. Found: ",o))}if(t)throw TypeError("Found invalid FieldDropdown options.")},i.register$$module$build$src$core$extensions=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(Os[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');Os[e]=t},i.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');i.register$$module$build$src$core$extensions(e,function(){this.mixin(t)})},i.registerMutator$$module$build$src$core$extensions=function(e,t,A,o){const l='Error when registering mutator "'+e+'": ';_h(l,t);const u=wh(t,l);if(A&&typeof A!="function")throw Error(l+'Extension "'+e+'" is not a function');i.register$$module$build$src$core$extensions(e,function(){u&&this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(o||[],this)),this.mixin(t),A&&A.apply(this)})},sm=function(e){Bh(e)?delete Os[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Bh=function(e){return!!Os[e]},Ql=function(e,t,A){const o=Os[e];if(typeof o!="function")throw Error('Error: Extension "'+e+'" not found.');let l;if(A?om(e,t):l=Nl(t),o.apply(t),A)_h('Error after applying mutator "'+e+'": ',t);else if(!cm(l,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},om=function(e,t){if(Nl(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},nm=function(e,t){return Ml(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},lm=function(e,t){return Ml(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},wh=function(e,t){return Ml(e.compose,e.decompose,t+" compose/decompose")},Ml=function(e,t,A){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(A+" must be a function");return!0}if(!e&&!t)return!1;throw Error(A+"Must have both or neither functions")},_h=function(e,t){const A=nm(t,e),o=lm(t,e);if(!A&&!o)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");wh(t,e)},Nl=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},cm=function(e,t){if(t=Nl(t),t.length!==e.length)return!1;for(let A=0;A<t.length;A++)if(e[A]!==t[A])return!1;return!0},am=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},i.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const A=[];return function(){A.includes(this.type)||(um(this,e,t),A.push(this.type)),this.setTooltip((function(){const o=String(this.getFieldValue(e));return ze(t[o])}).bind(this))}},um=function(e,t,A){var o=e.getField(t);if(o instanceof QA&&!o.isOptionListDynamic()){o=o.getOptions();for(const[,l]of o)A[l]===void 0&&console.warn(`No tooltip mapping for value ${l} of field ${t} of block type ${e.type}.`)}},i.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return function(){this.setTooltip((function(){const A=this.getField(t);return ze(e).replace("%1",A?A.getText():"")}).bind(this))}},hm=function(){const e=this.tooltip;this.setTooltip((function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}).bind(this))},Fr=function(e,t,A,o){e=e+" was deprecated in "+t+" and will be deleted in "+A+".",o&&(e+=`
Use `+o+" instead."),qB.has(e)||(qB.add(e),console.warn(e))},J=function(e,t){return" "+e+","+t+" "},Pt=function(e,t){return" "+e+t.join("")},ct=function(e,t){return" M "+e+","+t+" "},Le=function(e,t){return" m "+e+","+t+" "},RA=function(e,t){return" l "+e+","+t+" "},as=function(e){return" l"+e.join("")},W=function(e,t){return" "+e+" "+t+" "},Xe=function(e,t,A,o){return e+" "+A+" "+A+" "+t+o},Ch=function(e,t){n(M.ICON,e.toString(),t)},dm=function(e){a(M.ICON,e)},Hl=function(e){const t=e.getProcedureMap().getProcedures().filter(o=>!o.getReturnTypes()).map(o=>[o.getName(),o.getParameters().map(l=>l.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(o=>{!Sr(o)&&qi(o)&&t.push(o.getProcedureDef())});const A=e.getProcedureMap().getProcedures().filter(o=>!!o.getReturnTypes()).map(o=>[o.getName(),o.getParameters().map(l=>l.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(o=>{!Sr(o)&&qi(o)&&A.push(o.getProcedureDef())}),t.sort(bh),A.sort(bh),[t,A]},bh=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},i.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||i.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!pm(e,t.workspace,t);){const A=e.match(/^(.*?)(\d+)$/);e=A?A[1]+(parseInt(A[2])+1):e+"2"}return e},pm=function(e,t,A){return!vh(e,t,A)},vh=function(e,t,A){for(const o of t.getAllBlocks(!1))if(o!==A&&qi(o)&&i.Names$$module$build$src$core$names.equals(o.getProcedureDef()[0],e))return!0;A=A&&Sr(A)?A==null?void 0:A.getProcedureModel():void 0;for(const o of t.getProcedureMap().getProcedures())if(o!==A&&i.Names$$module$build$src$core$names.equals(o.getName(),e))return!0;return!1},i.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new Je;e=e.trim();const A=i.findLegalName$$module$build$src$core$procedures(e,t);Sr(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(A);const o=this.getValue();if(o!==e&&o!==A)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const l=e[t];l.renameProcedure&&l.renameProcedure(o,A)}return A},Pl=function(e){function t(u,m){for(let T=0;T<u.length;T++){var b=u[T][0];const V=u[T][1],De=i.createElement$$module$build$src$core$utils$xml("block");De.setAttribute("type",m),De.setAttribute("gap","16");const Ue=i.createElement$$module$build$src$core$utils$xml("mutation");for(Ue.setAttribute("name",b),De.appendChild(Ue),b=0;b<V.length;b++){const Vt=i.createElement$$module$build$src$core$utils$xml("arg");Vt.setAttribute("name",V[b]),Ue.appendChild(Vt)}A.push(De)}}const A=[];if(Gt.procedures_defnoreturn){var o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_defnoreturn"),o.setAttribute("gap","16");var l=i.createElement$$module$build$src$core$utils$xml("field");l.setAttribute("name","NAME"),l.appendChild(i.createTextNode$$module$build$src$core$utils$xml(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),o.appendChild(l),A.push(o)}return Gt.procedures_defreturn&&(o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","procedures_defreturn"),o.setAttribute("gap","16"),l=i.createElement$$module$build$src$core$utils$xml("field"),l.setAttribute("name","NAME"),l.appendChild(i.createTextNode$$module$build$src$core$utils$xml(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),o.appendChild(l),A.push(o)),Gt.procedures_ifreturn&&(o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","procedures_ifreturn"),o.setAttribute("gap","16"),A.push(o)),A.length&&A[A.length-1].setAttribute("gap","24"),e=Hl(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),A},Eh=function(e){var t=[],A=e.getBlocksByType("procedures_mutatorarg",!1);for(let u=0,m;m=A[u];u++)t.push(m.getFieldValue("NAME"));A=i.createElement$$module$build$src$core$utils$xml("xml");const o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_mutatorarg");const l=i.createElement$$module$build$src$core$utils$xml("field");l.setAttribute("name","NAME"),t=Bl(i.DEFAULT_ARG$$module$build$src$core$procedures,t),t=i.createTextNode$$module$build$src$core$utils$xml(t),l.appendChild(t),o.appendChild(l),A.appendChild(o),e.updateToolbox(A)},yh=function(e){if(e.type===xA&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=ie(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Eh(e),e.addChangeListener(gm))}},gm=function(e){(e.type===i.CREATE$$module$build$src$core$events$utils||e.type===i.DELETE$$module$build$src$core$events$utils||e.type===i.CHANGE$$module$build$src$core$events$utils||e.type===$i)&&(e=ie(e.workspaceId),Eh(e))},Ih=function(e,t){return t.getAllBlocks(!1).filter(A=>fm(A,e)||Qf(A)&&i.Names$$module$build$src$core$names.equals(A.getProcedureCall(),e))},fm=function(e,t){return Sr(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&i.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},i.mutateCallers$$module$build$src$core$procedures=function(e){const t=v();var A=e.getProcedureDef()[0];const o=e.mutationToDom(!0);e=Ih(A,e.workspace);for(let u=0,m;m=e[u];u++){A=(A=m.mutationToDom())&&ji(A),m.domToMutation&&m.domToMutation(o);var l=m.mutationToDom();l=l&&ji(l),A!==l&&(i.setRecordUndo$$module$build$src$core$events$utils(!1),_(new(L(i.CHANGE$$module$build$src$core$events$utils))(m,"mutation",null,A,l)),i.setRecordUndo$$module$build$src$core$events$utils(t))}},i.getDefinition$$module$build$src$core$procedures=function(e,t){for(const A of t.getAllBlocks(!1))if(Sr(A)&&A.isProcedureDef()&&i.Names$$module$build$src$core$names.equals(A.getProcedureModel().getName(),e)||qi(A)&&i.Names$$module$build$src$core$names.equals(A.getProcedureDef()[0],e))return A;return null},Gl=function(e){return e.isDynamic},$m=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},mm=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},Bm=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},wm=function(e,t){let A=null;t=t.outputConnection;const o=t==null?void 0:t.getConnectionChecker();for(let l=0,u;u=e.inputList[l];l++){const m=u.connection;let b;if(m&&((b=o)!=null&&b.canConnect(t,m,!1))){if(A)return null;A=m}}return A},_m=function(e,t){let A;for(;A=wm(e,t);)if(e=A.targetBlock(),!e||e.isShadow())return A;return null},Th=function(e){return e.getType!==void 0&&e.initView!==void 0&&e.dispose!==void 0&&e.getWeight!==void 0&&e.getSize!==void 0&&e.applyColour!==void 0&&e.hideForInsertionMarker!==void 0&&e.updateEditable!==void 0&&e.updateCollapsed!==void 0&&e.isShownWhenCollapsed!==void 0&&e.setOffsetInBlock!==void 0&&e.onLocationChange!==void 0&&e.onClick!==void 0},Cm=function(e){return Th(e)&&As(e)&&Io(e)&&e.setText!==void 0&&e.getText!==void 0&&e.setBubbleSize!==void 0&&e.getBubbleSize!==void 0&&e.getType()===tt.COMMENT},Oo=function(e){let t=e.outputConnection;return(!t||e.previousConnection&&e.previousConnection.isConnected())&&(t=e.previousConnection),t},Lo=function(e,t){n(M.RENDERER,e,t)},bm=function(e){a(M.RENDERER,e)},kh=function(e,t,A){return e=new(d(M.RENDERER,e))(e),e.init(t,A),e},Sh=function(e){Zi(e.getTargetWorkspace(),void 0,"String")},Fh=function(e){Zi(e.getTargetWorkspace(),void 0,"Number")},Uh=function(e){Zi(e.getTargetWorkspace(),void 0,"Colour")},Vl=function(e){let t=[],A=document.createElement("button");return A.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),A.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(A),A=document.createElement("button"),A.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),A.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(A),A=document.createElement("button"),A.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),A.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(A),e.registerButtonCallback("CREATE_VARIABLE_STRING",Sh),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Fh),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Uh),e=Rh(e),t=t.concat(e)},Rh=function(e){e=e.getAllVariables();const t=[];if(0<e.length){if(Gt.variables_set_dynamic){var A=e[e.length-1];const o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set_dynamic"),o.setAttribute("gap","24"),o.appendChild(ui(A)),t.push(o)}if(Gt.variables_get_dynamic){e.sort(Yo.compareByName);for(let o=0,l;l=e[o];o++)A=i.createElement$$module$build$src$core$utils$xml("block"),A.setAttribute("type","variables_get_dynamic"),A.setAttribute("gap","8"),A.appendChild(ui(l)),t.push(A)}}return t},vm=function(e,t){const A=e.workspace,o=i.config$$module$build$src$core$config.snapRadius,l=N.difference(t,e.getRelativeToSurfaceXY()),u=new N(0,0),m=A.getAllBlocks(!1).filter(b=>b.id!=e.id).map(b=>b.getRelativeToSurfaceXY());for(;Em(N.sum(t,u),m)||ym(e,N.sum(l,u),o);)A.RTL?u.translate(-o,2*o):u.translate(o,2*o);e.moveTo(N.sum(t,u))},Em=function(e,t){return t.some(A=>1>=Math.abs(A.x-e.x)&&1>=Math.abs(A.y-e.y))},ym=function(e,t,A){return e.getConnections_(!1).some(o=>!!o.closest(A,t).connection)},us=function(e,t,A){const o=A.getBoundingRectangle(),l=o.right-o.left,u=rs(t.top,o.top,t.top+t.height-(o.bottom-o.top))-o.top;let m=t.left;return t=t.left+t.width-l,e.RTL?m=Math.min(t,m):t=Math.max(m,t),(e=rs(m,o.left,t)-o.left)||u?(A.moveBy(e,u,["inbounds"]),!0):!1},Dh=function(e){return t=>{var A=e.getMetricsManager();if(A.hasFixedEdges()&&!e.isDragging()){var o;if(jl.includes((o=t.type)!=null?o:"")){o=A.getScrollMetrics(!0);const l=Im(e,t);l&&(A=i.getGroup$$module$build$src$core$events$utils()||!1,i.setGroup$$module$build$src$core$events$utils(t.group),us(e,o,l)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),i.setGroup$$module$build$src$core$events$utils(A))}else t.type===Dr&&t.scale&&t.oldScale&&t.scale>t.oldScale&&Kl(e)}}},Im=function(e,t){let A=null;switch(t.type){case i.CREATE$$module$build$src$core$events$utils:case i.MOVE$$module$build$src$core$events$utils:(A=e.getBlockById(t.blockId))&&(A=A.getRootBlock());break;case sr:case or:A=e.getCommentById(t.commentId)}return A},Kl=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var A=e.getTopBoundedElements();for(let o=0,l;l=A[o];o++)us(e,t,l)}},eA=function(e){return e.isDeletable!==void 0&&e.dispose!==void 0&&e.setDeleteStyle!==void 0},Tm=function(e){const t=e.toCopyData();Ep=t;let A;return yp=(A=e.workspace)!=null?A:null,t},Ur=function(e,t,A){return e&&t?xh(e,t,A):Ep&&yp?xh(Ep,yp):null},xh=function(e,t,A){let o;t=(o=t.getRootWorkspace())!=null?o:t;let l,u;return(u=(l=g(M.PASTER,e.paster,!1))==null?void 0:l.paste(e,t,A))!=null?u:null},km=function(e){const t=e.toCopyData();return t?Ur(t,e.workspace):null},Qo=function(e){return e.toCopyData!==void 0},Oh=function(){we.registry.register({name:HA.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[ce.ESC]})},Lh=function(){we.registry.register({name:HA.DELETE,preconditionFn(e){const t=ne();return!e.options.readOnly&&t!=null&&eA(t)&&t.isDeletable()&&!ur.inProgress()},callback(e,t){return t.preventDefault(),e=ne(),e instanceof lA?e.checkAndDelete():eA(e)&&e.isDeletable()&&(i.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),i.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[ce.DELETE,ce.BACKSPACE]})},Qh=function(){const e=we.registry.createSerializedKey(ce.C,[ce.CTRL]),t=we.registry.createSerializedKey(ce.C,[ce.ALT]),A=we.registry.createSerializedKey(ce.C,[ce.META]);we.registry.register({name:HA.COPY,preconditionFn(o){const l=ne();return!o.options.readOnly&&!ur.inProgress()&&l!=null&&eA(l)&&l.isDeletable()&&fi(l)&&l.isMovable()&&Qo(l)},callback(o,l){return l.preventDefault(),o.hideChaff(),l=ne(),!l||!Qo(l)?!1:(Hr=l.toCopyData(),Pr=o,Ps=fi(l)?l.getRelativeToSurfaceXY():null,!!Hr)},keyCodes:[e,t,A]})},Mh=function(){const e=we.registry.createSerializedKey(ce.X,[ce.CTRL]),t=we.registry.createSerializedKey(ce.X,[ce.ALT]),A=we.registry.createSerializedKey(ce.X,[ce.META]);we.registry.register({name:HA.CUT,preconditionFn(o){const l=ne();return!o.options.readOnly&&!ur.inProgress()&&l!=null&&eA(l)&&l.isDeletable()&&fi(l)&&l.isMovable()&&!l.workspace.isFlyout},callback(o){const l=ne();return l instanceof lA?(Hr=l.toCopyData(),Pr=o,Ps=l.getRelativeToSurfaceXY(),l.checkAndDelete(),!0):eA(l)&&l.isDeletable()&&Qo(l)?(Hr=l.toCopyData(),Pr=o,Ps=fi(l)?l.getRelativeToSurfaceXY():null,l.dispose(),!0):!1},keyCodes:[e,t,A]})},Nh=function(){const e=we.registry.createSerializedKey(ce.V,[ce.CTRL]),t=we.registry.createSerializedKey(ce.V,[ce.ALT]),A=we.registry.createSerializedKey(ce.V,[ce.META]);we.registry.register({name:HA.PASTE,preconditionFn(o){return!o.options.readOnly&&!ur.inProgress()},callback(){if(!Hr||!Pr)return!1;if(!Ps)return!!Ur(Hr,Pr);const{left:o,top:l,width:u,height:m}=Pr.getMetricsManager().getViewMetrics(!0);if(new ke(l,l+m,o,o+u).contains(Ps.x,Ps.y))return!!Ur(Hr,Pr);const b=new N(o+u/2,l+m/2);return!!Ur(Hr,Pr,b)},keyCodes:[e,t,A]})},Hh=function(){const e=we.registry.createSerializedKey(ce.Z,[ce.CTRL]),t=we.registry.createSerializedKey(ce.Z,[ce.ALT]),A=we.registry.createSerializedKey(ce.Z,[ce.META]);we.registry.register({name:HA.UNDO,preconditionFn(o){return!o.options.readOnly&&!ur.inProgress()},callback(o,l){return o.hideChaff(),o.undo(!1),l.preventDefault(),!0},keyCodes:[e,t,A]})},Ph=function(){const e=we.registry.createSerializedKey(ce.Z,[ce.SHIFT,ce.CTRL]),t=we.registry.createSerializedKey(ce.Z,[ce.SHIFT,ce.ALT]),A=we.registry.createSerializedKey(ce.Z,[ce.SHIFT,ce.META]),o=we.registry.createSerializedKey(ce.Y,[ce.CTRL]);we.registry.register({name:HA.REDO,preconditionFn(l){return!ur.inProgress()&&!l.options.readOnly},callback(l,u){return l.hideChaff(),l.undo(!0),u.preventDefault(),!0},keyCodes:[e,t,A,o]})},Gh=function(){Oh(),Lh(),Qh(),Mh(),Nh(),Hh(),Ph()},Vh=function(e){const t=e.saveState();return e.getParameters().length&&(t.parameters=e.getParameters().map(A=>A.saveState())),t},Kh=function(e,t,A,o){if(e=e.loadState(A,o),!A.parameters)return e;for(const[l,u]of A.parameters.entries())e.insertParameter(t.loadState(u,o),l);return e},Sm=function(e){const t=Object.create(null),A=f(M.SERIALIZER,!0);for(const o in A){let l;const u=(l=A[o])==null?void 0:l.save(e);u&&(t[o]=u)}return t},Fm=function(e,t,{recordUndo:A=!1}={}){var o=f(M.SERIALIZER,!0);if(o){o=Object.entries(o).sort((u,m)=>m[1].priority-u[1].priority);var l=v();i.setRecordUndo$$module$build$src$core$events$utils(A),(A=i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),ci(),t instanceof nA&&t.setResizesEnabled(!1);for(const[,u]of o.reverse()){let m;(m=u)==null||m.clear(t)}for(const[u,m]of o.reverse())if(e[u]){let b;(b=m)==null||b.load(e[u],t)}t instanceof nA&&t.setResizesEnabled(!0),ai(),_(new(L(wi))(t)),i.setGroup$$module$build$src$core$events$utils(A),i.setRecordUndo$$module$build$src$core$events$utils(l)}},Um=function(e,t){let A=null;A=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var o;if(!document.contains(A)&&document!==((o=A)==null?void 0:o.ownerDocument))throw Error("Error: container is not in current document");e=new iA(t||{}),o=document.createElement("div"),q(o,"injectionDiv"),t!=null&&t.rtl&&q(o,"blocklyRTL"),o.tabIndex=0,gt(o,ut.LABEL,i.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),A.appendChild(o),t=Rm(o,e);const l=Dm(o,t,e);return xm(l),Ve(l),Ke(l),o.addEventListener("focusin",function(){Ve(l)}),l},Rm=function(e,t){e.setAttribute("dir","LTR"),nu(t.hasCss,t.pathToMedia),e=R(y.SVG,{xmlns:Vo,"xmlns:html":LA,"xmlns:xlink":Xt,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const A=R(y.DEFS,{},e),o=String(Math.random()).substring(2);return t.gridPattern=Zd.createDom(o,t.gridOptions,A),e},Dm=function(e,t,A){A.parentWorkspace=null,A=new nA(A);const o=A.options;A.scale=o.zoomOptions.startScale,t.appendChild(A.createDom("blocklyMainBackground",e));var l=A.getRenderer().getClassName();return l&&q(e,l),(l=A.getTheme().getClassName())&&q(e,l),!o.hasCategories&&o.languageTree&&(e=A.addFlyout(y.SVG),li(e,t)),o.hasTrashcan&&A.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&A.addZoomControls(),A.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),A.translate(0,0),A.addChangeListener(Dh(A)),Ke(A),Ah(),ku(),zu(),A},xm=function(e){const t=e.options;var A=e.getParentSvg();if(j(A.parentNode,"contextmenu",null,function(o){Te(o)||o.preventDefault()}),A=j(window,"resize",null,function(){er(),e.hideComponents(!0),Pu(),oh(),Ke(e),Kl(e)}),e.setResizeHandlerWrapper(A),Lm(),t.languageTree){A=e.getToolbox();const o=e.getFlyout(!0);A?A.init():o&&(o.init(e),o.show(t.languageTree),typeof o.scrollToStart=="function"&&o.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new Tp(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&Qm(t.pathToMedia,e)},Om=function(e){const t=re();t&&!(Te(e)||t.rendered&&!t.isVisible())&&we.registry.onKeyDown(t,e)},Lm=function(){Dw||(j(document,"scroll",null,function(){const e=me();for(let t=0,A;A=e[t];t++)A instanceof nA&&A.updateInverseScreenCTM()}),j(document,"keydown",null,Om),ee(document,"touchend",null,We),ee(document,"touchcancel",null,We),Go&&j(window,"orientationchange",document,function(){Ke(re())})),Dw=!0},Qm=function(e,t){function A(){for(;l.length;){const u=l.pop();u&&ue(u)}o.preload()}const o=t.getAudioManager();o.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),o.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),o.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const l=[];l.push(j(document,"pointermove",null,A,!0)),l.push(j(document,"touchstart",null,A,!0))},Wh=function(){le.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:le.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},zh=function(){le.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:le.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Xh=function(){le.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:le.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Yh=function(e,t){function A(u){l--,u.setCollapsed(e),l===0&&i.setGroup$$module$build$src$core$events$utils(!1)}let o=0,l=0;i.setGroup$$module$build$src$core$events$utils(!0);for(let u=0;u<t.length;u++){let m=t[u];for(;m;)l++,setTimeout(A.bind(null,m),o),m=m.getNextBlock(),o+=10}},Jh=function(){le.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let A=e[t];for(;A;){if(!A.isCollapsed())return"enabled";A=A.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Yh(!0,e.workspace.getTopBlocks(!0))},scopeType:le.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},jh=function(){le.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let A=e[t];for(;A;){if(A.isCollapsed())return"enabled";A=A.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Yh(!1,e.workspace.getTopBlocks(!0))},scopeType:le.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},qh=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let A=0;A<e.length;A++)qh(e[A],t)}},Wl=function(e){const t=[];e=e.getTopBlocks(!0);for(let A=0;A<e.length;A++)qh(e[A],t);return t},Mo=function(e,t){t?i.setGroup$$module$build$src$core$events$utils(t):(i.setGroup$$module$build$src$core$events$utils(!0),t=i.getGroup$$module$build$src$core$events$utils());const A=e.shift();A&&(A.isDeadOrDying()?Mo(e,t):(A.dispose(!1,!0),setTimeout(Mo,10,e,t))),i.setGroup$$module$build$src$core$events$utils(!1)},Zh=function(){le.registry.register({displayText(e){return e.workspace?(e=Wl(e.workspace).length,e===1?i.Msg$$module$build$src$core$msg.DELETE_BLOCK:i.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&0<Wl(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=Wl(e.workspace);2>t.length?Mo(t):fl(i.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(A){A&&Mo(t)})}},scopeType:le.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Mm=function(){Wh(),zh(),Xh(),Jh(),jh(),Zh()},ed=function(){le.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var t=e.block.toCopyData();t&&Ur(t,e.block.workspace)}},scopeType:le.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},td=function(){le.registry.register({displayText(e){return e.block.hasIcon(pr.TYPE)?i.Msg$$module$build$src$core$msg.REMOVE_COMMENT:i.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(pr.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:le.ScopeType.BLOCK,id:"blockComment",weight:2})},Ad=function(){le.registry.register({displayText(e){return e.block.getInputsInline()?i.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:i.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof Nc||e.inputList[t]instanceof Nc))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:le.ScopeType.BLOCK,id:"blockInline",weight:3})},rd=function(){le.registry.register({displayText(e){return e.block.isCollapsed()?i.Msg$$module$build$src$core$msg.EXPAND_BLOCK:i.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:le.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},id=function(){le.registry.register({displayText(e){return e.block.hasDisabledReason(tA)?i.Msg$$module$build$src$core$msg.ENABLE_BLOCK:i.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var t=e.getDisabledReasons();return t=t.size>(t.has(tA)?1:0),e.getInheritedDisabled()||t?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(tA),tA),i.setGroup$$module$build$src$core$events$utils(t)},scopeType:le.ScopeType.BLOCK,id:"blockDisable",weight:5})},sd=function(){le.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?i.Msg$$module$build$src$core$msg.DELETE_BLOCK:i.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:le.ScopeType.BLOCK,id:"blockDelete",weight:6})},od=function(){le.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:le.ScopeType.BLOCK,id:"blockHelp",weight:7})},nd=function(){le.registry.register({displayText:()=>i.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isDeletable()?"enabled":"hidden"},callback(e){i.setGroup$$module$build$src$core$events$utils(!0);let t;(t=e.comment)==null||t.dispose(),i.setGroup$$module$build$src$core$events$utils(!1)},scopeType:le.ScopeType.COMMENT,id:"commentDelete",weight:6})},ld=function(){le.registry.register({displayText:()=>i.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var t=e.comment.toCopyData();t&&Ur(t,e.comment.workspace)}},scopeType:le.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},cd=function(){le.registry.register({displayText:()=>i.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:()=>"enabled",callback:(e,t)=>{if(e=e.workspace){i.setGroup$$module$build$src$core$events$utils(!0);var A=new wc(e);A.setText(i.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),A.moveTo(Nm(new N(t.clientX,t.clientY),e)),i.setSelected$$module$build$src$core$common(A),i.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:le.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},Nm=function(e,t){var A=t.getInjectionDiv().getBoundingClientRect();return e=new N(e.x-A.left,e.y-A.top),A=t.getOriginOffsetInPixels(),e=N.difference(e,A),e.scale(1/t.scale),e},Hm=function(){ed(),td(),Ad(),rd(),id(),sd(),od()},Pm=function(){ld(),nd(),cd()},ad=function(){Mm(),Hm()},Gm=function(e){return e.paste!==void 0},Vm=function(e){return e.getSvgRoot!==void 0},Km=function(e){return typeof e.id=="string"&&e.workspace!==void 0&&e.select!==void 0&&e.unselect!==void 0},Wm=function(e){return e.isSelectable()},zm=function(e){re().hideChaff(e)},Q=Q||{},Q.scope={},Q.ASSUME_ES5=!1,Q.ASSUME_NO_NATIVE_MAP=!1,Q.ASSUME_NO_NATIVE_SET=!1,Q.SIMPLE_FROUND_POLYFILL=!1,Q.ISOLATE_POLYFILLS=!1,Q.FORCE_POLYFILL_PROMISE=!1,Q.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Q.defineProperty=Q.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,A){return e==Array.prototype||e==Object.prototype||(e[t]=A.value),e},Q.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof zp=="object"&&zp];for(var t=0;t<e.length;++t){var A=e[t];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")},Q.global=Q.getGlobal(this),Q.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Q.TRUST_ES6_POLYFILLS=!Q.ISOLATE_POLYFILLS||Q.IS_SYMBOL_NATIVE,Q.polyfills={},Q.propertyToPolyfillSymbol={},Q.POLYFILL_PREFIX="$jscp$",Q.polyfill=function(e,t,A,o){t&&(Q.ISOLATE_POLYFILLS?Q.polyfillIsolated(e,t,A,o):Q.polyfillUnisolated(e,t,A,o))},Q.polyfillUnisolated=function(e,t,A,o){for(A=Q.global,e=e.split("."),o=0;o<e.length-1;o++){var l=e[o];if(!(l in A))return;A=A[l]}e=e[e.length-1],o=A[e],t=t(o),t!=o&&t!=null&&Q.defineProperty(A,e,{configurable:!0,writable:!0,value:t})},Q.polyfillIsolated=function(e,t,A,o){var l=e.split(".");e=l.length===1,o=l[0],o=!e&&o in Q.polyfills?Q.polyfills:Q.global;for(var u=0;u<l.length-1;u++){var m=l[u];if(!(m in o))return;o=o[m]}l=l[l.length-1],A=Q.IS_SYMBOL_NATIVE&&A==="es6"?o[l]:null,t=t(A),t!=null&&(e?Q.defineProperty(Q.polyfills,l,{configurable:!0,writable:!0,value:t}):t!==A&&(Q.propertyToPolyfillSymbol[l]===void 0&&(A=1e9*Math.random()>>>0,Q.propertyToPolyfillSymbol[l]=Q.IS_SYMBOL_NATIVE?Q.global.Symbol(l):Q.POLYFILL_PREFIX+A+"$"+l),Q.defineProperty(o,Q.propertyToPolyfillSymbol[l],{configurable:!0,writable:!0,value:t})))},Q.underscoreProtoCanBeSet=function(){var e={a:!0},t={};try{return t.__proto__=e,t.a}catch{}return!1},Q.setPrototypeOf=Q.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:Q.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,Q.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},Q.arrayIterator=function(e){return{next:Q.arrayIteratorImpl(e)}},Q.makeIterator=function(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return Q.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},Q.generator={},Q.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},Q.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},Q.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},Q.generator.Context.prototype.stop_=function(){this.isRunning_=!1},Q.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},Q.generator.Context.prototype.next_=function(e){this.yieldResult=e},Q.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},Q.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},Q.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},Q.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},Q.generator.Context.prototype.yieldAll=function(e,t){e=Q.makeIterator(e);var A=e.next();if(Q.generator.ensureIteratorResultIsObject_(A),A.done)this.yieldResult=A.value,this.nextAddress=t;else return this.yieldAllIterator_=e,this.yield(A.value,t)},Q.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},Q.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},Q.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,t!=null&&(this.finallyAddress_=t)},Q.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},Q.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},Q.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},Q.generator.Context.prototype.enterFinallyBlock=function(e,t,A){A?this.finallyContexts_[A]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},Q.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();t.jumpTo!=null&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},Q.generator.Context.prototype.forIn=function(e){return new Q.generator.Context.PropertyIterator(e)},Q.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var t in e)this.properties_.push(t);this.properties_.reverse()},Q.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},Q.generator.Engine_=function(e){this.context_=new Q.generator.Context,this.program_=e},Q.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},Q.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(A){return{value:A,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},Q.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},Q.generator.Engine_.prototype.yieldAllStep_=function(e,t,A){try{var o=e.call(this.context_.yieldAllIterator_,t);if(Q.generator.ensureIteratorResultIsObject_(o),!o.done)return this.context_.stop_(),o;var l=o.value}catch(u){return this.context_.yieldAllIterator_=null,this.context_.throw_(u),this.nextStep_()}return this.context_.yieldAllIterator_=null,A.call(this.context_,l),this.nextStep_()},Q.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(t){this.context_.yieldResult=void 0,this.context_.throw_(t)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},Q.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},Q.generator.createGenerator=function(e,t){return t=new Q.generator.Generator_(new Q.generator.Engine_(t)),Q.setPrototypeOf&&e.prototype&&Q.setPrototypeOf(t,e.prototype),t},Q.asyncExecutePromiseGenerator=function(e){function t(o){return e.next(o)}function A(o){return e.throw(o)}return new Promise(function(o,l){function u(m){m.done?o(m.value):Promise.resolve(m.value).then(t,A).then(u,l)}u(e.next())})},Q.asyncExecutePromiseGeneratorFunction=function(e){return Q.asyncExecutePromiseGenerator(e())},Q.asyncExecutePromiseGeneratorProgram=function(e){return Q.asyncExecutePromiseGenerator(new Q.generator.Generator_(new Q.generator.Engine_(e)))},Q.polyfill("globalThis",function(e){return e||Q.global},"es_2020","es3"),Q.polyfill("Array.prototype.includes",function(e){return e||function(t,A){var o=this;o instanceof String&&(o=String(o));var l=o.length;for(A=A||0,0>A&&(A=Math.max(A+l,0));A<l;A++){var u=o[A];if(u===t||Object.is(u,t))return!0}return!1}},"es7","es3"),Q.initSymbol=function(){},Q.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},Q.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var A=0,o=!1,l={next:function(){if(!o&&A<e.length){var u=A++;return{value:t(u,e[u]),done:!1}}return o=!0,{done:!0,value:void 0}}};return l[Symbol.iterator]=function(){return l},l},Q.polyfill("Array.prototype.values",function(e){return e||function(){return Q.iteratorFromArray(this,function(t,A){return A})}},"es8","es3"),Q.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;var A=[];return Array.prototype.forEach.call(this,function(o){Array.isArray(o)&&0<t?(o=Array.prototype.flat.call(o,t-1),A.push.apply(A,o)):A.push(o)}),A}},"es9","es5"),Q.polyfill("Array.prototype.flatMap",function(e){return e||function(t,A){var o=[];return Array.prototype.forEach.call(this,function(l,u){l=t.call(A,l,u,this),Array.isArray(l)?o.push.apply(o,l):o.push(l)}),o}},"es9","es5"),Q.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Q.polyfill("Object.entries",function(e){return e||function(t){var A=[],o;for(o in t)Q.owns(t,o)&&A.push([o,t[o]]);return A}},"es8","es3"),Q.polyfill("Object.values",function(e){return e||function(t){var A=[],o;for(o in t)Q.owns(t,o)&&A.push(t[o]);return A}},"es8","es3");var Rr=Object.create(null),wv={typeMap:Rr},zl=Object.create(null),DA="default",M=class{constructor(e){this.name=e}toString(){return this.name}};M.CONNECTION_CHECKER=new M("connectionChecker"),M.CONNECTION_PREVIEWER=new M("connectionPreviewer"),M.CURSOR=new M("cursor"),M.EVENT=new M("event"),M.FIELD=new M("field"),M.INPUT=new M("input"),M.RENDERER=new M("renderer"),M.TOOLBOX=new M("toolbox"),M.THEME=new M("theme"),M.TOOLBOX_ITEM=new M("toolboxItem"),M.FLYOUTS_VERTICAL_TOOLBOX=new M("flyoutsVerticalToolbox"),M.FLYOUTS_HORIZONTAL_TOOLBOX=new M("flyoutsHorizontalToolbox"),M.METRICS_MANAGER=new M("metricsManager"),M.BLOCK_DRAGGER=new M("blockDragger"),M.SERIALIZER=new M("serializer"),M.ICON=new M("icon"),M.PASTER=new M("paster");var Ar={DEFAULT:DA,TEST_ONLY:wv};Ar.Type=M,Ar.getAllItems=f,Ar.getClass=d,Ar.getClassFromOptions=B,Ar.getObject=g,Ar.hasItem=p,Ar.register=n,Ar.unregister=a;var Gt=Object.create(null),Xm="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ym={genUid:()=>{const e=Xm.length,t=[];for(let A=0;20>A;A++)t[A]=Xm.charAt(Math.random()*e);return t.join("")}},_v=0,ud={TEST_ONLY:Ym};ud.genUid=C,ud.getNextUniqueId=w;var hd,hs,Xl,$i,rr,mi,ds,Yl,Bi,ps,ir,gs,xA,fs,$s,ms,Dr,sr,Bs,ws,or,No,wi,Jl,jl,_i,ql,Ft;hd="",hs=!0,Xl=0,i.CREATE$$module$build$src$core$events$utils="create",i.CREATE$$module$build$src$core$events$utils,i.DELETE$$module$build$src$core$events$utils="delete",i.DELETE$$module$build$src$core$events$utils,i.CHANGE$$module$build$src$core$events$utils="change",i.CHANGE$$module$build$src$core$events$utils,$i="block_field_intermediate_change",i.MOVE$$module$build$src$core$events$utils="move",i.MOVE$$module$build$src$core$events$utils,rr="var_create",mi="var_delete",ds="var_rename",Yl="ui",Bi="drag",ps="selected",ir="click",gs="marker_move",xA="bubble_open",fs="trashcan_open",$s="toolbox_item_select",ms="theme_change",Dr="viewport_change",sr="comment_create",Bs="comment_delete",ws="comment_change",or="comment_move",No="comment_collapse",wi="finished_loading",Jl="ORPHANED_BLOCK",jl=[i.CREATE$$module$build$src$core$events$utils,i.MOVE$$module$build$src$core$events$utils,sr,or],_i=[],ql={FIRE_QUEUE:_i,fireNow:D,fireInternal:I,setGroupInternal:P},Ft={BLOCK_CHANGE:i.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:i.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:i.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:Bi,BLOCK_FIELD_INTERMEDIATE_CHANGE:$i,BLOCK_MOVE:i.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:xA,BUMP_EVENTS:jl,CHANGE:i.CHANGE$$module$build$src$core$events$utils,CLICK:ir,COMMENT_CHANGE:ws,COMMENT_COLLAPSE:No,COMMENT_CREATE:sr,COMMENT_DELETE:Bs,COMMENT_MOVE:or,CREATE:i.CREATE$$module$build$src$core$events$utils,DELETE:i.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:wi,MARKER_MOVE:gs,MOVE:i.MOVE$$module$build$src$core$events$utils,SELECTED:ps,TEST_ONLY:ql,THEME_CHANGE:ms,TOOLBOX_ITEM_SELECT:$s,TRASHCAN_OPEN:fs,UI:Yl,VAR_CREATE:rr,VAR_DELETE:mi,VAR_RENAME:ds,VIEWPORT_CHANGE:Dr},Ft.clearPendingUndo=k,Ft.disable=i.disable$$module$build$src$core$events$utils,Ft.disableOrphans=G,Ft.enable=i.enable$$module$build$src$core$events$utils,Ft.filter=F,Ft.fire=_,Ft.fromJson=Z,Ft.get=L,Ft.getDescendantIds=H,Ft.getGroup=i.getGroup$$module$build$src$core$events$utils,Ft.getRecordUndo=v,Ft.isEnabled=x,Ft.setGroup=i.setGroup$$module$build$src$core$events$utils,Ft.setRecordUndo=i.setRecordUndo$$module$build$src$core$events$utils;var Ho=Object.create(null),Jm,Ci=null,jm,Po=[],qm={defineBlocksWithJsonArrayInternal:Bt},wt={TEST_ONLY:qm};wt.createBlockDefinitionsFromJsonArray=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,wt.defineBlocks=i.defineBlocks$$module$build$src$core$common,wt.defineBlocksWithJsonArray=Mt,wt.draggingConnections=Po,wt.getAllWorkspaces=me,wt.getBlockTypeCounts=mt,wt.getMainWorkspace=re,wt.getParentContainer=Ne,wt.getSelected=ne,wt.getWorkspaceById=ie,wt.registerWorkspace=te,wt.setMainWorkspace=Ve,wt.setParentContainer=kt,wt.setSelected=i.setSelected$$module$build$src$core$common,wt.svgResize=Ke,wt.unregisterWorkpace=ae;var _s=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=i.getGroup$$module$build$src$core$events$utils(),this.recordUndo=v()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,A){return A.isBlank=!1,A.group=e.group||"",A.workspaceId=t.id,A}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=ie(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},OA=class extends _s{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},dd=class extends OA{constructor(e,t,A){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=ir,this.blockId=e?e.id:void 0,this.targetType=A}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new dd),t.targetType=e.targetType,t.blockId=e.blockId,t}},pd;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(pd||(pd={})),n(M.EVENT,ir,dd);var Cv=750,Zm="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Zl=null,bi={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},ec=0,vi={TOUCH_ENABLED:Zm,TOUCH_MAP:bi};vi.checkTouchIdentifier=ni,vi.clearTouchIdentifier=nt,vi.getTouchIdentifierFromEvent=Ht,vi.longStart=Nt,vi.longStop=We,vi.shouldHandleEvent=lt;var gd,eB,tB,AB,tc,Ac,fd,rB,iB,sB;(function(e){function t(o){return A.includes(o.toUpperCase())}gd=e;const A=gd.toUpperCase();eB=t("JavaFX"),tB=t("WebKit"),AB=t("Gecko")&&!tB,tc=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Ac=t("iPad")||t("Macintosh")&&0<e,fd=t("iPhone")&&!Ac,rB=t("Macintosh"),iB=Ac||tc&&!t("Mobile")||t("Silk"),sB=!iB&&(fd||tc)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var bv=gd,oB=eB,nB=AB,$d=tc,Go=Ac,lB=fd,md=rB,cB=sB,vv={ANDROID:$d,GECKO:nB,IPAD:Go,IPHONE:lB,JavaFx:oB,MAC:md,MOBILE:cB,raw:bv},aB=40,uB=125,nr={};nr.bind=ee,nr.conditionalBind=j,nr.getScrollDeltaPixels=be,nr.isRightButton=Oe,nr.isTargetInput=Te,nr.mouseToSvg=St,nr.unbind=ue;var hB={};hB.removeElem=pt;var lr=class{constructor(e){this.name_=e}toString(){return this.name_}};lr.POSITIONABLE=new lr("positionable"),lr.DRAG_TARGET=new lr("drag_target"),lr.DELETE_AREA=new lr("delete_area"),lr.AUTOHIDEABLE=new lr("autohideable");var at=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const A=e.component.id;if(!t&&this.componentData.has(A)){var o;throw Error('Plugin "'+A+'" with capabilities "'+((o=this.componentData.get(A))==null?void 0:o.capabilities)+'" already added.')}for(this.componentData.set(A,e),t=[],o=0;o<e.capabilities.length;o++){const l=String(e.capabilities[o]).toLowerCase();if(t.push(l),this.capabilityToComponentIds.has(l)){let u;(u=this.capabilityToComponentIds.get(l))==null||u.push(A)}else this.capabilityToComponentIds.set(l,[A])}this.componentData.get(A).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let A=0;A<t.capabilities.length;A++){const o=String(t.capabilities[A]).toLowerCase();pt(this.capabilityToComponentIds.get(o),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=`${t}`.toLowerCase();var A;(A=this.componentData.get(e))==null||A.capabilities.push(t);var o;(o=this.capabilityToComponentIds.get(t))==null||o.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),pt(this.componentData.get(e).capabilities,t),pt(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(t)}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const A=[];if(t){const o=[];e.forEach(l=>{o.push(this.componentData.get(l))}),o.sort(function(l,u){return l.weight-u.weight}),o.forEach(function(l){A.push(l.component)})}else e.forEach(o=>{A.push(this.componentData.get(o).component)});return A}};at.Capability=lr;var Bd=!1,wd=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,_d={};_d.inject=nu,_d.register=jA;var N=class{constructor(e,t){this.x=e,this.y=t}clone(){return new N(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const A=e.x-t.x;return e=e.y-t.y,Math.sqrt(A*A+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new N(e.x-t.x,e.y-t.y)}static sum(e,t){return new N(e.x+t.x,e.y+t.y)}},Vo="http://www.w3.org/2000/svg",LA="http://www.w3.org/1999/xhtml",Xt="http://www.w3.org/1999/xlink",cr;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(cr||(cr={}));var gA=null,Cd=0,rc=null,ft={HTML_NS:LA};ft.NodeType=cr,ft.SVG_NS=Vo,ft.XLINK_NS=Xt,ft.addClass=q,ft.createSvgElement=R,ft.getFastTextWidth=Bo,ft.getFastTextWidthWithSizeString=sl,ft.getTextWidth=lu,ft.hasClass=Ef,ft.insertAfter=li,ft.measureFontMetrics=ol,ft.removeClass=Fe,ft.removeClasses=rl,ft.removeNode=ve,ft.setCssTransform=il,ft.startTextWidthCache=ci,ft.stopTextWidthCache=ai;var y=class{constructor(e){this.tagName=e}toString(){return this.tagName}};y.ANIMATE=new y("animate"),y.CIRCLE=new y("circle"),y.CLIPPATH=new y("clipPath"),y.DEFS=new y("defs"),y.FECOMPOSITE=new y("feComposite"),y.FECOMPONENTTRANSFER=new y("feComponentTransfer"),y.FEFLOOD=new y("feFlood"),y.FEFUNCA=new y("feFuncA"),y.FEGAUSSIANBLUR=new y("feGaussianBlur"),y.FEPOINTLIGHT=new y("fePointLight"),y.FESPECULARLIGHTING=new y("feSpecularLighting"),y.FILTER=new y("filter"),y.FOREIGNOBJECT=new y("foreignObject"),y.G=new y("g"),y.IMAGE=new y("image"),y.LINE=new y("line"),y.PATH=new y("path"),y.PATTERN=new y("pattern"),y.POLYGON=new y("polygon"),y.RECT=new y("rect"),y.SVG=new y("svg"),y.TEXT=new y("text"),y.TSPAN=new y("tspan");var ke=class{constructor(e,t,A,o){this.top=e,this.bottom=t,this.left=A,this.right=o}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)}},pe=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}static max(e,t){return new pe(Math.max(e.width,t.width),Math.max(e.height,t.height))}static min(e,t){return new pe(Math.min(e.width,t.width),Math.min(e.height,t.height))}},dB={getSizeInternal:yf},xr={TEST_ONLY:dB};xr.getBorderBox=uu,xr.getComputedStyle=TA,xr.getContainerOffsetToScrollInto=hu,xr.getPageOffset=Ir,xr.getSize=wo,xr.getViewportPageOffset=au,xr.scrollIntoContainerView=nl;var pB=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,gB=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Ev={XY_REGEX:pB,XY_STYLE_REGEX:gB},Ei={TEST_ONLY:Ev};Ei.getDocumentScroll=pu,Ei.getInjectionDivXY=ll,Ei.getRelativeXY=_o,Ei.getViewportBBox=du,Ei.screenToWsCoordinates=If,Ei.wsToScreenCoordinates=Tf;var Ye=class{constructor(e,t,A,o,l){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new N(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new N(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=A||!1,this.margin=l!==void 0?l:Ye.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),o&&(e+=" "+o),this.outerSvg=R(y.SVG,{class:e}),o=R(y.G,{},this.outerSvg),this.svgBackground=R(y.RECT,{class:"blocklyScrollbarBackground"},o),e=Math.floor((Ye.scrollbarThickness-5)/2),this.svgHandle=R(y.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},o),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),li(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=j(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=j(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=Ye.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),ue(this.onMouseDownBarWrapper_),ue(this.onMouseDownHandleWrapper_),ve(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,il(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&Ye.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-2*this.margin;this.pair&&(t-=Ye.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=Ye.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-Ye.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var A=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*A,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=A/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-2*this.margin;this.pair&&(t-=Ye.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-Ye.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var A=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*A,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=A/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const t=e!==this.isVisible();this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),nt(),this.cleanUp(),Oe(e))e.stopPropagation();else{var t=St(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var A=ll(this.svgHandle);A=this.horizontal?A.x:A.y;var o=this.handlePosition,l=.95*this.handleLength;t<=A?o-=l:t>=A+this.handleLength&&(o+=l),this.setHandlePosition(this.constrainHandlePosition(o)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),Oe(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=j(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=j(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){nt(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(ue(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(ue(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new N(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};Ye.scrollbarThickness=Zm?25:15,Ye.DEFAULT_SCROLLBAR_MARGIN=.5;var ic={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},bd={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:sc,DOMParser:Ko,XMLSerializer:Wo}=globalThis;Ko&&(ic=new Ko),Wo&&(bd=new Wo);var fB="https://developers.google.com/blockly/xml",yv=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Cs={NAME_SPACE:fB};Cs.createElement=i.createElement$$module$build$src$core$utils$xml,Cs.createTextNode=i.createTextNode$$module$build$src$core$utils$xml,Cs.domToText=ji,Cs.injectDependencies=kf,Cs.textToDom=i.textToDom$$module$build$src$core$utils$xml;var vd="categoryToolbox",$B="flyoutToolbox",se;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(se||(se={}));var mB={hasCategoriesInternal:Uf},Or={};Or.Position=se,Or.TEST_ONLY=mB,Or.convertFlyoutDefToJsonArray=Co,Or.convertToolboxDefToJson=cl,Or.hasCategories=al,Or.isCategoryCollapsible=ul,Or.parseToolboxTree=fu;var ar;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(ar||(ar={}));var bs;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(bs||(bs={}));var Lr;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(Lr||(Lr={}));var yi={};yi.bumpDirection=Lr,yi.bumpPositionRect=gl,yi.getCornerOppositeToolbox=pl,yi.getStartPositionRect=dl,yi.horizontalPosition=bs,yi.verticalPosition=ar;var Ut={width:96,height:124,url:"sprites.png"},BB=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=R(y.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[at.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&ve(this.svgGroup);for(const e of this.boundEvents)ue(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new ke(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var A=pl(this.workspace,e),o=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(o+=this.LARGE_SPACING+this.HEIGHT),e=dl(A,new pe(this.WIDTH,o),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),A=A.vertical,t=gl(e,this.MARGIN_VERTICAL,A===ar.TOP?Lr.DOWN:Lr.UP,t),A===ar.TOP){var l=this.SMALL_SPACING+this.HEIGHT,u;(u=this.zoomInGroup)==null||u.setAttribute("transform","translate(0, "+l+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(l+this.LARGE_SPACING+this.HEIGHT)+")")}else{u=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let b;(b=this.zoomInGroup)==null||b.setAttribute("transform","translate(0, "+u+")"),u=u+this.SMALL_SPACING+this.HEIGHT,(l=this.zoomOutGroup)==null||l.setAttribute("transform","translate(0, "+u+")")}this.top=t.top,this.left=t.left;var m;(m=this.svgGroup)==null||m.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=R(y.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const t=R(y.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);R(y.RECT,{width:32,height:32},t),R(y.IMAGE,{width:Ut.width,height:Ut.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(Xt,"xlink:href",this.workspace.options.pathToMedia+Ut.url),this.boundEvents.push(j(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=R(y.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const t=R(y.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);R(y.RECT,{width:32,height:32},t),R(y.IMAGE,{width:Ut.width,height:Ut.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(Xt,"xlink:href",this.workspace.options.pathToMedia+Ut.url),this.boundEvents.push(j(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),nt(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=R(y.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const t=R(y.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);R(y.RECT,{width:32,height:32},t),R(y.IMAGE,{width:Ut.width,height:Ut.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(Xt,"xlink:href",this.workspace.options.pathToMedia+Ut.url),this.boundEvents.push(j(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),nt(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(L(ir))(null,this.workspace.id,"zoom_controls");_(e)}};jA(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var zo="_TEMP_COLLAPSED_INPUT",oc="_TEMP_COLLAPSED_FIELD",tA="MANUALLY_DISABLED",Iv={COLLAPSED_FIELD_NAME:oc,COLLAPSED_INPUT_NAME:zo,MANUALLY_DISABLED:tA},tt=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};tt.MUTATOR=new tt("mutator"),tt.WARNING=new tt("warning"),tt.COMMENT=new tt("comment"),function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"}(i.inputTypes$$module$build$src$core$inputs$input_types||(i.inputTypes$$module$build$src$core$inputs$input_types={})),i.inputTypes$$module$build$src$core$inputs$input_types;var wB=function(e,t){window.alert(e),t&&t()},_B=function(e,t){t(window.confirm(e))},CB=function(e,t,A){A(window.prompt(e,t))},bB={confirmInternal:xf},Ii={TEST_ONLY:bB};Ii.alert=bo,Ii.confirm=fl,Ii.prompt=$l,Ii.setAlert=Df,Ii.setConfirm=Of,Ii.setPrompt=Lf;var Ed,vB;i.Msg$$module$build$src$core$msg=Object.create(null),Ed=function(e){Object.keys(e).forEach(function(t){i.Msg$$module$build$src$core$msg[t]=e[t]})},vB={Msg:i.Msg$$module$build$src$core$msg,setLocale:Ed};var Xo=class extends _s{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Xo),t.varId=e.varId,t}},yd=class extends Xo{constructor(e){super(e),this.type=rr,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new yd),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)}};n(M.EVENT,rr,yd);var Yo=class{constructor(e,t,A,o){this.workspace=e,this.name=t,this.type=A||"",this.id_=o||C()}getId(){return this.id_}static compareByName(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}},Id="VARIABLE",Td="ijkmnopqrstuvwxyzabcdefgh",EB={generateUniqueNameInternal:Mf},_t={CATEGORY_NAME:Id,TEST_ONLY:EB,VAR_LETTER_OPTIONS:Td};_t.allDeveloperVariables=i.allDeveloperVariables$$module$build$src$core$variables,_t.allUsedVarModels=i.allUsedVarModels$$module$build$src$core$variables,_t.createVariableButtonHandler=Zi,_t.flyoutCategory=ml,_t.flyoutCategoryBlocks=mu,_t.generateUniqueName=Bu,_t.generateUniqueNameFromOptions=Bl,_t.generateVariableFieldDom=ui,_t.getAddedVariables=vo,_t.getOrCreateVariablePackage=i.getOrCreateVariablePackage$$module$build$src$core$variables,_t.getVariable=i.getVariable$$module$build$src$core$variables,_t.nameUsedWithAnyType=wu,_t.nameUsedWithConflictingParam=_u,_t.promptName=wl,_t.renameVariable=i.renameVariable$$module$build$src$core$variables;var nc=new Set,kd=new WeakSet,Sd=new WeakMap,vs=null,Fd=null,yB=0,lc={};lc.finishQueuedRenders=kA,lc.queueRender=Cu,lc.triggerQueuedRenders=qA;var cc=class{constructor(e,t){this.workspace=e,this.text="",this.size=new pe(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new N(0,0),this.disposing=this.disposed=!1,this.id=t&&!e.getCommentById(t)?t:C(),e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){x()&&_(new(L(sr))(this))}fireDeleteEvent(){x()&&_(new(L(Bs))(this))}fireChangeEvent(e,t){x()&&_(new(L(ws))(this,e,t))}fireCollapseEvent(e){x()&&_(new(L(No))(this,e))}setText(e){const t=this.text;this.text=e,this.fireChangeEvent(t,e)}getText(){return this.text}setSize(e){this.size=e}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(e,t){const A=new(L(or))(this);t&&A.setReason(t),this.location=e,A.recordNew(),x()&&_(A)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},Es=50,Ud=100,IB=class{constructor(e){this.workspace=e,this.size=new pe(120,100),this.collapsed=!1,this.editable=!0,this.location=new N(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=R(y.G,{class:"blocklyComment blocklyEditable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,e),{foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let t;(t=e.getLayerManager())==null||t.append(this,Es),this.setSize(this.size),this.moveTo(new N(0,0))}createHighlightRect(e){return R(y.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e,t){e=R(y.G,{class:"blocklyCommentTopbar"},e);const A=R(y.RECT,{class:"blocklyCommentTopbarBackground"},e),o=R(y.IMAGE,{class:"blocklyDeleteIcon",href:`${t.options.pathToMedia}delete-icon.svg`},e);t=R(y.IMAGE,{class:"blocklyFoldoutIcon",href:`${t.options.pathToMedia}foldout-icon.svg`},e);const l=R(y.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),u=document.createTextNode("");return l.appendChild(u),j(t,"pointerdown",this,this.onFoldoutDown),j(o,"pointerdown",this,this.onDeleteDown),{topBarGroup:e,topBarBackground:A,deleteIcon:o,foldoutIcon:t,textPreview:l,textPreviewNode:u}}createTextArea(e){e=R(y.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},e);const t=document.createElementNS(LA,"body");t.setAttribute("xmlns",LA),t.className="blocklyMinimalBody";const A=document.createElementNS(LA,"textarea");return q(A,"blocklyCommentText"),q(A,"blocklyTextarea"),q(A,"blocklyText"),t.appendChild(A),e.appendChild(t),j(A,"change",this,this.onTextChange),{foreignObject:e,textArea:A}}createResizeHandle(e,t){return e=R(y.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),j(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSize(e){const t=this.topBarBackground.getBBox(),A=this.deleteIcon.getBBox(),o=this.foldoutIcon.getBBox(),l=this.textPreview.getBBox(),u=this.resizeHandle.getBBox();e=pe.max(e,this.calcMinSize(t,o,A));const m=this.size;this.size=e,this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.updateTextAreaSize(e,t),this.updateDeleteIconPosition(e,t,A),this.updateFoldoutIconPosition(t,o),this.updateTextPreviewSize(e,t,l,A,u),this.updateResizeHandlePosition(e,u),this.onSizeChange(m,this.size)}calcMinSize(e,t,A){var o;this.updateTextPreview((o=this.textArea.value)!=null?o:""),o=lu(this.textPreview);const l=this.calcFoldoutMargin(e,t),u=this.calcDeleteMargin(e,A);let m=o;return this.foldoutIcon.checkVisibility()?m+=t.width+2*l:o&&(m+=4),this.deleteIcon.checkVisibility()?m+=A.width+2*u:o&&(m+=4),new pe(m,e.height+20)}calcDeleteMargin(e,t){return(e.height-t.height)/2}calcFoldoutMargin(e,t){return(e.height-t.height)/2}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextAreaSize(e,t){this.foreignObject.setAttribute("height",`${e.height-t.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${t.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}updateDeleteIconPosition(e,t,A){t=this.calcDeleteMargin(t,A),this.deleteIcon.setAttribute("y",`${t}`),this.deleteIcon.setAttribute("x",`${e.width-A.width-t}`)}updateFoldoutIconPosition(e,t){e=this.calcFoldoutMargin(e,t),this.foldoutIcon.setAttribute("y",`${e}`),this.foldoutIcon.setAttribute("x",`${e}`)}updateTextPreviewSize(e,t,A,o,l){const u=(t.height-A.height)/2,m=this.calcDeleteMargin(t,o);t=this.calcFoldoutMargin(t,l),e=e.width-l.width-2*t-o.width-2*m,this.textPreview.setAttribute("x",`${l.width+2*t*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${u+A.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,t){this.resizeHandle.setAttribute("y",`${e.height-t.height}`),this.resizeHandle.setAttribute("x",`${e.width-t.width}`)}onSizeChange(e,t){for(let A=this.sizeChangeListeners.length-1;0<=A;A--)this.sizeChangeListeners[A](e,t)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),Oe(e)||(this.workspace.startDrag(e,new N(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=j(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=j(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){nt(),this.resizePointerUpListener&&(ue(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(ue(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=this.workspace.moveDrag(e),this.setSize(new pe(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?q(this.svgRoot,"blocklyCollapsed"):Fe(this.svgRoot,"blocklyCollapsed"),this.setSize(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;0<=e;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}onFoldoutDown(e){this.bringToFront(),Oe(e)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),e.stopPropagation()}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(q(this.svgRoot,"blocklyEditable"),Fe(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(Fe(this.svgRoot,"blocklyEditable"),q(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}onTextChange(){const e=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let t=this.textChangeListeners.length-1;0<=t;t--)this.textChangeListeners[t](e,this.text)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return 12<=e.length?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,t=e.childNodes;t[t.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){Oe(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,ve(this.svgRoot);for(let e=this.disposeListeners.length-1;0<=e;e--)this.disposeListeners[e]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}};jA(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  cursor: grab;
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var TB=class{constructor(e){this.comment=e,this.startLoc=null,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.workspace.options.readOnly}startDrag(){i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,Es),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),i.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(L(or))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),_(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},kB=100,SB=75,FB=50,UB=25,Tv={BLOCKS:FB,PROCEDURES:SB,VARIABLES:kB,WORKSPACE_COMMENTS:UB},Rd={};Rd.register=Eo,Rd.unregister=Wf;var RB=class{constructor(){this.priority=UB}save(e){const t=[];for(const A of e.getTopComments())(e=es(A,{addCoordinates:!0,saveIds:!0}))&&t.push(e);return t.length?t:null}load(e,t){for(const A of e)yo(A,t,{recordUndo:v()})}clear(e){for(const t of e.getTopComments())t.dispose()}};Eo("workspaceComments",new RB);var ac={};ac.WorkspaceCommentSerializer=RB,ac.append=yo,ac.save=es;var Dd={};Dd.register=Cl,Dd.unregister=zf;var uc=class{paste(e,t,A){e=e.commentState,A&&(e.x=A.x,e.y=A.y),i.disable$$module$build$src$core$events$utils();let o;try{o=yo(e,t),Xf(o)}finally{i.enable$$module$build$src$core$events$utils()}return o?(x()&&_(new(L(sr))(o)),i.setSelected$$module$build$src$core$common(o),o):null}};uc.TYPE="workspace-comment",Cl(uc.TYPE,new uc);var xd;xd=28,i.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:xd,connectingSnapRadius:xd,currentConnectionPreference:8,bumpDelay:250},i.config$$module$build$src$core$config;var kv="aria-",Sv="role",fA;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(fA||(fA={}));var ut;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(ut||(ut={}));var Jo={};Jo.Role=fA,Jo.State=ut,Jo.setRole=Tr,Jo.setState=gt;var Od=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName&&Tr(t,this.roleName),this.element=t;for(let A=0,o;o=this.menuItems[A];A++)t.appendChild(o.createDom());return this.mouseOverHandler=j(t,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=j(t,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=j(t,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=j(t,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=j(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),q(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),Fe(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(ue(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(ue(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(ue(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(ue(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(ue(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){for(let A=0,o;o=this.menuItems[A];A++)if(o.getElement()===e)return o}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;t&&(t.setHighlighted(!1),this.highlightedItem=null),e&&(e.setHighlighted(!0),this.highlightedItem=e,t=this.getElement(),nl(e.getElement(),t),gt(t,ut.ACTIVEDESCENDANT,e.getId()))}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let A;for(;A=this.menuItems[e];){if(A.isEnabled()){this.setHighlighted(A);break}e+=t}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const A=new N(e.clientX,e.clientY);if(1>N.distance(t,A))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=wo(e);return t.height=e.scrollHeight,t}},Ld=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=w(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var A=document.createElement("div");A.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(A)}return A=this.content,typeof this.content=="string"&&(A=document.createTextNode(this.content)),t.appendChild(A),e.appendChild(t),this.roleName&&Tr(e,this.roleName),gt(e,ut.SELECTED,this.checkable&&this.checked||!1),gt(e,ut.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?(q(t,"blocklyMenuItemHighlight"),q(t,"goog-menuitem-highlight")):(Fe(t,"blocklyMenuItemHighlight"),Fe(t,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,t){this.actionHandler=e.bind(t)}},ys=class extends Error{},DB=class extends ys{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},jo=class extends ys{constructor(e,t,A){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=A}},xB=class extends ys{constructor(e,t,A,o){super(`The block ${A.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=A,this.childState=o}},OB=class extends ys{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},LB=class extends ys{constructor(e,t,A){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=A}},Ti={};Ti.BadConnectionCheck=xB,Ti.DeserializationError=ys,Ti.MissingBlockType=DB,Ti.MissingConnection=jo,Ti.RealChildOfShadow=OB,Ti.UnregisteredIcon=LB;var QB=class{constructor(){this.priority=FB}save(e){const t=[];for(const A of e.getTopBlocks(!1))(e=zt(A,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const A of e)ZA(A,t,{recordUndo:v()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};Eo("blocks",new QB);var qo={};qo.BlockSerializer=QB,qo.append=ZA,qo.appendInternal=ts,qo.save=zt;var ki=class extends _s{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new ki),t.blockId=e.blockId,t}},Si=class extends ki{constructor(e,t,A,o,l){super(e),this.type=i.CHANGE$$module$build$src$core$events$utils,e&&(this.element=t,this.name=A||void 0,this.oldValue=o,this.newValue=l)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Si),t.element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,e.disabledReason!==void 0&&(t.disabledReason=e.disabledReason),t}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const A=t.getIcon(tt.MUTATOR);switch(A&&As(A)&&A.bubbleIsVisible()&&A.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":var o;t.setDisabledReason(!!e,(o=this.disabledReason)!=null?o:tA);break;case"inline":t.setInputsInline(!!e);break;case"mutation":o=Si.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(i.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),_(new Si(t,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?FA(e):""}};n(M.EVENT,i.CHANGE$$module$build$src$core$events$utils,Si);var hc={};hc.clamp=rs,hc.toDegrees=d$,hc.toRadians=bl;var Zo=16,Qd=1,MB=12,Md=16,dc=.25,Nd=null,Fi=null,Is="",Ts="",Be,ks,Ui,Hd=null,Qr=null,NB=null,Pd={getBoundsInfo:function(){const e=Ir(Hd),t=wo(Hd);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,A,o){const l=Pd.getBoundsInfo(),u=wo(Be);return t+u.height<l.bottom?Qu(e,t,l,u):o-u.height>l.top?Mu(A,o,l,u):t+u.height<document.documentElement.clientHeight?Qu(e,t,l,u):o-u.height>document.documentElement.clientTop?Mu(A,o,l,u):g$(e,l,u)}},vt={ANIMATION_TIME:dc,ARROW_HORIZONTAL_PADDING:MB,ARROW_SIZE:Zo,BORDER_SIZE:Qd,PADDING_Y:Md,TEST_ONLY:Pd};vt.clearContent=El,vt.createDom=ku,vt.getContentDiv=vl,vt.getOwner=Fu,vt.getPositionX=To,vt.hide=Il,vt.hideIfOwner=yl,vt.hideWithoutAnimation=SA,vt.isVisible=Nu,vt.repositionForWindowResize=Pu,vt.setBoundsElement=Su,vt.setColour=Uu,vt.show=Lu,vt.showPositionedByBlock=p$,vt.showPositionedByField=Ru;var en=class{constructor(e){this.workspace=e,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),t.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let t=0,A;A=e[t];t++)this.unregisterMarker(A);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};en.LOCAL_MARKER="local_marker_1";var Ss={};Ss.commonWordPrefix=Gu,Ss.commonWordSuffix=Vu,Ss.isNumber=i.isNumber$$module$build$src$core$utils$string,Ss.shortestStringLength=ko,Ss.wrap=i.wrap$$module$build$src$core$utils$string;var pc=void 0,tn=!1,Fs=!1,HB=50,PB=0,Ri=0,Gd=0,Vd=0,AA=null,An=null,Kd=0,Wd=10,GB=10,VB=750,gc=5,At=null,Yt={HOVER_MS:VB,LIMIT:HB,MARGINS:gc,OFFSET_X:Kd,OFFSET_Y:Wd,RADIUS_OK:GB};Yt.bindMouseEvents=ss,Yt.block=Ju,Yt.createDom=zu,Yt.dispose=Yu,Yt.getCustomTooltip=B$,Yt.getDiv=_$,Yt.getTooltipOfObject=is,Yt.hide=er,Yt.isVisible=w$,Yt.setCustomTooltip=m$,Yt.unbindMouseEvents=kl,Yt.unblock=ju;var zd=.45,Xd=.65,KB={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},rA={};rA.blend=di,rA.getHsvSaturation=qu,rA.getHsvValue=Zu,rA.hexToRgb=Sl,rA.hsvToHex=Fl,rA.hueToHex=eh,rA.names=KB,rA.parse=hi,rA.rgbToHex=So,rA.setHsvSaturation=T$,rA.setHsvValue=k$;var rn={};rn.checkMessageReferences=S$,rn.parseBlockColour=os,rn.replaceMessageReferences=ze,rn.tokenizeInterpolation=th;var Se=class{constructor(e,t,A){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new pe(0,0),e!==Se.SKIP_SETUP&&(A&&this.configure_(A),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(ze(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=R(y.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=R(y.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=R(y.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");ss(e),this.mouseDownWrapper_=j(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(Se),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(Se,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=i.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),ji(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(i.textToDom$$module$build$src$core$utils$xml(t)),!0):!1}dispose(){yl(this),pi(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||ve(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(q(e,"blocklyEditableText"),Fe(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(q(e,"blocklyNonEditableText"),Fe(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Se.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let A=2*e,o=t.FIELD_TEXT_HEIGHT,l=0;this.textElement_&&(l=Bo(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY),A+=l),this.isFullBlockField()||(o=Math.max(o,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=o,this.size_.width=A,this.positionTextElement_(e,l),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var A=this.getConstants(),o=this.size_.height/2,l;this.textElement_.setAttribute("x",String((l=this.getSourceBlock())!=null&&l.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(A.FIELD_TEXT_BASELINE_CENTER?o:o-A.FIELD_TEXT_HEIGHT/2+A.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new pe(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new Je;if(this.isFullBlockField()){var A=this.sourceBlock_.getHeightWidth();const o=t.workspace.scale;e=this.getAbsoluteXY_(),t=(A.width+1)*o,A=(A.height+1)*o,nB?(e.x+=1.5*o,e.y+=1.5*o):(e.x-=.5*o,e.y-=.5*o)}else A=this.borderRect_.getBoundingClientRect(),e=Ir(this.borderRect_),t=A.width,A=A.height;return new ke(e.y,e.y+A,e.x,e.x+t)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,Se.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e):Se.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,t=!0){if(e!==null){var A=this.doClassValidation_(e);if(e=this.processValidation_(e,A,t),!(e instanceof Error)){var o;A=(o=this.getValidator())==null?void 0:o.call(this,e),o=this.processValidation_(e,A,t),o instanceof Error||(e=this.sourceBlock_,e&&e.disposed||(A=this.getValue(),A===o?this.doValueUpdate_(o):(this.doValueUpdate_(o),t&&e&&x()&&_(new(L(i.CHANGE$$module$build$src$core$events$utils))(e,"field",this.name||null,A,o)),this.isDirty_&&this.forceRerender())))}}}processValidation_(e,t,A){return t===null?(this.doValueInvalid_(e,A),this.isDirty_&&this.forceRerender(),Error()):t===void 0?e:t}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,t){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip_=e}getTooltip(){const e=this.getClickTarget_();return is(e||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Ir(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new Je;const A=t.inputList;for(let o=0;o<t.inputList.length;o++){const l=A[o],u=l.fieldRow;for(let m=0;m<u.length;m++)if(u[m]===this){e=l;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg_=e}else this.cursorSvg_=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg_=e}else this.markerSvg_=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new Je;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(en.LOCAL_MARKER).draw()}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};Se.NBSP="",Se.SKIP_SETUP=Symbol("SKIP_SETUP");var Je=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},Us=null,Yd=null,fc=null,$c="blocklyWidgetDiv",Rs="",Ds="",$A,mA={};mA.createDom=Ah,mA.getDiv=ns,mA.hide=ls,mA.hideIfOwner=pi,mA.hideIfOwnerIsInWorkspace=Fo,mA.isVisible=rh,mA.positionWithAnchor=sh,mA.repositionForWindowResize=oh,mA.show=Rl,mA.testOnly_setDiv=F$;var mc=null,WB={},Bc=null,Di={};Di.callbackFactory=i.callbackFactory$$module$build$src$core$contextmenu,Di.dispose=lh,Di.getCurrentBlock=x$,Di.hide=Ro,Di.setCurrentBlock=nh,Di.show=Uo;var le=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(e){if(this.registry_.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_.set(e.id,e)}unregister(e){if(!this.registry_.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registry_.delete(e)}getItem(e){let t;return(t=this.registry_.get(e))!=null?t:null}getContextMenuOptions(e,t){const A=[];for(const l of this.registry_.values())if(e===l.scopeType){var o=l.preconditionFn(t);o!=="hidden"&&(o={text:typeof l.displayText=="function"?l.displayText(t):l.displayText,enabled:o==="enabled",callback:l.callback,scope:t,weight:l.weight},A.push(o))}return A.sort(function(l,u){return l.weight-u.weight}),A}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",t.COMMENT="comment",e.registry=new e})(le||(le={})),le.ScopeType;var wc=class extends cc{constructor(e,t){super(e,t),this.dragStrategy=new TB(this),this.workspace=e,this.view=new IB(e),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.addModelUpdateBindings(),j(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),j(this.view.getSvgRoot(),"wheel",this,A=>{A.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((e,t)=>void super.setText(t)),this.view.addSizeChangeListener((e,t)=>void super.setSize(t)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var t,A;const o=(A=(t=this.view)==null?void 0:t.getSize())!=null?A:this.getSize();return this.workspace.RTL?(t=e.x-o.width,A=e.x):(t=e.x,A=e.x+o.width),new ke(e.y,e.y+o.height,t,A)}moveBy(e,t,A){const o=this.getRelativeToSurfaceXY();e=new N(o.x+e,o.y+t),this.moveTo(e,A)}moveTo(e,t){super.moveTo(e,t),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?q(this.getSvgRoot(),"blocklyDragging"):Fe(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const t=this.workspace.getGesture(e);t&&(t.handleCommentStart(e,this),i.setSelected$$module$build$src$core$common(this))}setDeleteStyle(e){e?q(this.getSvgRoot(),"blocklyDraggingDelete"):Fe(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){q(this.getSvgRoot(),"blocklySelected")}unselect(){Fe(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:uc.TYPE,commentState:es(this,{addCoordinates:!0})}}showContextMenu(e){const t=le.registry.getContextMenuOptions(le.ScopeType.COMMENT,{comment:this});Uo(e,t,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}},Et={};Et.appendDomToWorkspace=K$,Et.blockToDom=kr,Et.blockToDomWithXY=xo,Et.clearWorkspaceAndLoadFromXml=V$,Et.deleteNext=em,Et.domToBlock=i.domToBlock$$module$build$src$core$xml,Et.domToBlockInternal=gi,Et.domToPrettyText=G$,Et.domToText=FA,Et.domToVariables=hh,Et.domToWorkspace=i.domToWorkspace$$module$build$src$core$xml,Et.loadWorkspaceComment=uh,Et.saveWorkspaceComment=Do,Et.variablesToDom=ch,Et.workspaceToDom=N$;var Jd=class extends ki{constructor(e){super(e),this.type=i.CREATE$$module$build$src$core$events$utils,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=xo(e),this.ids=H(e),this.json=zt(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=FA(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Jd),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!Fv(t,this.ids))if(e)ZA(this.json,t);else for(e=0;e<this.ids.length;e++){const A=this.ids[e],o=t.getBlockById(A);o?o.dispose(!1):A===this.blockId&&console.warn("Can't uncreate non-existent block: "+A)}}},Fv=function(e,t){return t.map(A=>e.getBlockById(A)).filter(A=>A&&A.isShadow()).length===t.length};n(M.EVENT,i.CREATE$$module$build$src$core$events$utils,Jd);var jd=class extends OA{constructor(e,t){super(t),this.type=ms,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new jd),t.themeName=e.themeName,t}};n(M.EVENT,ms,jd);var qd=class extends OA{constructor(e,t,A,o,l){super(o),this.type=Dr,this.viewTop=e,this.viewLeft=t,this.scale=A,this.oldScale=l}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new qd),t.viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};n(M.EVENT,Dr,qd);var K;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(K||(K={}));var xs=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const A=this.calculateIndexForYPos(t);if(A>=this.connections.length)return-1;t=e.y;let o=A;for(;0<=o&&this.connections[o].y===t;){if(this.connections[o]===e)return o;o--}for(o=A;o<this.connections.length&&this.connections[o].y===t;){if(this.connections[o]===e)return o;o++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,A=this.connections.length;for(;t<A;){const o=Math.floor((t+A)/2);if(this.connections[o].y<e)t=o+1;else if(this.connections[o].y>e)A=o;else{t=o;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function A(V){const De=l-o[V].x,Ue=u-o[V].y;return Math.sqrt(De*De+Ue*Ue)<=t&&T.push(o[V]),Ue<t}const o=this.connections,l=e.x,u=e.y;e=0;let m=o.length-2,b=m;for(;e<b;)o[b].y<u?e=b:m=b,b=Math.floor((e+m)/2);const T=[];if(m=e=b,o.length){for(;0<=e&&A(e);)e--;do m++;while(m<o.length&&A(m))}return T}isInYRange(e,t,A){return Math.abs(this.connections[e].y-t)<=A}searchForClosest(e,t,A){if(!this.connections.length)return{connection:null,radius:t};const o=e.y,l=e.x;e.x=l+A.x,e.y=o+A.y;var u=this.calculateIndexForYPos(e.y);A=null;let m=t,b,T=u-1;for(;0<=T&&this.isInYRange(T,e.y,t);)b=this.connections[T],this.connectionChecker.canConnect(e,b,!0,m)&&(A=b,m=b.distanceFrom(e)),T--;for(;u<this.connections.length&&this.isInYRange(u,e.y,t);)b=this.connections[u],this.connectionChecker.canConnect(e,b,!0,m)&&(A=b,m=b.distanceFrom(e)),u++;return e.x=l,e.y=o,{connection:A,radius:m}}static init(e){const t=[];return t[K.INPUT_VALUE]=new xs(e),t[K.OUTPUT_VALUE]=new xs(e),t[K.NEXT_STATEMENT]=new xs(e),t[K.PREVIOUS_STATEMENT]=new xs(e),t}},_c=null,sn=null,on={};on.connectionUiEffect=Ol,on.disconnectUiEffect=fh,on.disconnectUiStop=cs,on.disposeUiEffect=xl;var zB=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new N(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){ne()&&ne().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=N.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},Uv=5,Rv=6,ur=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new N(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new N(0,0)}dispose(){nt(),ju(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)ue(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new N(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(e),We()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=N.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=N.magnitude(this.currentDragDeltaXY)>(this.flyout?i.config$$module$build$src$core$config.flyoutDragRadius:i.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),i.setSelected$$module$build$src$core$common(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new zB(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const t=ne();t&&fi(t)&&t.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(t,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,t){return new(B(M.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,t)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,Te(e)?this.cancel():(this.gestureHasStarted=!0,cs(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=Fu(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,Ju(),Oe(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&Nt(e,this),this.mouseDownXY=new N(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(j(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(j(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(j(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&We())}handleMove(e){this.isDragging()&&lt(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),We())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!lt(e))return;if(this.updateFromEvent(e),We(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=Ht(e);this.cachedPoints.set(t,this.getTouchPoint(e));var A=Array.from(this.cachedPoints.keys());A.length===2&&(t=this.cachedPoints.get(A[0]),A=this.cachedPoints.get(A[1]),this.startDistance=N.distance(t,A),this.isMultiTouch_=!0,e.preventDefault())}handleTouchMove(e){const t=Ht(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):this.handleMove(e)}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),A=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),A=N.distance(A,t)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(t=A-this.previousScale,t=0<t?t*Uv:t*Rv,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const o=this.startWorkspace_,l=St(e,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(l.x,l.y,t)}this.previousScale=A,e.preventDefault()}handleTouchEnd(e){e=Ht(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new N(e.pageX,e.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(We(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment||i.setSelected$$module$build$src$core$common(null),this.doStart(e)}fireWorkspaceClick(e){_(new(L(ir))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}handleCommentStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(t),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(L(ir))(this.startBlock,this.startWorkspace_.id,"block"),_(e)}this.bringBlockToFront(),i.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,ne()&&ne().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,i.setSelected$$module$build$src$core$common(this.startBlock),e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,t;return(t=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?t:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=me();for(let t=0,A;A=e[t];t++)if(A.currentGesture_)return!0;return!1}},Zd=class{constructor(e,t){this.pattern=e,this.scale=1;let A;this.spacing=(A=t.spacing)!=null?A:0;let o;this.length=(o=t.length)!=null?o:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let l;this.snapToGrid=(l=t.snap)!=null?l:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`),t=Math.floor(this.spacing/2)+.5;let A=t-this.length/2,o=t+this.length/2;t*=e,A*=e,o*=e,this.setLineAttributes(this.line1,e,A,o,t,t),this.setLineAttributes(this.line2,e,t,t,A,o)}setLineAttributes(e,t,A,o,l,u){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${A}`),e.setAttribute("y1",`${l}`),e.setAttribute("x2",`${o}`),e.setAttribute("y2",`${u}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}alignXY(e){var t=this.getSpacing();const A=t/2,o=Math.round(Math.round((e.x-A)/t)*t+A);return t=Math.round(Math.round((e.y-A)/t)*t+A),o===e.x&&t===e.y?e:new N(o,t)}static createDom(e,t,A){e=R(y.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},A);let o,l;if(0<((o=t.length)!=null?o:1)&&0<((l=t.spacing)!=null?l:0)){R(y.LINE,{stroke:t.colour},e);let u;(u=t.length)!=null&&u&&R(y.LINE,{stroke:t.colour},e)}else R(y.LINE,{},e);return e}},XB={};XB.deepMerge=tr;var xi=class{constructor(e,t,A,o){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=A||Object.create(null),this.componentStyles=o||Object.create(null),this.fontStyle=Object.create(null),n(M.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const A=new xi(e);let o=t.base;if(o){if(typeof o=="string"){let l;o=(l=g(M.THEME,o))!=null?l:void 0}o instanceof xi&&(tr(A,o),A.name=e)}return tr(A.blockStyles,t.blockStyles),tr(A.categoryStyles,t.categoryStyles),tr(A.componentStyles,t.componentStyles),tr(A.fontStyle,t.fontStyle),t.startHats!==null&&(A.startHats=t.startHats),A}},Dv={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},xv={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Cc=new xi("classic",Dv,xv),iA=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,A=!1;var o=!1,l=!1,u=!1,m=!1,b=!1;const T=!!e.readOnly;if(!T){var V;t=cl((V=e.toolbox)!=null?V:null),A=al(t),o=e.trashcan,o=o===void 0?A:o,l=e.collapse,l=l===void 0?A:l,u=e.comments,u=u===void 0?A:u,m=e.disable,m=m===void 0?A:m,b=e.sounds,b=b===void 0?!0:b}V=e.maxTrashcanContents,o?V===void 0&&(V=32):V=0;const De=!!e.rtl;let Ue=e.horizontalLayout;Ue===void 0&&(Ue=!1);var Vt=e.toolboxPosition!=="end";Vt=Ue?Vt?se.TOP:se.BOTTOM:Vt===De?se.RIGHT:se.LEFT;let Ks=e.css;Ks===void 0&&(Ks=!0);let Bn="https://blockly-demo.appspot.com/static/media/";e.media&&(Bn=e.media.endsWith("/")?e.media:e.media+"/");const Zw=e.oneBasedIndex,pE=e.renderer||"geras",gE=e.plugins||{};let Wp=e.modalInputs;Wp===void 0&&(Wp=!0),this.RTL=De,this.oneBasedIndex=Zw===void 0?!0:Zw,this.collapse=l,this.comments=u,this.disable=m,this.readOnly=T,this.maxBlocks=e.maxBlocks||1/0;let e_;this.maxInstances=(e_=e.maxInstances)!=null?e_:null,this.modalInputs=Wp,this.pathToMedia=Bn,this.hasCategories=A,this.moveOptions=iA.parseMoveOptions_(e,A),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=o,this.maxTrashcanContents=V,this.hasSounds=b,this.hasCss=Ks,this.horizontalLayout=Ue,this.languageTree=t,this.gridOptions=iA.parseGridOptions_(e),this.zoomOptions=iA.parseZoomOptions_(e),this.toolboxPosition=Vt,this.theme=iA.parseThemeOptions_(e),this.renderer=pE;let t_;this.rendererOverrides=(t_=e.rendererOverrides)!=null?t_:null;let A_;this.parentWorkspace=(A_=e.parentWorkspace)!=null?A_:null,this.plugins=gE}static parseMoveOptions_(e,t){const A=e.move||{},o={};return A.scrollbars===void 0&&e.scrollbars===void 0?o.scrollbars=t:typeof A.scrollbars=="object"?(o.scrollbars={horizontal:!!A.scrollbars.horizontal,vertical:!!A.scrollbars.vertical},o.scrollbars.horizontal&&o.scrollbars.vertical?o.scrollbars=!0:o.scrollbars.horizontal||o.scrollbars.vertical||(o.scrollbars=!1)):o.scrollbars=!!A.scrollbars||!!e.scrollbars,o.wheel=o.scrollbars&&A.wheel!==void 0?!!A.wheel:typeof o.scrollbars=="object",o.drag=o.scrollbars?A.drag===void 0?!0:!!A.drag:!1,o}static parseZoomOptions_(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions_(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t}static parseThemeOptions_(e){return e=e.theme||Cc,typeof e=="string"?g(M.THEME,e):e instanceof xi?e:xi.defineTheme(e.name||"builtin"+w(),e)}};i.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=i.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),i.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let A=e;t===i.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(A=e),e=A.toLowerCase();const o=t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const l=this.db.get(t);return l.has(e)?o+l.get(e):(t=this.getDistinctName(A,t),l.set(e,t.substr(o.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let A=null,o,l;for(;this.dbReverse.has(e+((o=A)!=null?o:""))||this.reservedWords.has(e+((l=A)!=null?l:""));)A=A?A+1:2;let u;return e+=(u=A)!=null?u:"",this.dbReverse.add(e),(t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=i.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(i.Names$$module$build$src$core$names||(i.Names$$module$build$src$core$names={})),i.NameType$$module$build$src$core$names=i.Names$$module$build$src$core$names.NameType,i.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,i.NameType$$module$build$src$core$names,i.Names$$module$build$src$core$names;var YB=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t?this:(super.set(e,t),Ll(t)&&t.startPublishing(),this)}delete(e){const t=this.get(e);return e=super.delete(e),e&&(Ll(t)&&t.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},bc=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new N(0,0),this.workspaceLocation=new N(0,0),this.svgRoot=null,this.tooltip=e}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=R(y.G,{class:"blocklyIconGroup"}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),j(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,ss(this.svgRoot)}}dispose(){kl(this.svgRoot),ve(this.svgRoot)}getWeight(){return-1}getSize(){return new pe(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",As(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=N.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}},JB={fromJsonInternal:Am},vc={TEST_ONLY:JB};vc.fromJson=i.fromJson$$module$build$src$core$field_registry,vc.register=UA,vc.unregister=tm;var QA=class extends Se{constructor(e,t,A){super(Se.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==Se.SKIP_SETUP&&(Array.isArray(e)?(mh(e),e=rm(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],A&&this.configure_(A),this.setValue(this.selectedOption[1]),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(QA,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=R(y.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&q(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=R(y.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?QA.ARROW_CHAR+" ":" "+QA.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=R(y.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(Xt,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new Je;this.dropdownCreate(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new N(e.clientX,e.clientY):null,El(),e=this.menu_.render(vl()),q(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=t.getColour(),Uu(t,this.sourceBlock_.style.colourTertiary)),Ru(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),nl(this.selectedMenuItem.getElement(),vl(),!0)),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new Je;const t=new Od;t.setRole(fA.LISTBOX),this.menu_=t;const A=this.getOptions(!1);this.selectedMenuItem=null;for(let l=0;l<A.length;l++){const[u,m]=A[l];if(typeof u=="object"){var o=new Image(u.width,u.height);o.src=u.src,o.alt=u.alt||""}else o=u;o=new Ld(o,m),o.setRole(fA.OPTION),o.setRightToLeft(e.RTL),o.setCheckable(!0),t.addChild(o),o.setChecked(m===this.value_),m===this.value_&&(this.selectedMenuItem=o),o.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){yl(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),mh(this.generatedOptions),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,A;A=e[t];t++)A[1]===this.value_&&(this.selectedOption=A)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",e.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=e.colourSecondary:this.arrow.style.fill=e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&typeof e=="object"?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new Je;this.imageElement.style.display="",this.imageElement.setAttributeNS(Xt,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const A=Number(e.height);e=Number(e.width);var o=!!this.borderRect_;const l=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,A+Lv);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let u;u=this.svgArrow?this.positionSVGArrow(e+o,l/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Bo(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+u+2*o,this.size_.height=l;let m=0;t.RTL?this.imageElement.setAttribute("x",`${o+u}`):(m=e+u,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${o}`)),this.imageElement.setAttribute("y",String(l/2-A/2)),this.positionTextElement_(m+o,e+u)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();q(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const A=Bo(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let o=0;this.svgArrow&&(o=this.positionSVGArrow(A+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=A+o+2*t,this.size_.height=e,this.positionTextElement_(t,A)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const A=this.getSourceBlock();if(!A)throw new Je;const o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,l=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,u=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(A.RTL?o:e+l)+","+t+")"),u+l}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}};QA.CHECKMARK_OVERHANG=25,QA.MAX_MENU_HEIGHT_VH=.45,QA.ARROW_CHAR="";var Ov=5,Lv=2*Ov;UA("field_dropdown",QA);var jB=class{constructor(e,t){this.bubble=e,this.workspace=t,this.startLoc=null}isMovable(){return!0}startDrag(){i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0),i.setGroup$$module$build$src$core$events$utils(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,Ud),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},Jt,Ee=class{constructor(e,t,A){this.workspace=e,this.anchor=t,this.ownerRect=A,this.size=new pe(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new jB(this,this.workspace),this.id=w(),this.svgRoot=R(y.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=R(y.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=R(y.PATH,{class:"blocklyBubbleTail"},e),this.background=R(y.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Jt.BORDER_WIDTH,ry:Jt.BORDER_WIDTH},e),this.contentContainer=R(y.G,{},this.svgRoot),j(this.background,"pointerdown",this,this.onMouseDown)}dispose(){ve(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,Jt.MIN_SIZE),e.height=Math.max(e.height,Jt.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;(t=this.workspace.getGesture(e))==null||t.handleBubbleStart(e,this),i.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new ke(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),A=this.getOptimalRelativeLeft(t),o=this.getOptimalRelativeTop(t);const l={x:A,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},u={x:-this.size.width-30,y:o};o={x:e.getWidth(),y:o};var m={x:A,y:e.getHeight()};A=e.getWidth()<e.getHeight()?o:m,e=e.getWidth()<e.getHeight()?m:o,o=this.getOverlap(l,t),m=this.getOverlap(u,t);const b=this.getOverlap(A,t);t=this.getOverlap(e,t),t=Math.max(o,m,b,t),o===t?(this.relativeLeft=l.x,this.relativeTop=l.y):m===t?(this.relativeLeft=u.x,this.relativeTop=u.y):b===t?(this.relativeLeft=A.x,this.relativeTop=A.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var A=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(A+this.size.width,t.left+t.width)-Math.max(A,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var A=this.anchor.x-t;A-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):A>e.right&&(t=-(e.right-this.anchor.x))}else{A=t+this.anchor.x;const o=A+this.size.width;A<e.left?t=e.left-this.anchor.x:o>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const A=this.anchor.y+t,o=A+this.size.height;return e=this.getWorkspaceViewRect(e),A<e.top?t=e.top-this.anchor.y:o>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let A=e.top+e.height,o=e.left;return e=e.left+e.width,A-=this.getScrollbarThickness(),this.workspace.RTL?o-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new ke(t,A,o,e)}getScrollbarThickness(){return Ye.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,A=this.size.height/2,o=-this.relativeLeft,l=-this.relativeTop;if(t===o&&A===l)e.push("M "+t+","+A);else{l-=A,o-=t,this.workspace.RTL&&(o*=-1);var u=Math.sqrt(l*l+o*o),m=Math.acos(o/u);0>l&&(m=2*Math.PI-m);var b=m+Math.PI/2;b>2*Math.PI&&(b-=2*Math.PI);var T=Math.sin(b);const De=Math.cos(b);let Ue=(this.size.width+this.size.height)/Jt.TAIL_THICKNESS;Ue=Math.min(Ue,this.size.width,this.size.height)/4,b=1-Jt.ANCHOR_RADIUS/u,o=t+b*o,l=A+b*l,b=t+Ue*De;const Vt=A+Ue*T;t-=Ue*De,A-=Ue*T,T=bl(this.workspace.RTL?-Jt.TAIL_ANGLE:Jt.TAIL_ANGLE),T=m+T,T>2*Math.PI&&(T-=2*Math.PI),m=Math.sin(T)*u/Jt.TAIL_BEND,u=Math.cos(T)*u/Jt.TAIL_BEND,e.push("M"+b+","+Vt),e.push("C"+(b+u)+","+(Vt+m)+" "+o+","+l+" "+o+","+l),e.push("C"+o+","+l+" "+(t+u)+","+(A+m)+" "+t+","+A)}e.push("z");let V;(V=this.tail)==null||V.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&(t==null?void 0:t.lastChild)!==this.svgRoot?(t==null||t.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new N(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};Jt=Ee,Ee.BORDER_WIDTH=6,Ee.DOUBLE_BORDER=2*Jt.BORDER_WIDTH,Ee.MIN_SIZE=Jt.DOUBLE_BORDER,Ee.TAIL_THICKNESS=1,Ee.TAIL_ANGLE=20,Ee.TAIL_BEND=4,Ee.ANCHOR_RADIUS=8;var hr=class extends Ee{constructor(e,t,A,o){super(t,A,o),this.workspace=t,this.anchor=A,this.ownerRect=o,this.autoLayout=!0,t=new iA(e),this.validateWorkspaceOptions(t),this.svgDialog=R(y.SVG,{x:Ee.BORDER_WIDTH,y:Ee.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new iA(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(y.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e==null||e.init(this.miniWorkspace),e==null||e.show(t.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let l,u;(l=this.miniWorkspace.getFlyout())==null||(u=l.getWorkspace())==null||u.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(20>t.y&&e.moveBy(0,20-t.y),e.RTL){let A=-20;const o=this.miniWorkspace.getFlyout();o&&(A-=o.getWidth()),t.x>A&&e.moveBy(A-t.x,0)}else 20>t.x&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<hr.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<hr.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new pe(t.width+Ee.DOUBLE_BORDER,t.height+Ee.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+hr.MARGIN;e=e.height+hr.MARGIN;const A=this.miniWorkspace.getFlyout();if(A){const o=A.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,o.height+20),t+=A.getWidth()}return new pe(t,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=(t=this.miniWorkspace.getFlyout())==null?void 0:t.getWorkspace())for(const A of e.getAllBlocks(!1))A.setStyle(A.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};hr.MINIMUM_VIEW_CHANGE=10,hr.MARGIN=3*Ee.DOUBLE_BORDER;var Ec,yc;Ec=17,yc=16,i.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends bc{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),R(y.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),R(y.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),R(y.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),q(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return i.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new pe(Ec,Ec)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary);let t;(t=this.miniWorkspaceBubble)==null||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let t;(t=this.miniWorkspaceBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const t=this;return Q.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield kA(),e){t.miniWorkspaceBubble=new hr(t.getMiniWorkspaceConfig(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour(),t.createRootBlock(),t.addSaveConnectionsListener();let A;(A=t.miniWorkspaceBubble)==null||A.addWorkspaceChangeListener(t.createMiniWorkspaceChangeListener())}else{let A;(A=t.miniWorkspaceBubble)==null||A.dispose(),t.miniWorkspaceBubble=null,t.saveConnectionsListener&&t.sourceBlock.workspace.removeChangeListener(t.saveConnectionsListener),t.saveConnectionsListener=null}_(new(L(xA))(t.sourceBlock,e,"mutator"))}})}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(A=>({kind:"block",type:A}))}),t}getAnchorLocation(){const e=Ec/2;return N.sum(this.workspaceLocation,new N(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new ke(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let t,A,o,l;e=(l=(t=this.miniWorkspaceBubble)==null||(A=t.getWorkspace())==null||(o=A.getFlyout())==null?void 0:o.getWidth())!=null?l:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+yc):yc,yc)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{i.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||e.type===i.CREATE$$module$build$src$core$events$utils||e.type===i.CHANGE$$module$build$src$core$events$utils&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=i.getGroup$$module$build$src$core$events$utils();e||i.setGroup$$module$build$src$core$events$utils(!0);var t=Si.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var A=Si.getExtraBlockState_(this.sourceBlock);t!==A&&_(new(L(i.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,t,A)),i.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=tt.MUTATOR,i.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,i.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Os=Object.create(null),Qv={allExtensions:Os};i.register$$module$build$src$core$extensions("parent_tooltip_when_inline",hm);var BA={TEST_ONLY:Qv};BA.apply=Ql,BA.buildTooltipForDropdown=i.buildTooltipForDropdown$$module$build$src$core$extensions,BA.buildTooltipWithFieldText=i.buildTooltipWithFieldText$$module$build$src$core$extensions,BA.isRegistered=Bh,BA.register=i.register$$module$build$src$core$extensions,BA.registerMixin=i.registerMixin$$module$build$src$core$extensions,BA.registerMutator=i.registerMutator$$module$build$src$core$extensions,BA.runAfterPageLoad=am,BA.unregister=sm;var qB=new Set,ZB={};ZB.warn=Fr;var ce;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(ce||(ce={}));var dr={};dr.arc=Xe,dr.curve=Pt,dr.line=as,dr.lineOnAxis=W,dr.lineTo=RA,dr.moveBy=Le,dr.moveTo=ct,dr.point=J;var Pe={};Pe.Coordinate=N,Pe.KeyCodes=ce,Pe.Rect=ke,Pe.Size=pe,Pe.Svg=y,Pe.aria=Jo,Pe.array=hB,Pe.browserEvents=nr,Pe.colour=rA,Pe.deprecation=ZB,Pe.dom=ft,Pe.extensions=BA,Pe.idGenerator=ud,Pe.math=hc,Pe.object=XB,Pe.parsing=rn,Pe.string=Ss,Pe.style=xr,Pe.svgMath=Ei,Pe.svgPaths=dr,Pe.toolbox=Or,Pe.userAgent=vv,Pe.xml=Cs;var ep={};ep.register=Ch,ep.unregister=dm;var tp=class extends Ee{constructor(e,t,A,o){super(t,A,o),this.text=e,this.workspace=t,this.anchor=A,this.ownerRect=o,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,ve(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createSpans(t,e),this.workspace.RTL&&this.rightAlignSpans(t.getBBox().width,e),t}createParagraph(e){return R(y.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Ee.BORDER_WIDTH},e)}createSpans(e,t){return t.split(`
`).map(A=>{const o=R(y.TSPAN,{dy:"1em",x:Ee.BORDER_WIDTH},e);return A=document.createTextNode(A),o.appendChild(A),o})}rightAlignSpans(e,t){for(const A of t)A.setAttribute("text-anchor","end"),A.setAttribute("x",`${e+Ee.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new pe(e.width+2*Ee.BORDER_WIDTH,e.height+2*Ee.BORDER_WIDTH),!0)}},ew=class extends Ee{constructor(e,t,A){super(e,t,A),this.workspace=e,this.anchor=t,this.ownerRect=A,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new pe(160+Ee.DOUBLE_BORDER,80+Ee.DOUBLE_BORDER),this.MIN_SIZE=new pe(45+Ee.DOUBLE_BORDER,20+Ee.DOUBLE_BORDER),q(this.svgRoot,"blocklyTextInputBubble"),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=R(y.FOREIGNOBJECT,{x:Ee.BORDER_WIDTH,y:Ee.BORDER_WIDTH},e);const t=document.createElementNS(LA,"body");t.setAttribute("xmlns",LA),t.className="blocklyMinimalBody";const A=document.createElementNS(LA,"textarea");return A.className="blocklyTextarea blocklyText",A.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),t.appendChild(A),e.appendChild(t),this.bindTextAreaEvents(A),setTimeout(()=>{A.focus()},0),{inputRoot:e,textArea:A}}bindTextAreaEvents(e){j(e,"wheel",this,t=>{t.stopPropagation()}),j(e,"focus",this,this.onStartEdit,!0),j(e,"change",this,this.onTextChange)}createResizeHandle(e,t){return e=R(y.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),j(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const A=e.width-Ee.DOUBLE_BORDER,o=e.height-Ee.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${A}`),this.inputRoot.setAttribute("height",`${o}`),this.resizeGroup.setAttribute("y",`${o}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-Ee.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${A}`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),Oe(e)||(this.workspace.startDrag(e,new N(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=j(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=j(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){nt(),this.resizePointerUpListener&&(ue(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(ue(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=this.workspace.moveDrag(e),this.setSize(new pe(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};jA(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var Ap=17,tw=160,Aw=80,pr=class extends bc{constructor(e){super(e),this.sourceBlock=e,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new pe(tw,Aw),this.bubbleVisiblity=!1}getType(){return pr.TYPE}initView(e){this.svgRoot||(super.initView(e),R(y.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),R(y.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),R(y.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),q(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose();let t;(t=this.textBubble)==null||t.dispose()}getWeight(){return pr.WEIGHT}getSize(){return new pe(Ap,Ap)}applyColour(){super.applyColour();const e=this.sourceBlock.style.colourPrimary;let t;(t=this.textInputBubble)==null||t.setColour(e);let A;(A=this.textBubble)==null||A.setColour(e)}updateEditable(){const e=this,t=()=>super.updateEditable;return Q.asyncExecutePromiseGeneratorFunction(function*(){t().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){super.onLocationChange(e),e=this.getAnchorLocation();let t;(t=this.textInputBubble)==null||t.setAnchorLocation(e);let A;(A=this.textBubble)==null||A.setAnchorLocation(e)}setText(e){const t=this.text;_(new(L(i.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,t,e)),this.text=e;let A;(A=this.textInputBubble)==null||A.setText(this.text);let o;(o=this.textBubble)==null||o.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let t;(t=this.textInputBubble)==null||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let t;this.text=(t=e.text)!=null?t:"";let A,o;this.bubbleSize=new pe((A=e.width)!=null?A:tw,(o=e.height)!=null?o:Aw);let l;this.bubbleVisiblity=(l=e.pinned)!=null?l:!1,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(_(new(L(i.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const t=this;return Q.asyncExecutePromiseGeneratorFunction(function*(){t.bubbleVisiblity!==e&&(t.bubbleVisiblity=e,yield kA(),!t.sourceBlock.rendered||t.sourceBlock.isInFlyout||t.sourceBlock.isInsertionMarker()||(e?(t.sourceBlock.isEditable()?t.showEditableBubble():t.showNonEditableBubble(),t.applyColour()):t.hideBubble(),_(new(L(xA))(t.sourceBlock,e,"comment"))))})}showEditableBubble(){this.textInputBubble=new ew(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new tp(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null;let t;(t=this.textBubble)==null||t.dispose(),this.textBubble=null}getAnchorLocation(){const e=Ap/2;return N.sum(this.workspaceLocation,new N(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new ke(e.y,e.y+e.height,e.x,e.x+e.width)}};pr.TYPE=tt.COMMENT,pr.WEIGHT=3,Ch(pr.TYPE,pr);var rp=17,gr=class extends bc{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return gr.TYPE}initView(e){this.svgRoot||(super.initView(e),R(y.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),R(y.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),R(y.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),q(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return gr.WEIGHT}getSize(){return new pe(rp,rp)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let t;(t=this.textBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;e?this.textMap.set(t,e):this.textMap.delete(t);let A;return(A=this.textBubble)==null||A.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const t=this;return Q.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield kA(),e)t.textBubble=new tp(t.getText(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour();else{let A;(A=t.textBubble)==null||A.dispose(),t.textBubble=null}_(new(L(xA))(t.sourceBlock,e,"warning"))}})}getAnchorLocation(){const e=rp/2;return N.sum(this.workspaceLocation,new N(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new ke(e.y,e.y+e.height,e.x,e.x+e.width)}};gr.TYPE=tt.WARNING,gr.WEIGHT=2;var rw=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},iw={};iw.DuplicateIconType=rw;var Mr={};Mr.CommentIcon=pr,Mr.Icon=bc,Mr.IconType=tt,Mr.MutatorIcon=i.MutatorIcon$$module$build$src$core$icons$mutator_icon,Mr.WarningIcon=gr,Mr.exceptions=iw,Mr.registry=ep;var Ic,Rt;Ic="PROCEDURE",i.DEFAULT_ARG$$module$build$src$core$procedures="x",Rt={CATEGORY_NAME:Ic,DEFAULT_ARG:i.DEFAULT_ARG$$module$build$src$core$procedures},Rt.ObservableProcedureMap=YB,Rt.allProcedures=Hl,Rt.findLegalName=i.findLegalName$$module$build$src$core$procedures,Rt.flyoutCategory=Pl,Rt.getCallers=Ih,Rt.getDefinition=i.getDefinition$$module$build$src$core$procedures,Rt.isNameUsed=vh,Rt.isProcedureBlock=Sr,Rt.mutateCallers=i.mutateCallers$$module$build$src$core$procedures,Rt.mutatorOpenListener=yh,Rt.rename=i.rename$$module$build$src$core$procedures;var Mv=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},E=new Mv,MA=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=E.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},nn=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=E.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(E.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(E.isSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(E.isSpacer(t))return t}return null}},ip=class extends nn{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=E.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,A=0;for(let o=0;o<this.elements.length;o++){const l=this.elements[o];t+=l.width,E.isSpacer(l)||(E.isNextConnection(l)?A=Math.max(A,l.height):e=Math.max(e,l.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+A,this.descenderHeight=A,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},fr=class extends MA{constructor(e,t){super(e),this.connectionModel=t,this.type|=E.CONNECTION,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=t.isHighlighted()}},Nr=class extends fr{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=E.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Tc=class extends Nr{constructor(e,t){super(e,t),this.height=0,this.type|=E.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Ls=class extends MA{constructor(e,t,A){super(e),this.field=t,this.parentInput=A,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=E.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},sp=class extends MA{constructor(e){super(e),this.type|=E.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},sw=class extends MA{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.type|=E.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},jt=class extends MA{constructor(e,t){super(e),this.type=this.type|E.SPACER|E.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},op=class extends Nr{constructor(e,t){super(e,t),this.type|=E.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},ln=class extends Nr{constructor(e,t){super(e,t),this.type|=E.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},np=class extends nn{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=E.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const A=this.elements[t];this.width+=A.width,E.isInput(A)&&A instanceof Nr&&(E.isStatementInput(A)&&A instanceof ln?e+=A.connectedBlockWidth:E.isExternalInput(A)&&A instanceof Tc&&A.connectedBlockWidth!==0&&(e+=A.connectedBlockWidth-A.connectionWidth)),E.isSpacer(A)||(this.height=Math.max(this.height,A.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},ow=class extends MA{constructor(e){super(e),this.type|=E.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},nw=class extends fr{constructor(e,t){super(e,t),this.type|=E.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},lw=class extends fr{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=E.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},cw=class extends fr{constructor(e,t){super(e,t),this.type|=E.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},cn=class extends MA{constructor(e,t){super(e),this.type=(t&&t!=="left"?E.RIGHT_ROUND_CORNER:E.LEFT_ROUND_CORNER)|E.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},lp=class extends nn{constructor(e,t,A){super(e),this.height=t,this.width=A,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|E.SPACER|E.BETWEEN_ROW_SPACER,this.elements=[new jt(this.constants_,A)]}measure(){}},an=class extends MA{constructor(e,t){super(e),this.type=(t&&t!=="left"?E.RIGHT_SQUARE_CORNER:E.LEFT_SQUARE_CORNER)|E.CORNER,this.width=this.height=this.constants_.NO_PADDING}},cp=class extends nn{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=E.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,A=e.getPreviousBlock();return!!e.outputConnection||t||(A?A.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,A=0;for(let o=0;o<this.elements.length;o++){const l=this.elements[o];t+=l.width,E.isSpacer(l)||(E.isHat(l)&&l instanceof sp?A=Math.max(A,l.ascenderHeight):e=Math.max(e,l.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+A,this.capline=this.ascenderHeight=A,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},kc=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Le(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const A in t)this.blockStyles[A]=this.validatedBlockStyle_(t[A]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=ol("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=os(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?os(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?os(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return di("#fff",e,.6)||e}generateTertiaryColour_(e){return di("#fff",e,.3)||e}dispose(){this.embossFilter&&ve(this.embossFilter),this.disabledPattern&&ve(this.disabledPattern),this.debugFilter&&ve(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,A=as([J(t,e/4),J(2*-t,e/2),J(t,e/4)]);return{height:e,width:t,path:A}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,A=Pt("c",[J(30,-e),J(70,-e),J(t,0)]);return{height:e,width:t,path:A}}makePuzzleTab(){function e(u){u=u?-1:1;const m=-u;var b=A/2;const T=b+2.5,V=b+.5,De=J(-t,u*b);return b=J(t,u*b),Pt("c",[J(0,u*T),J(-t,m*V),De])+Pt("s",[J(t,2.5*m),b])}const t=this.TAB_WIDTH,A=this.TAB_HEIGHT,o=e(!0),l=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:A,pathDown:l,pathUp:o}}makeNotch(){function e(m){return as([J(m*o,A),J(3*m,0),J(m*o,-A)])}const t=this.NOTCH_WIDTH,A=this.NOTCH_HEIGHT,o=(t-3)/2,l=e(1),u=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:A,pathLeft:l,pathRight:u}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Xe("a","0 0,0",e,J(-e,e)),A=Xe("a","0 0,0",e,J(e,e));return{width:e,height:e,pathTop:t,pathBottom:A}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=Le(0,e)+Xe("a","0 0,1",e,J(e,-e)),A=Xe("a","0 0,1",e,J(e,e)),o=Xe("a","0 0,1",e,J(-e,-e)),l=Xe("a","0 0,1",e,J(-e,e));return{topLeft:t,topRight:A,bottomRight:l,bottomLeft:o,rightHeight:e}}shapeFor(e){switch(e.type){case K.INPUT_VALUE:case K.OUTPUT_VALUE:return this.PUZZLE_TAB;case K.PREVIOUS_STATEMENT:case K.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,A){this.injectCSS_(t,A),this.defs=R(y.DEFS,{},e),e=R(y.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),R(y.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=R(y.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),R(y.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),R(y.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),R(y.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=R(y.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),R(y.RECT,{width:10,height:10,fill:"#aaa"},e),R(y.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=R(y.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=R(y.FECOMPONENTTRANSFER,{result:"outBlur"},e);R(y.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),R(y.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),R(y.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const A=t.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=A:(t=document.createElement("style"),t.id=e,e=document.createTextNode(A),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Sc=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Le(e.xPos,this.info_.startY);for(let A=0,o;o=t[A];A++)E.isLeftRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:E.isRightRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:E.isPreviousConnection(o)&&o instanceof fr?this.outlinePath_+=o.shape.pathLeft:E.isHat(o)?this.outlinePath_+=this.constants_.START_HAT.path:E.isSpacer(o)&&(this.outlinePath_+=W("h",o.width));this.outlinePath_+=W("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+W("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const A=Gl(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=W("H",t.xPos+t.width)+A+W("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var A=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+W("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var o=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=W("H",A)+t+W("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+W("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=W("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let A=0,o="";for(let l=t.length-1,u;u=t[l];l--)E.isNextConnection(u)&&u instanceof fr?o+=u.shape.pathRight:E.isLeftSquareCorner(u)?o+=W("H",e.xPos):E.isLeftRoundedCorner(u)?o+=this.constants_.OUTSIDE_CORNERS.bottomLeft:E.isRightRoundedCorner(u)?(o+=this.constants_.OUTSIDE_CORNERS.bottomRight,A=this.constants_.OUTSIDE_CORNERS.rightHeight):E.isSpacer(u)&&(o+=W("h",-1*u.width));this.outlinePath_+=W("V",e.baseline-A),this.outlinePath_+=o}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=Gl(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=W("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let A=0,o;o=t.elements[A];A++)E.isInlineInput(o)?this.drawInlineInput_(o):(E.isIcon(o)||E.isField(o))&&this.layoutField_(o)}layoutField_(e){const t=e.centerline-e.height/2;let A=e.xPos;var o="";this.info_.RTL&&(A=-(A+e.width),e.flipRtl&&(A+=e.width,o="scale(-1 1)")),E.isIcon(e)?(o=e.icon,o.setOffsetInBlock(new N(A,t)),this.info_.isInsertionMarker&&o.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+A+","+t+")"+o),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,A=e.height,o=e.connectionOffsetY,l=e.connectionHeight+o;this.inlinePath_+=ct(e.xPos+e.connectionWidth,e.centerline-A/2)+W("v",o)+e.shape.pathDown+W("v",A-l)+W("h",t-e.connectionWidth)+W("v",-A)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let A=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(A*=-1),e.connectionModel.setOffsetInBlock(A,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let A=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(A*=-1),t.connectionModel.setOffsetInBlock(A,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let A=e.xPos+e.width;this.info_.RTL&&(A*=-1),t.connectionModel.setOffsetInBlock(A,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,A=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-A:A,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const t of e.elements)if(t instanceof fr)if(t.highlighted)this.drawConnectionHighlightPath(t);else{let A,o;(o=(A=this.block_.pathObject).removeConnectionHighlight)==null||o.call(A,t.connectionModel)}}drawConnectionHighlightPath(e){const t=e.connectionModel;e=t.type===K.INPUT_VALUE||t.type===K.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const A=t.getSourceBlock();let o,l;(l=(o=A.pathObject).addConnectionHighlight)==null||l.call(o,t,e,t.getOffsetInBlock(),A.RTL)}getExpressionConnectionHighlightPath(e){let t="";return Gl(e.shape)?t=e.shape.pathDown(e.height):$m(e.shape)&&(t=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,Le(0,-e)+W("v",e)+t+W("v",e)}getStatementConnectionHighlightPath(e){if(!mm(e.shape))throw Error("Statement connections should have notch shapes");const t=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Le(-t,0)+W("h",t)+e.shape.pathLeft+W("h",t)}};(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(i.Align$$module$build$src$core$inputs$align||(i.Align$$module$build$src$core$inputs$align={})),i.Align$$module$build$src$core$inputs$align;var Oi=class extends Se{constructor(e,t,A){super(Se.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==Se.SKIP_SETUP&&(A?this.configure_(A):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&q(this.getTextElement(),this.class)}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&Fe(this.textElement_,this.class),e&&q(this.textElement_,e)),this.class=e}static fromJson(e){return new this(ze(e.text),void 0,e)}};UA("field_label",Oi),Oi.prototype.DEFAULT_VALUE="";var Qs=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=i.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,A){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&A)&&(typeof t=="string"&&(t=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(t),t.name=A,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,t){for(let A=0,o;o=this.fieldRow[A];A++)if(o.name===e)return o.dispose(),this.fieldRow.splice(A,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let o=0,l;l=this.fieldRow[o];o++)l.setVisible(e);if(this.connection){var A=this.connection;e?t=A.startTrackingAll():A.stopTrackingAll(),(A=A.targetBlock())&&(A.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},NA=class extends Qs{constructor(e,t){super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},$r=class extends Qs{constructor(e,t){super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},qt=class extends Qs{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(K.NEXT_STATEMENT)}},aw;i.ValueInput$$module$build$src$core$inputs$value_input=class extends Qs{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(K.INPUT_VALUE)}},aw={},aw.ValueInput=i.ValueInput$$module$build$src$core$inputs$value_input;var un=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new lw(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new cp(this.constants_),this.bottomRow=new ip(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new np(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let A=0,o;o=t[A];A++){const l=new sw(this.constants_,o);this.isCollapsed&&!o.isShownWhenCollapsed()||e.elements.push(l)}t=void 0;for(let A=0,o;o=this.block_.inputList[A];A++)if(o.isVisible()){this.shouldStartNewRow_(o,t)&&(this.rows.push(e),e=new np(this.constants_),this.inputRows.push(e));for(let l=0,u;u=o.fieldRow[l];l++)e.elements.push(new Ls(this.constants_,u,o));this.addInput_(o,e),t=o}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new ow(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let A=this.topRow.hasLeftSquareCorner(this.block_)?an:cn;this.topRow.elements.push(new A(this.constants_)),t?(e=new sp(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new cw(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof qt&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,A=this.topRow.hasRightSquareCorner(this.block_)?an:cn,this.topRow.elements.push(new A(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof qt?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new an(this.constants_)):this.bottomRow.elements.push(new cn(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new nw(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new an(this.constants_,"right")):this.bottomRow.elements.push(new cn(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new op(this.constants_,e)),t.hasInlineInput=!0):e instanceof qt?(t.elements.push(new ln(this.constants_,e)),t.hasStatement=!0):e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Tc(this.constants_,e)),t.hasExternalInput=!0):(e instanceof NA||e instanceof $r)&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?t instanceof $r||e instanceof qt||t instanceof qt?!0:e instanceof i.ValueInput$$module$build$src$core$inputs$value_input||e instanceof NA||t instanceof i.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const A=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new jt(this.constants_,this.getInRowSpacing_(null,A[0]))),A.length){for(let o=0;o<A.length-1;o++){t.elements.push(A[o]);const l=this.getInRowSpacing_(A[o],A[o+1]);t.elements.push(new jt(this.constants_,l))}t.elements.push(A[A.length-1]),t.endsWithElemSpacer()&&t.elements.push(new jt(this.constants_,this.getInRowSpacing_(A[A.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&E.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&E.isInput(e)&&!t){if(E.isExternalInput(e))return this.constants_.NO_PADDING;if(E.isInlineInput(e))return this.constants_.LARGE_PADDING;if(E.isStatementInput(e))return this.constants_.NO_PADDING}return e&&E.isLeftSquareCorner(e)&&t&&(E.isPreviousConnection(t)||E.isNextConnection(t))?t.notchOffset:e&&E.isLeftRoundedCorner(e)&&t&&(E.isPreviousConnection(t)||E.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,A=0;for(let l=0,u;u=this.rows[l];l++){if(u.measure(),t=Math.max(t,u.width),u.hasStatement){var o=u.getLastInput();let m,b;o=u.width-((b=(m=o)==null?void 0:m.width)!=null?b:0),e=Math.max(e,o)}A=Math.max(A,u.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let l=0,u;u=this.rows[l];l++)u.hasStatement&&(u.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,A),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,A;A=this.rows[t];t++)if(A.hasStatement)this.alignStatementRow_(A);else{var e=A.width;e=this.getDesiredRowWidth_(A)-e,0<e&&this.addAlignmentPadding_(A,e),E.isTopOrBottomRow(A)&&(A.widthWithConnectedBlocks=A.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const A=e.getFirstSpacer(),o=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===i.Align$$module$build$src$core$inputs$align.LEFT&&o)o.width+=t;else if(e.align===i.Align$$module$build$src$core$inputs$align.CENTRE&&A&&o)A.width+=t/2,o.width+=t/2;else if(e.align===i.Align$$module$build$src$core$inputs$align.RIGHT&&A)A.width+=t;else if(o)o.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var A=e.width-t.width,o=this.statementEdge;A=o-A,0<A&&this.addAlignmentPadding_(e,A),A=e.width,o=this.getDesiredRowWidth_(e),t.width+=o-A,t.height=Math.max(t.height,e.height),e.width+=o-A,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var A=this.getSpacerRowHeight_(e,t);const o=this.getSpacerRowWidth_(e,t);return A=new lp(this.constants_,A,o),e.hasStatement&&(A.followsStatement=!0),t.hasStatement&&(A.precedesStatement=!0),A}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return E.isSpacer(t)?e.yPos+t.height/2:E.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,E.isNextConnection(t)?e+t.height/2:e-t.height/2):E.isTopRow(e)?E.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let A=0,o;o=e.elements[A];A++)E.isSpacer(o)&&(o.height=e.height),o.xPos=t,o.centerline=this.getElemCenterline_(e,o),t+=o.width}finalize_(){let e=0,t=0;for(let A=0,o;o=this.rows[A];A++)o.yPos=t,o.xPos=this.startX,t+=o.height,e=Math.max(e,o.widthWithConnectedBlocks),this.recordElemPositions_(o);if(this.outputConnection&&this.block_.nextConnection){const A=this.block_.nextConnection.targetBlock();A&&(e=Math.max(e,A.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let t;if(((t=this.outputConnection)==null?void 0:t.connectionModel)===e)return this.outputConnection;for(const A of this.rows)for(const o of A.elements)if(o instanceof fr&&o.connectionModel===e)return o;return null}},ap=class extends ki{constructor(e){if(super(e),this.type=i.DELETE$$module$build$src$core$events$utils,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=xo(e),this.ids=H(e),this.wasShadow=e.isShadow(),this.oldJson=zt(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=FA(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new ap),t.oldXml=i.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||t.oldXml.tagName.toLowerCase()==="shadow",t.oldJson=e.oldJson,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const A=this.ids[e],o=t.getBlockById(A);o?o.dispose(!1):A===this.blockId&&console.warn("Can't delete non-existent block: "+A)}else ZA(this.oldJson,t)}};n(M.EVENT,i.DELETE$$module$build$src$core$events$utils,ap);var ge=class{constructor(e,t){this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const t=K.INPUT_VALUE,A=this.getSourceBlock();var o=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let l;if(this.isConnected()){const m=this.stashShadowState(),b=this.targetBlock();b.isShadow()?b.dispose(!1):(this.disconnectInternal(),l=b),this.applyShadowState(m)}let u;x()&&(u=new(L(i.MOVE$$module$build$src$core$events$utils))(o),u.setReason(["connect"])),Bm(this,e),o.setParent(A),u&&(u.recordNew(),_(u)),l&&(e=this.type===t?l.outputConnection:l.previousConnection)&&((o=ge.getConnectionForOrphanedConnection(o,e))?e.connect(o):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===K.INPUT_VALUE||this.type===K.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),i.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:A}=this.getParentAndChildConnections();if(!t||!A)throw Error("Source connection not connected.");const o=i.getGroup$$module$build$src$core$events$utils();o||i.setGroup$$module$build$src$core$events$utils(!0);let l;x()&&(l=new(L(i.MOVE$$module$build$src$core$events$utils))(A.getSourceBlock()),l.setReason(["disconnect"]));const u=this.targetConnection;u&&(u.targetConnection=null),this.targetConnection=null,e&&A.getSourceBlock().setParent(null),l&&(l.recordNew(),_(l)),A.getSourceBlock().isShadow()||t.respawnShadow_(),i.setGroup$$module$build$src$core$events$utils(o)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){if(this.getSourceBlock().isDeadOrDying())return!1;var A;return t=(A=e.getInput(t))==null?void 0:A.connection,A=this.targetBlock(),A&&A!==e||!t||t.targetConnection===this?!1:(t.isConnected()&&t.disconnect(),t.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?kr(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?zt(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let A=0;A<t.length;A++)if(t[A].connection===this){e=t[A];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let A=0,o;o=e.inputList[A];A++)if(o.connection===this){t=o;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var t=this.getSourceBlock();const A=this.getShadowState(),o=this.getShadowDom();if(t.isDeadOrDying()||!A&&!o)return null;if(A)return t=ts(A,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(o){if(t=gi(o,t.workspace),e)if(this.type===K.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===K.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow(e){e&&(this.shadowDom=kr(e),this.shadowState=zt(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===K.OUTPUT_VALUE)return _m(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const A=t.getConnectionChecker();return e&&A.canConnect(t,e,!1)?e:null}};ge.CAN_CONNECT=0,ge.REASON_SELF_CONNECTION=1,ge.REASON_WRONG_TYPE=2,ge.REASON_TARGET_NULL=3,ge.REASON_CHECKS_FAILED=4,ge.REASON_DIFFERENT_WORKSPACES=5,ge.REASON_SHADOW_PARENT=6,ge.REASON_DRAG_CHECKS_FAILED=7,ge.REASON_PREVIOUS_AND_OUTPUT=8;var Li=class{constructor(e,t,A){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=A&&!e.getBlockById(A)?A:C(),e.setBlockById(this.id,this),this.xy_=new N(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,A=Gt[t],!A||typeof A!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,A)}e.addTopBlock(this),e.addTypedBlock(this),new.target===Li&&this.doInit_()}doInit_(){const e=i.getGroup$$module$build$src$core$events$utils();e||i.setGroup$$module$build$src$core$events$utils(!0);const t=v();try{typeof this.init=="function"&&(i.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),i.setRecordUndo$$module$build$src$core$events$utils(t)),x()&&_(new(L(i.CREATE$$module$build$src$core$events$utils))(this))}finally{i.setGroup$$module$build$src$core$events$utils(e),i.setRecordUndo$$module$build$src$core$events$utils(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),x()&&_(new(L(i.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow_(e),this.previousConnection&&this.unplugFromStack_(e)}unplugFromRow_(e){let t=null,A;(A=this.outputConnection)!=null&&A.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e==null||e.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e==null||e.onFailedConnect(t))}getOnlyValueConnection_(){let e=null;for(let t=0;t<this.inputList.length;t++){const A=this.inputList[t].connection;if(A&&A.type===K.INPUT_VALUE&&A.targetConnection){if(e)return null;e=A}}return e}unplugFromStack_(e){let t=null;var A;if((A=this.previousConnection)!=null&&A.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),A=this.getNextBlock(),e&&A&&!A.isShadow()){let o,l;e=(l=(o=this.nextConnection)==null?void 0:o.targetConnection)!=null?l:null,e==null||e.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,A;A=this.inputList[t];t++)A.connection&&e.push(A.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const A=t.targetBlock();if(!A||e&&A.isShadow())return t;t=A.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,A;A=this.inputList[t];t++)if(A.connection&&A.connection.targetBlock()===e)return A;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let A=0,o;o=this.inputList[A];A++)if(o.connection){var t=o.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),A=!!t;if(A&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!A&&e)throw Error("Block not connected to new parent.");if(A&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?pt(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],A=this.getChildren(e);for(let o,l=0;o=A[l];l++)t.push(...o.getDescendants(e));return t}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(e){this.deletable_=e}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(e){this.movable_=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(mt(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(e){this.isShadow_=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(e){this.editable_=e;for(let t=0,A;A=this.inputList[t];t++)for(let o=0,l;l=A.fieldRow[o];o++)l.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||1<e.fieldRow.length)return!1;return!0}getMatchingConnection(e,t){const A=this.getConnections_(!0);if(e=e.getConnections_(!0),A.length!==e.length)throw Error("Connection lists did not match in length.");for(let o=0;o<e.length;o++)if(e[o]===t)return A[o];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return is(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(e){e=os(e),this.hue_=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=e,this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let t=0,A;A=this.inputList[t];t++)for(let o=0,l;l=A.fieldRow[o];o++)if(l.name===e)return l;return null}getVars(){const e=[];for(let t=0,A;A=this.inputList[t];t++)for(let o=0,l;l=A.fieldRow[o];o++)l.referencesVariables()&&e.push(l.getValue());return e}getVarModels(){const e=[];for(let t=0,A;A=this.inputList[t];t++)for(let o=0,l;l=A.fieldRow[o];o++)if(l.referencesVariables()){const u=this.workspace.getVariableById(l.getValue());u&&e.push(u)}return e}updateVarName(e){for(let t=0,A;A=this.inputList[t];t++)for(let o=0,l;l=A.fieldRow[o];o++)l.referencesVariables()&&e.getId()===l.getValue()&&l.refreshVariableName()}renameVarById(e,t){for(let A=0,o;o=this.inputList[A];A++)for(let l=0,u;u=o.fieldRow[l];l++)u.referencesVariables()&&e===u.getValue()&&u.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const A=this.getField(t);if(!A)throw Error('Field "'+t+'" not found.');A.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(K.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(K.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(K.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(_(new(L(i.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof NA&&this.inputList[e]instanceof NA)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof i.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof NA)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof $r)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}get disabled(){return Fr("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(tA)}set disabled(e){Fr("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(e,tA)}setEnabled(e){Fr("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!e,tA)}setDisabledReason(e,t){this.disabledReasons.has(t)!==e&&(e?this.disabledReasons.add(t):this.disabledReasons.delete(t),e=new(L(i.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,!e,e),e.setDisabledReason(t),_(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(_(new(L(i.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let o=2;o<t.length;o++)t[o-2]==="("&&t[o]===")"&&(t[o-2]=t[o-1],t.splice(o-1,2));let A="";return t=t.reduce((o,l)=>(o=o+(A==="("||l===")"?"":" ")+l,A=l[l.length-1],o),""),t=t.trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const o of this.inputList)if(o.name!=zo){for(const l of o.fieldRow)t.push(l.getText());if(o.connection){const l=o.connection.targetBlock();if(l){var A=o.connection;let u=A.getCheck();!u&&A.targetConnection&&(u=A.targetConnection.getCheck()),(A=!!u&&(u.includes("Boolean")||u.includes("Number")))&&t.push("("),t.push(...l.toTokens(e)),A&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new i.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new qt(e,this))}appendDummyInput(e=""){return this.appendInput(new NA(e,this))}appendEndRowInput(e=""){return this.appendInput(new $r(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=d(M.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");for(var A=0;e["args"+A];){if(e["message"+A]===void 0)throw Error(t+`args${A} must have a corresponding message (message${A}).`);A++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle_(e,t):this.jsonInitColour_(e,t),A=0;e["message"+A]!==void 0;)this.interpolate_(e["message"+A],e["args"+A]||[],e["implicitAlign"+A]||e["lastDummyAlign"+A],t),A++;if(e.inputsInline!==void 0&&(i.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),i.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(A=ze(e.tooltip),this.setTooltip(A)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(A=ze(e.helpUrl),this.setHelpUrl(A)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&Ql(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)Ql(e[t],this,!1)}jsonInitColour_(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle_(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const A in e)this[A]!==void 0&&t.push(A);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate_(e,t,A,o){e=th(e),this.validateTokens_(e,t.length),t=this.interpolateArguments_(e,t,A),A=[];for(let l=0,u;u=t[l];l++)if(this.isInputKeyword_(u.type)){if(e=this.inputFromJson_(u,o)){for(let m=0,b;b=A[m];m++)e.appendField(b[0],b[1]);A.length=0}}else(e=this.fieldFromJson_(u))&&A.push([e,u.name])}validateTokens_(e,t){const A=[];let o=0;for(let l=0;l<e.length;l++){const u=e[l];if(typeof u=="number"){if(1>u||u>t)throw Error('Block "'+this.type+'": Message index %'+u+" out of range.");if(A[u])throw Error('Block "'+this.type+'": Message index %'+u+" duplicated.");A[u]=!0,o++}}if(o!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments_(e,t,A){const o=[];for(let u=0;u<e.length;u++){var l=e[u];if(typeof l=="number"&&(l=t[l-1]),typeof l=="string"){if(l===`
`)l={type:"input_end_row"},A&&(l.align=A);else if(l=this.stringToFieldJson_(l),!l)continue}o.push(l)}return(e=o.length)&&!this.isInputKeyword_(o[e-1].type)&&(e={type:"input_dummy"},A&&(e.align=A),o.push(e)),o}fieldFromJson_(e){const t=i.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):t}inputFromJson_(e,t){var A={LEFT:i.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:i.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:i.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:i.Align$$module$build$src$core$inputs$align.CENTRE};let o;switch(e.type){case"input_value":o=this.appendValueInput(e.name);break;case"input_statement":o=this.appendStatementInput(e.name);break;case"input_dummy":o=this.appendDummyInput(e.name);break;case"input_end_row":o=this.appendEndRowInput(e.name);break;default:o=this.appendInputFromRegistry(e.type,e.name)}return o?(e.check&&o.setCheck(e.check),e.align&&(A=A[e.align.toUpperCase()],A===void 0?console.warn(t+"Illegal align value: ",e.align):o.setAlign(A)),o):null}isInputKeyword_(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||p(M.INPUT,e)}stringToFieldJson_(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var A=-1,o=t?-1:this.inputList.length;for(let l=0,u;u=this.inputList[l];l++)if(u.name===e){if(A=l,o!==-1)break}else if(t&&u.name===t&&(o=l,A!==-1))break;if(A===-1)throw Error('Named input "'+e+'" not found.');if(o===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(A,o)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const A=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,A)}removeInput(e,t){for(let A=0,o;o=this.inputList[A];A++)if(o.name===e)return o instanceof qt&&this.statementInputCount--,o.dispose(),this.inputList.splice(A,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,A;A=this.inputList[t];t++)if(A.name===e)return A;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return(t=(e=this.getIcon(tt.COMMENT))==null?void 0:e.getText())!=null?t:null}setCommentText(e){var t;let A;const o=(A=(t=this.getIcon(tt.COMMENT))==null?void 0:t.getText())!=null?A:null;if(o!==e){if(e!==null){if(t=this.getIcon(tt.COMMENT),!t){if(t=d(M.ICON,tt.COMMENT.toString(),!1),!t)throw Error("No comment icon class is registered, so a comment cannot be set");if(t=new t(this),!Cm(t))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");t=this.addIcon(t)}i.disable$$module$build$src$core$events$utils(),t.setText(e),i.enable$$module$build$src$core$events$utils()}else this.removeIcon(tt.COMMENT);_(new(L(i.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,o,e))}}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new rw(e);return this.icons.push(e),this.icons.sort((t,A)=>t.getWeight()-A.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return(t=this.getIcon(e))==null||t.dispose(),this.icons=this.icons.filter(A=>!A.getType().equals(e)),!0}hasIcon(e){return this.icons.some(t=>t.getType().equals(e))}getIcon(e){return e instanceof tt?this.icons.find(t=>t.getType().equals(e)):this.icons.find(t=>t.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(e,t,A){if(this.parentBlock_)throw Error("Block has parent");const o=new(L(i.MOVE$$module$build$src$core$events$utils))(this);A&&o.setReason(A),this.xy_.translate(e,t),o.recordNew(),_(o)}makeConnection_(e){return new ge(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let A=0,o;o=this.inputList[A];A++)if(o.connection){var t=o.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};Li.COLLAPSED_INPUT_NAME=zo,Li.COLLAPSED_FIELD_NAME=oc;var sA=class{constructor(e,t,A,o){this.workspace=e,this.targetWorkspace=t,this.isFlyoutLabel=o,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=A.text,this.position=new N(0,0),this.callbackKey=A.callbackKey||A.callbackkey,this.cssClass=A["web-class"]||null,this.info=A}createDom(){var e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=R(y.G,{class:e},this.workspace.getCanvas());let t;this.isFlyoutLabel||(t=R(y.RECT,{class:"blocklyFlyoutButtonShadow",rx:sA.BORDER_RADIUS,ry:sA.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=R(y.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:sA.BORDER_RADIUS,ry:sA.BORDER_RADIUS},this.svgGroup);const A=R(y.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var o=ze(this.text);this.workspace.RTL&&(o+=""),A.textContent=o,this.isFlyoutLabel&&(this.svgText=A,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const l=TA(A,"fontSize"),u=TA(A,"fontWeight"),m=TA(A,"fontFamily");if(this.width=sl(A,l,u,m),o=ol(o,l,u,m),this.height=o.height,!this.isFlyoutLabel){this.width+=2*sA.TEXT_MARGIN_X,this.height+=2*sA.TEXT_MARGIN_Y;let b;(b=t)==null||b.setAttribute("width",String(this.width));let T;(T=t)==null||T.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),A.setAttribute("x",String(this.width/2)),A.setAttribute("y",String(this.height/2-o.height/2+o.baseline)),this.updateTransform(),this.onMouseUpWrapper=j(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&ue(this.onMouseUpWrapper),this.svgGroup&&ve(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};sA.TEXT_MARGIN_X=5,sA.TEXT_MARGIN_Y=2,sA.BORDER_RADIUS=4,jA(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var O=class{constructor(e,t,A){if(this.wsCoordinate=null,!t)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=O.isConnectionType(e),this.location=t,this.processParams(A||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const t=e.getSourceBlock();for(e=t.inputList.indexOf(e),e+=1;e<t.inputList.length;e++){const A=t.inputList[e],o=A.fieldRow;for(let l=0;l<o.length;l++){const u=o[l];if(u.isClickable()||O.NAVIGATE_ALL_FIELDS)return O.createFieldNode(u)}if(A.connection)return O.createInputNode(A)}return null}findNextForField(){var e=this.location,t=e.getParentInput();const A=e.getSourceBlock();if(!A)throw Error("The current AST location is not associated with a block");var o=A.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;o<A.inputList.length;o++){t=A.inputList[o];const l=t.fieldRow;for(;e<l.length;){if(l[e].isClickable()||O.NAVIGATE_ALL_FIELDS)return O.createFieldNode(l[e]);e++}if(e=0,t.connection)return O.createInputNode(t)}return null}findPrevForInput(){const e=this.location.getParentInput(),t=e.getSourceBlock();for(var A=t.inputList.indexOf(e);0<=A;A--){var o=t.inputList[A];if(o.connection&&o!==e)return O.createInputNode(o);o=o.fieldRow;for(let l=o.length-1;0<=l;l--){const u=o[l];if(u.isClickable()||O.NAVIGATE_ALL_FIELDS)return O.createFieldNode(u)}}return null}findPrevForField(){var e=this.location;const t=e.getParentInput(),A=e.getSourceBlock();if(!A)throw Error("The current AST location is not associated with a block");var o=A.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)-1;0<=o;o--){var l=A.inputList[o];if(l.connection&&l!==t)return O.createInputNode(l);for(l=l.fieldRow;-1<e;){if(l[e].isClickable()||O.NAVIGATE_ALL_FIELDS)return O.createFieldNode(l[e]);e--}0<=o-1&&(e=A.inputList[o-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var t=this.getLocation();if(t.getSourceBlock){var A=t.getSourceBlock();A&&(t=A)}if(!t||t.isDeadOrDying())return null;if(t.workspace.isFlyout)return this.navigateFlyoutContents(e);A=t.getRootBlock(),t=A.workspace.getTopBlocks(!0);for(let o=0;o<t.length;o++)if(A.id===t[o].id)return e=o+(e?1:-1),e===-1||e===t.length?null:O.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}navigateFlyoutContents(e){let t;switch(this.getType()){case O.types.STACK:t=this.getLocation();var A=t.workspace.targetWorkspace;break;case O.types.BUTTON:t=this.getLocation(),A=t.getTargetWorkspace();break;default:return null}return A=A.getFlyout(),A&&(e=this.findNextLocationInFlyout(A.getContents(),t,e))?e.type==="button"&&e.button?O.createButtonNode(e.button):e.type==="block"&&e.block?O.createStackNode(e.block):null:null}findNextLocationInFlyout(e,t,A){const o=e.findIndex(l=>t instanceof Li&&l.block===t||t instanceof sA&&l.button===t);return 0>o?null:(A=A?o+1:o-1,A===-1||A===e.length?null:e[A])}findTopASTNodeForBlock(e){const t=Oo(e);return t?O.createConnectionNode(t):O.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const t=Oo(e);return t&&t.targetConnection&&t.targetConnection.getParentInput()?O.createInputNode(t.targetConnection.getParentInput()):O.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let t=0;t<e.length;t++){const A=e[t],o=A.fieldRow;for(let l=0;l<o.length;l++){const u=o[l];if(u.isClickable()||O.NAVIGATE_ALL_FIELDS)return O.createFieldNode(u)}if(A.connection)return O.createInputNode(A)}return null}getSourceBlock(){return this.getType()===O.types.BLOCK?this.getLocation():this.getType()===O.types.STACK?this.getLocation():this.getType()===O.types.WORKSPACE||this.getType()===O.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case O.types.STACK:return this.navigateBetweenStacks(!0);case O.types.OUTPUT:return O.createBlockNode(this.location.getSourceBlock());case O.types.FIELD:return this.findNextForField();case O.types.INPUT:return this.findNextForInput();case O.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return O.createConnectionNode(e);case O.types.PREVIOUS:return O.createBlockNode(this.location.getSourceBlock());case O.types.NEXT:return O.createConnectionNode(this.location.targetConnection);case O.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case O.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return O.createStackNode(e[0]);break;case O.types.STACK:return this.findTopASTNodeForBlock(this.location);case O.types.BLOCK:return this.findFirstFieldOrInput(this.location);case O.types.INPUT:return O.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case O.types.STACK:return this.navigateBetweenStacks(!1);case O.types.FIELD:return this.findPrevForField();case O.types.INPUT:return this.findPrevForInput();case O.types.BLOCK:var e=Oo(this.location);if(!e)break;return O.createConnectionNode(e);case O.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return O.createConnectionNode(e);break;case O.types.NEXT:return O.createBlockNode(this.location.getSourceBlock());case O.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case O.types.STACK:var e=this.location,t=e.getRelativeToSurfaceXY();return t=new N(t.x,t.y+O.DEFAULT_OFFSET_Y),O.createWorkspaceNode(e.workspace,t);case O.types.OUTPUT:return e=this.location,(t=e.targetConnection)?O.createConnectionNode(t):O.createStackNode(e.getSourceBlock());case O.types.FIELD:if(e=this.location.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return O.createBlockNode(e);case O.types.INPUT:return O.createBlockNode(this.location.getSourceBlock());case O.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case O.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case O.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case O.types.PREVIOUS:case O.types.NEXT:case O.types.INPUT:case O.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new O(O.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const t=e.type;return t===K.INPUT_VALUE||t===K.NEXT_STATEMENT&&e.getParentInput()?O.createInputNode(e.getParentInput()):t===K.NEXT_STATEMENT?new O(O.types.NEXT,e):t===K.OUTPUT_VALUE?new O(O.types.OUTPUT,e):t===K.PREVIOUS_STATEMENT?new O(O.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new O(O.types.INPUT,e.connection):null}static createBlockNode(e){return e?new O(O.types.BLOCK,e):null}static createStackNode(e){return e?new O(O.types.STACK,e):null}static createButtonNode(e){return e?new O(O.types.BUTTON,e):null}static createWorkspaceNode(e,t){return t&&e?new O(O.types.WORKSPACE,e,{wsCoordinate:t}):null}static createTopNode(e){const t=Oo(e);return t?O.createConnectionNode(t):O.createBlockNode(e)}};O.NAVIGATE_ALL_FIELDS=!1,O.DEFAULT_OFFSET_Y=-20,function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace",e.BUTTON="button"}(O||(O={}));var up=class extends OA{constructor(e,t,A,o){let l=e?e.workspace.id:void 0;o&&o.getType()===O.types.WORKSPACE&&(l=o.getLocation().id),super(l),this.type=gs,this.blockId=e==null?void 0:e.id,this.oldNode=A||void 0,this.newNode=o,this.isCursor=t}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new up),t.isCursor=e.isCursor,t.blockId=e.blockId,t.oldNode=e.oldNode,t.newNode=e.newNode,t}};n(M.EVENT,gs,up);var Nv="blocklyCursor",Hv="blocklyMarker",Pv=.75,hp=class{constructor(e,t,A){this.workspace=e,this.marker=A,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=t,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=A.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?Nv:Hv;return this.svgGroup_=R(y.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,t){if(t){this.constants_=this.workspace.getRenderer().getConstants();var A=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||A,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent(e,t),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const t=e.getLocation().type;e.getType()===O.types.BLOCK?this.showWithBlock_(e):e.getType()===O.types.OUTPUT?this.showWithOutput_(e):t===K.INPUT_VALUE?this.showWithInput_(e):t===K.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===O.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===O.types.FIELD?this.showWithField_(e):e.getType()===O.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===O.types.STACK?this.showWithStack_(e):e.getType()===O.types.BUTTON&&this.showWithButton_(e)}showWithBlockPrevOutput(e){e=e.getSourceBlock();const t=e.width;var A=e.height,o=A*Pv;const l=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(A=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,l,o,A)):e.outputConnection?(o=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,A,o)):this.positionBlock_(t,l,o),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const t=e.getSize().width,A=e.getSize().height;this.positionRect_(0,0,t,A),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const t=e.getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()}showWithNext_(e){var t=e.getLocation();e=t.getSourceBlock();let A=0;t=t.getOffsetInBlock().y;const o=e.getHeightWidth().width;this.workspace.RTL&&(A=-o),this.positionLine_(A,t,o),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var t=e.getHeightWidth();const A=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;const o=-this.constants_.CURSOR_STACK_PADDING/2,l=-this.constants_.CURSOR_STACK_PADDING/2;let u=o;this.workspace.RTL&&(u=-(A+o)),this.positionRect_(u,l,A,t),this.setParent_(e),this.showCurrent_()}showWithButton_(e){e=e.getLocation();const t=e.width+this.constants_.CURSOR_STACK_PADDING,A=e.height+this.constants_.CURSOR_STACK_PADDING,o=-this.constants_.CURSOR_STACK_PADDING/2,l=-this.constants_.CURSOR_STACK_PADDING/2;let u=o;this.workspace.RTL&&(u=-(t+o)),this.positionRect_(u,l,t,A),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,t,A){if(e=Le(-t,A)+W("V",-t)+W("H",e+2*t)+W("V",A),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const t=e.getOffsetInBlock().x,A=e.getOffsetInBlock().y;e=ct(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+A+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,t,A){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${t}`),this.markerSvgLine_.setAttribute("width",`${A}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,t,A){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=Le(e,0)+W("h",-(e-A.width))+W("v",this.constants_.TAB_OFFSET_FROM_TOP)+A.pathDown+W("V",t)+W("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,t,A,o){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=Le(-t,A)+W("V",-t)+W("H",this.constants_.NOTCH_OFFSET_LEFT)+o.pathLeft+W("H",e+2*t)+W("V",A),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,t,A,o){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${t}`),this.markerSvgRect_.setAttribute("width",`${A}`),this.markerSvgRect_.setAttribute("height",`${o}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,t){const A=t.getSourceBlock();e=new(L(gs))(A,this.isCursor(),e,t),_(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=R(y.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=R(y.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=R(y.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=R(y.PATH,{transform:""},this.markerSvg_),this.markerBlock_=R(y.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();R(y.ANIMATE,e,this.markerSvgLine_),R(y.ANIMATE,e,this.markerInput_),R(y.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&ve(this.svgGroup_)}},Fc=class{constructor(e,t,A){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=A,this.style=t,this.svgRoot=e,this.svgPath=R(y.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?q(this.svgRoot,e):Fe(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}addConnectionHighlight(e,t,A,o){if(this.connectionHighlights.has(e)){if(this.currentHighlightMatchesNew(e,t,A))return;this.removeConnectionHighlight(e)}t=R(y.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:`translate(${A.x}, ${A.y})`+(o?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(e,t)}currentHighlightMatchesNew(e,t,A){let o;const l=(o=this.connectionHighlights.get(e))==null?void 0:o.getAttribute("d");return e=this.highlightOffsets.get(e),l===t&&N.equals(e,A)}removeConnectionHighlight(e){const t=this.connectionHighlights.get(e);t&&(ve(t),this.connectionHighlights.delete(e))}},oA=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,i.setSelected$$module$build$src$core$common(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){i.disable$$module$build$src$core$events$utils(),this.hidePreview(),i.enable$$module$build$src$core$events$utils();var{local:e,closest:t}=this.activeCandidate;e.connect(t);var A=e.isSuperior()?t:e,o=this.topBlock.getRootBlock();kA().then(()=>{Ol(A.getSourceBlock()),setTimeout(()=>{o.bringToFront()},0)})}}update(e,t){const A=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!A,t))||this.shouldUpdatePreviews(A,e))&&(i.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(A),this.maybeShowPreview(A),i.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){i.disable$$module$build$src$core$events$utils();let t;try{const A=zt(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!A)throw Error(`Failed to serialize source block. ${e.toDevString()}`);t=ZA(A,this.workspace);for(const o of t.getDescendants(!1))o.setInsertionMarker(!0);t.initSvg(),t.getSvgRoot().setAttribute("visibility","hidden")}finally{i.enable$$module$build$src$core$events$utils()}return t}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),t=this.topBlock.lastConnectionInStack(!0);return t&&t!==this.topBlock.nextConnection&&(e.push(t),this.lastOnStack=t),e}shouldUpdatePreviews(e,t){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:A,closest:o}=this.activeCandidate;if(o===e.closest&&A===e.local)return!1;const l=A.x+t.x-o.x;return t=A.y+t.y-o.y,e.radius<Math.sqrt(l*l+t*t)-i.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let t=this.getStartRadius(),A=null;for(let o=0;o<this.availableConnections.length;o++){const l=this.availableConnections[o],u=l.closest(t,e);u.connection&&(A={closest:u.connection,local:l,radius:u.radius},t=u.radius)}return A}getStartRadius(){return this.activeCandidate?i.config$$module$build$src$core$config.connectingSnapRadius:i.config$$module$build$src$core$config.snapRadius}shouldDelete(e,t){return t&&this.workspace.getComponentManager().hasCapability(t.id,at.Capability.DELETE_AREA)?t.wouldDelete(this.topBlock):!1}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var t=e.closest,A;t===((A=this.activeCandidate)==null?void 0:A.closest)||t.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const t=this.workspace.getRenderer();switch(t.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case oA.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case oA.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case oA.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}t.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(!e)this.hidePreview();else if(this.activeCandidate){const t=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||t||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const t=(e=this.activeCandidate)==null?void 0:e.closest;t&&t.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(t)&&t.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:t,closest:A}=e;let o=(e=this.lastOnStack&&t===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");let l;try{l=o.getMatchingConnection(t.getSourceBlock(),t)}catch{if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),o=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),o=this.firstMarker=this.createMarkerBlock(this.topBlock)),!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");l=o.getMatchingConnection(t.getSourceBlock(),t)}if(!l)throw Error("Cannot show the insertion marker because there is no associated connection");if(l===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.queueRender(),qA(),l.connect(A);const u={x:A.x-l.x,y:A.y-l.y},m=l.getOffsetInBlock().clone(),b=l;kA().then(()=>{let T;(T=o)==null||T.positionNearConnection(b,u,m);let V;(V=o)==null||V.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=l}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,t=e.getSourceBlock(),A=t.outputConnection,o;if((o=t.previousConnection)!=null&&o.targetConnection||A!=null&&A.targetConnection)t.unplug(!0);else{let l;(l=e.targetBlock())==null||l.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=t.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){i.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{i.enable$$module$build$src$core$events$utils()}}}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(oA||(oA={})),oA.PREVIEW_TYPE;var Uc=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())}refreshDom(e,t){const A=this.getConstants();A.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=A.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new kc}makeRenderInfo_(e){return new un(this,e)}makeDrawer_(e,t){return new Sc(e,t)}makeMarkerDrawer(e,t){return new hp(e,this.getConstants(),t)}makePathObject(e,t){return new Fc(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,A){return!!ge.getConnectionForOrphanedConnection(e,A===K.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}getConnectionPreviewMethod(e,t,A){return Fr("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===K.OUTPUT_VALUE||t.type===K.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(A,e.targetBlock(),t.type)?oA.PREVIEW_TYPE.INSERTION_MARKER:oA.PREVIEW_TYPE.REPLACEMENT_FADE:oA.PREVIEW_TYPE.INSERTION_MARKER}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},Ce={};Ce.BottomRow=ip,Ce.Connection=fr,Ce.ConstantProvider=kc,Ce.Drawer=Sc,Ce.ExternalValueInput=Tc,Ce.Field=Ls,Ce.Hat=sp,Ce.Icon=sw,Ce.InRowSpacer=jt,Ce.InlineInput=op,Ce.InputConnection=Nr,Ce.InputRow=np,Ce.JaggedEdge=ow,Ce.MarkerSvg=hp,Ce.Measurable=MA,Ce.NextConnection=nw,Ce.OutputConnection=lw,Ce.PathObject=Fc,Ce.PreviousConnection=cw,Ce.RenderInfo=un,Ce.Renderer=Uc,Ce.RoundCorner=cn,Ce.Row=nn,Ce.SpacerRow=lp,Ce.SquareCorner=an,Ce.StatementInput=ln,Ce.TopRow=cp,Ce.Types=E,Ce.init=kh,Ce.register=Lo,Ce.unregister=bm;var uw=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&Fe(e,t),(t=this.theme.getClassName())&&q(e,t));for(let A=0,o;o=this.subscribedWorkspaces_[A];A++)o.refreshTheme();for(const[A,o]of this.componentDB)for(const l of o){e=l.element,t=l.propertyName;const u=this.theme&&this.theme.getComponentStyle(A);e.style.setProperty(t,u||"")}for(const A of this.subscribedWorkspaces_)A.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces_.push(e)}unsubscribeWorkspace(e){if(!pt(this.subscribedWorkspaces_,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,A){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:A}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(A,t||"")}unsubscribe(e){if(e)for(const[t,A]of this.componentDB){for(let o=A.length-1;0<=o;o--)A[o].element===e&&A.splice(o,1);A.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},dp="VARIABLE_DYNAMIC",Qi={CATEGORY_NAME:dp};Qi.flyoutCategory=Vl,Qi.flyoutCategoryBlocks=Rh,Qi.onCreateVariableButtonClick_Colour=Uh,Qi.onCreateVariableButtonClick_Number=Fh,Qi.onCreateVariableButtonClick_String=Sh;var hw=30,Mi=[];Mi[K.INPUT_VALUE]=K.OUTPUT_VALUE,Mi[K.OUTPUT_VALUE]=K.INPUT_VALUE,Mi[K.NEXT_STATEMENT]=K.PREVIOUS_STATEMENT,Mi[K.PREVIOUS_STATEMENT]=K.NEXT_STATEMENT;var pp="RENAME_VARIABLE_ID",gp="DELETE_VARIABLE_ID",dw=class{canConnect(e,t,A,o){return this.canConnectWithReason(e,t,A,o)===ge.CAN_CONNECT}canConnectWithReason(e,t,A,o){const l=this.doSafetyChecks(e,t);return l!==ge.CAN_CONNECT?l:this.doTypeChecks(e,t)?A&&!this.doDragChecks(e,t,o||0)?ge.REASON_DRAG_CHECKS_FAILED:ge.CAN_CONNECT:ge.REASON_CHECKS_FAILED}getErrorMessage(e,t,A){switch(e){case ge.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case ge.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case ge.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case ge.REASON_TARGET_NULL:return"Target connection is null.";case ge.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+A.getCheck());case ge.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case ge.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case ge.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return ge.REASON_TARGET_NULL;let A,o,l;return e.isSuperior()?(A=e.getSourceBlock(),o=t.getSourceBlock(),l=t):(o=e.getSourceBlock(),A=t.getSourceBlock(),l=e,e=t),A===o?ge.REASON_SELF_CONNECTION:l.type!==Mi[e.type]?ge.REASON_WRONG_TYPE:A.workspace!==o.workspace?ge.REASON_DIFFERENT_WORKSPACES:A.isShadow()&&!o.isShadow()?ge.REASON_SHADOW_PARENT:l.type===K.OUTPUT_VALUE&&o.previousConnection&&o.previousConnection.isConnected()||l.type===K.PREVIOUS_STATEMENT&&o.outputConnection&&o.outputConnection.isConnected()?ge.REASON_PREVIOUS_AND_OUTPUT:ge.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let A=0;A<e.length;A++)if(t.includes(e[A]))return!0;return!1}doDragChecks(e,t,A){if(e.distanceFrom(t)>A||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case K.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case K.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case K.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case K.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return!Po.includes(t)}canConnectToPrevious_(e,t){return e.targetConnection||Po.includes(t)?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};n(M.CONNECTION_CHECKER,DA,dw);var fp=class extends Xo{constructor(e){super(e),this.type=mi,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new fp),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)}};n(M.EVENT,mi,fp);var $p=class extends Xo{constructor(e,t){super(e),this.type=ds,e&&(this.oldName=e.name,this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new $p),t.oldName=e.oldName,t.newName=e.newName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)}};n(M.EVENT,ds,$p);var mp=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.name!==t){var A=this.getVariable(t,e.type),o=this.workspace.getAllBlocks(!1),l=i.getGroup$$module$build$src$core$events$utils();l||i.setGroup$$module$build$src$core$events$utils(!0);try{A&&A.getId()!==e.getId()?this.renameVariableWithConflict_(e,t,A,o):this.renameVariableAndUses_(e,t,o)}finally{i.setGroup$$module$build$src$core$events$utils(l)}}}renameVariableById(e,t){const A=this.getVariableById(e);if(!A)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(A,t)}renameVariableAndUses_(e,t,A){for(_(new(L(ds))(e,t)),e.name=t,t=0;t<A.length;t++)A[t].updateVarName(e)}renameVariableWithConflict_(e,t,A,o){const l=e.type;for(t!==A.name&&this.renameVariableAndUses_(A,t,o),t=0;t<o.length;t++)o[t].renameVarById(e.getId(),A.getId());_(new(L(mi))(e)),pt(this.variableMap.get(l),e)}createVariable(e,t,A){var o=this.getVariable(e,t);if(o){if(A&&o.getId()!==A)throw Error('Variable "'+e+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+A+'".');return o}if(A&&this.getVariableById(A))throw Error('Variable id, "'+A+'", is already in use.');return o=A||C(),t=t||"",o=new Yo(this.workspace,e,t,o),e=this.variableMap.get(t)||[],e.push(o),this.variableMap.delete(t),this.variableMap.set(t,e),_(new(L(rr))(o)),o}deleteVariable(e){const t=e.getId(),A=this.variableMap.get(e.type);if(A){for(let o=0;o<A.length;o++)if(A[o].getId()===t){A.splice(o,1),_(new(L(mi))(e)),A.length===0&&this.variableMap.delete(e.type);break}}}deleteVariableById(e){const t=this.getVariableById(e);if(t){var A=t.name;const o=this.getVariableUsesById(e);for(let l=0,u;u=o[l];l++)if(u.type==="procedures_defnoreturn"||u.type==="procedures_defreturn"){e=String(u.getFieldValue("NAME")),A=i.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",A).replace("%2",e),bo(A);return}1<o.length?(A=i.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(o.length)).replace("%2",A),fl(A,l=>{l&&t&&this.deleteVariableInternal(t,o)})):this.deleteVariableInternal(t,o)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,t){const A=i.getGroup$$module$build$src$core$events$utils();A||i.setGroup$$module$build$src$core$events$utils(!0);try{for(let o=0;o<t.length;o++)t[o].dispose(!0);this.deleteVariable(e)}finally{i.setGroup$$module$build$src$core$events$utils(A)}}getVariable(e,t){if(t=this.variableMap.get(t||"")){for(let A=0,o;o=t[A];A++)if(i.Names$$module$build$src$core$names.equals(o.name,e))return o}return null}getVariableById(e){for(const t of this.variableMap.values())for(const A of t)if(A.getId()===e)return A;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const t=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const A of e.getPotentialVariableMap().variableMap.keys())t.add(A);return t.has("")||t.add(""),Array.from(t.values())}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(t);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const t=[],A=this.workspace.getAllBlocks(!1);for(let o=0;o<A.length;o++){const l=A[o].getVarModels();if(l)for(let u=0;u<l.length;u++)l[u].getId()===e&&t.push(A[o])}return t}},Ms=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new YB,this.potentialVariableMap=null,this.id=C(),te(this),this.options=e||new iA({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(B(M.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new mp(this)}dispose(){this.listeners.length=0,this.clear(),ae(this)}sortObjects_(e,t){const A=Math.sin(bl(Ms.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+A*e.x-(t.y+A*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!pt(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const t=[].concat(this.topBlocks);return e&&1<t.length&&t.sort(this.sortObjects_.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){pt(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&1<e.length&&e.sort(this.sortObjects_.bind(this)),e.filter(function(A){return!A.isInsertionMarker()})):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!pt(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const t=[].concat(this.topComments);return e&&1<t.length&&t.sort(this.sortObjects_.bind(this)),t}getAllBlocks(e=!1){if(e){var t=this.getTopBlocks(!0);e=[];for(let A=0;A<t.length;A++)e.push(...t[A].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(function(A){return!A.isInsertionMarker()})}clear(){this.isClearing=!0;try{const e=i.getGroup$$module$build$src$core$events$utils();for(e||i.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();i.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){this.variableMap.renameVariableById(e,t)}createVariable(e,t,A){return this.variableMap.createVariable(e,t,A)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,t){return this.variableMap.getVariable(e,t)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const A in e){if(e[A]>this.remainingCapacityOfType(A))return!1;t+=e[A]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,A=e?this.undoStack_:this.redoStack_;const o=t.pop();if(o){for(var l=[o];t.length&&o.group&&o.group===t[t.length-1].group;){const u=t.pop();u&&l.push(u)}for(t=0;t<l.length;t++)A.push(l[t]);l=F(l,e),i.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(A=0;A<l.length;A++)l[A].run(e)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,k()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){pt(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let A=0;A<t.length;A++)if(!t[A].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new mp(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return ie(e)}static getAll(){return me()}};Ms.SCAN_ANGLE=3;var Gv=100,pw=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var A=new globalThis.Audio}catch{return}for(let l=0;l<e.length;l++){const u=e[l],m=u.match(/\.(\w+)$/);if(m&&A.canPlayType("audio/"+m[1])){var o=new globalThis.Audio(u);break}}o&&this.sounds.set(t,o)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),Go||lB)break}}play(e,t){if(!this.muted){var A=this.sounds.get(e);A?(e=new Date,this.lastSound_!==null&&e.getTime()-this.lastSound_.getTime()<Gv||(this.lastSound_=e,A=Go||$d?A:A.cloneNode(),A.volume=t===void 0?1:t,A.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},Vv=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(Es),q(e,"blocklyBlockCanvas"),e=this.createLayer(Ud),q(e,"blocklyBubbleCanvas")}createDragLayer(e){const t=R(y.SVG,{class:"blocklyBlockDragSurface",xmlns:Vo,"xmlns:html":LA,"xmlns:xlink":Xt,version:"1.1"});return e.append(t),R(y.G,{},t)}createAnimationLayer(e){const t=R(y.SVG,{class:"blocklyAnimationLayer",xmlns:Vo,"xmlns:html":LA,"xmlns:xlink":Xt,version:"1.1"});return e.append(t),R(y.G,{},t)}appendToAnimationLayer(e){let t;const A=(t=this.dragLayer)==null?void 0:t.getAttribute("transform");if(A){let l;(l=this.animationLayer)==null||l.setAttribute("transform",A)}let o;(o=this.animationLayer)==null||o.appendChild(e.getSvgRoot())}translateLayers(e,t){e=`translate(${e.x}, ${e.y}) scale(${t})`;let A;(A=this.dragLayer)==null||A.setAttribute("transform",e);for(const[,o]of this.layers)o.setAttribute("transform",e)}moveToDragLayer(e){let t;(t=this.dragLayer)==null||t.appendChild(e.getSvgRoot())}moveOffDragLayer(e,t){this.append(e,t)}append(e,t){this.layers.has(t)||this.createLayer(t);let A;(A=this.layers.get(t))==null||A.appendChild(e.getSvgRoot())}createLayer(e){const t=this.workspace.getSvgGroup(),A=R(y.G,{});let o=!1;const l=[...this.layers].sort((u,m)=>u[0]-m[0]);for(const[u,m]of l)if(e<u){t.insertBefore(A,m),o=!0;break}return o||t.appendChild(A),this.layers.set(e,A),A}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(Es)}getBubbleLayer(){return this.layers.get(Ud)}},Kv=20,nA=class extends Ms{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(B(M.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||nA.setTopLevelWorkspaceMetrics_,this.componentManager=new at,this.connectionDBList=xs.init(this.connectionChecker),this.audioManager=new pw(e.parentWorkspace),this.grid=this.options.gridPattern?new Zd(this.options.gridPattern,e.gridOptions):null,this.markerManager=new en(this),_t&&ml&&this.registerToolboxCategoryCallback(Id,ml),Qi&&Vl&&this.registerToolboxCategoryCallback(dp,Vl),Rt&&Pl&&(this.registerToolboxCategoryCallback(Ic,Pl),this.addChangeListener(yh)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new uw(this,this.options.theme||Cc),this.themeManager_.subscribeWorkspace(this);let t;this.renderer=kh(this.options.renderer||"geras",this.getTheme(),(t=this.options.rendererOverrides)!=null?t:void 0),this.cachedParentSvgSize=new pe(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=Cc),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(t){return!!t.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(L(ms))(this.getTheme().name,this.id);_(e)}updateBlockStyles_(e){for(let t=0,A;A=e[t];t++){const o=A.getStyleName();o&&A.setStyle(o)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(e){let t=0,A=0,o=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(o=this.scale);do{const l=_o(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(o=1),t+=l.x*o,A+=l.y*o,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new N(t,A)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new pe(e.width,e.height)}getOriginOffsetInPixels(){return ll(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,t){return this.injectionDiv||(this.injectionDiv=t??null),this.svgGroup_=R(y.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=R(y.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new Vv(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(j(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),j(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(B(M.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=B(M.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&ve(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&ve(e.parentNode)}this.resizeHandlerWrapper&&(ue(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=nA.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new BB(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const t=new iA({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(B(M.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(B(M.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(at.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),A=[];for(let o=0,l;l=e[o];o++){l.position(t,A);const u=l.getBoundingRectangle();u&&A.push(u)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const e=pu();N.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,t){const A=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,A.setAttribute("data-cached-width",`${e}`)),t!=null&&(this.cachedParentSvgSize.height=t,A.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(x()){var e=this.scale,t=-this.scrollY,A=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(t-this.oldTop)&&1>Math.abs(A-this.oldLeft))){var o=new(L(Dr))(t,A,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=A,_(o)}}}translate(e,t){let A;(A=this.layerManager)==null||A.translateLayers(new N(e,t),this.scale);let o;(o=this.grid)==null||o.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.isVisible_=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let t=e.length-1;0<=t;t--)e[t].queueRender();this.getTopBlocks().flatMap(t=>t.getDescendants(!1)).filter(t=>t.isInsertionMarker()).forEach(t=>t.queueRender()),kA().then(()=>void this.markerManager.updateMarkers())}highlightBlock(e,t){if(t===void 0){for(let A=0,o;o=this.highlightedBlocks[A];A++)o.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):pt(this.highlightedBlocks,e),e.setHighlighted(t))}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()}renameVariableById(e,t){super.renameVariableById(e,t),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,t,A){return e=super.createVariable(e,t,A),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(at.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,A;A=e[t];t++){const o=A.getClientRect();o&&this.dragTargetAreas.push({component:A,clientRect:o})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,A;A=this.dragTargetAreas[t];t++)if(A.clientRect.contains(e.clientX,e.clientY))return A.component;return null}onMouseDown_(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){e=St(e,this.getParentSvg(),this.getInverseScreenCTM()),e.x/=this.scale,e.y/=this.scale,this.dragDeltaXY=N.difference(t,e)}moveDrag(e){return e=St(e,this.getParentSvg(),this.getInverseScreenCTM()),e.x/=this.scale,e.y/=this.scale,N.sum(this.dragDeltaXY,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel_(e){if(ur.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,A=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||A){var o=be(e);if(md)var l=e.metaKey;t&&(e.ctrlKey||l||!A)?(o=-o.y/50,t=St(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,o)):(t=this.scrollX-o.x,A=this.scrollY-o.y,e.shiftKey&&!o.x&&(t=this.scrollX-o.y,A=this.scrollY),this.scroll(t,A)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new ke(0,0,0,0);const t=e[0].getBoundingRectangle();for(let o=1;o<e.length;o++){var A=e[o];A.isInsertionMarker&&A.isInsertionMarker()||(A=A.getBoundingRectangle(),A.top<t.top&&(t.top=A.top),A.bottom>t.bottom&&(t.bottom=A.bottom),A.left<t.left&&(t.left=A.left),A.right>t.right&&(t.right=A.right))}return t}cleanUp(){this.setResizesEnabled(!1),i.setGroup$$module$build$src$core$events$utils(!0);const e=this.getTopBlocks(!0);let t=0;for(let A=0,o;o=e[A];A++){if(!o.isMovable())continue;const l=o.getRelativeToSurfaceXY();o.moveBy(-l.x,t-l.y,["cleanup"]),o.snapToGrid(),t=o.getRelativeToSurfaceXY().y+o.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}i.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var t=le.registry.getContextMenuOptions(le.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),Uo(e,t,this.RTL,this)}}updateToolbox(e){if(e=cl(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(al(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Ve(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,A){A=Math.pow(this.options.zoomOptions.scaleSpeed,A);const o=this.scale*A;if(this.scale!==o){o>this.options.zoomOptions.maxScale?A=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(A=this.options.zoomOptions.minScale/this.scale);var l=this.getCanvas().getCTM(),u=this.getParentSvg().createSVGPoint();u.x=e,u.y=t,u=u.matrixTransform(l.inverse()),e=u.x,t=u.y,l=l.translate(e*(1-A),t*(1-A)).scale(A),this.scrollX=l.e,this.scrollY=l.f,this.setScale(o)}}zoomCenter(e){var t=this.getMetrics();let A;this.flyout?(A=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(A=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(A,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var A=this.getBlocksBoundingBox(),o=2*Kv,l=A.right-A.left+o;if(A=A.bottom-A.top+o,l){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),A+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),l+=this.flyout.getWidth()/this.scale)),t/=l,e/=A,i.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{i.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){q(this.getCanvas(),"blocklyCanvasTransitioning"),q(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){Fe(this.getCanvas(),"blocklyCanvasTransitioning"),Fe(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,A=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,A=-A-e.scrollTop,this.scroll(t,A)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var A=e?this.getBlockById(e):null;if(A){e=A.getRelativeToSurfaceXY(),A=t?{height:A.height,width:A.width}:A.getHeightWidth();var o=this.scale;t=(e.x+(this.RTL?-1:1)*A.width/2)*o,e=(e.y+A.height/2)*o,A=this.getMetrics(),this.scroll(-(t-A.viewWidth/2),-(e-A.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,t){this.hideChaff(!0);const A=this.getMetrics();e=Math.min(e,-A.scrollLeft),t=Math.min(t,-A.scrollTop);const o=A.scrollTop+Math.max(0,A.scrollHeight-A.viewHeight);e=Math.max(e,-(A.scrollLeft+Math.max(0,A.scrollWidth-A.viewWidth))),t=Math.max(t,-o),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+A.scrollLeft),-(t+A.scrollTop),!1),e+=A.absoluteLeft,t+=A.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){pt(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const t=e.type==="pointerdown",A=this.currentGesture_;return A?t&&A.hasStarted()?(console.warn("Tried to start the same gesture twice."),A.cancel(),null):A:t?this.currentGesture_=new ur(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){er(),Fo(this),SA(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(at.Capability.AUTOHIDEABLE,!0).forEach(t=>t.autoHide(e))}static setTopLevelWorkspaceMetrics_(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}},Bp=class extends OA{constructor(e,t){super(t),this.type=fs,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Bp),t.isOpen=e.isOpen,t}};n(M.EVENT,fs,Bp);var wp=class extends OA{constructor(e,t,A){super(A),this.type=ps,this.oldElementId=e??void 0,this.newElementId=t??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new wp),t.oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};n(M.EVENT,ps,wp);var gw=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const t=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(t,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},_p=class extends gw{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===O.types.NEXT||e.getType()===O.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===O.types.PREVIOUS||e.getType()===O.types.OUTPUT)&&(e=e.next());let t,A;return(e=(A=(t=e)==null?void 0:t.in())!=null?A:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===O.types.NEXT||e.getType()===O.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===O.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};n(M.CURSOR,DA,_p);var hn=class extends _p{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,t){if(!e)return null;const A=e.in()||e.next();return t(A)?A:A?this.getNextNode_(A,t):(e=this.findSiblingOrParent(e.out()),t(e)?e:e?this.getNextNode_(e,t):null)}getPreviousNode_(e,t){if(!e)return null;let A=e.prev();return A=A?this.getRightMostChild(A):e.out(),t(A)?A:A?this.getPreviousNode_(A,t):null}validNode_(e){let t=!1;return e=e&&e.getType(),(e===O.types.OUTPUT||e===O.types.INPUT||e===O.types.FIELD||e===O.types.NEXT||e===O.types.PREVIOUS||e===O.types.WORKSPACE)&&(t=!0),t}findSiblingOrParent(e){if(!e)return null;const t=e.next();return t||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};hn.registrationName="basicCursor",n(M.CURSOR,hn.registrationName,hn);var fw=class extends hn{validNode_(e){let t=!1;const A=e&&e.getType();return e&&(e=e.getLocation(),A===O.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t}},Cp=10,Dt=class extends ge{constructor(e,t){super(e,t),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[Mi[t]],this.offsetInBlock=new N(0,0),this.trackedState=Dt.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Dt.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,t;(t=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||t.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e){if(!this.sourceBlock_.workspace.isDragging()){var t=this.sourceBlock_.getRootBlock();if(!t.isInFlyout){var A=!1;if(!t.isMovable()){if(t=e.getSourceBlock().getRootBlock(),!t.isMovable())return;e=this,A=!0}var o=ne()==t;o||t.addSelect();var l=e.x+i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Cp)-this.x,u=e.y+i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Cp)-this.y;A&&(u=-u),t.RTL&&(l=e.x-i.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*Cp)-this.x),t.moveBy(l,u,["bump"]),o||t.removeSelect()}}}moveTo(e,t){let A=!1;return this.trackedState===Dt.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=Dt.TrackedState.TRACKED,A=!0):this.trackedState===Dt.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),A=!0),this.x=e,this.y=t,A}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=N.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===Dt.TrackedState.TRACKED||!e&&this.trackedState===Dt.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Dt.TrackedState.TRACKED):(this.trackedState===Dt.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Dt.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const A=e[t],o=A.getConnections_(!0);for(let l=0;l<o.length;l++)o[l].setTracking(!1);for(const l of A.getIcons())As(l)&&l.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==K.INPUT_VALUE&&this.type!==K.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let A;t.isCollapsed()?(A=[],t.outputConnection&&A.push(t.outputConnection),t.nextConnection&&A.push(t.nextConnection),t.previousConnection&&A.push(t.previousConnection)):A=t.getConnections_(!0);for(let o=0;o<A.length;o++)e.push(...A[o].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(v()){const A=i.getGroup$$module$build$src$core$events$utils();setTimeout((function(){t.isDisposed()||t.getParent()||(i.setGroup$$module$build$src$core$events$utils(A),this.bumpAwayFrom(e),i.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),i.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:A}=this.getParentAndChildConnections();if(t&&A){var o=i.getGroup$$module$build$src$core$events$utils();o||i.setGroup$$module$build$src$core$events$utils(!0);var l=t.getSourceBlock(),u=A.getSourceBlock();super.disconnectInternal(e),l.queueRender(),u.updateDisabled(),u.queueRender(),u.getSvgRoot().style.display="block",i.setGroup$$module$build$src$core$events$utils(o)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.updateDisabled(),e.updateDisabled(),e.queueRender(),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Dt||(Dt={})),Dt.TrackedState;var dn=class{paste(e,t,A){if(!t.isCapacityAvailable(e.typeCounts))return null;A&&(e.blockState.x=A.x,e.blockState.y=A.y),A=A||new N(e.blockState.x||0,e.blockState.y||0),i.disable$$module$build$src$core$events$utils();let o;try{o=ZA(e.blockState,t),vm(o,A)}finally{i.enable$$module$build$src$core$events$utils()}return o&&(x()&&!o.isShadow()&&_(new(L(i.CREATE$$module$build$src$core$events$utils))(o)),i.setSelected$$module$build$src$core$common(o),o)}};dn.TYPE="block",Cl(dn.TYPE,new dn);var Rc={};Rc.bumpIntoBounds=us,Rc.bumpIntoBoundsHandler=Dh,Rc.bumpTopObjectsIntoBounds=Kl;var $w=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new N(0,0),this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,t;return(t=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?t:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(B(M.CONNECTION_PREVIEWER,this.workspace.options))(this.block),ci(),this.workspace.setResizesEnabled(!1),cs(),e=!!e&&(e.altKey||e.ctrlKey||e.metaKey),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.block)}}startDraggingShadow(e){const t=this.block.getParent();if(!t)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=N.difference(t.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),t.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let t,A,o;if(this.startParentConn=(o=(t=this.block.outputConnection)==null?void 0:t.targetConnection)!=null?o:(A=this.block.previousConnection)==null?void 0:A.targetConnection,e){let l;this.startChildConn=(l=this.block.nextConnection)==null?void 0:l.targetConnection}this.block.unplug(e),fh(this.block)}fireDragStartEvent(){const e=new(L(Bi))(this.block,!0,this.block.getDescendants(!1));_(e)}fireDragEndEvent(){const e=new(L(Bi))(this.block,!1,this.block.getDescendants(!1));_(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(L(i.MOVE$$module$build$src$core$events$utils))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),_(e)}}drag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.drag(N.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,N.difference(e,this.startLoc))}updateConnectionPreview(e,t){var A=this.connectionCandidate;const o=this.getConnectionCandidate(e,t);if(o){this.connectionCandidate=t=A&&this.currCandidateIsBetter(A,t,o)?A:o;var{local:l,neighbour:u}=t;t=l.type===K.OUTPUT_VALUE||l.type===K.PREVIOUS_STATEMENT,A=u.isConnected()&&!u.targetBlock().isInsertionMarker(),t&&A&&!this.orphanCanConnectAtEnd(e,u.targetBlock(),l.type)?this.connectionPreviewer.previewReplacement(l,u,u.targetBlock()):this.connectionPreviewer.previewConnection(l,u)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(e,t,A){return!!ge.getConnectionForOrphanedConnection(e,A===K.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}currCandidateIsBetter(e,t,A){const{local:o,neighbour:l}=e;e=new N(o.x,o.y);const u=new N(l.x,l.y);return t=N.distance(N.sum(e,t),u),A.distance>t-i.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,t){e=this.getLocalConnections(e);let A=this.connectionCandidate?i.config$$module$build$src$core$config.connectingSnapRadius:i.config$$module$build$src$core$config.snapRadius,o=null;for(const l of e){const{connection:u,radius:m}=l.closest(A,t);u&&(o={local:l,neighbour:u,distance:m},A=m)}return o}getLocalConnections(e){const t=e.getConnections_(!1),A=e.lastConnectionInStack(!0);return A&&A!==e.nextConnection&&t.push(A),t}endDrag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.endDrag(e)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),ai(),cs(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,Es),this.block.setDragging(!1)}this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.block.queueRender(),this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0),i.setGroup$$module$build$src$core$events$utils(!1)}}applyConnections(e){const{local:t,neighbour:A}=e;t.connect(A);const o=t.isSuperior()?A:t,l=this.block.getRootBlock();kA().then(()=>{Ol(o.getSourceBlock()),setTimeout(()=>{l.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.revertDrag()}else{var e;if((e=this.startChildConn)==null||e.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case K.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case K.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,Es),us(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},lA=class extends Li{constructor(e,t,A){if(super(e,t,A),this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new N(0,0),this.dragStrategy=new $w(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup_=R(y.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),e=this.pathObject.svgPath,e.tooltip=this,ss(e),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const t of this.getIcons())t.initView(this.createIconPointerDownListener(t)),t.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),e=this.getSvgRoot(),!this.workspace.options.readOnly&&e&&j(e,"pointerdown",this,this.onMouseDown_),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let e;(e=this.getParent())==null||e.select()}else this.addSelect()}unselect(){if(this.isShadow()){let e;(e=this.getParent())==null||e.unselect()}else this.removeSelect()}setParent(e){const t=this.parentBlock_;if(e!==t){ci(),super.setParent(e),ai();var A=this.getSvgRoot();if(!this.workspace.isClearing&&A){var o=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(A):t&&((e=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(A,e):this.workspace.getCanvas().appendChild(A),this.translate(o.x,o.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,A=0,o=this.getSvgRoot();if(o)do{const l=_o(o);t+=l.x,A+=l.y,o=o.parentNode}while(o&&!e.hasLayer(o));return new N(t,A)}moveBy(e,t,A){if(this.parentBlock_)throw Error("Block has parent");const o=x();let l=null;o&&(l=new(L(i.MOVE$$module$build$src$core$events$utils))(this),A&&l.setReason(A)),e=new N(e,t),t=this.getRelativeToSurfaceXY(),e=N.sum(t,e),this.translate(e.x,e.y),this.updateComponentLocations(e),o&&l&&(l.recordNew(),_(l)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new N(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const A=this.getRelativeToSurfaceXY();this.moveBy(e.x-A.x,e.y-A.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY(),t=this.getHeightWidth();let A,o;return this.RTL?(A=e.x-t.width,o=e.x):(A=e.x,o=e.x+t.width),new ke(e.y,e.y+t.height,A,o)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed_())}updateCollapsed_(){var e=this.isCollapsed();const t=zo,A=oc;for(let l=0,u;u=this.inputList[l];l++)u.name!==t&&u.setVisible(!e);for(var o of this.getIcons())o.updateCollapsed();e?(e=this.toString(hw),(o=this.getField(A))?o.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new Oi(e),A)):(this.updateDisabled(),this.removeInput(t))}tab(e,t){const A=new fw;A.setCurNode(O.createFieldNode(e)),e=A.getCurNode(),t?A.next():A.prev(),(t=A.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))}onMouseDown_(e){const t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=le.registry.getContextMenuOptions(le.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const t=this.generateContextMenu();t&&t.length&&(Uo(e,t,this.RTL,this.workspace),nh(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const t of this.getChildren(!1))t.updateComponentLocations(N.sum(e,t.relativeCoords))}updateConnectionLocations(e){for(const t of this.getConnections_(!1))t.moveToOffset(e)}updateIconLocations(e){for(const t of this.getIcons())t.onLocationChange(e)}updateFieldLocations(e){for(const t of this.inputList)for(const A of t.fieldRow)A.onLocationChange(e)}setDragging(e){(this.dragging=e)?(this.translation="",Po.push(...this.getConnections_(!0)),q(this.svgGroup_,"blocklyDragging")):(Po.length=0,Fe(this.svgGroup_,"blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(e,t){this.disposing=!0,Yu(),Ro(),t&&(this.unplug(e),xl(this)),super.dispose(!!e),ve(this.svgGroup_)}disposeInternal(){this.disposing=!0,super.disposeInternal(),ne()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(i.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),i.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:dn.TYPE,blockState:zt(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:mt(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let t=0;t<e.length;t++)e[t].applyColour();for(let t=0,A;A=this.inputList[t];t++)for(let o=0,l;l=A.fieldRow[o];o++)l.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let t;(t=this.getNextBlock())==null||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const t of this.getChildren(!1))t.updateDisabled()}}setWarningText(e,t=""){if(t)this.warningTextDb.has(t)&&(clearTimeout(this.warningTextDb.get(t)),this.warningTextDb.delete(t));else{for(var A of this.warningTextDb.values())clearTimeout(A);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(t,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(t),this.setWarningText(e,t))},100));else if(this.isInFlyout&&(e=null),A=this.getIcon(gr.TYPE),e){let o=this.getSurroundParent(),l=null;for(;o;)o.isCollapsed()&&(l=o),o=o.getSurroundParent();l&&l.setWarningText(i.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,lA.COLLAPSED_WARNING_ID),A?A.addMessage(e,t):this.addIcon(new gr(this).addMessage(e,t))}else A&&(t?(A.addMessage("",t),A.getText()||this.removeIcon(gr.TYPE)):this.removeIcon(gr.TYPE))}setMutator(e){this.removeIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof i.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),t}setEnabled(e){Fr("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const t=this.isEnabled();super.setEnabled(e),this.isEnabled()===t||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(e,t){const A=this.isEnabled();super.setDisabledReason(e,t),this.isEnabled()===A||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,t)this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour();else throw Error("Invalid style name: "+e)}bringToFront(e=!1){let t=this;if(!t.isDeadOrDying())do{const A=t.getSvgRoot(),o=A.parentNode,l=o.childNodes;if(l[l.length-1]!==A&&o.appendChild(A),e)break;t=t.getParent()}while(t)}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.queueRender()}setNextStatement(e,t){super.setNextStatement(e,t),this.queueRender()}setOutput(e,t){super.setOutput(e,t),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,t){return e=super.removeInput(e,t),this.queueRender(),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var A=this.inputList[t].connection;A&&(A.setTracking(e),(A=A.targetBlock())&&A.setConnectionTracking(e))}}getConnections_(e){const t=[];if(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)for(let A=0,o;o=this.inputList[A];A++)o.connection&&t.push(o.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new Dt(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let A;(A=t.targetBlock())==null||A.bumpNeighbours()}for(const A of t.neighbours(i.config$$module$build$src$core$config.snapRadius))A.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&A.isConnected()||(t.isSuperior()?A.bumpAwayFrom(t):t.bumpAwayFrom(A)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,t,A){if(e.type===K.NEXT_STATEMENT||e.type===K.INPUT_VALUE){let o=t.x;t=t.y,o+=A.x-e.getOffsetInBlock().x,t+=A.y-e.getOffsetInBlock().y,this.moveBy(o,t)}}getChildren(e){return super.getChildren(e)}queueRender(){return Cu(this)}render(){this.queueRender(),qA()}renderEfficiently(){ci(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),ai(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(en.LOCAL_MARKER).draw();for(const e of this.inputList)for(const t of e.fieldRow)t.updateMarkers_()}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,t=this.width;var A=this.getNextBlock();if(A){A=A.getHeightWidth();const o=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=A.height-o,t=Math.max(t,A.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}setDragStrategy(e){this.dragStrategy=e}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,t){this.dragStrategy.drag(e,t)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},zt(this)),t=new Set(["id","height","width","pinned","enabled"]),A=function(o){for(const l in o)t.has(l)?delete o[l]:typeof o[l]=="object"&&A(o[l])};return A(e),[e]}};lA.INLINE=-1,lA.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var mw=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},Dc=class extends mw{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof lA?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(eA(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},Bw=class extends Dc{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new iA({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===se.TOP?se.BOTTOM:se.TOP,this.flyout=new(B(M.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===se.RIGHT?se.LEFT:se.RIGHT,this.flyout=new(B(M.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=R(y.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=R(y.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),R(y.RECT,{width:Ns,height:xc,y:Hs},e);const A=R(y.IMAGE,{width:Ut.width,x:-bp,height:Ut.height,y:-vp,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return A.setAttributeNS(Xt,"xlink:href",this.workspace.options.pathToMedia+Ut.url),e=R(y.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),R(y.RECT,{width:Ns,height:Hs},e),this.svgLid=R(y.IMAGE,{width:Ut.width,x:-bp,height:Ut.height,y:-vp,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(Xt,"xlink:href",this.workspace.options.pathToMedia+Ut.url),ee(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),ee(this.svgGroup,"pointerup",this,this.click),ee(A,"pointerover",this,this.mouseOver),ee(A,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(li(this.flyout.createDom(y.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[at.Capability.AUTOHIDEABLE,at.Capability.DELETE_AREA,at.Capability.DRAG_TARGET,at.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&ve(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(A){return JSON.parse(A)}),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout(()=>{let A;(A=this.flyout)==null||A.show(e),t.cursor="";let o;(o=this.workspace.scrollbar)==null||o.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var t;(t=this.workspace.scrollbar)==null||t.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var A=pl(this.workspace,e);e=dl(A,new pe(Ns,xc+Hs),Wv,ww,e,this.workspace),t=gl(e,ww,A.vertical===ar.TOP?Lr.DOWN:Lr.UP,t),this.top=t.top,this.left=t.left;var o;(o=this.svgGroup)==null||o.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new ke(this.top,this.top+xc+Hs,this.left,this.left+Ns)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+vp-Oc;return e=e.left+bp-Oc,new ke(t,t+Hs+xc+2*Oc,e,e+Ns+2*Oc)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=Yv;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Cw),t=_w+this.lidOpen*(Jv-_w),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),Xv/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===se.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let A;(A=this.svgLid)==null||A.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:Ns-4)+","+(Hs-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*Cw)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(L(fs))(e,this.workspace.id),_(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||e.type!==i.DELETE$$module$build$src$core$events$utils||e.type!==i.DELETE$$module$build$src$core$events$utils||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(zv)}}}cleanBlockJson(e){function t(A){if(A){if(delete A.id,delete A.x,delete A.y,delete A.enabled,delete A.disabledReasons,A.icons&&A.icons.comment){var o=A.icons.comment;delete o.height,delete o.width,delete o.pinned}o=A.inputs;for(var l in o){var u=o[l];const m=u.block;u=u.shadow,m&&t(m),u&&t(u)}A.next&&(l=A.next,A=l.block,l=l.shadow,A&&t(A),l&&t(l))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},Ns=47,xc=44,Hs=16,ww=20,Wv=20,Oc=10,bp=0,vp=32,zv=.1,Xv=80,Yv=4,_w=.4,Jv=.8,Cw=45,we=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),(t=e.keyCodes)&&0<t.length)for(let A=0;A<t.length;A++)this.addKeyMapping(t[A],e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,A){e=`${e}`;const o=this.keyMap.get(e);if(o&&!A)throw Error(`Shortcut named "${t}" collides with shortcuts "${o}"`);o&&A?o.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,A){const o=this.keyMap.get(e);if(!o)return A||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const l=o.indexOf(t);return-1<l?(o.splice(l,1),o.length===0&&this.keyMap.delete(e),!0):(A||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,A]of this.keyMap)e[t]=A;return e}getRegistry(){const e=Object.create(null);for(const[t,A]of this.shortcuts)e[t]=A;return tr(Object.create(null),e)}onKeyDown(e,t){var A=this.serializeKeyEvent_(t);if(A=this.getShortcutNamesByKeyCode(A),!A)return!1;for(let o=0,l;l=A[o];o++){const u=this.shortcuts.get(l);let m,b;if((m=u)==null||!m.preconditionFn||(b=u)!=null&&b.preconditionFn(e)){let T,V;if((T=u)!=null&&T.callback&&((V=u)!=null&&V.callback(e,t,u)))return!0}}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const t=[];for(const[A,o]of this.keyMap)-1<o.indexOf(e)&&t.push(A);return t}serializeKeyEvent_(e){let t="";for(const A in we.modifierKeys)e.getModifierState(A)&&(t!==""&&(t+="+"),t+=A);return t!==""&&e.keyCode?t+="+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers_(e){for(let t=0,A;A=e[t];t++)if(!(A in we.modifierKeys))throw Error(A+" is not a valid modifier key.")}createSerializedKey(e,t){let A="";if(t){this.checkModifiers_(t);for(const o in we.modifierKeys)t.includes(we.modifierKeys[o])&&(A!==""&&(A+="+"),A+=o)}return A!==""&&e?A+="+"+e:e&&(A=`${e}`),A}};we.registry=new we,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(we||(we={}));var Ep=null,yp=null,jv={duplicateInternal:km,copyInternal:Tm},pn={};pn.BlockPaster=dn,pn.TEST_ONLY=jv,pn.paste=Ur,pn.registry=Dd;var HA;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(HA||(HA={}));var Hr=null,Pr=null,Ps=null;Gh();var PA={};PA.names=HA,PA.registerCopy=Qh,PA.registerCut=Mh,PA.registerDefaultShortcuts=Gh,PA.registerDelete=Lh,PA.registerEscape=Oh,PA.registerPaste=Nh,PA.registerRedo=Ph,PA.registerUndo=Hh;var qv=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=SB}save(e){return e=e.getProcedureMap().getProcedures().map(t=>Vh(t)),e.length?e:null}load(e,t){const A=t.getProcedureMap();for(const o of e)A.add(Kh(this.procedureModelClass,this.parameterModelClass,o,t))}clear(e){e.getProcedureMap().clear()}},Lc={};Lc.ProcedureSerializer=qv,Lc.loadProcedure=Kh,Lc.saveProcedure=Vh;var bw=class{constructor(){this.priority=kB}save(e){const t=[];for(const A of e.getAllVariables())e={name:A.name,id:A.getId()},A.type&&(e.type=A.type),t.push(e);return t.length?t:null}load(e,t){for(const A of e)t.createVariable(A.name,A.type,A.id)}clear(e){e.getVariableMap().clear()}};Eo("variables",new bw);var vw={};vw.VariableSerializer=bw;var Ip={};Ip.load=Fm,Ip.save=Sm;var Zv={blocks:qo,exceptions:Ti,priorities:Tv,procedures:Lc,registry:Rd,variables:vw,workspaceComments:ac,workspaces:Ip},Tp=class{constructor(e,t,A,o,l){this.workspace=e,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,A=A===void 0?!0:A;const u=t&&A;t&&(this.hScroll=new Ye(e,!0,u,o,l)),A&&(this.vScroll=new Ye(e,!1,u,o,l)),u&&(this.corner_=R(y.RECT,{height:Ye.scrollbarThickness,width:Ye.scrollbarThickness,class:"blocklyScrollbarBackground"}),li(this.corner_,e.getBubbleCanvas()))}dispose(){ve(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,A=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===e.viewWidth&&this.oldHostMetrics_.viewHeight===e.viewHeight&&this.oldHostMetrics_.absoluteTop===e.absoluteTop&&this.oldHostMetrics_.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===e.scrollWidth&&this.oldHostMetrics_.viewLeft===e.viewLeft&&this.oldHostMetrics_.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===e.scrollHeight&&this.oldHostMetrics_.viewTop===e.viewTop&&this.oldHostMetrics_.scrollTop===e.scrollTop||(A=!0)):A=t=!0,t||A){try{i.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&A&&this.vScroll.resize(e)}finally{i.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft){let o;(o=this.corner_)==null||o.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteTop!==e.absoluteTop){let o;(o=this.corner_)==null||o.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,A){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(A||A===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},kp=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,A=0;return e&&(t=e.getWidth(),A=e.getHeight()),new pe(t,A)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,t=0;const A=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),l=!!this.workspace_.getToolbox();var u;const m=!((u=this.workspace_.getFlyout())!=null&&u.autoClose);u=l?A.position:o.position;const b=u===se.TOP;return u===se.LEFT&&(l&&(e+=A.width),m&&(e+=o.width)),b&&(l&&(t+=A.height),m&&(t+=o.height)),{top:t,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),A=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),l=!!this.workspace_.getToolbox();var u;const m=!((u=this.workspace_.getFlyout())!=null&&u.autoClose);u=l?A.position:o.position;const b=u===se.LEFT||u===se.RIGHT;return(u===se.TOP||u===se.BOTTOM)&&(l&&(t.height-=A.height),m&&(t.height-=o.height)),b&&(l&&(t.width-=A.width),m&&(t.width-=o.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),A=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const o={};return A||(o.top=e.top,o.bottom=e.top+e.height),t||(o.left=e.left,o.right=e.left+e.width),o}getPaddedContent_(e,t){const A=t.top+t.height,o=t.left+t.width,l=e.width;e=e.height;const u=l/2,m=e/2;return{top:Math.min(t.top-m,A-e),bottom:Math.max(A+m,t.top+e),left:Math.min(t.left-u,o-l),right:Math.max(o+u,t.left+l)}}getScrollMetrics(e,t,A){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var o=A||this.getContentMetrics();A=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,o),o=A.top!==void 0?A.top:t.top;const l=A.left!==void 0?A.left:t.left;return{top:o/e,left:l/e,width:((A.right!==void 0?A.right:t.right)-l)/e,height:((A.bottom!==void 0?A.bottom:t.bottom)-o)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),A=this.getSvgMetrics(),o=this.getAbsoluteMetrics(),l=this.getViewMetrics(),u=this.getContentMetrics(),m=this.getScrollMetrics(!1,l,u);return{contentHeight:u.height,contentWidth:u.width,contentTop:u.top,contentLeft:u.left,scrollHeight:m.height,scrollWidth:m.width,scrollTop:m.top,scrollLeft:m.left,viewHeight:l.height,viewWidth:l.width,viewTop:l.top,viewLeft:l.left,absoluteTop:o.top,absoluteLeft:o.left,svgHeight:A.height,svgWidth:A.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};n(M.METRICS_MANAGER,DA,kp),"Blockly"in globalThis||(globalThis.Blockly={Msg:vB});var Ew=class extends kc{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&ve(this.selectedGlowFilter),this.replacementGlowFilter&&ve(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,A=Pt("c",[J(25,-e),J(71,-e),J(t,0)]);return{height:e,width:t,path:A}}makeHexagonal(){function e(A,o,l){var u=A/2;return u=u>t?t:u,l=l?-1:1,A=(o?-1:1)*A/2,RA(-l*u,A)+RA(l*u,A)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(A){return A/=2,A>t?t:A},height(A){return A},connectionOffsetY(A){return A/2},connectionOffsetX(A){return-A},pathDown(A){return e(A,!1,!1)},pathUp(A){return e(A,!0,!1)},pathRightDown(A){return e(A,!1,!0)},pathRightUp(A){return e(A,!1,!0)}}}makeRounded(){function e(o,l,u){const m=o>A?o-A:0;o=(o>A?A:o)/2;const b=u===l?"0":"1";return Xe("a","0 0,"+b,o,J((u?1:-1)*o,(l?-1:1)*o))+W("v",(l?-1:1)*m)+Xe("a","0 0,"+b,o,J((u?-1:1)*o,(l?-1:1)*o))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,A=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width(o){return o/=2,o>t?t:o},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}makeSquared(){function e(A,o,l){A-=2*t;const u=l===o?"0":"1";return Xe("a","0 0,"+u,t,J((l?1:-1)*t,(o?-1:1)*t))+W("v",(o?-1:1)*A)+Xe("a","0 0,"+u,t,J((l?-1:1)*t,(o?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(A){return t},height(A){return A},connectionOffsetY(A){return A/2},connectionOffsetX(A){return-A},pathDown(A){return e(A,!1,!1)},pathUp(A){return e(A,!0,!1)},pathRightDown(A){return e(A,!1,!0)},pathRightUp(A){return e(A,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case K.INPUT_VALUE:case K.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.includes("Boolean")?this.HEXAGONAL:t&&t.includes("Number")?this.ROUNDED:(t&&t.includes("String"),this.ROUNDED);case K.PREVIOUS_STATEMENT:case K.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(V){return Pt("c",[J(V*l/2,0),J(V*l*3/4,m/2),J(V*l,m)])+as([J(V*l,u)])+Pt("c",[J(V*l/4,m/2),J(V*l/2,m),J(V*l,m)])+W("h",V*o)+Pt("c",[J(V*l/2,0),J(V*l*3/4,-(m/2)),J(V*l,-m)])+as([J(V*l,-u)])+Pt("c",[J(V*l/4,-(m/2)),J(V*l/2,-m),J(V*l,-m)])}const t=this.NOTCH_WIDTH,A=this.NOTCH_HEIGHT,o=t/3,l=o/3,u=A/2,m=u/2,b=e(1),T=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:A,pathLeft:b,pathRight:T}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Xe("a","0 0,0",e,J(-e,e)),A=Xe("a","0 0,1",e,J(-e,e)),o=Xe("a","0 0,0",e,J(e,e)),l=Xe("a","0 0,1",e,J(e,e));return{width:e,height:e,pathTop:t,pathBottom:o,rightWidth:e,rightHeight:e,pathTopRight:A,pathBottomRight:l}}generateSecondaryColour_(e){return di("#000",e,.15)||e}generateTertiaryColour_(e){return di("#000",e,.25)||e}createDom(e,t,A){super.createDom(e,t,A),e=R(y.DEFS,{},e),t=R(y.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),R(y.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),A=R(y.FECOMPONENTTRANSFER,{result:"outBlur"},t),R(y.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},A),R(y.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),R(y.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=R(y.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),R(y.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=R(y.FECOMPONENTTRANSFER,{result:"outBlur"},e),R(y.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),R(y.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),R(y.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),R(y.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},yw=class extends Sc{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(E.isSpacer(e)){const o=e.precedesStatement;var t=e.followsStatement;if(o||t){const l=this.constants_.INSIDE_CORNERS;var A=l.rightHeight;A=e.height-(o?A:0),t=t?l.pathBottomRight:"",e=0<A?W("V",e.yPos+A):"",this.outlinePath_+=t+e+(o?l.pathTopRight:"");return}}this.outlinePath_+=W("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Le(e.xPos,this.info_.startY),this.outlinePath_+=W("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=W("V",e.baseline),this.outlinePath_+=W("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=ct(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(t,e))}getInlineInputPath(e){const t=e.width-2*e.connectionWidth,A=e.height;return W("h",t)+e.shape.pathRightDown(A)+W("h",-t)+e.shape.pathUp(A)+"z"}drawStatementInput_(e){var t=e.getLastInput();const A=t.xPos+t.notchOffset+t.shape.width,o=this.constants_.INSIDE_CORNERS,l=t.shape.pathRight+W("h",-(t.notchOffset-o.width))+o.pathTop,u=e.height-2*o.height;t=o.pathBottom+W("h",t.notchOffset-o.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=W("H",A)+l+W("v",u)+t+W("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const t=e.connectionModel;if(t.type===K.NEXT_STATEMENT||t.type===K.PREVIOUS_STATEMENT||t.type===K.OUTPUT_VALUE&&!e.isDynamicShape)super.drawConnectionHighlightPath(e);else{e=t.type===K.INPUT_VALUE?ct(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):ct(e.width,-e.height/2)+e.shape.pathDown(e.height);var A=t.getSourceBlock(),o,l;(l=(o=A.pathObject).addConnectionHighlight)==null||l.call(o,t,e,t.getOffsetInBlock(),A.RTL)}}},Ni=class extends Se{constructor(e,t,A,o,l,u,m){if(super(Se.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",A=Number(ze(A)),t=Number(ze(t)),isNaN(A)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(0>=A||0>=t)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new pe(t,A+Ni.Y_PADDING),this.imageHeight=A,typeof l=="function"&&(this.clickHandler=l),e!==Se.SKIP_SETUP&&(m?this.configure_(m):(this.flipRtl=!!u,this.altText=ze(o)||""),this.setValue(ze(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=ze(e.alt))}initView(){this.imageElement=R(y.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(Xt,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(Xt,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};Ni.Y_PADDING=1,UA("field_image",Ni),Ni.prototype.DEFAULT_VALUE="";var Qc=class extends Se{constructor(e,t,A){super(Se.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==Se.SKIP_SETUP&&(A&&this.configure_(A),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new Je;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new Je;let t;return this.fullBlockClickTarget_=!((t=this.getConstants())==null||!t.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,t=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&x()&&this.value_!==e&&t&&_(new(L(i.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new Je;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.style.colourTertiary)):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(Fe(e,"blocklyInvalidInput"),gt(e,ut.INVALID,!1)):(q(e,"blocklyInvalidInput"),gt(e,ut.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new Je;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(cB||$d||Go)?this.showPromptEditor_():this.showInlineEditor_(t)}showPromptEditor_(){$l(i.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor_(e){const t=this.getSourceBlock();if(!t)throw new Je;Rl(this,t.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new Je;i.setGroup$$module$build$src$core$events$utils(!0);const t=ns();var A=this.getClickTarget_();if(!A)throw Error("A click target has not been set.");q(A,"editing"),A=document.createElement("input"),A.className="blocklyHtmlInput",A.setAttribute("spellcheck",this.spellcheck_);const o=this.workspace_.getScale();var l=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";return t.style.fontSize=l,A.style.fontSize=l,l=Qc.BORDERRADIUS*o+"px",this.isFullBlockField()&&(l=this.getScaledBBox(),l=(l.bottom-l.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,A.style.border=1*o+"px solid "+e,t.style.borderRadius=l,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*o+"px")),A.style.borderRadius=l,t.appendChild(A),A.value=A.defaultValue=this.getEditorText_(this.value_),A.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(A),A}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&x()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(_(new(L(i.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),i.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=ns().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");Fe(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper_=j(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=j(e,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(ue(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(ue(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(e){e.key==="Enter"?(pi(this),SA()):e.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),pi(this),SA()):e.key==="Tab"&&(pi(this),SA(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange_(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&x()&&this.value_!==e&&_(new(L($i))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){var e=this.getSourceBlock();if(!e)throw new Je;const t=ns(),A=this.getScaledBBox();t.style.width=A.right-A.left+"px",t.style.height=A.bottom-A.top+"px",e=new N(e.RTL?A.right-t.offsetWidth:A.left,A.top),t.style.left=e.x+"px",t.style.top=e.y+"px"}repositionForWindowResize(){const e=this.getSourceBlock();return e instanceof lA?(us(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),e)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};Qc.BORDERRADIUS=4;var Mc=class extends Qc{constructor(e,t,A){super(e,t,A)}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(ze(e.text),void 0,e)}};UA("field_input",Mc),Mc.prototype.DEFAULT_VALUE="";var Iw=class extends ip{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Nc=class extends ln{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},Tw=class extends MA{constructor(e){super(e),this.width=this.height=0,this.type|=E.getType("RIGHT_CONNECTION")}},kw=class extends cp{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Sw=class extends un{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new kw(this.constants_),this.bottomRow=new Iw(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new Tw(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?t instanceof $r||e instanceof qt||t instanceof qt?!0:e instanceof i.ValueInput$$module$build$src$core$inputs$value_input||e instanceof NA||e instanceof $r?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&E.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&E.isLeftRoundedCorner(e)&&t&&(E.isPreviousConnection(t)||E.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&E.isLeftSquareCorner(e)&&t&&E.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(E.isTopRow(e)&&E.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const A=E.isInputRow(e)&&e.hasStatement,o=E.isInputRow(t)&&t.hasStatement;return o||A?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),o&&A?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):E.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):E.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const A=this.width-this.startX;return E.isInputRow(e)&&e.hasStatement||E.isInputRow(t)&&t.hasStatement?Math.max(A,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):A}getElemCenterline_(e,t){if(e.hasStatement&&!E.isSpacer(t)&&!E.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(E.isInlineInput(t)&&t instanceof Nr){const A=t.connectedBlock;if(A&&A.outputConnection&&A.nextConnection)return e.yPos+A.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if((e instanceof NA||e instanceof $r)&&t.hasDummyInput&&t.align===i.Align$$module$build$src$core$inputs$align.LEFT&&e.align===i.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof qt){t.elements.push(new Nc(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let A;for(let o=0;o<e.elements.length;o++){const l=e.elements[o];if(E.isSpacer(l)&&(A=l),E.isField(l)&&l instanceof Ls&&l.parentInput===this.rightAlignedDummyInputs.get(e))break}if(A){A.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let l=2;l<this.rows.length-1;l+=2){var A=this.rows[l-1];const u=this.rows[l];var o=this.rows[l+1];if(A=l===2?!!this.topRow.hasPreviousConnection:!!A.followsStatement,o=l+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!o.precedesStatement,E.isInputRow(u)&&u.hasStatement){u.measure();let m,b;t=u.width-((b=(m=u.getLastInput())==null?void 0:m.width)!=null?b:0)+e}else if(A&&(l===2||o)&&E.isInputRow(u)&&!u.hasStatement){o=u.xPos,A=null;for(let m=0;m<u.elements.length;m++){const b=u.elements[m];E.isSpacer(b)&&(A=b),A&&(E.isField(b)||E.isInput(b))&&o<t&&!(E.isField(b)&&b instanceof Ls&&(b.field instanceof Oi||b.field instanceof Ni))&&(A.width+=t-o),o+=b.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,A=0;A<this.rows.length;A++){const o=this.rows[A];o.yPos=t,t+=o.height}this.height=t,A=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(A),A=e.width(A),this.outputConnection.height=t,this.outputConnection.width=A,this.outputConnection.startX=A,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(A),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=A,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=A,this.width+=A+e,this.widthWithChildren+=A+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var A=this.rows[t];if(!E.isInputRow(A))continue;e=A.elements[A.elements.length-2];let o=this.getNegativeSpacing_(A.elements[1]),l=this.getNegativeSpacing_(e);e=o+l;const u=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<u&&(e=this.width-u,o=e/2,l=e/2),A.elements.unshift(new jt(this.constants_,-o)),A.elements.push(new jt(this.constants_,-l))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)A=this.rows[t],E.isTopOrBottomRow(A)&&(A.elements[1].width-=e),A.width-=e,A.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var A=this.outputConnection.shape.type;const o=this.constants_;if(1<this.inputRows.length)switch(A){case o.SHAPES.ROUND:return A=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,A=this.height/2>A?A:this.height/2,t-A*(1-Math.sin(Math.acos((A-this.constants_.SMALL_PADDING)/A)));default:return 0}if(E.isInlineInput(e)&&e instanceof Nr){const l=e.connectedBlock;return e=l?l.pathObject.outputShapeType:e.shape.type,e==null||l&&l.outputConnection&&(l.statementInputCount||l.nextConnection)||A===o.SHAPES.HEXAGONAL&&A!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[A][e]}return E.isField(e)&&e instanceof Ls?A===o.SHAPES.ROUND&&e.field instanceof Mc?t-2.75*o.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[A][0]:E.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let o=2;o<this.rows.length-1;o+=2){const l=this.rows[o-1],u=this.rows[o],m=this.rows[o+1];var e=o===2,t=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!m.precedesStatement;if(e?this.topRow.hasPreviousConnection:l.followsStatement){var A=u.elements[1];if(A=u.elements.length===3&&A instanceof Ls&&(A.field instanceof Oi||A.field instanceof Ni),!e&&A)l.height-=this.constants_.SMALL_PADDING,m.height-=this.constants_.SMALL_PADDING,u.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)l.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<u.elements.length;t++)if(A=u.elements[t],A instanceof Nr&&E.isInlineInput(A)&&A.connectedBlock&&!A.connectedBlock.isShadow()&&40<=A.connectedBlock.getHeightWidth().height){e=!0;break}e&&(l.height-=this.constants_.SMALL_PADDING,m.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},Fw=class extends hp{constructor(e,t,A){super(e,t,A),this.markerCircle=null}showWithInputOutput(e){const t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(t),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){e=e.getLocation();const t=e.getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,t){let A;(A=this.markerCircle)==null||A.setAttribute("cx",`${e}`);let o;(o=this.markerCircle)==null||o.setAttribute("cy",`${t}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=R(y.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();R(y.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let t;(t=this.markerCircle)==null||t.setAttribute("fill",this.colour_);let A;if((A=this.markerCircle)==null||A.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let o;(o=this.markerCircle)==null||o.firstElementChild.setAttribute("values",e)}}},Uw=class extends Fc{constructor(e,t,A){super(e,t,A),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=A}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.style.colourTertiary);for(const A of this.outlines.values())A.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,R(y.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,A;(t=this.outlines.get(e))==null||(A=t.parentNode)==null||A.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Sp=class extends Uc{constructor(e){super(e)}makeConstants_(){return new Ew}makeRenderInfo_(e){return new Sw(this,e)}makeDrawer_(e,t){return new yw(e,t)}makeMarkerDrawer(e,t){return new Fw(e,this.getConstants(),t)}makePathObject(e,t){return new Uw(e,t,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(e,t,A){return Fr("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===K.OUTPUT_VALUE?e.isConnected()?oA.PREVIEW_TYPE.REPLACEMENT_FADE:oA.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,t,A)}};Lo("zelos",Sp);var Rw=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,t,A){i.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=A,A.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(t)&&(t.highlight(),this.staticConn=t)}finally{i.enable$$module$build$src$core$events$utils()}}previewConnection(e,t){if(e!==this.draggedConn||t!==this.staticConn){i.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,t)&&(this.markerConn=this.previewMarker(e,t)),this.workspace.getRenderer().shouldHighlightConnection(t)&&t.highlight(),this.draggedConn=e,this.staticConn=t}finally{i.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,t){return t.type===K.PREVIOUS_STATEMENT||t.type===K.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof Sp)}previewMarker(e,t){const A=e.getSourceBlock(),o=this.createInsertionMarker(A),l=this.getMatchingConnection(A,o,e);if(!l)return null;o.queueRender(),qA(),l.connect(t);const u={x:t.x-l.x,y:t.y-l.y},m=l.getOffsetInBlock().clone();return kA().then(()=>{if(!o.isDeadOrDying()){i.disable$$module$build$src$core$events$utils();try{o==null||o.positionNearConnection(l,u,m),o==null||o.getSvgRoot().setAttribute("visibility","visible")}finally{i.enable$$module$build$src$core$events$utils()}}}),l}createInsertionMarker(e){const t=zt(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!t)throw Error(`Failed to serialize source block. ${e.toDevString()}`);e=ZA(t,this.workspace);for(const A of e.getDescendants(!1))A.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,t,A){if(e=e.getConnections_(!0),t=t.getConnections_(!0),e.length!==t.length)return null;for(let o=0;o<e.length;o++)if(e[o]===A)return t[o];return null}hidePreview(){i.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{i.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const t=e.getSourceBlock(),A=t.outputConnection;let o;if((o=t.previousConnection)!=null&&o.targetConnection||A!=null&&A.targetConnection)t.unplug(!0);else{let l;(l=e.targetBlock())==null||l.unplug(!1)}t.dispose()}dispose(){this.hidePreview()}};n(M.CONNECTION_PREVIEWER,DA,Rw);var Gr={};Gr.Align=i.Align$$module$build$src$core$inputs$align,Gr.DummyInput=NA,Gr.EndRowInput=$r,Gr.Input=Qs,Gr.StatementInput=qt,Gr.ValueInput=i.ValueInput$$module$build$src$core$inputs$value_input,Gr.inputTypes=i.inputTypes$$module$build$src$core$inputs$input_types;var Dw=!1,xw;i.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=re());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let A=0,o;o=e[A];A++){let l=this.blockToCode(o);Array.isArray(l)&&(l=l[0]),l&&(o.outputConnection&&(l=this.scrubNakedValue(l),this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(l=this.injectId(this.STATEMENT_PREFIX,o)+l),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(l+=this.injectId(this.STATEMENT_SUFFIX,o))),t.push(l))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let A=0;A<e.length;A++){const o=e[A].getCommentText();o&&t.push(o)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var A=this.forBlock[e.type];if(typeof A!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(A=A.call(e,e,this),Array.isArray(A)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,A[0],t),A[1]]}if(typeof A=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(A=this.injectId(this.STATEMENT_PREFIX,e)+A),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(A+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,A,t);if(A===null)return"";throw SyntaxError("Invalid code generated: "+A)}valueToCode(e,t,A){if(isNaN(A))throw TypeError("Expecting valid order from block: "+e.type);var o=e.getInputTargetBlock(t);if(!o&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(!o||(t=this.blockToCode(o),t===""))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${o.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+o.type);if(!e)return"";o=!1;var l=Math.floor(A);const u=Math.floor(t);if(l<=u&&(l!==u||l!==0&&l!==99)){for(o=!0,l=0;l<this.ORDER_OVERRIDES.length;l++)if(this.ORDER_OVERRIDES[l][0]===A&&this.ORDER_OVERRIDES[l][1]===t){o=!1;break}}return o&&(e="("+e+")"),e}statementToCode(e,t){const A=e.getInputTargetBlock(t);if(!A&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(A),typeof e!="string")throw TypeError("Expecting code from statement block: "+(A&&A.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const A=this.nameDB_.getDistinctName(e,i.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=A,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,A);let o;for(;o!==t;)o=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}getVariableName(e){return this.getName(e,i.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,i.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,t){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,t)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,A){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},xw={},xw.CodeGenerator=i.CodeGenerator$$module$build$src$core$generator;var Ow=class extends kp{constructor(e,t){super(e),this.flyout_=t}getBoundingBox_(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox_();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,A){return t=A||this.getContentMetrics(),A=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*A)/e,width:(t.width+t.left+A)/e,top:0,left:0}}},Gs;(function(e){e.BLOCK="block",e.BUTTON="button"})(Gs||(Gs={}));var eE="WORKSPACE_AT_BLOCK_CAPACITY",Hc=class extends Dc{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new nA(e),this.workspace_.setMetricsManager(new Ow(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=C(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=R(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=R(y.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Tp(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(j(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(j(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[at.Capability.AUTOHIDEABLE,at.Capability.DELETE_AREA,at.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)ue(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&ve(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.isVisible_}setVisible(e){const t=e!==this.isVisible();this.isVisible_=e,t&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,A,o){let l;(l=this.svgGroup_)==null||l.setAttribute("width",`${e}`);let u;(u=this.svgGroup_)==null||u.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&il(this.svgGroup_,"translate("+A+"px,"+o+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(A,o),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)ue(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=Co(e),e=this.createFlyoutInfo(e),qA(this.workspace_),this.setContents(e.contents),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const t=[],A=[];this.permanentlyDisabled.length=0;const o=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const l of e){if("custom"in l){e=this.getDynamicCategoryContents(l.custom),e=Co(e);const{contents:u,gaps:m}=this.createFlyoutInfo(e);t.push(...u),A.push(...m)}switch(l.kind.toUpperCase()){case"BLOCK":e=l;const u=this.createFlyoutBlock(e);t.push({type:Gs.BLOCK,block:u}),this.addBlockGap(e,A,o);break;case"SEP":this.addSeparatorGap(l,A,o);break;case"LABEL":e=this.createButton(l,!0),t.push({type:Gs.BUTTON,button:e}),A.push(o);break;case"BUTTON":e=this.createButton(l,!1),t.push({type:Gs.BUTTON,button:e}),A.push(o)}}return{contents:t,gaps:A}}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,t){return new sA(this.workspace_,this.targetWorkspace,e,t)}createFlyoutBlock(e){let t;return e.blockxml?(e=typeof e.blockxml=="string"?i.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(t=this.getRecycledBlock(e.getAttribute("type")))||(t=gi(e,this.workspace_))):(t=this.getRecycledBlock(e.type),t||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[tA]),t=ts(e,this.workspace_))),t.isEnabled()||this.permanentlyDisabled.push(t),t}getRecycledBlock(e){let t=-1;for(let A=0;A<this.recycledBlocks.length;A++)if(this.recycledBlocks[A].type===e){t=A;break}return t===-1?void 0:this.recycledBlocks.splice(t,1)[0]}addBlockGap(e,t,A){let o;e.gap?o=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?i.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,o=parseInt(e.getAttribute("gap"))),t.push(!o||isNaN(o)?A:o)}addSeparatorGap(e,t,A){e=parseInt(String(e.gap)),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(A)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let A=0,o;o=e[A];A++)this.blockIsRecyclable_(o)?this.recycleBlock(o):o.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const A=this.mats[e];A&&(kl(A),ve(A))}this.mats.length=0;for(let A=0,o;o=this.buttons_[A];A++)o.dispose();this.buttons_.length=0;let t;(t=this.workspace_.getPotentialVariableMap())==null||t.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const t=e.getRelativeToSurfaceXY();e.moveBy(-t.x,-t.y),this.recycledBlocks.push(e)}addBlockListeners_(e,t,A){this.listeners.push(j(e,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(j(A,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(ee(e,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(ee(e,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()})),this.listeners.push(ee(A,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(ee(A,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()}))}blockMouseDown(e){return t=>{const A=this.targetWorkspace.getGesture(t);A&&(A.setStartBlock(e),A.handleFlyoutStart(t,this))}}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let t=null;i.disable$$module$build$src$core$events$utils();var A=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{i.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=vo(this.targetWorkspace,A),x()){for(i.setGroup$$module$build$src$core$events$utils(!0),A=0;A<e.length;A++){const o=e[A];_(new(L(rr))(o))}_(new(L(i.CREATE$$module$build$src$core$events$utils))(t))}return this.autoClose?this.hide():this.filterForCapacity(),t}initFlyoutButton_(e,t,A){const o=e.createDom();e.moveTo(t,A),e.show(),this.listeners.push(j(o,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,t,A,o,l){return t=R(y.RECT,{"fill-opacity":0,x:t,y:A,height:o.height,width:o.width}),t.tooltip=e,ss(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),this.rectMap_.set(e,t),this.mats[l]=t}moveRectToBlock_(e,t){const A=t.getHeightWidth();e.setAttribute("width",String(A.width)),e.setAttribute("height",String(A.height)),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",String(t.y)),e.setAttribute("x",String(this.RTL?t.x-A.width:t.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let t=0,A;A=e[t];t++)if(!this.permanentlyDisabled.includes(A)){const o=this.targetWorkspace.isCapacityAvailable(mt(A));for(;A;)A.setDisabledReason(!o,eE),A=A.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const A=this.serializeBlock(e);return t.setResizesEnabled(!1),t=ZA(A,t),this.positionNewBlock(e,t),t}serializeBlock(e){return zt(e)}positionNewBlock(e,t){const A=this.targetWorkspace;var o=A.getOriginOffsetInPixels(),l=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),l=N.sum(l,e),o=N.difference(l,o),o.scale(1/A.scale),t.moveTo(new N(o.x,o.y))}};Hc.FlyoutItemType=Gs;var Fp=class extends Hc{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),A=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(A.top+(A.height-o.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),A=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===se.LEFT?e.width:A.width-this.width_:this.toolboxPosition_===se.LEFT?0:A.width:this.toolboxPosition_===se.LEFT?0:A.width+t.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const A=this.toolboxPosition_===se.RIGHT;var o=e+this.CORNER_RADIUS;o=["M "+(A?o:0)+",0"],o.push("h",A?-e:e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,A?0:1,A?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,t)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,A?0:1,A?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",A?e:-e),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=be(e);if(t.y){const A=this.workspace_.getMetricsManager(),o=A.getScrollMetrics();t=A.getViewMetrics().top-o.top+t.y;let l;(l=this.workspace_.scrollbar)==null||l.setY(t),Fo(this.workspace_),SA()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;var A=this.MARGIN;const o=this.RTL?A:A+this.tabWidth_;for(let b=0,T;T=e[b];b++)if(T.type==="block"){var l=T.block;if(!l)continue;var u=l.getDescendants(!1);for(let De=0,Ue;Ue=u[De];De++)Ue.isInFlyout=!0;u=l.getSvgRoot();const V=l.getHeightWidth();var m=l.outputConnection?o-this.tabWidth_:o;l.moveBy(m,A),m=this.createRect_(l,this.RTL?m-V.width:m,A,V,b),this.addBlockListeners_(u,l,m),A+=V.height+t[b]}else T.type==="button"&&(l=T.button,this.initFlyoutButton_(l,o,A),A+=l.height+t[b])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===se.LEFT?new ke(-1e9,1e9,-1e9,t+e.width):new ke(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var t=this.workspace_.getTopBlocks(!1);for(let o=0,l;l=t[o];o++){var A=l.getHeightWidth().width;l.outputConnection&&(A-=this.tabWidth_),e=Math.max(e,A)}for(let o=0,l;l=this.buttons_[o];o++)e=Math.max(e,l.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=Ye.scrollbarThickness,this.width_!==e){for(let o=0,l;l=t[o];o++){if(this.RTL){A=l.getRelativeToSurfaceXY().x;let u=e/this.workspace_.scale-this.MARGIN;l.outputConnection||(u-=this.tabWidth_),l.moveBy(u-A,0)}this.rectMap_.has(l)&&this.moveRectToBlock_(this.rectMap_.get(l),l)}if(this.RTL)for(let o=0,l;l=this.buttons_[o];o++)t=l.getPosition().y,l.moveTo(e/this.workspace_.scale-l.width-this.MARGIN-this.tabWidth_,t);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==se.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};Fp.registryName="verticalFlyout",n(M.FLYOUTS_VERTICAL_TOOLBOX,DA,Fp);var Lw=class extends Hc{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),A=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(A.left+(A.width-o.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),A=e.getViewMetrics();e=e.getToolboxMetrics();const o=this.toolboxPosition_===se.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?o?e.height:A.height-this.height_:o?0:A.height:o?0:A.height+t.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const A=this.toolboxPosition_===se.TOP,o=["M 0,"+(A?0:this.CORNER_RADIUS)];A?(o.push("h",e+2*this.CORNER_RADIUS),o.push("v",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",t),o.push("h",-e-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=be(e);if(t=t.x||t.y){const A=this.workspace_.getMetricsManager(),o=A.getScrollMetrics();t=A.getViewMetrics().left-o.left+t;let l;(l=this.workspace_.scrollbar)==null||l.setX(t),Fo(this.workspace_),SA()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;const A=this.MARGIN;let o=A+this.tabWidth_;this.RTL&&(e=e.reverse());for(let b=0,T;T=e[b];b++)if(T.type==="block"){var l=T.block;if(l==null)continue;var u=l.getDescendants(!1);for(let De=0,Ue;Ue=u[De];De++)Ue.isInFlyout=!0;u=l.getSvgRoot();const V=l.getHeightWidth();var m=l.outputConnection?this.tabWidth_:0;m=this.RTL?o+V.width:o-m,l.moveBy(m,A),m=this.createRect_(l,m,A,V,b),o+=V.width+t[b],this.addBlockListeners_(u,l,m)}else T.type==="button"&&(l=T.button,this.initFlyoutButton_(l,o,A),o+=l.width+t[b])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===se.TOP?new ke(-1e9,t+e.height,-1e9,1e9):new ke(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const t=this.workspace_.getTopBlocks(!1);for(let o=0,l;l=t[o];o++)e=Math.max(e,l.getHeightWidth().height);const A=this.buttons_;for(let o=0,l;l=A[o];o++)e=Math.max(e,l.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=Ye.scrollbarThickness,this.height_!==e){for(let o=0,l;l=t[o];o++)this.rectMap_.has(l)&&this.moveRectToBlock_(this.rectMap_.get(l),l);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==se.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};n(M.FLYOUTS_HORIZONTAL_TOOLBOX,DA,Lw);var gn=class extends QA{constructor(e,t,A,o,l){super(Se.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=gn.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new pe(0,0),e!==Se.SKIP_SETUP&&(l?this.configure_(l):this.setTypes(A,o),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new Je;this.variable||(e=i.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new Je;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new Je;const A=e.getAttribute("id"),o=e.textContent,l=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=i.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,A,o,l),l!==null&&l!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+FA(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var t=this.saveLegacyState(gn);return t!==null||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.name,t.type=this.variable.type)),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new Je;this.loadLegacyState(gn,e)||(e=i.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new Je;return t=i.getVariable$$module$build$src$core$variables(t.workspace,e),t?(t=t.type,this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new Je;this.variable=i.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let A=0;A<t.length;A++)if(e===t[A])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,t=""){if(Array.isArray(e)){let A=!1;for(let o=0;o<e.length;o++)e[o]===t&&(A=!0);if(!A)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(e!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===pp){i.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===gp){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(ze(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var A=this.getVariableTypes(),o=0;o<A.length;o++){const l=this.sourceBlock_.workspace.getVariablesOfType(A[o]);t=t.concat(l)}for(t.sort(Yo.compareByName),A=[],o=0;o<t.length;o++)A[o]=[t[o].name,t[o].getId()];return A.push([i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,pp]),i.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&A.push([i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),gp]),A}};UA("field_variable",gn);var Up=class extends Qc{constructor(e,t,A,o,l,u){super(Se.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==Se.SKIP_SETUP&&(u?this.configure_(u):this.setConstraints(t,A,o),this.setValue(e),l&&this.setValidator(l))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,A){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(A),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.includes("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const A=t.indexOf(".");this.decimalPlaces=A===-1?e?0:null:t.length-A-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,gt(e,ut.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,gt(e,ut.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};UA("field_number",Up),Up.prototype.DEFAULT_VALUE=0;var Qw=class extends Oi{constructor(e,t,A){super(String(e??""),t,A),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(ze(e.text),void 0,e)}};UA("field_label_serializable",Qw);var Hi=class extends Se{constructor(e,t,A){super(Se.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=Hi.CHECK_CHAR,e!==Se.SKIP_SETUP&&(A&&this.configure_(A),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(Hi);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();q(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||Hi.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};Hi.CHECK_CHAR="",UA("field_checkbox",Hi),Hi.prototype.DEFAULT_VALUE=!1;var Mw=class{constructor(e,t){this.draggable=e,this.workspace=t,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){this.draggable.startDrag(e)}onDrag(e,t){this.moveDraggable(e,t),t=this.getRoot(this.draggable),eA(t)&&t.setDeleteStyle(this.wouldDeleteDraggable(e,t)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const t=this.getRoot(this.draggable);if(this.dragTarget!==e){let A;(A=this.dragTarget)==null||A.onDragExit(t),e==null||e.onDragEnter(t)}e==null||e.onDragOver(t),this.dragTarget=e}moveDraggable(e,t){t=this.pixelsToWorkspaceUnits(t),t=N.sum(this.startLoc,t),this.draggable.drag(t,e)}wouldDeleteDraggable(e,t){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,at.Capability.DELETE_AREA)?e.wouldDelete(t):!1}onDragEnd(e){const t=i.getGroup$$module$build$src$core$events$utils();var A=this.workspace.getDragTarget(e);const o=this.getRoot(this.draggable);if(A){let l;(l=this.dragTarget)==null||l.onDrop(o)}this.shouldReturnToStart(e,o)&&this.draggable.revertDrag(),(A=eA(o)&&this.wouldDeleteDraggable(e,o))&&this.draggable instanceof lA&&xl(this.draggable.getRootBlock()),this.draggable.endDrag(e),A&&eA(o)&&(e=i.getGroup$$module$build$src$core$events$utils(),i.setGroup$$module$build$src$core$events$utils(t),o.dispose(),i.setGroup$$module$build$src$core$events$utils(e))}getRoot(e){return e instanceof lA?e.getRootBlock():e}shouldReturnToStart(e,t){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(t):!1}pixelsToWorkspaceUnits(e){return e=new N(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};n(M.BLOCK_DRAGGER,DA,Mw);var fn={};fn.BlockDragStrategy=$w,fn.BubbleDragStrategy=jB,fn.CommentDragStrategy=TB,fn.Dragger=Mw;var Rp=class extends OA{constructor(e,t,A){super(e?e.workspace.id:void 0),this.type=Bi,e&&(this.blockId=e.id,this.isStart=t,this.blocks=A)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Rp),t.isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};n(M.EVENT,Bi,Rp);var Dp=class extends ki{constructor(e,t,A,o){super(e),this.type=$i,this.recordUndo=!1,e&&(this.name=t,this.oldValue=A,this.newValue=o)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Dp),t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};n(M.EVENT,$i,Dp);var xp=class extends ki{constructor(e){super(e),this.type=i.MOVE$$module$build$src$core$events$utils,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new xp),t.oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(A=e.oldCoordinate.split(","),t.oldCoordinate=new N(Number(A[0]),Number(A[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(A=e.newCoordinate.split(","),t.newCoordinate=new N(Number(A[0]),Number(A[1]))),e.reason!==void 0&&(t.reason=e.reason),e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation_(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const A=t.getParent();return A?(e.parentId=A.id,(t=A.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&N.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var A=t.getBlockById(this.blockId);if(A){var o=e?this.newParentId:this.oldParentId,l=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,o){var u=t.getBlockById(o);if(!u){console.warn("Can't connect to non-existent block: "+o);return}}if(A.getParent()&&A.unplug(),e)l=A.getRelativeToSurfaceXY(),A.moveBy(e.x-l.x,e.y-l.y,this.reason);else{t=A.outputConnection,(!t||A.previousConnection&&A.previousConnection.isConnected())&&(t=A.previousConnection);let m,b;A=(b=t)==null?void 0:b.type,l?(A=u.getInput(l))&&(m=A.connection):A===K.PREVIOUS_STATEMENT&&(m=u.nextConnection),m&&t?t.connect(m):console.warn("Can't connect to non-existent input: "+l)}}else console.warn("Can't move non-existent block: "+this.blockId)}};n(M.EVENT,i.MOVE$$module$build$src$core$events$utils,xp);var Op=class extends OA{constructor(e,t,A){super(e?e.workspace.id:void 0),this.type=xA,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=A)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Op),t.isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}},Lp;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(Lp||(Lp={})),n(M.EVENT,xA,Op);var mr=class extends _s{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=i.getGroup$$module$build$src$core$events$utils(),this.recordUndo=v())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new mr),t.commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){const A=e.getEventWorkspace_();if(t){if(!e.json)throw Error("Encountered a comment event without proper json");yo(e.json,A)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=A.getCommentById(e.commentId))?t.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},Qp=class extends mr{constructor(e,t,A){super(e),this.type=ws,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof A>"u"?"":A)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Qp),t.oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var A=e?this.newContents_:this.oldContents_;if(A===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setText(A)}else console.warn("Can't change non-existent comment: "+this.commentId)}};n(M.EVENT,ws,Qp);var Mp=class extends mr{constructor(e){super(e),this.type=sr,e&&(this.xml=Do(e),this.json=es(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=FA(this.xml),e.json=this.json,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Mp),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}run(e){mr.CommentCreateDeleteHelper(this,e)}};n(M.EVENT,sr,Mp);var Np=class extends mr{constructor(e){super(e),this.type=Bs,e&&(this.xml=Do(e),this.json=es(e,{addCoordinates:!0}))}run(e){mr.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=FA(this.xml),e.json=this.json,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Np),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}};n(M.EVENT,Bs,Np);var Hp=class extends mr{constructor(e){super(e),this.type=or,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Hp),A=e.oldCoordinate.split(","),t.oldCoordinate_=new N(Number(A[0]),Number(A[1])),A=e.newCoordinate.split(","),t.newCoordinate_=new N(Number(A[0]),Number(A[1])),t}isNull(){return N.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");t.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};n(M.EVENT,or,Hp);var Pp=class extends mr{constructor(e,t){super(e),this.newCollapsed=t,this.type=No}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Pp),t.newCollapsed=e.newCollapsed,t}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=t.getCommentById(this.commentId))?t.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};n(M.EVENT,No,Pp);var Gp=class extends OA{constructor(e,t,A){super(A),this.type=$s,this.oldItem=e??void 0,this.newItem=t??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,A){return t=super.fromJson(e,t,A??new Gp),t.oldItem=e.oldItem,t.newItem=e.newItem,t}};n(M.EVENT,$s,Gp);var Nw=class extends _s{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=wi,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};n(M.EVENT,wi,Nw),i.CHANGE$$module$build$src$core$events$utils,i.CREATE$$module$build$src$core$events$utils,i.DELETE$$module$build$src$core$events$utils,i.MOVE$$module$build$src$core$events$utils,i.CHANGE$$module$build$src$core$events$utils,i.CREATE$$module$build$src$core$events$utils,i.DELETE$$module$build$src$core$events$utils,i.MOVE$$module$build$src$core$events$utils,i.disable$$module$build$src$core$events$utils,i.enable$$module$build$src$core$events$utils,i.getGroup$$module$build$src$core$events$utils,i.setGroup$$module$build$src$core$events$utils,i.setRecordUndo$$module$build$src$core$events$utils;var z={};z.Abstract=_s,z.BLOCK_CHANGE=i.CHANGE$$module$build$src$core$events$utils,z.BLOCK_CREATE=i.CREATE$$module$build$src$core$events$utils,z.BLOCK_DELETE=i.DELETE$$module$build$src$core$events$utils,z.BLOCK_DRAG=Bi,z.BLOCK_FIELD_INTERMEDIATE_CHANGE=$i,z.BLOCK_MOVE=i.MOVE$$module$build$src$core$events$utils,z.BUBBLE_OPEN=xA,z.BUMP_EVENTS=jl,z.BlockBase=ki,z.BlockChange=Si,z.BlockCreate=Jd,z.BlockDelete=ap,z.BlockDrag=Rp,z.BlockFieldIntermediateChange=Dp,z.BlockMove=xp,z.BubbleOpen=Op,z.BubbleType=Lp,z.CHANGE=i.CHANGE$$module$build$src$core$events$utils,z.CLICK=ir,z.COMMENT_CHANGE=ws,z.COMMENT_CREATE=sr,z.COMMENT_DELETE=Bs,z.COMMENT_MOVE=or,z.CREATE=i.CREATE$$module$build$src$core$events$utils,z.Click=dd,z.ClickTarget=pd,z.CommentBase=mr,z.CommentChange=Qp,z.CommentCollapse=Pp,z.CommentCreate=Mp,z.CommentDelete=Np,z.CommentMove=Hp,z.DELETE=i.DELETE$$module$build$src$core$events$utils,z.FINISHED_LOADING=wi,z.FinishedLoading=Nw,z.MARKER_MOVE=gs,z.MOVE=i.MOVE$$module$build$src$core$events$utils,z.MarkerMove=up,z.SELECTED=ps,z.Selected=wp,z.THEME_CHANGE=ms,z.TOOLBOX_ITEM_SELECT=$s,z.TRASHCAN_OPEN=fs,z.ThemeChange=jd,z.ToolboxItemSelect=Gp,z.TrashcanOpen=Bp,z.UI=Yl,z.UiBase=OA,z.VAR_CREATE=rr,z.VAR_DELETE=mi,z.VAR_RENAME=ds,z.VIEWPORT_CHANGE=Dr,z.VarBase=Xo,z.VarCreate=yd,z.VarDelete=fp,z.VarRename=$p,z.ViewportChange=qd,z.clearPendingUndo=k,z.disable=i.disable$$module$build$src$core$events$utils,z.disableOrphans=G,z.enable=i.enable$$module$build$src$core$events$utils,z.filter=F,z.fire=_,z.fromJson=Z,z.get=L,z.getDescendantIds=H,z.getGroup=i.getGroup$$module$build$src$core$events$utils,z.getRecordUndo=v,z.isEnabled=x,z.setGroup=i.setGroup$$module$build$src$core$events$utils,z.setRecordUndo=i.setRecordUndo$$module$build$src$core$events$utils;var wA={};wA.BottomRow=Iw,wA.ConstantProvider=Ew,wA.Drawer=yw,wA.MarkerSvg=Fw,wA.PathObject=Uw,wA.RenderInfo=Sw,wA.Renderer=Sp,wA.RightConnectionShape=Tw,wA.StatementInput=Nc,wA.TopRow=kw,ad();var ht={};ht.registerCleanup=Xh,ht.registerCollapse=Jh,ht.registerCollapseExpandBlock=rd,ht.registerComment=td,ht.registerCommentCreate=cd,ht.registerCommentDelete=nd,ht.registerCommentDuplicate=ld,ht.registerCommentOptions=Pm,ht.registerDefaultOptions=ad,ht.registerDelete=sd,ht.registerDeleteAll=Zh,ht.registerDisable=id,ht.registerDuplicate=ed,ht.registerExpand=jh,ht.registerHelp=od,ht.registerInline=Ad,ht.registerRedo=zh,ht.registerUndo=Wh;var Pc={};Pc.CommentView=IB,Pc.RenderedWorkspaceComment=wc,Pc.WorkspaceComment=cc;var $n={};$n.Bubble=Ee,$n.MiniWorkspaceBubble=hr,$n.TextBubble=tp,$n.TextInputBubble=ew;var Hw=class extends kc{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Pw=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=Le(e.xPos,this.info_.startY);for(let t=0,A;A=e.elements[t];t++)E.isLeftSquareCorner(A)?this.steps_+=this.highlightConstants_.START_POINT:E.isLeftRoundedCorner(A)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):E.isPreviousConnection(A)?this.steps_+=this.notchPaths_.pathLeft:E.isHat(A)?this.steps_+=this.startPaths_.path(this.RTL_):E.isSpacer(A)&&A.width!==0&&(this.steps_+=W("H",A.xPos+A.width-this.highlightOffset));this.steps_+=W("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+W("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const A=e.height-t.connectionHeight;this.steps_+=ct(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+W("v",A)}else this.steps_+=ct(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const A=e.height-2*this.insideCornerPaths_.height;this.steps_+=ct(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+W("v",A)+this.insideCornerPaths_.pathBottom(this.RTL_)+RA(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=ct(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+RA(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof lp&&e.followsStatement&&(this.steps_+=W("H",t)),this.RTL_&&(this.steps_+=W("H",t),e.height>this.highlightOffset&&(this.steps_+=W("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=W("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];E.isLeftSquareCorner(t)?this.steps_+=ct(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):E.isLeftRoundedCorner(t)&&(this.steps_+=ct(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=ct(this.info_.startX,e):(this.steps_+=ct(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=W("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,E.isLeftRoundedCorner(e.elements[0])?this.steps_+=W("V",this.outsideCornerPaths_.height):this.steps_+=W("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,A=e.xPos+e.connectionWidth;var o=e.centerline-e.height/2;const l=e.width-e.connectionWidth,u=o+t;this.RTL_?(o=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=ct(A-t,u)+W("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+W("v",e)+W("h",l)):this.inlineSteps_+=ct(e.xPos+e.width+t,u)+W("v",e.height)+W("h",-l)+ct(A,o+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},Gw=class extends Sc{constructor(e,t){super(e,t),this.highlighter_=new Pw(t)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=W("H",e.xPos+e.width)+W("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let A=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(A*=-1),e.connectionModel.setOffsetInBlock(A,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let A=e.xPos+e.statementEdge+t.notchOffset;A=this.info_.RTL?-1*A:A+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(A,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let A=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(A*=-1),t.connectionModel.setOffsetInBlock(A,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,A=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-A:A)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},Vw=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=Le(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,A=(1-Math.SQRT1_2)*(e+t)-t,o=Le(A,A)+Xe("a","0 0,0",e,J(-A-t,e-A)),l=Xe("a","0 0,0",e+t,J(e+t,e+t)),u=Le(A,-A)+Xe("a","0 0,0",e+t,J(e-A,A+t));return{width:e+t,height:e,pathTop(m){return m?o:""},pathBottom(m){return m?l:u}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,A=(1-Math.SQRT1_2)*(e-t)+t,o=Le(A,A)+Xe("a","0 0,1",e-t,J(e-A,-A+t)),l=Le(t,e)+Xe("a","0 0,1",e-t,J(e,-e+t)),u=-A,m=Le(A,u)+Xe("a","0 0,1",e-t,J(-A+t,-u-e));return{height:e,topLeft(b){return b?o:l},bottomLeft(){return m}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,A=Le(-2,-t+3.4)+RA(-.45*e,-2.1),o=W("v",2.5)+Le(.97*-e,2.5)+Pt("q",[J(.05*-e,10),J(.3*e,9.5)])+Le(.67*e,-1.9)+W("v",2.5),l=W("v",-1.5)+Le(-.92*e,-.5)+Pt("q",[J(-.19*e,-5.5),J(0,-11)])+Le(.92*e,1),u=Le(-5,t-.7)+RA(.46*e,-2.1);return{width:e,height:t,pathUp(m){return m?A:l},pathDown(m){return m?o:u}}}makeNotch(){return{pathLeft:W("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:RA(5.1,2.6)+Le(-10.2,6.8)+RA(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=Le(25,-8.7)+Pt("c",[J(29.7,-6.2),J(57.2,-.5),J(75,8.7)]),A=Pt("c",[J(17.8,-9.2),J(45.3,-14.9),J(75,-8.7)])+ct(100.5,e+.5);return{path(o){return o?t:A}}}},Kw=class extends op{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},Ww=class extends ln{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},zw=class extends un{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof qt||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Kw(this.constants_,e)),t.hasInlineInput=!0):e instanceof qt?(t.elements.push(new Ww(this.constants_,e)),t.hasStatement=!0):e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Tc(this.constants_,e)),t.hasExternalInput=!0):(e instanceof NA||e instanceof $r)&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let A=0,o;o=this.rows[A];A++)o.hasExternalInput&&(e=!0);for(let A=0,o;o=this.rows[A];A++){var t=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new jt(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let l=0;l<t.length-1;l++){o.elements.push(t[l]);const u=this.getInRowSpacing_(t[l],t[l+1]);o.elements.push(new jt(this.constants_,u))}o.elements.push(t[t.length-1]),o.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&o.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),o.elements.push(new jt(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&E.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&E.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&E.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!E.isInput(e)&&(!t||E.isStatementInput(t)))return E.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:E.isIcon(e)?2*this.constants_.LARGE_PADDING+1:E.isHat(e)?this.constants_.NO_PADDING:E.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:E.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:E.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(E.isInput(e)&&!t){if(E.isExternalInput(e))return this.constants_.NO_PADDING;if(E.isInlineInput(e))return this.constants_.LARGE_PADDING;if(E.isStatementInput(e))return this.constants_.NO_PADDING}if(!E.isInput(e)&&t&&E.isInput(t)){if(E.isField(e)&&e.isEditable){if(E.isInlineInput(t)||E.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(E.isInlineInput(t)||E.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(E.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(E.isIcon(e)&&t&&!E.isInput(t))return this.constants_.LARGE_PADDING;if(E.isInlineInput(e)&&t&&E.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(E.isLeftSquareCorner(e)&&t){if(E.isHat(t))return this.constants_.NO_PADDING;if(E.isPreviousConnection(t))return t.notchOffset;if(E.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(E.isLeftRoundedCorner(e)&&t){if(E.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(E.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return E.isField(e)&&t&&E.isField(t)&&e.isEditable===t.isEditable||t&&E.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return E.isTopRow(e)&&E.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:E.isTopRow(e)||E.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(E.isSpacer(t))return e.yPos+t.height/2;if(E.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,E.isNextConnection(t)?e+t.height/2:e-t.height/2;if(E.isTopRow(e))return E.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let A=e.yPos;return E.isField(t)||E.isIcon(t)?(A+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(A+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):A=E.isInlineInput(t)?A+t.height/2:A+e.height/2,A}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,A=null;for(let o=this.rows.length-1,l;l=this.rows[o];o--)t.set(l,e),E.isInputRow(l)&&(l.hasStatement&&this.alignStatementRow_(l),A&&A.hasStatement&&l.width<A.width?t.set(l,A.width):e=l.hasStatement?l.width:Math.max(e,l.width),A=l);e=0;for(let o=0,l;l=this.rows[o];o++)l.hasStatement?e=this.getDesiredRowWidth_(l):E.isSpacer(l)?l.width=Math.max(e,t.get(l)):(A=l.width,e=Math.max(e,t.get(l))-A,0<e&&this.addAlignmentPadding_(l,e),e=l.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let o=0,l;l=this.rows[o];o++){l.yPos=t,l.xPos=this.startX,t+=l.height,e=Math.max(e,l.widthWithConnectedBlocks);var A=t-this.topRow.ascenderHeight;l===this.bottomRow&&A<this.constants_.MIN_BLOCK_HEIGHT&&(A=this.constants_.MIN_BLOCK_HEIGHT-A,this.bottomRow.height+=A,t+=A),this.recordElemPositions_(l)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(A=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,A.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},Xw=class extends Fc{constructor(e,t,A){super(e,t,A),this.constants=A,this.colourDark="#000000",this.svgPathDark=R(y.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=R(y.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=di("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},Yw=class extends Uc{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t){super.refreshDom(e,t),this.getHighlightConstants().init()}makeConstants_(){return new Hw}makeRenderInfo_(e){return new zw(this,e)}makeDrawer_(e,t){return new Gw(e,t)}makePathObject(e,t){return new Xw(e,t,this.getConstants())}makeHighlightConstants_(){return new Vw(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Lo("geras",Yw);var GA={};GA.ConstantProvider=Hw,GA.Drawer=Gw,GA.HighlightConstantProvider=Vw,GA.Highlighter=Pw,GA.InlineInput=Kw,GA.PathObject=Xw,GA.RenderInfo=zw,GA.Renderer=Yw,GA.StatementInput=Ww;var Jw=class extends un{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const o=this.rows[t];var A=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new jt(this.constants_,this.getInRowSpacing_(null,A[0]))),A.length){for(let l=0;l<A.length-1;l++){o.elements.push(A[l]);const u=this.getInRowSpacing_(A[l],A[l+1]);o.elements.push(new jt(this.constants_,u))}o.elements.push(A[A.length-1]),o.endsWithElemSpacer()&&(A=this.getInRowSpacing_(A[A.length-1],null),e&&o.hasDummyInput&&(A+=this.constants_.TAB_WIDTH),o.elements.push(new jt(this.constants_,A)))}}}getInRowSpacing_(e,t){if(!e)return t&&E.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&E.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&E.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!E.isInput(e)&&!t)return E.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:E.isIcon(e)?2*this.constants_.LARGE_PADDING+1:E.isHat(e)?this.constants_.NO_PADDING:E.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:E.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:E.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(E.isInput(e)&&!t){if(E.isExternalInput(e))return this.constants_.NO_PADDING;if(E.isInlineInput(e))return this.constants_.LARGE_PADDING;if(E.isStatementInput(e))return this.constants_.NO_PADDING}if(!E.isInput(e)&&t&&E.isInput(t)){if(E.isField(e)&&e.isEditable){if(E.isInlineInput(t)||E.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(E.isInlineInput(t)||E.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(E.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(E.isIcon(e)&&t&&!E.isInput(t))return this.constants_.LARGE_PADDING;if(E.isInlineInput(e)&&t&&E.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(E.isLeftSquareCorner(e)&&t){if(E.isHat(t))return this.constants_.NO_PADDING;if(E.isPreviousConnection(t)||E.isNextConnection(t))return t.notchOffset}return E.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:E.isField(e)&&t&&E.isField(t)&&e.isEditable===t.isEditable||t&&E.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return E.isTopRow(e)&&E.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:E.isTopRow(e)||E.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(E.isSpacer(t))return e.yPos+t.height/2;if(E.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,E.isNextConnection(t)?e+t.height/2:e-t.height/2;if(E.isTopRow(e))return E.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let A=e.yPos;return A=E.isField(t)&&e.hasStatement?A+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):A+e.height/2}finalize_(){let e=0,t=0;for(var A=0;A<this.rows.length;A++){const l=this.rows[A];l.yPos=t,l.xPos=this.startX,t+=l.height,e=Math.max(e,l.widthWithConnectedBlocks);var o=t-this.topRow.ascenderHeight;l===this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,t+=o),this.recordElemPositions_(l)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(A=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,A.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},jw=class extends Uc{constructor(e){super(e)}makeRenderInfo_(e){return new Jw(this,e)}};Lo("thrasos",jw);var Vp={};Vp.RenderInfo=Jw,Vp.Renderer=jw;var tE={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},AE={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},rE=new xi("zelos",tE,AE),iE={Classic:Cc,Zelos:rE},Kp=class{constructor(e,t,A){this.id_=e.toolboxitemid||w(),this.level_=(this.parent_=A||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},_A=class extends Kp{constructor(e,t,A){super(e,t,A),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const A=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(A)}}parseCategoryDef_(e){this.name_="name"in e?ze(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Tr(this.htmlDiv_,fA.TREEITEM),gt(this.htmlDiv_,ut.SELECTED,!1),gt(this.htmlDiv_,ut.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Tr(this.iconDom_,fA.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&gt(this.htmlDiv_,ut.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&q(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&q(e,t),t=`${_A.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&q(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&q(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&q(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=_A.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle_(t);if(e)return this.parseColour_(e)}return""}getColourfromStyle_(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour_(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(e){if(e=ze(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=hi(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):eh(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&rl(e,t),(t=this.cssConfig_.openicon)&&q(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&rl(e,t),(t=this.cssConfig_.closedicon)&&q(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const A=this.parseColour_(_A.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||A,t&&q(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&Fe(this.rowDiv_,t);gt(this.htmlDiv_,ut.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Co(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){ve(this.htmlDiv_)}};_A.registrationName="category",_A.nestedPadding=19,_A.borderWidth=8,_A.defaultBackgroundColour="#57e",jA(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),n(M.TOOLBOX_ITEM,_A.registrationName,_A);var mn=class extends Kp{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&q(e,t),this.htmlDiv_=e}getDiv(){return this.htmlDiv_}dispose(){ve(this.htmlDiv_)}};mn.registrationName="sep",jA(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),n(M.TOOLBOX_ITEM,mn.registrationName,mn);var Vs=class extends _A{constructor(e,t,A){super(e,t,A),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let A=0;A<t.length;A++){const o=t[A];!p(M.TOOLBOX_ITEM,o.kind)||o.kind.toLowerCase()===mn.registrationName&&e?(this.flyoutItems_.push(o),e=!0):(this.createToolboxItem_(o),e=!1)}}}}createToolboxItem_(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&ul(e)&&(t=Vs.registrationName),e=new(d(M.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Tr(this.subcategoriesDiv_,fA.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),gt(this.htmlDiv_,ut.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&q(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var A=this.cssConfig_.contents;for(A&&q(t,A),A=0;A<e.length;A++){const o=e[A];o.init();const l=o.getDiv();if(t.appendChild(l),o.getClickTarget){let u;(u=o.getClickTarget())==null||u.setAttribute("id",o.getId())}}return t}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let t;(t=this.parentToolbox_.getFlyout())==null||t.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}gt(this.htmlDiv_,ut.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let A=0;A<t.length;A++)t[A].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Vs.registrationName="collapsibleCategory",n(M.TOOLBOX_ITEM,Vs.registrationName,Vs);var qw=class extends Dc{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),li(this.flyout_.createDom("svg"),t),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[at.Capability.AUTOHIDEABLE,at.Capability.DELETE_AREA,at.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Tr(this.contentsDiv_,fA.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),q(e,"blocklyToolboxDiv"),q(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return q(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=j(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=j(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(Oe(e)||e.target===this.HtmlDiv)re().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),re().hideChaff(!0)}nt()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext_();break;case"ArrowUp":t=this.selectPrevious_();break;case"ArrowLeft":t=this.selectParent_();break;case"ArrowRight":t=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=new iA({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?B(M.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):B(M.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e;for(let t=0;t<this.contents_.length;t++){const A=this.contents_[t];A&&A.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let A=0;A<e.length;A++)this.createToolboxItem_(e[A],t);this.contentsDiv_.appendChild(t)}createToolboxItem_(e,t){var A=e.kind;A.toUpperCase()==="CATEGORY"&&ul(e)&&(A=Vs.registrationName),(A=d(M.TOOLBOX_ITEM,A.toLowerCase()))&&(e=new A(e,this),e.init(),this.addToolboxItem_(e),(A=e.getDiv())&&t.appendChild(A),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&q(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&Fe(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,A=t+e.height,o=e.left;return e=o+e.width,this.toolboxPosition===se.TOP?new ke(-1e7,A,-1e7,1e7):this.toolboxPosition===se.BOTTOM?new ke(t,1e7,-1e7,1e7):this.toolboxPosition===se.LEFT?new ke(-1e7,1e7,-1e7,e):new ke(-1e7,1e7,o,1e7)}wouldDelete(e){return e instanceof lA?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(eA(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===se.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===se.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===se.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition===se.TOP?e.scrollY+t.height:e.scrollY),Ke(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!Wm(e)||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent_(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),gt(this.contentsDiv_,ut.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),gt(this.contentsDiv_,ut.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout_.show(t.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(e,t){const A=e&&e.getName();let o=t&&t.getName();e===t&&(o=null),e=new(L($s))(A,o,this.workspace_.id),_(e)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)ue(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),ve(this.HtmlDiv))}};jA(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),n(M.TOOLBOX,DA,qw);var sE="11.1.1",oE=K.INPUT_VALUE,nE=K.OUTPUT_VALUE,lE=K.NEXT_STATEMENT,cE=K.PREVIOUS_STATEMENT,aE=se.TOP,uE=se.BOTTOM,hE=se.LEFT,dE=se.RIGHT;Ms.prototype.newBlock=function(e,t){return new Li(this,e,t)},nA.prototype.newBlock=function(e,t){return new lA(this,e,t)},Ms.prototype.newComment=function(e){return new cc(this,e)},nA.prototype.newComment=function(e){return new wc(this,e)},nA.newTrashcan=function(e){return new Bw(e)},hr.prototype.newWorkspaceSvg=function(e){return new nA(e)},i.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=Hl(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],i.Names$$module$build$src$core$names.NameType.PROCEDURE)};var S={};return S.ASTNode=O,S.BasicCursor=hn,S.Block=Li,S.BlockSvg=lA,S.Blocks=Gt,S.COLLAPSED_FIELD_NAME=oc,S.COLLAPSED_INPUT_NAME=zo,S.COLLAPSE_CHARS=hw,S.CodeGenerator=i.CodeGenerator$$module$build$src$core$generator,S.CollapsibleToolboxCategory=Vs,S.ComponentManager=at,S.Connection=ge,S.ConnectionChecker=dw,S.ConnectionDB=xs,S.ConnectionType=K,S.ContextMenu=Di,S.ContextMenuItems=ht,S.ContextMenuRegistry=le,S.Css=_d,S.Cursor=_p,S.DELETE_VARIABLE_ID=gp,S.DeleteArea=Dc,S.DragTarget=mw,S.DropDownDiv=vt,S.Events=z,S.Extensions=BA,S.Field=Se,S.FieldCheckbox=Hi,S.FieldDropdown=QA,S.FieldImage=Ni,S.FieldLabel=Oi,S.FieldLabelSerializable=Qw,S.FieldNumber=Up,S.FieldTextInput=Mc,S.FieldVariable=gn,S.Flyout=Hc,S.FlyoutButton=sA,S.FlyoutMetricsManager=Ow,S.Generator=i.CodeGenerator$$module$build$src$core$generator,S.Gesture=ur,S.Grid=Zd,S.HorizontalFlyout=Lw,S.INPUT_VALUE=oE,S.Input=Qs,S.InsertionMarkerManager=oA,S.InsertionMarkerPreviewer=Rw,S.Marker=gw,S.MarkerManager=en,S.Menu=Od,S.MenuItem=Ld,S.MetricsManager=kp,S.Msg=i.Msg$$module$build$src$core$msg,S.NEXT_STATEMENT=lE,S.Names=i.Names$$module$build$src$core$names,S.OPPOSITE_TYPE=Mi,S.OUTPUT_VALUE=nE,S.Options=iA,S.PREVIOUS_STATEMENT=cE,S.PROCEDURE_CATEGORY_NAME=Ic,S.Procedures=Rt,S.RENAME_VARIABLE_ID=pp,S.RenderedConnection=Dt,S.Scrollbar=Ye,S.ScrollbarPair=Tp,S.ShortcutItems=PA,S.ShortcutRegistry=we,S.TOOLBOX_AT_BOTTOM=uE,S.TOOLBOX_AT_LEFT=hE,S.TOOLBOX_AT_RIGHT=dE,S.TOOLBOX_AT_TOP=aE,S.TabNavigateCursor=fw,S.Theme=xi,S.ThemeManager=uw,S.Themes=iE,S.Toolbox=qw,S.ToolboxCategory=_A,S.ToolboxItem=Kp,S.ToolboxSeparator=mn,S.Tooltip=Yt,S.Touch=vi,S.Trashcan=Bw,S.UnattachedFieldError=Je,S.VARIABLE_CATEGORY_NAME=Id,S.VARIABLE_DYNAMIC_CATEGORY_NAME=dp,S.VERSION=sE,S.VariableMap=mp,S.VariableModel=Yo,S.Variables=_t,S.VariablesDynamic=Qi,S.VerticalFlyout=Fp,S.WidgetDiv=mA,S.Workspace=Ms,S.WorkspaceAudio=pw,S.WorkspaceDragger=zB,S.WorkspaceSvg=nA,S.Xml=Et,S.ZoomControls=BB,S.blockAnimations=on,S.blockRendering=Ce,S.browserEvents=nr,S.bubbles=$n,S.bumpObjects=Rc,S.clipboard=pn,S.comments=Pc,S.common=wt,S.config=i.config$$module$build$src$core$config,S.constants=Iv,S.defineBlocksWithJsonArray=Mt,S.dialog=Ii,S.dragging=fn,S.fieldRegistry=vc,S.geras=GA,S.getMainWorkspace=re,S.getSelected=ne,S.hasBubble=As,S.hideChaff=zm,S.icons=Mr,S.inject=Um,S.inputs=Gr,S.isCopyable=Qo,S.isDeletable=eA,S.isDraggable=fi,S.isIcon=Th,S.isObservable=Ll,S.isPaster=Gm,S.isRenderedElement=Vm,S.isSelectable=Km,S.isSerializable=Io,S.isVariableBackedParameterModel=$u,S.procedures=Rt,S.registry=Ar,S.renderManagement=lc,S.serialization=Zv,S.setLocale=Ed,S.setParentContainer=kt,S.svgResize=Ke,S.thrasos=Vp,S.uiPosition=yi,S.utils=Pe,S.zelos=wA,S.__namespace__=i,S})})(IC);var $E=IC.exports;const GF=fE($E),VF=EA(r=>({isPending:!1,setIsPending:s=>r({isPending:s})})),KF=EA()(r=>({isModalOpen:!1,modalContent:" ",isLoading:!1,isImageUpload:!1,imagePathList:new Map,nowId:"",nowImage:"",imageMap:new Map,handleModalConfirmButton:()=>{},handleModalCloseButton:()=>{},openModal:()=>r({isModalOpen:!0}),closeModal:()=>r({isModalOpen:!1}),setModalContent:s=>r({modalContent:s}),setIsLoading:s=>r({isLoading:s}),setHandleModalConfirmButton:s=>r({handleModalConfirmButton:s}),setHandleModalCloseButton:s=>r({handleModalCloseButton:s}),setNowId:s=>r({nowId:s}),setIsImageUpload:s=>r({isImageUpload:s}),pushImagePath:(s,i)=>r(n=>{const c=new Map(n.imagePathList);return c.set(s,i),{imagePathList:c}}),deleteImagePath:s=>r(i=>{const n=new Map(i.imagePathList);n.delete(s);const c=new Map(i.imageMap);for(const[a,h]of c)h===s&&c.set(a,"");return{imagePathList:n,imageMap:c}}),updateImageMap:s=>r(i=>{const n=new Map(i.imageMap);return n.set(i.nowId,s),{imageMap:n}}),setNowImage:s=>r({nowImage:s}),setInitialImageMap:s=>r(()=>({imageMap:s===""?new Map:new Map(Object.entries(JSON.parse(s)))})),setInitialImageList:s=>r(()=>({imagePathList:s===""?new Map:new Map(Object.entries(JSON.parse(s)))}))})),WF=EA(r=>({currentCssClassName:"",selectedCssCategory:"",totalCssPropertyObj:{},addNewCssClass:s=>{r(i=>i.totalCssPropertyObj[s]?{}:{totalCssPropertyObj:{...i.totalCssPropertyObj,[s]:{checkedCssPropertyObj:{},cssOptionObj:{}}}}),vn("css_class_created",{item:s})},setCurrentCssClassName:s=>{r({currentCssClassName:s}),vn("css_class_selected",{item:fa(s)})},setSelectedCssCategory:s=>{r({selectedCssCategory:s}),vn("css_category_selected",{item:s})},setCheckedCssPropertyObj:(s,i,n)=>{r(c=>{const a=c.totalCssPropertyObj[s]||{checkedCssPropertyObj:{},cssOptionObj:{}};return a.checkedCssPropertyObj[i]=n,{totalCssPropertyObj:{...c.totalCssPropertyObj,[s]:a}}}),vn("css_category_item_checked",{item:s})},setCssOptionObj:(s,i,n)=>{r(c=>{const a=c.totalCssPropertyObj[s]||{checkedCssPropertyObj:{},cssOptionObj:{}};return a.cssOptionObj[i]=n,{totalCssPropertyObj:{...c.totalCssPropertyObj,[s]:a}}}),vn("css_category_item_inputted",{item:i,value:n})},initCssPropertyObj:s=>r({totalCssPropertyObj:s,currentCssClassName:"",selectedCssCategory:""}),removeCssClass:s=>r(i=>{const n={...i.totalCssPropertyObj};return delete n[s],{totalCssPropertyObj:n,currentCssClassName:s===i.currentCssClassName?"":i.currentCssClassName}})})),zF=EA(r=>({offsetX:-1,offsetY:-1,leftX:0,topY:0,setOffsetX:s=>r({offsetX:s}),setOffsetY:s=>r({offsetY:s}),setLeftX:s=>r({leftX:s}),setTopY:s=>r({topY:s})})),XF=EA((r,s)=>({classBlockList:[],addClassBlock:i=>{r(n=>({classBlockList:[...n.classBlockList,fa(i)]}))},findClassBlock:i=>s().classBlockList.includes(fa(i)),removeClassBlock:i=>{r(n=>({classBlockList:n.classBlockList.filter(c=>c!==fa(i))}))},initClassBlockList:i=>{r({classBlockList:i})}})),YF=EA(r=>({isBlockChanged:!1,isCssChanged:!1,setIsBlockChanged:s=>r({isBlockChanged:s}),setIsCssChanged:s=>r({isCssChanged:s}),resetChangedStatusState:()=>r({isBlockChanged:!1,isCssChanged:!1})}));EA(r=>({workspace:null,setWorkspace:s=>{r({workspace:s})}}));const JF=EA(r=>({isResetCssChecked:!1,toggleResetCss:()=>r(s=>({isResetCssChecked:!s.isResetCssChecked})),setIsResetCssChecked:s=>r({isResetCssChecked:s})})),jF=EA(r=>({workspace:null,canvasInfo:"",name:" ",setWorkspace:s=>{r({workspace:s})},setCanvasInfo:s=>r(()=>({canvasInfo:s})),setName:s=>r(()=>({name:s}))})),qF=EA()(r=>({isModalOpen:!1,imageList:new Map,nowId:"",nowImage:"",imageMap:new Map,setNowId:s=>r({nowId:s}),setIsModalOpen:s=>r({isModalOpen:s,nowImage:""}),pushImagePath:(s,i)=>r(n=>{const c=new Map(n.imageList);return c.set(s,i),{imageList:c}}),deleteImagePath:s=>r(i=>{const n=new Map(i.imageList);n.delete(s);const c=new Map(i.imageMap);for(const[a,h]of c)h===s&&c.set(a,"");return{imageList:n,imageMap:c}}),updateImageMap:s=>r(i=>{const n=new Map(i.imageMap);return n.set(i.nowId,s),{imageMap:n}}),setNowImage:s=>r({nowImage:s}),setInitialImageMap:s=>r(()=>({imageMap:s===""?new Map:new Map(Object.entries(JSON.parse(s)))})),setInitialImageList:s=>r(()=>({imageList:s===""?new Map:new Map(Object.entries(JSON.parse(s)))}))})),ZF=EA(r=>({iframeRef:null,setIframeRef:s=>r({iframeRef:s})}));/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bg=function(r,s){return bg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(i[c]=n[c])},bg(r,s)};function yA(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");bg(r,s);function i(){this.constructor=r}r.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}var vg=function(){return vg=Object.assign||function(s){for(var i,n=1,c=arguments.length;n<c;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a])}return s},vg.apply(this,arguments)};function xt(r,s,i,n){function c(a){return a instanceof i?a:new i(function(h){h(a)})}return new(i||(i=Promise))(function(a,h){function p(f){try{g(n.next(f))}catch(B){h(B)}}function d(f){try{g(n.throw(f))}catch(B){h(B)}}function g(f){f.done?a(f.value):c(f.value).then(p,d)}g((n=n.apply(r,[])).next())})}function yt(r,s){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,c,a,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(f){return d([g,f])}}function d(g){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,c&&(a=g[0]&2?c.return:g[0]?c.throw||((a=c.return)&&a.call(c),0):c.next)&&!(a=a.call(c,g[1])).done)return a;switch(c=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,c=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){i.label=g[1];break}if(g[0]===6&&i.label<a[1]){i.label=a[1],a=g;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(g);break}a[2]&&i.ops.pop(),i.trys.pop();continue}g=s.call(r,i)}catch(f){g=[6,f],c=0}finally{n=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function Gc(r,s,i){if(arguments.length===2)for(var n=0,c=s.length,a;n<c;n++)(a||!(n in s))&&(a||(a=Array.prototype.slice.call(s,0,n)),a[n]=s[n]);return r.concat(a||s)}var vr=function(){function r(s,i,n,c){this.left=s,this.top=i,this.width=n,this.height=c}return r.prototype.add=function(s,i,n,c){return new r(this.left+s,this.top+i,this.width+n,this.height+c)},r.fromClientRect=function(s,i){return new r(i.left+s.windowBounds.left,i.top+s.windowBounds.top,i.width,i.height)},r.fromDOMRectList=function(s,i){var n=Array.from(i).find(function(c){return c.width!==0});return n?new r(n.left+s.windowBounds.left,n.top+s.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r}(),za=function(r,s){return vr.fromClientRect(r,s.getBoundingClientRect())},mE=function(r){var s=r.body,i=r.documentElement;if(!s||!i)throw new Error("Unable to get document size");var n=Math.max(Math.max(s.scrollWidth,i.scrollWidth),Math.max(s.offsetWidth,i.offsetWidth),Math.max(s.clientWidth,i.clientWidth)),c=Math.max(Math.max(s.scrollHeight,i.scrollHeight),Math.max(s.offsetHeight,i.offsetHeight),Math.max(s.clientHeight,i.clientHeight));return new vr(0,0,n,c)},Xa=function(r){for(var s=[],i=0,n=r.length;i<n;){var c=r.charCodeAt(i++);if(c>=55296&&c<=56319&&i<n){var a=r.charCodeAt(i++);(a&64512)===56320?s.push(((c&1023)<<10)+(a&1023)+65536):(s.push(c),i--)}else s.push(c)}return s},Ze=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var i=r.length;if(!i)return"";for(var n=[],c=-1,a="";++c<i;){var h=r[c];h<=65535?n.push(h):(h-=65536,n.push((h>>10)+55296,h%1024+56320)),(c+1===i||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},r_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BE=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vc=0;Vc<r_.length;Vc++)BE[r_.charCodeAt(Vc)]=Vc;var i_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",En=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Kc=0;Kc<i_.length;Kc++)En[i_.charCodeAt(Kc)]=Kc;var wE=function(r){var s=r.length*.75,i=r.length,n,c=0,a,h,p,d;r[r.length-1]==="="&&(s--,r[r.length-2]==="="&&s--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(s):new Array(s),f=Array.isArray(g)?g:new Uint8Array(g);for(n=0;n<i;n+=4)a=En[r.charCodeAt(n)],h=En[r.charCodeAt(n+1)],p=En[r.charCodeAt(n+2)],d=En[r.charCodeAt(n+3)],f[c++]=a<<2|h>>4,f[c++]=(h&15)<<4|p>>2,f[c++]=(p&3)<<6|d&63;return g},_E=function(r){for(var s=r.length,i=[],n=0;n<s;n+=2)i.push(r[n+1]<<8|r[n]);return i},CE=function(r){for(var s=r.length,i=[],n=0;n<s;n+=4)i.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return i},Wi=5,Zg=11,Xp=2,bE=Zg-Wi,TC=65536>>Wi,vE=1<<Wi,Yp=vE-1,EE=1024>>Wi,yE=TC+EE,IE=yE,TE=32,kE=IE+TE,SE=65536>>Zg,FE=1<<bE,UE=FE-1,s_=function(r,s,i){return r.slice?r.slice(s,i):new Uint16Array(Array.prototype.slice.call(r,s,i))},RE=function(r,s,i){return r.slice?r.slice(s,i):new Uint32Array(Array.prototype.slice.call(r,s,i))},DE=function(r,s){var i=wE(r),n=Array.isArray(i)?CE(i):new Uint32Array(i),c=Array.isArray(i)?_E(i):new Uint16Array(i),a=24,h=s_(c,a/2,n[4]/2),p=n[5]===2?s_(c,(a+n[4])/2):RE(n,Math.ceil((a+n[4])/4));return new xE(n[0],n[1],n[2],n[3],h,p)},xE=function(){function r(s,i,n,c,a,h){this.initialValue=s,this.errorValue=i,this.highStart=n,this.highValueIndex=c,this.index=a,this.data=h}return r.prototype.get=function(s){var i;if(s>=0){if(s<55296||s>56319&&s<=65535)return i=this.index[s>>Wi],i=(i<<Xp)+(s&Yp),this.data[i];if(s<=65535)return i=this.index[TC+(s-55296>>Wi)],i=(i<<Xp)+(s&Yp),this.data[i];if(s<this.highStart)return i=kE-SE+(s>>Zg),i=this.index[i],i+=s>>Wi&UE,i=this.index[i],i=(i<<Xp)+(s&Yp),this.data[i];if(s<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),o_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",OE=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wc=0;Wc<o_.length;Wc++)OE[o_.charCodeAt(Wc)]=Wc;var LE="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",n_=50,QE=1,kC=2,SC=3,ME=4,NE=5,l_=7,FC=8,c_=9,Xr=10,Eg=11,a_=12,yg=13,HE=14,yn=15,Ig=16,zc=17,wn=18,PE=19,u_=20,Tg=21,_n=22,Jp=23,Ws=24,Zt=25,In=26,Tn=27,zs=28,GE=29,Gi=30,VE=31,Xc=32,Yc=33,kg=34,Sg=35,Fg=36,Gn=37,Ug=38,$a=39,ma=40,jp=41,UC=42,KE=43,WE=[9001,65288],RC="!",de="",Jc="",Rg=DE(LE),Br=[Gi,Fg],Dg=[QE,kC,SC,NE],DC=[Xr,FC],h_=[Tn,In],zE=Dg.concat(DC),d_=[Ug,$a,ma,kg,Sg],XE=[yn,yg],YE=function(r,s){s===void 0&&(s="strict");var i=[],n=[],c=[];return r.forEach(function(a,h){var p=Rg.get(a);if(p>n_?(c.push(!0),p-=n_):c.push(!1),["normal","auto","loose"].indexOf(s)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(h),i.push(Ig);if(p===ME||p===Eg){if(h===0)return n.push(h),i.push(Gi);var d=i[h-1];return zE.indexOf(d)===-1?(n.push(n[h-1]),i.push(d)):(n.push(h),i.push(Gi))}if(n.push(h),p===VE)return i.push(s==="strict"?Tg:Gn);if(p===UC||p===GE)return i.push(Gi);if(p===KE)return a>=131072&&a<=196605||a>=196608&&a<=262141?i.push(Gn):i.push(Gi);i.push(p)}),[n,i,c]},qp=function(r,s,i,n){var c=n[i];if(Array.isArray(r)?r.indexOf(c)!==-1:r===c)for(var a=i;a<=n.length;){a++;var h=n[a];if(h===s)return!0;if(h!==Xr)break}if(c===Xr)for(var a=i;a>0;){a--;var p=n[a];if(Array.isArray(r)?r.indexOf(p)!==-1:r===p)for(var d=i;d<=n.length;){d++;var h=n[d];if(h===s)return!0;if(h!==Xr)break}if(p!==Xr)break}return!1},p_=function(r,s){for(var i=r;i>=0;){var n=s[i];if(n===Xr)i--;else return n}return 0},JE=function(r,s,i,n,c){if(i[n]===0)return de;var a=n-1;if(Array.isArray(c)&&c[a]===!0)return de;var h=a-1,p=a+1,d=s[a],g=h>=0?s[h]:0,f=s[p];if(d===kC&&f===SC)return de;if(Dg.indexOf(d)!==-1)return RC;if(Dg.indexOf(f)!==-1||DC.indexOf(f)!==-1)return de;if(p_(a,s)===FC)return Jc;if(Rg.get(r[a])===Eg||(d===Xc||d===Yc)&&Rg.get(r[p])===Eg||d===l_||f===l_||d===c_||[Xr,yg,yn].indexOf(d)===-1&&f===c_||[zc,wn,PE,Ws,zs].indexOf(f)!==-1||p_(a,s)===_n||qp(Jp,_n,a,s)||qp([zc,wn],Tg,a,s)||qp(a_,a_,a,s))return de;if(d===Xr)return Jc;if(d===Jp||f===Jp)return de;if(f===Ig||d===Ig)return Jc;if([yg,yn,Tg].indexOf(f)!==-1||d===HE||g===Fg&&XE.indexOf(d)!==-1||d===zs&&f===Fg||f===u_||Br.indexOf(f)!==-1&&d===Zt||Br.indexOf(d)!==-1&&f===Zt||d===Tn&&[Gn,Xc,Yc].indexOf(f)!==-1||[Gn,Xc,Yc].indexOf(d)!==-1&&f===In||Br.indexOf(d)!==-1&&h_.indexOf(f)!==-1||h_.indexOf(d)!==-1&&Br.indexOf(f)!==-1||[Tn,In].indexOf(d)!==-1&&(f===Zt||[_n,yn].indexOf(f)!==-1&&s[p+1]===Zt)||[_n,yn].indexOf(d)!==-1&&f===Zt||d===Zt&&[Zt,zs,Ws].indexOf(f)!==-1)return de;if([Zt,zs,Ws,zc,wn].indexOf(f)!==-1)for(var B=a;B>=0;){var w=s[B];if(w===Zt)return de;if([zs,Ws].indexOf(w)!==-1)B--;else break}if([Tn,In].indexOf(f)!==-1)for(var B=[zc,wn].indexOf(d)!==-1?h:a;B>=0;){var w=s[B];if(w===Zt)return de;if([zs,Ws].indexOf(w)!==-1)B--;else break}if(Ug===d&&[Ug,$a,kg,Sg].indexOf(f)!==-1||[$a,kg].indexOf(d)!==-1&&[$a,ma].indexOf(f)!==-1||[ma,Sg].indexOf(d)!==-1&&f===ma||d_.indexOf(d)!==-1&&[u_,In].indexOf(f)!==-1||d_.indexOf(f)!==-1&&d===Tn||Br.indexOf(d)!==-1&&Br.indexOf(f)!==-1||d===Ws&&Br.indexOf(f)!==-1||Br.concat(Zt).indexOf(d)!==-1&&f===_n&&WE.indexOf(r[p])===-1||Br.concat(Zt).indexOf(f)!==-1&&d===wn)return de;if(d===jp&&f===jp){for(var C=i[a],v=1;C>0&&(C--,s[C]===jp);)v++;if(v%2!==0)return de}return d===Xc&&f===Yc?de:Jc},jE=function(r,s){s||(s={lineBreak:"normal",wordBreak:"normal"});var i=YE(r,s.lineBreak),n=i[0],c=i[1],a=i[2];(s.wordBreak==="break-all"||s.wordBreak==="break-word")&&(c=c.map(function(p){return[Zt,Gi,UC].indexOf(p)!==-1?Gn:p}));var h=s.wordBreak==="keep-all"?a.map(function(p,d){return p&&r[d]>=19968&&r[d]<=40959}):void 0;return[n,c,h]},qE=function(){function r(s,i,n,c){this.codePoints=s,this.required=i===RC,this.start=n,this.end=c}return r.prototype.slice=function(){return Ze.apply(void 0,this.codePoints.slice(this.start,this.end))},r}(),ZE=function(r,s){var i=Xa(r),n=jE(i,s),c=n[0],a=n[1],h=n[2],p=i.length,d=0,g=0;return{next:function(){if(g>=p)return{done:!0,value:null};for(var f=de;g<p&&(f=JE(i,a,c,++g,h))===de;);if(f!==de||g===p){var B=new qE(i,f,d,g);return d=g,{value:B,done:!1}}return{done:!0,value:null}}}},ey=1,ty=2,Jn=4,g_=8,va=10,f_=47,Un=92,Ay=9,ry=32,jc=34,Cn=61,iy=35,sy=36,oy=37,qc=39,Zc=40,bn=41,ny=95,Wt=45,ly=33,cy=60,ay=62,uy=64,hy=91,dy=93,py=61,gy=123,ea=63,fy=125,$_=124,$y=126,my=128,m_=65533,Zp=42,Vi=43,By=44,wy=58,_y=59,Vn=46,Cy=0,by=8,vy=11,Ey=14,yy=31,Iy=127,VA=-1,xC=48,OC=97,LC=101,Ty=102,ky=117,Sy=122,QC=65,MC=69,NC=70,Fy=85,Uy=90,Tt=function(r){return r>=xC&&r<=57},Ry=function(r){return r>=55296&&r<=57343},Xs=function(r){return Tt(r)||r>=QC&&r<=NC||r>=OC&&r<=Ty},Dy=function(r){return r>=OC&&r<=Sy},xy=function(r){return r>=QC&&r<=Uy},Oy=function(r){return Dy(r)||xy(r)},Ly=function(r){return r>=my},ta=function(r){return r===va||r===Ay||r===ry},Ea=function(r){return Oy(r)||Ly(r)||r===ny},B_=function(r){return Ea(r)||Tt(r)||r===Wt},Qy=function(r){return r>=Cy&&r<=by||r===vy||r>=Ey&&r<=yy||r===Iy},Wr=function(r,s){return r!==Un?!1:s!==va},Aa=function(r,s,i){return r===Wt?Ea(s)||Wr(s,i):Ea(r)?!0:!!(r===Un&&Wr(r,s))},eg=function(r,s,i){return r===Vi||r===Wt?Tt(s)?!0:s===Vn&&Tt(i):Tt(r===Vn?s:r)},My=function(r){var s=0,i=1;(r[s]===Vi||r[s]===Wt)&&(r[s]===Wt&&(i=-1),s++);for(var n=[];Tt(r[s]);)n.push(r[s++]);var c=n.length?parseInt(Ze.apply(void 0,n),10):0;r[s]===Vn&&s++;for(var a=[];Tt(r[s]);)a.push(r[s++]);var h=a.length,p=h?parseInt(Ze.apply(void 0,a),10):0;(r[s]===MC||r[s]===LC)&&s++;var d=1;(r[s]===Vi||r[s]===Wt)&&(r[s]===Wt&&(d=-1),s++);for(var g=[];Tt(r[s]);)g.push(r[s++]);var f=g.length?parseInt(Ze.apply(void 0,g),10):0;return i*(c+p*Math.pow(10,-h))*Math.pow(10,d*f)},Ny={type:2},Hy={type:3},Py={type:4},Gy={type:13},Vy={type:8},Ky={type:21},Wy={type:9},zy={type:10},Xy={type:11},Yy={type:12},Jy={type:14},ra={type:23},jy={type:1},qy={type:25},Zy={type:24},eI={type:26},tI={type:27},AI={type:28},rI={type:29},iI={type:31},xg={type:32},HC=function(){function r(){this._value=[]}return r.prototype.write=function(s){this._value=this._value.concat(Xa(s))},r.prototype.read=function(){for(var s=[],i=this.consumeToken();i!==xg;)s.push(i),i=this.consumeToken();return s},r.prototype.consumeToken=function(){var s=this.consumeCodePoint();switch(s){case jc:return this.consumeStringToken(jc);case iy:var i=this.peekCodePoint(0),n=this.peekCodePoint(1),c=this.peekCodePoint(2);if(B_(i)||Wr(n,c)){var a=Aa(i,n,c)?ty:ey,h=this.consumeName();return{type:5,value:h,flags:a}}break;case sy:if(this.peekCodePoint(0)===Cn)return this.consumeCodePoint(),Gy;break;case qc:return this.consumeStringToken(qc);case Zc:return Ny;case bn:return Hy;case Zp:if(this.peekCodePoint(0)===Cn)return this.consumeCodePoint(),Jy;break;case Vi:if(eg(s,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(s),this.consumeNumericToken();break;case By:return Py;case Wt:var p=s,d=this.peekCodePoint(0),g=this.peekCodePoint(1);if(eg(p,d,g))return this.reconsumeCodePoint(s),this.consumeNumericToken();if(Aa(p,d,g))return this.reconsumeCodePoint(s),this.consumeIdentLikeToken();if(d===Wt&&g===ay)return this.consumeCodePoint(),this.consumeCodePoint(),Zy;break;case Vn:if(eg(s,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(s),this.consumeNumericToken();break;case f_:if(this.peekCodePoint(0)===Zp)for(this.consumeCodePoint();;){var f=this.consumeCodePoint();if(f===Zp&&(f=this.consumeCodePoint(),f===f_))return this.consumeToken();if(f===VA)return this.consumeToken()}break;case wy:return eI;case _y:return tI;case cy:if(this.peekCodePoint(0)===ly&&this.peekCodePoint(1)===Wt&&this.peekCodePoint(2)===Wt)return this.consumeCodePoint(),this.consumeCodePoint(),qy;break;case uy:var B=this.peekCodePoint(0),w=this.peekCodePoint(1),C=this.peekCodePoint(2);if(Aa(B,w,C)){var h=this.consumeName();return{type:7,value:h}}break;case hy:return AI;case Un:if(Wr(s,this.peekCodePoint(0)))return this.reconsumeCodePoint(s),this.consumeIdentLikeToken();break;case dy:return rI;case py:if(this.peekCodePoint(0)===Cn)return this.consumeCodePoint(),Vy;break;case gy:return Xy;case fy:return Yy;case ky:case Fy:var v=this.peekCodePoint(0),_=this.peekCodePoint(1);return v===Vi&&(Xs(_)||_===ea)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(s),this.consumeIdentLikeToken();case $_:if(this.peekCodePoint(0)===Cn)return this.consumeCodePoint(),Wy;if(this.peekCodePoint(0)===$_)return this.consumeCodePoint(),Ky;break;case $y:if(this.peekCodePoint(0)===Cn)return this.consumeCodePoint(),zy;break;case VA:return xg}return ta(s)?(this.consumeWhiteSpace(),iI):Tt(s)?(this.reconsumeCodePoint(s),this.consumeNumericToken()):Ea(s)?(this.reconsumeCodePoint(s),this.consumeIdentLikeToken()):{type:6,value:Ze(s)}},r.prototype.consumeCodePoint=function(){var s=this._value.shift();return typeof s>"u"?-1:s},r.prototype.reconsumeCodePoint=function(s){this._value.unshift(s)},r.prototype.peekCodePoint=function(s){return s>=this._value.length?-1:this._value[s]},r.prototype.consumeUnicodeRangeToken=function(){for(var s=[],i=this.consumeCodePoint();Xs(i)&&s.length<6;)s.push(i),i=this.consumeCodePoint();for(var n=!1;i===ea&&s.length<6;)s.push(i),i=this.consumeCodePoint(),n=!0;if(n){var c=parseInt(Ze.apply(void 0,s.map(function(d){return d===ea?xC:d})),16),a=parseInt(Ze.apply(void 0,s.map(function(d){return d===ea?NC:d})),16);return{type:30,start:c,end:a}}var h=parseInt(Ze.apply(void 0,s),16);if(this.peekCodePoint(0)===Wt&&Xs(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var p=[];Xs(i)&&p.length<6;)p.push(i),i=this.consumeCodePoint();var a=parseInt(Ze.apply(void 0,p),16);return{type:30,start:h,end:a}}else return{type:30,start:h,end:h}},r.prototype.consumeIdentLikeToken=function(){var s=this.consumeName();return s.toLowerCase()==="url"&&this.peekCodePoint(0)===Zc?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Zc?(this.consumeCodePoint(),{type:19,value:s}):{type:20,value:s}},r.prototype.consumeUrlToken=function(){var s=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===VA)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===qc||i===jc){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===VA||this.peekCodePoint(0)===bn)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),ra)}for(;;){var c=this.consumeCodePoint();if(c===VA||c===bn)return{type:22,value:Ze.apply(void 0,s)};if(ta(c))return this.consumeWhiteSpace(),this.peekCodePoint(0)===VA||this.peekCodePoint(0)===bn?(this.consumeCodePoint(),{type:22,value:Ze.apply(void 0,s)}):(this.consumeBadUrlRemnants(),ra);if(c===jc||c===qc||c===Zc||Qy(c))return this.consumeBadUrlRemnants(),ra;if(c===Un)if(Wr(c,this.peekCodePoint(0)))s.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ra;else s.push(c)}},r.prototype.consumeWhiteSpace=function(){for(;ta(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var s=this.consumeCodePoint();if(s===bn||s===VA)return;Wr(s,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(s){for(var i=5e4,n="";s>0;){var c=Math.min(i,s);n+=Ze.apply(void 0,this._value.splice(0,c)),s-=c}return this._value.shift(),n},r.prototype.consumeStringToken=function(s){var i="",n=0;do{var c=this._value[n];if(c===VA||c===void 0||c===s)return i+=this.consumeStringSlice(n),{type:0,value:i};if(c===va)return this._value.splice(0,n),jy;if(c===Un){var a=this._value[n+1];a!==VA&&a!==void 0&&(a===va?(i+=this.consumeStringSlice(n),n=-1,this._value.shift()):Wr(c,a)&&(i+=this.consumeStringSlice(n),i+=Ze(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var s=[],i=Jn,n=this.peekCodePoint(0);for((n===Vi||n===Wt)&&s.push(this.consumeCodePoint());Tt(this.peekCodePoint(0));)s.push(this.consumeCodePoint());n=this.peekCodePoint(0);var c=this.peekCodePoint(1);if(n===Vn&&Tt(c))for(s.push(this.consumeCodePoint(),this.consumeCodePoint()),i=g_;Tt(this.peekCodePoint(0));)s.push(this.consumeCodePoint());n=this.peekCodePoint(0),c=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===MC||n===LC)&&((c===Vi||c===Wt)&&Tt(a)||Tt(c)))for(s.push(this.consumeCodePoint(),this.consumeCodePoint()),i=g_;Tt(this.peekCodePoint(0));)s.push(this.consumeCodePoint());return[My(s),i]},r.prototype.consumeNumericToken=function(){var s=this.consumeNumber(),i=s[0],n=s[1],c=this.peekCodePoint(0),a=this.peekCodePoint(1),h=this.peekCodePoint(2);if(Aa(c,a,h)){var p=this.consumeName();return{type:15,number:i,flags:n,unit:p}}return c===oy?(this.consumeCodePoint(),{type:16,number:i,flags:n}):{type:17,number:i,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var s=this.consumeCodePoint();if(Xs(s)){for(var i=Ze(s);Xs(this.peekCodePoint(0))&&i.length<6;)i+=Ze(this.consumeCodePoint());ta(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(i,16);return n===0||Ry(n)||n>1114111?m_:n}return s===VA?m_:s},r.prototype.consumeName=function(){for(var s="";;){var i=this.consumeCodePoint();if(B_(i))s+=Ze(i);else if(Wr(i,this.peekCodePoint(0)))s+=Ze(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),s}},r}(),PC=function(){function r(s){this._tokens=s}return r.create=function(s){var i=new HC;return i.write(s),new r(i.read())},r.parseValue=function(s){return r.create(s).parseComponentValue()},r.parseValues=function(s){return r.create(s).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var s=this.consumeToken();s.type===31;)s=this.consumeToken();if(s.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(s);var i=this.consumeComponentValue();do s=this.consumeToken();while(s.type===31);if(s.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var s=[];;){var i=this.consumeComponentValue();if(i.type===32)return s;s.push(i),s.push()}},r.prototype.consumeComponentValue=function(){var s=this.consumeToken();switch(s.type){case 11:case 28:case 2:return this.consumeSimpleBlock(s.type);case 19:return this.consumeFunction(s)}return s},r.prototype.consumeSimpleBlock=function(s){for(var i={type:s,values:[]},n=this.consumeToken();;){if(n.type===32||oI(n,s))return i;this.reconsumeToken(n),i.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(s){for(var i={name:s.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return i;this.reconsumeToken(n),i.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var s=this._tokens.shift();return typeof s>"u"?xg:s},r.prototype.reconsumeToken=function(s){this._tokens.unshift(s)},r}(),jn=function(r){return r.type===15},go=function(r){return r.type===17},Re=function(r){return r.type===20},sI=function(r){return r.type===0},Og=function(r,s){return Re(r)&&r.value===s},GC=function(r){return r.type!==31},ao=function(r){return r.type!==31&&r.type!==4},YA=function(r){var s=[],i=[];return r.forEach(function(n){if(n.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");s.push(i),i=[];return}n.type!==31&&i.push(n)}),i.length&&s.push(i),s},oI=function(r,s){return s===11&&r.type===12||s===28&&r.type===29?!0:s===2&&r.type===3},ti=function(r){return r.type===17||r.type===15},ot=function(r){return r.type===16||ti(r)},VC=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},bt={type:17,number:0,flags:Jn},ef={type:16,number:50,flags:Jn},Yr={type:16,number:100,flags:Jn},kn=function(r,s,i){var n=r[0],c=r[1];return[Me(n,s),Me(typeof c<"u"?c:n,i)]},Me=function(r,s){if(r.type===16)return r.number/100*s;if(jn(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},KC="deg",WC="grad",zC="rad",XC="turn",Ya={name:"angle",parse:function(r,s){if(s.type===15)switch(s.unit){case KC:return Math.PI*s.number/180;case WC:return Math.PI/200*s.number;case zC:return s.number;case XC:return Math.PI*2*s.number}throw new Error("Unsupported angle type")}},YC=function(r){return r.type===15&&(r.unit===KC||r.unit===WC||r.unit===zC||r.unit===XC)},JC=function(r){var s=r.filter(Re).map(function(i){return i.value}).join(" ");switch(s){case"to bottom right":case"to right bottom":case"left top":case"top left":return[bt,bt];case"to top":case"bottom":return hA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[bt,Yr];case"to right":case"left":return hA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Yr,Yr];case"to bottom":case"top":return hA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Yr,bt];case"to left":case"right":return hA(270)}return 0},hA=function(r){return Math.PI*r/180},Zr={name:"color",parse:function(r,s){if(s.type===18){var i=nI[s.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+s.name+'"');return i(r,s.values)}if(s.type===5){if(s.value.length===3){var n=s.value.substring(0,1),c=s.value.substring(1,2),a=s.value.substring(2,3);return Jr(parseInt(n+n,16),parseInt(c+c,16),parseInt(a+a,16),1)}if(s.value.length===4){var n=s.value.substring(0,1),c=s.value.substring(1,2),a=s.value.substring(2,3),h=s.value.substring(3,4);return Jr(parseInt(n+n,16),parseInt(c+c,16),parseInt(a+a,16),parseInt(h+h,16)/255)}if(s.value.length===6){var n=s.value.substring(0,2),c=s.value.substring(2,4),a=s.value.substring(4,6);return Jr(parseInt(n,16),parseInt(c,16),parseInt(a,16),1)}if(s.value.length===8){var n=s.value.substring(0,2),c=s.value.substring(2,4),a=s.value.substring(4,6),h=s.value.substring(6,8);return Jr(parseInt(n,16),parseInt(c,16),parseInt(a,16),parseInt(h,16)/255)}}if(s.type===20){var p=Cr[s.value.toUpperCase()];if(typeof p<"u")return p}return Cr.TRANSPARENT}},ei=function(r){return(255&r)===0},$t=function(r){var s=255&r,i=255&r>>8,n=255&r>>16,c=255&r>>24;return s<255?"rgba("+c+","+n+","+i+","+s/255+")":"rgb("+c+","+n+","+i+")"},Jr=function(r,s,i,n){return(r<<24|s<<16|i<<8|Math.round(n*255)<<0)>>>0},w_=function(r,s){if(r.type===17)return r.number;if(r.type===16){var i=s===3?1:255;return s===3?r.number/100*i:Math.round(r.number/100*i)}return 0},__=function(r,s){var i=s.filter(ao);if(i.length===3){var n=i.map(w_),c=n[0],a=n[1],h=n[2];return Jr(c,a,h,1)}if(i.length===4){var p=i.map(w_),c=p[0],a=p[1],h=p[2],d=p[3];return Jr(c,a,h,d)}return 0};function tg(r,s,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(s-r)*i*6+r:i<1/2?s:i<2/3?(s-r)*6*(2/3-i)+r:r}var C_=function(r,s){var i=s.filter(ao),n=i[0],c=i[1],a=i[2],h=i[3],p=(n.type===17?hA(n.number):Ya.parse(r,n))/(Math.PI*2),d=ot(c)?c.number/100:0,g=ot(a)?a.number/100:0,f=typeof h<"u"&&ot(h)?Me(h,1):1;if(d===0)return Jr(g*255,g*255,g*255,1);var B=g<=.5?g*(d+1):g+d-g*d,w=g*2-B,C=tg(w,B,p+1/3),v=tg(w,B,p),_=tg(w,B,p-1/3);return Jr(C*255,v*255,_*255,f)},nI={hsl:C_,hsla:C_,rgb:__,rgba:__},Rn=function(r,s){return Zr.parse(r,PC.create(s).parseComponentValue())},Cr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},lI={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,s){return s.map(function(i){if(Re(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},cI={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ja=function(r,s){var i=Zr.parse(r,s[0]),n=s[1];return n&&ot(n)?{color:i,stop:n}:{color:i,stop:null}},b_=function(r,s){var i=r[0],n=r[r.length-1];i.stop===null&&(i.stop=bt),n.stop===null&&(n.stop=Yr);for(var c=[],a=0,h=0;h<r.length;h++){var p=r[h].stop;if(p!==null){var d=Me(p,s);d>a?c.push(d):c.push(a),a=d}else c.push(null)}for(var g=null,h=0;h<c.length;h++){var f=c[h];if(f===null)g===null&&(g=h);else if(g!==null){for(var B=h-g,w=c[g-1],C=(f-w)/(B+1),v=1;v<=B;v++)c[g+v-1]=C*v;g=null}}return r.map(function(_,I){var D=_.color;return{color:D,stop:Math.max(Math.min(1,c[I]/s),0)}})},aI=function(r,s,i){var n=s/2,c=i/2,a=Me(r[0],s)-n,h=c-Me(r[1],i);return(Math.atan2(h,a)+Math.PI*2)%(Math.PI*2)},uI=function(r,s,i){var n=typeof r=="number"?r:aI(r,s,i),c=Math.abs(s*Math.sin(n))+Math.abs(i*Math.cos(n)),a=s/2,h=i/2,p=c/2,d=Math.sin(n-Math.PI/2)*p,g=Math.cos(n-Math.PI/2)*p;return[c,a-g,a+g,h-d,h+d]},CA=function(r,s){return Math.sqrt(r*r+s*s)},v_=function(r,s,i,n,c){var a=[[0,0],[0,s],[r,0],[r,s]];return a.reduce(function(h,p){var d=p[0],g=p[1],f=CA(i-d,n-g);return(c?f<h.optimumDistance:f>h.optimumDistance)?{optimumCorner:p,optimumDistance:f}:h},{optimumDistance:c?1/0:-1/0,optimumCorner:null}).optimumCorner},hI=function(r,s,i,n,c){var a=0,h=0;switch(r.size){case 0:r.shape===0?a=h=Math.min(Math.abs(s),Math.abs(s-n),Math.abs(i),Math.abs(i-c)):r.shape===1&&(a=Math.min(Math.abs(s),Math.abs(s-n)),h=Math.min(Math.abs(i),Math.abs(i-c)));break;case 2:if(r.shape===0)a=h=Math.min(CA(s,i),CA(s,i-c),CA(s-n,i),CA(s-n,i-c));else if(r.shape===1){var p=Math.min(Math.abs(i),Math.abs(i-c))/Math.min(Math.abs(s),Math.abs(s-n)),d=v_(n,c,s,i,!0),g=d[0],f=d[1];a=CA(g-s,(f-i)/p),h=p*a}break;case 1:r.shape===0?a=h=Math.max(Math.abs(s),Math.abs(s-n),Math.abs(i),Math.abs(i-c)):r.shape===1&&(a=Math.max(Math.abs(s),Math.abs(s-n)),h=Math.max(Math.abs(i),Math.abs(i-c)));break;case 3:if(r.shape===0)a=h=Math.max(CA(s,i),CA(s,i-c),CA(s-n,i),CA(s-n,i-c));else if(r.shape===1){var p=Math.max(Math.abs(i),Math.abs(i-c))/Math.max(Math.abs(s),Math.abs(s-n)),B=v_(n,c,s,i,!1),g=B[0],f=B[1];a=CA(g-s,(f-i)/p),h=p*a}break}return Array.isArray(r.size)&&(a=Me(r.size[0],n),h=r.size.length===2?Me(r.size[1],c):a),[a,h]},dI=function(r,s){var i=hA(180),n=[];return YA(s).forEach(function(c,a){if(a===0){var h=c[0];if(h.type===20&&h.value==="to"){i=JC(c);return}else if(YC(h)){i=Ya.parse(r,h);return}}var p=Ja(r,c);n.push(p)}),{angle:i,stops:n,type:1}},ia=function(r,s){var i=hA(180),n=[];return YA(s).forEach(function(c,a){if(a===0){var h=c[0];if(h.type===20&&["top","left","right","bottom"].indexOf(h.value)!==-1){i=JC(c);return}else if(YC(h)){i=(Ya.parse(r,h)+hA(270))%hA(360);return}}var p=Ja(r,c);n.push(p)}),{angle:i,stops:n,type:1}},pI=function(r,s){var i=hA(180),n=[],c=1,a=0,h=3,p=[];return YA(s).forEach(function(d,g){var f=d[0];if(g===0){if(Re(f)&&f.value==="linear"){c=1;return}else if(Re(f)&&f.value==="radial"){c=2;return}}if(f.type===18){if(f.name==="from"){var B=Zr.parse(r,f.values[0]);n.push({stop:bt,color:B})}else if(f.name==="to"){var B=Zr.parse(r,f.values[0]);n.push({stop:Yr,color:B})}else if(f.name==="color-stop"){var w=f.values.filter(ao);if(w.length===2){var B=Zr.parse(r,w[1]),C=w[0];go(C)&&n.push({stop:{type:16,number:C.number*100,flags:C.flags},color:B})}}}}),c===1?{angle:(i+hA(180))%hA(360),stops:n,type:c}:{size:h,shape:a,stops:n,position:p,type:c}},jC="closest-side",qC="farthest-side",ZC="closest-corner",eb="farthest-corner",tb="circle",Ab="ellipse",rb="cover",ib="contain",gI=function(r,s){var i=0,n=3,c=[],a=[];return YA(s).forEach(function(h,p){var d=!0;if(p===0){var g=!1;d=h.reduce(function(B,w){if(g)if(Re(w))switch(w.value){case"center":return a.push(ef),B;case"top":case"left":return a.push(bt),B;case"right":case"bottom":return a.push(Yr),B}else(ot(w)||ti(w))&&a.push(w);else if(Re(w))switch(w.value){case tb:return i=0,!1;case Ab:return i=1,!1;case"at":return g=!0,!1;case jC:return n=0,!1;case rb:case qC:return n=1,!1;case ib:case ZC:return n=2,!1;case eb:return n=3,!1}else if(ti(w)||ot(w))return Array.isArray(n)||(n=[]),n.push(w),!1;return B},d)}if(d){var f=Ja(r,h);c.push(f)}}),{size:n,shape:i,stops:c,position:a,type:2}},sa=function(r,s){var i=0,n=3,c=[],a=[];return YA(s).forEach(function(h,p){var d=!0;if(p===0?d=h.reduce(function(f,B){if(Re(B))switch(B.value){case"center":return a.push(ef),!1;case"top":case"left":return a.push(bt),!1;case"right":case"bottom":return a.push(Yr),!1}else if(ot(B)||ti(B))return a.push(B),!1;return f},d):p===1&&(d=h.reduce(function(f,B){if(Re(B))switch(B.value){case tb:return i=0,!1;case Ab:return i=1,!1;case ib:case jC:return n=0,!1;case qC:return n=1,!1;case ZC:return n=2,!1;case rb:case eb:return n=3,!1}else if(ti(B)||ot(B))return Array.isArray(n)||(n=[]),n.push(B),!1;return f},d)),d){var g=Ja(r,h);c.push(g)}}),{size:n,shape:i,stops:c,position:a,type:2}},fI=function(r){return r.type===1},$I=function(r){return r.type===2},tf={name:"image",parse:function(r,s){if(s.type===22){var i={url:s.value,type:0};return r.cache.addImage(s.value),i}if(s.type===18){var n=sb[s.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+s.name+'"');return n(r,s.values)}throw new Error("Unsupported image type "+s.type)}};function mI(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!sb[r.name])}var sb={"linear-gradient":dI,"-moz-linear-gradient":ia,"-ms-linear-gradient":ia,"-o-linear-gradient":ia,"-webkit-linear-gradient":ia,"radial-gradient":gI,"-moz-radial-gradient":sa,"-ms-radial-gradient":sa,"-o-radial-gradient":sa,"-webkit-radial-gradient":sa,"-webkit-gradient":pI},BI={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,s){if(s.length===0)return[];var i=s[0];return i.type===20&&i.value==="none"?[]:s.filter(function(n){return ao(n)&&mI(n)}).map(function(n){return tf.parse(r,n)})}},wI={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,s){return s.map(function(i){if(Re(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},_I={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,s){return YA(s).map(function(i){return i.filter(ot)}).map(VC)}},CI={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,s){return YA(s).map(function(i){return i.filter(Re).map(function(n){return n.value}).join(" ")}).map(bI)}},bI=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},no;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(no||(no={}));var vI={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,s){return YA(s).map(function(i){return i.filter(EI)})}},EI=function(r){return Re(r)||ot(r)},ja=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},yI=ja("top"),II=ja("right"),TI=ja("bottom"),kI=ja("left"),qa=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(s,i){return VC(i.filter(ot))}}},SI=qa("top-left"),FI=qa("top-right"),UI=qa("bottom-right"),RI=qa("bottom-left"),Za=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(s,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},DI=Za("top"),xI=Za("right"),OI=Za("bottom"),LI=Za("left"),eu=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(s,i){return jn(i)?i.number:0}}},QI=eu("top"),MI=eu("right"),NI=eu("bottom"),HI=eu("left"),PI={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},GI={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,s){switch(s){case"rtl":return 1;case"ltr":default:return 0}}},VI={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,s){return s.filter(Re).reduce(function(i,n){return i|KI(n.value)},0)}},KI=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},WI={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,s){switch(s){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},zI={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,s){return s.type===20&&s.value==="normal"?0:s.type===17||s.type===15?s.number:0}},ya;(function(r){r.NORMAL="normal",r.STRICT="strict"})(ya||(ya={}));var XI={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,s){switch(s){case"strict":return ya.STRICT;case"normal":default:return ya.NORMAL}}},YI={name:"line-height",initialValue:"normal",prefix:!1,type:4},E_=function(r,s){return Re(r)&&r.value==="normal"?1.2*s:r.type===17?s*r.number:ot(r)?Me(r,s):s},JI={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,s){return s.type===20&&s.value==="none"?null:tf.parse(r,s)}},jI={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,s){switch(s){case"inside":return 0;case"outside":default:return 1}}},Lg={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,s){switch(s){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},tu=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},qI=tu("top"),ZI=tu("right"),eT=tu("bottom"),tT=tu("left"),AT={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,s){return s.filter(Re).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},rT={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,s){switch(s){case"break-word":return"break-word";case"normal":default:return"normal"}}},Au=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},iT=Au("top"),sT=Au("right"),oT=Au("bottom"),nT=Au("left"),lT={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,s){switch(s){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},cT={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,s){switch(s){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},aT={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,s){return s.length===1&&Og(s[0],"none")?[]:YA(s).map(function(i){for(var n={color:Cr.TRANSPARENT,offsetX:bt,offsetY:bt,blur:bt},c=0,a=0;a<i.length;a++){var h=i[a];ti(h)?(c===0?n.offsetX=h:c===1?n.offsetY=h:n.blur=h,c++):n.color=Zr.parse(r,h)}return n})}},uT={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,s){switch(s){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},hT={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,s){if(s.type===20&&s.value==="none")return null;if(s.type===18){var i=gT[s.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+s.name+'"');return i(s.values)}return null}},dT=function(r){var s=r.filter(function(i){return i.type===17}).map(function(i){return i.number});return s.length===6?s:null},pT=function(r){var s=r.filter(function(d){return d.type===17}).map(function(d){return d.number}),i=s[0],n=s[1];s[2],s[3];var c=s[4],a=s[5];s[6],s[7],s[8],s[9],s[10],s[11];var h=s[12],p=s[13];return s[14],s[15],s.length===16?[i,n,c,a,h,p]:null},gT={matrix:dT,matrix3d:pT},y_={type:16,number:50,flags:Jn},fT=[y_,y_],$T={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,s){var i=s.filter(ot);return i.length!==2?fT:[i[0],i[1]]}},mT={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,s){switch(s){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Dn;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(Dn||(Dn={}));var BT={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,s){switch(s){case"break-all":return Dn.BREAK_ALL;case"keep-all":return Dn.KEEP_ALL;case"normal":default:return Dn.NORMAL}}},wT={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,s){if(s.type===20)return{auto:!0,order:0};if(go(s))return{auto:!1,order:s.number};throw new Error("Invalid z-index number parsed")}},ob={name:"time",parse:function(r,s){if(s.type===15)switch(s.unit.toLowerCase()){case"s":return 1e3*s.number;case"ms":return s.number}throw new Error("Unsupported time type")}},_T={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,s){return go(s)?s.number:1}},CT={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},bT={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,s){return s.filter(Re).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},vT={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,s){var i=[],n=[];return s.forEach(function(c){switch(c.type){case 20:case 0:i.push(c.value);break;case 17:i.push(c.number.toString());break;case 4:n.push(i.join(" ")),i.length=0;break}}),i.length&&n.push(i.join(" ")),n.map(function(c){return c.indexOf(" ")===-1?c:"'"+c+"'"})}},ET={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},yT={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,s){if(go(s))return s.number;if(Re(s))switch(s.value){case"bold":return 700;case"normal":default:return 400}return 400}},IT={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,s){return s.filter(Re).map(function(i){return i.value})}},TT={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,s){switch(s){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},dt=function(r,s){return(r&s)!==0},kT={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,s){if(s.length===0)return[];var i=s[0];return i.type===20&&i.value==="none"?[]:s}},ST={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,s){if(s.length===0)return null;var i=s[0];if(i.type===20&&i.value==="none")return null;for(var n=[],c=s.filter(GC),a=0;a<c.length;a++){var h=c[a],p=c[a+1];if(h.type===20){var d=p&&go(p)?p.number:1;n.push({counter:h.value,increment:d})}}return n}},FT={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,s){if(s.length===0)return[];for(var i=[],n=s.filter(GC),c=0;c<n.length;c++){var a=n[c],h=n[c+1];if(Re(a)&&a.value!=="none"){var p=h&&go(h)?h.number:0;i.push({counter:a.value,reset:p})}}return i}},UT={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,s){return s.filter(jn).map(function(i){return ob.parse(r,i)})}},RT={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,s){if(s.length===0)return null;var i=s[0];if(i.type===20&&i.value==="none")return null;var n=[],c=s.filter(sI);if(c.length%2!==0)return null;for(var a=0;a<c.length;a+=2){var h=c[a].value,p=c[a+1].value;n.push({open:h,close:p})}return n}},I_=function(r,s,i){if(!r)return"";var n=r[Math.min(s,r.length-1)];return n?i?n.open:n.close:""},DT={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,s){return s.length===1&&Og(s[0],"none")?[]:YA(s).map(function(i){for(var n={color:255,offsetX:bt,offsetY:bt,blur:bt,spread:bt,inset:!1},c=0,a=0;a<i.length;a++){var h=i[a];Og(h,"inset")?n.inset=!0:ti(h)?(c===0?n.offsetX=h:c===1?n.offsetY=h:c===2?n.blur=h:n.spread=h,c++):n.color=Zr.parse(r,h)}return n})}},xT={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,s){var i=[0,1,2],n=[];return s.filter(Re).forEach(function(c){switch(c.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),i.forEach(function(c){n.indexOf(c)===-1&&n.push(c)}),n}},OT={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},LT={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,s){return jn(s)?s.number:0}},QT=function(){function r(s,i){var n,c;this.animationDuration=Y(s,UT,i.animationDuration),this.backgroundClip=Y(s,lI,i.backgroundClip),this.backgroundColor=Y(s,cI,i.backgroundColor),this.backgroundImage=Y(s,BI,i.backgroundImage),this.backgroundOrigin=Y(s,wI,i.backgroundOrigin),this.backgroundPosition=Y(s,_I,i.backgroundPosition),this.backgroundRepeat=Y(s,CI,i.backgroundRepeat),this.backgroundSize=Y(s,vI,i.backgroundSize),this.borderTopColor=Y(s,yI,i.borderTopColor),this.borderRightColor=Y(s,II,i.borderRightColor),this.borderBottomColor=Y(s,TI,i.borderBottomColor),this.borderLeftColor=Y(s,kI,i.borderLeftColor),this.borderTopLeftRadius=Y(s,SI,i.borderTopLeftRadius),this.borderTopRightRadius=Y(s,FI,i.borderTopRightRadius),this.borderBottomRightRadius=Y(s,UI,i.borderBottomRightRadius),this.borderBottomLeftRadius=Y(s,RI,i.borderBottomLeftRadius),this.borderTopStyle=Y(s,DI,i.borderTopStyle),this.borderRightStyle=Y(s,xI,i.borderRightStyle),this.borderBottomStyle=Y(s,OI,i.borderBottomStyle),this.borderLeftStyle=Y(s,LI,i.borderLeftStyle),this.borderTopWidth=Y(s,QI,i.borderTopWidth),this.borderRightWidth=Y(s,MI,i.borderRightWidth),this.borderBottomWidth=Y(s,NI,i.borderBottomWidth),this.borderLeftWidth=Y(s,HI,i.borderLeftWidth),this.boxShadow=Y(s,DT,i.boxShadow),this.color=Y(s,PI,i.color),this.direction=Y(s,GI,i.direction),this.display=Y(s,VI,i.display),this.float=Y(s,WI,i.cssFloat),this.fontFamily=Y(s,vT,i.fontFamily),this.fontSize=Y(s,ET,i.fontSize),this.fontStyle=Y(s,TT,i.fontStyle),this.fontVariant=Y(s,IT,i.fontVariant),this.fontWeight=Y(s,yT,i.fontWeight),this.letterSpacing=Y(s,zI,i.letterSpacing),this.lineBreak=Y(s,XI,i.lineBreak),this.lineHeight=Y(s,YI,i.lineHeight),this.listStyleImage=Y(s,JI,i.listStyleImage),this.listStylePosition=Y(s,jI,i.listStylePosition),this.listStyleType=Y(s,Lg,i.listStyleType),this.marginTop=Y(s,qI,i.marginTop),this.marginRight=Y(s,ZI,i.marginRight),this.marginBottom=Y(s,eT,i.marginBottom),this.marginLeft=Y(s,tT,i.marginLeft),this.opacity=Y(s,_T,i.opacity);var a=Y(s,AT,i.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Y(s,rT,i.overflowWrap),this.paddingTop=Y(s,iT,i.paddingTop),this.paddingRight=Y(s,sT,i.paddingRight),this.paddingBottom=Y(s,oT,i.paddingBottom),this.paddingLeft=Y(s,nT,i.paddingLeft),this.paintOrder=Y(s,xT,i.paintOrder),this.position=Y(s,cT,i.position),this.textAlign=Y(s,lT,i.textAlign),this.textDecorationColor=Y(s,CT,(n=i.textDecorationColor)!==null&&n!==void 0?n:i.color),this.textDecorationLine=Y(s,bT,(c=i.textDecorationLine)!==null&&c!==void 0?c:i.textDecoration),this.textShadow=Y(s,aT,i.textShadow),this.textTransform=Y(s,uT,i.textTransform),this.transform=Y(s,hT,i.transform),this.transformOrigin=Y(s,$T,i.transformOrigin),this.visibility=Y(s,mT,i.visibility),this.webkitTextStrokeColor=Y(s,OT,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=Y(s,LT,i.webkitTextStrokeWidth),this.wordBreak=Y(s,BT,i.wordBreak),this.zIndex=Y(s,wT,i.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return ei(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return dt(this.display,4)||dt(this.display,33554432)||dt(this.display,268435456)||dt(this.display,536870912)||dt(this.display,67108864)||dt(this.display,134217728)},r}(),MT=function(){function r(s,i){this.content=Y(s,kT,i.content),this.quotes=Y(s,RT,i.quotes)}return r}(),T_=function(){function r(s,i){this.counterIncrement=Y(s,ST,i.counterIncrement),this.counterReset=Y(s,FT,i.counterReset)}return r}(),Y=function(r,s,i){var n=new HC,c=i!==null&&typeof i<"u"?i.toString():s.initialValue;n.write(c);var a=new PC(n.read());switch(s.type){case 2:var h=a.parseComponentValue();return s.parse(r,Re(h)?h.value:s.initialValue);case 0:return s.parse(r,a.parseComponentValue());case 1:return s.parse(r,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(s.format){case"angle":return Ya.parse(r,a.parseComponentValue());case"color":return Zr.parse(r,a.parseComponentValue());case"image":return tf.parse(r,a.parseComponentValue());case"length":var p=a.parseComponentValue();return ti(p)?p:bt;case"length-percentage":var d=a.parseComponentValue();return ot(d)?d:bt;case"time":return ob.parse(r,a.parseComponentValue())}break}},NT="data-html2canvas-debug",HT=function(r){var s=r.getAttribute(NT);switch(s){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Qg=function(r,s){var i=HT(r);return i===1||s===i},JA=function(){function r(s,i){if(this.context=s,this.textNodes=[],this.elements=[],this.flags=0,Qg(i,3))debugger;this.styles=new QT(s,window.getComputedStyle(i,null)),Hg(i)&&(this.styles.animationDuration.some(function(n){return n>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=za(this.context,i),Qg(i,4)&&(this.flags|=16)}return r}(),PT="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",k_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var oa=0;oa<k_.length;oa++)Sn[k_.charCodeAt(oa)]=oa;var GT=function(r){var s=r.length*.75,i=r.length,n,c=0,a,h,p,d;r[r.length-1]==="="&&(s--,r[r.length-2]==="="&&s--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(s):new Array(s),f=Array.isArray(g)?g:new Uint8Array(g);for(n=0;n<i;n+=4)a=Sn[r.charCodeAt(n)],h=Sn[r.charCodeAt(n+1)],p=Sn[r.charCodeAt(n+2)],d=Sn[r.charCodeAt(n+3)],f[c++]=a<<2|h>>4,f[c++]=(h&15)<<4|p>>2,f[c++]=(p&3)<<6|d&63;return g},VT=function(r){for(var s=r.length,i=[],n=0;n<s;n+=2)i.push(r[n+1]<<8|r[n]);return i},KT=function(r){for(var s=r.length,i=[],n=0;n<s;n+=4)i.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return i},zi=5,Af=11,Ag=2,WT=Af-zi,nb=65536>>zi,zT=1<<zi,rg=zT-1,XT=1024>>zi,YT=nb+XT,JT=YT,jT=32,qT=JT+jT,ZT=65536>>Af,ek=1<<WT,tk=ek-1,S_=function(r,s,i){return r.slice?r.slice(s,i):new Uint16Array(Array.prototype.slice.call(r,s,i))},Ak=function(r,s,i){return r.slice?r.slice(s,i):new Uint32Array(Array.prototype.slice.call(r,s,i))},rk=function(r,s){var i=GT(r),n=Array.isArray(i)?KT(i):new Uint32Array(i),c=Array.isArray(i)?VT(i):new Uint16Array(i),a=24,h=S_(c,a/2,n[4]/2),p=n[5]===2?S_(c,(a+n[4])/2):Ak(n,Math.ceil((a+n[4])/4));return new ik(n[0],n[1],n[2],n[3],h,p)},ik=function(){function r(s,i,n,c,a,h){this.initialValue=s,this.errorValue=i,this.highStart=n,this.highValueIndex=c,this.index=a,this.data=h}return r.prototype.get=function(s){var i;if(s>=0){if(s<55296||s>56319&&s<=65535)return i=this.index[s>>zi],i=(i<<Ag)+(s&rg),this.data[i];if(s<=65535)return i=this.index[nb+(s-55296>>zi)],i=(i<<Ag)+(s&rg),this.data[i];if(s<this.highStart)return i=qT-ZT+(s>>Af),i=this.index[i],i+=s>>zi&tk,i=this.index[i],i=(i<<Ag)+(s&rg),this.data[i];if(s<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),F_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var na=0;na<F_.length;na++)sk[F_.charCodeAt(na)]=na;var ok=1,ig=2,sg=3,U_=4,R_=5,nk=7,D_=8,og=9,ng=10,x_=11,O_=12,L_=13,Q_=14,lg=15,lk=function(r){for(var s=[],i=0,n=r.length;i<n;){var c=r.charCodeAt(i++);if(c>=55296&&c<=56319&&i<n){var a=r.charCodeAt(i++);(a&64512)===56320?s.push(((c&1023)<<10)+(a&1023)+65536):(s.push(c),i--)}else s.push(c)}return s},ck=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var i=r.length;if(!i)return"";for(var n=[],c=-1,a="";++c<i;){var h=r[c];h<=65535?n.push(h):(h-=65536,n.push((h>>10)+55296,h%1024+56320)),(c+1===i||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},ak=rk(PT),cA="",cg="",uk=function(r){return ak.get(r)},hk=function(r,s,i){var n=i-2,c=s[n],a=s[i-1],h=s[i];if(a===ig&&h===sg)return cA;if(a===ig||a===sg||a===U_||h===ig||h===sg||h===U_)return cg;if(a===D_&&[D_,og,x_,O_].indexOf(h)!==-1||(a===x_||a===og)&&(h===og||h===ng)||(a===O_||a===ng)&&h===ng||h===L_||h===R_||h===nk||a===ok)return cA;if(a===L_&&h===Q_){for(;c===R_;)c=s[--n];if(c===Q_)return cA}if(a===lg&&h===lg){for(var p=0;c===lg;)p++,c=s[--n];if(p%2===0)return cA}return cg},dk=function(r){var s=lk(r),i=s.length,n=0,c=0,a=s.map(uk);return{next:function(){if(n>=i)return{done:!0,value:null};for(var h=cA;n<i&&(h=hk(s,a,++n))===cA;);if(h!==cA||n===i){var p=ck.apply(null,s.slice(c,n));return c=n,{value:p,done:!1}}return{done:!0,value:null}}}},pk=function(r){for(var s=dk(r),i=[],n;!(n=s.next()).done;)n.value&&i.push(n.value.slice());return i},gk=function(r){var s=123;if(r.createRange){var i=r.createRange();if(i.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=s+"px",n.style.display="block",r.body.appendChild(n),i.selectNode(n);var c=i.getBoundingClientRect(),a=Math.round(c.height);if(r.body.removeChild(n),a===s)return!0}}return!1},fk=function(r){var s=r.createElement("boundtest");s.style.width="50px",s.style.display="block",s.style.fontSize="12px",s.style.letterSpacing="0px",s.style.wordSpacing="0px",r.body.appendChild(s);var i=r.createRange();s.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=s.firstChild,c=Xa(n.data).map(function(d){return Ze(d)}),a=0,h={},p=c.every(function(d,g){i.setStart(n,a),i.setEnd(n,a+d.length);var f=i.getBoundingClientRect();a+=d.length;var B=f.x>h.x||f.y>h.y;return h=f,g===0?!0:B});return r.body.removeChild(s),p},$k=function(){return typeof new Image().crossOrigin<"u"},mk=function(){return typeof new XMLHttpRequest().responseType=="string"},Bk=function(r){var s=new Image,i=r.createElement("canvas"),n=i.getContext("2d");if(!n)return!1;s.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(s,0,0),i.toDataURL()}catch{return!1}return!0},M_=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},wk=function(r){var s=r.createElement("canvas"),i=100;s.width=i,s.height=i;var n=s.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,i,i);var c=new Image,a=s.toDataURL();c.src=a;var h=Mg(i,i,0,0,c);return n.fillStyle="red",n.fillRect(0,0,i,i),N_(h).then(function(p){n.drawImage(p,0,0);var d=n.getImageData(0,0,i,i).data;n.fillStyle="red",n.fillRect(0,0,i,i);var g=r.createElement("div");return g.style.backgroundImage="url("+a+")",g.style.height=i+"px",M_(d)?N_(Mg(i,i,0,0,g)):Promise.reject(!1)}).then(function(p){return n.drawImage(p,0,0),M_(n.getImageData(0,0,i,i).data)}).catch(function(){return!1})},Mg=function(r,s,i,n,c){var a="http://www.w3.org/2000/svg",h=document.createElementNS(a,"svg"),p=document.createElementNS(a,"foreignObject");return h.setAttributeNS(null,"width",r.toString()),h.setAttributeNS(null,"height",s.toString()),p.setAttributeNS(null,"width","100%"),p.setAttributeNS(null,"height","100%"),p.setAttributeNS(null,"x",i.toString()),p.setAttributeNS(null,"y",n.toString()),p.setAttributeNS(null,"externalResourcesRequired","true"),h.appendChild(p),p.appendChild(c),h},N_=function(r){return new Promise(function(s,i){var n=new Image;n.onload=function(){return s(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},Ct={get SUPPORT_RANGE_BOUNDS(){var r=gk(document);return Object.defineProperty(Ct,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=Ct.SUPPORT_RANGE_BOUNDS&&fk(document);return Object.defineProperty(Ct,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=Bk(document);return Object.defineProperty(Ct,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?wk(document):Promise.resolve(!1);return Object.defineProperty(Ct,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=$k();return Object.defineProperty(Ct,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=mk();return Object.defineProperty(Ct,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ct,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ct,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},xn=function(){function r(s,i){this.text=s,this.bounds=i}return r}(),_k=function(r,s,i,n){var c=vk(s,i),a=[],h=0;return c.forEach(function(p){if(i.textDecorationLine.length||p.trim().length>0)if(Ct.SUPPORT_RANGE_BOUNDS){var d=H_(n,h,p.length).getClientRects();if(d.length>1){var g=rf(p),f=0;g.forEach(function(w){a.push(new xn(w,vr.fromDOMRectList(r,H_(n,f+h,w.length).getClientRects()))),f+=w.length})}else a.push(new xn(p,vr.fromDOMRectList(r,d)))}else{var B=n.splitText(p.length);a.push(new xn(p,Ck(r,n))),n=B}else Ct.SUPPORT_RANGE_BOUNDS||(n=n.splitText(p.length));h+=p.length}),a},Ck=function(r,s){var i=s.ownerDocument;if(i){var n=i.createElement("html2canvaswrapper");n.appendChild(s.cloneNode(!0));var c=s.parentNode;if(c){c.replaceChild(n,s);var a=za(r,n);return n.firstChild&&c.replaceChild(n.firstChild,n),a}}return vr.EMPTY},H_=function(r,s,i){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var c=n.createRange();return c.setStart(r,s),c.setEnd(r,s+i),c},rf=function(r){if(Ct.SUPPORT_NATIVE_TEXT_SEGMENTATION){var s=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(s.segment(r)).map(function(i){return i.segment})}return pk(r)},bk=function(r,s){if(Ct.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(r)).map(function(n){return n.segment})}return yk(r,s)},vk=function(r,s){return s.letterSpacing!==0?rf(r):bk(r,s)},Ek=[32,160,4961,65792,65793,4153,4241],yk=function(r,s){for(var i=ZE(r,{lineBreak:s.lineBreak,wordBreak:s.overflowWrap==="break-word"?"break-word":s.wordBreak}),n=[],c,a=function(){if(c.value){var h=c.value.slice(),p=Xa(h),d="";p.forEach(function(g){Ek.indexOf(g)===-1?d+=Ze(g):(d.length&&n.push(d),n.push(Ze(g)),d="")}),d.length&&n.push(d)}};!(c=i.next()).done;)a();return n},Ik=function(){function r(s,i,n){this.text=Tk(i.data,n.textTransform),this.textBounds=_k(s,this.text,n,i)}return r}(),Tk=function(r,s){switch(s){case 1:return r.toLowerCase();case 3:return r.replace(kk,Sk);case 2:return r.toUpperCase();default:return r}},kk=/(^|\s|:|-|\(|\))([a-z])/g,Sk=function(r,s,i){return r.length>0?s+i.toUpperCase():r},lb=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this;return c.src=n.currentSrc||n.src,c.intrinsicWidth=n.naturalWidth,c.intrinsicHeight=n.naturalHeight,c.context.cache.addImage(c.src),c}return s}(JA),cb=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this;return c.canvas=n,c.intrinsicWidth=n.width,c.intrinsicHeight=n.height,c}return s}(JA),ab=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this,a=new XMLSerializer,h=za(i,n);return n.setAttribute("width",h.width+"px"),n.setAttribute("height",h.height+"px"),c.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),c.intrinsicWidth=n.width.baseVal.value,c.intrinsicHeight=n.height.baseVal.value,c.context.cache.addImage(c.svg),c}return s}(JA),ub=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this;return c.value=n.value,c}return s}(JA),Ng=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this;return c.start=n.start,c.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,c}return s}(JA),Fk=[{type:15,flags:0,unit:"px",number:3}],Uk=[{type:16,flags:0,number:50}],Rk=function(r){return r.width>r.height?new vr(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new vr(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},Dk=function(r){var s=r.type===xk?new Array(r.value.length+1).join(""):r.value;return s.length===0?r.placeholder||"":s},Ia="checkbox",Ta="radio",xk="password",P_=707406591,sf=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this;switch(c.type=n.type.toLowerCase(),c.checked=n.checked,c.value=Dk(n),(c.type===Ia||c.type===Ta)&&(c.styles.backgroundColor=3739148031,c.styles.borderTopColor=c.styles.borderRightColor=c.styles.borderBottomColor=c.styles.borderLeftColor=2779096575,c.styles.borderTopWidth=c.styles.borderRightWidth=c.styles.borderBottomWidth=c.styles.borderLeftWidth=1,c.styles.borderTopStyle=c.styles.borderRightStyle=c.styles.borderBottomStyle=c.styles.borderLeftStyle=1,c.styles.backgroundClip=[0],c.styles.backgroundOrigin=[0],c.bounds=Rk(c.bounds)),c.type){case Ia:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=Fk;break;case Ta:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=Uk;break}return c}return s}(JA),hb=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this,a=n.options[n.selectedIndex||0];return c.value=a&&a.text||"",c}return s}(JA),db=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this;return c.value=n.value,c}return s}(JA),pb=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this;c.src=n.src,c.width=parseInt(n.width,10)||0,c.height=parseInt(n.height,10)||0,c.backgroundColor=c.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){c.tree=fb(i,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?Rn(i,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Cr.TRANSPARENT,h=n.contentWindow.document.body?Rn(i,getComputedStyle(n.contentWindow.document.body).backgroundColor):Cr.TRANSPARENT;c.backgroundColor=ei(a)?ei(h)?c.styles.backgroundColor:h:a}}catch{}return c}return s}(JA),Ok=["OL","UL","MENU"],Ba=function(r,s,i,n){for(var c=s.firstChild,a=void 0;c;c=a)if(a=c.nextSibling,$b(c)&&c.data.trim().length>0)i.textNodes.push(new Ik(r,c,i.styles));else if(Ao(c))if(_b(c)&&c.assignedNodes)c.assignedNodes().forEach(function(p){return Ba(r,p,i,n)});else{var h=gb(r,c);h.styles.isVisible()&&(Lk(c,h,n)?h.flags|=4:Qk(h.styles)&&(h.flags|=2),Ok.indexOf(c.tagName)!==-1&&(h.flags|=8),i.elements.push(h),c.slot,c.shadowRoot?Ba(r,c.shadowRoot,h,n):!ka(c)&&!mb(c)&&!Sa(c)&&Ba(r,c,h,n))}},gb=function(r,s){return Pg(s)?new lb(r,s):Bb(s)?new cb(r,s):mb(s)?new ab(r,s):Mk(s)?new ub(r,s):Nk(s)?new Ng(r,s):Hk(s)?new sf(r,s):Sa(s)?new hb(r,s):ka(s)?new db(r,s):wb(s)?new pb(r,s):new JA(r,s)},fb=function(r,s){var i=gb(r,s);return i.flags|=4,Ba(r,s,i,i),i},Lk=function(r,s,i){return s.styles.isPositionedWithZIndex()||s.styles.opacity<1||s.styles.isTransformed()||of(r)&&i.styles.isTransparent()},Qk=function(r){return r.isPositioned()||r.isFloating()},$b=function(r){return r.nodeType===Node.TEXT_NODE},Ao=function(r){return r.nodeType===Node.ELEMENT_NODE},Hg=function(r){return Ao(r)&&typeof r.style<"u"&&!wa(r)},wa=function(r){return typeof r.className=="object"},Mk=function(r){return r.tagName==="LI"},Nk=function(r){return r.tagName==="OL"},Hk=function(r){return r.tagName==="INPUT"},Pk=function(r){return r.tagName==="HTML"},mb=function(r){return r.tagName==="svg"},of=function(r){return r.tagName==="BODY"},Bb=function(r){return r.tagName==="CANVAS"},G_=function(r){return r.tagName==="VIDEO"},Pg=function(r){return r.tagName==="IMG"},wb=function(r){return r.tagName==="IFRAME"},V_=function(r){return r.tagName==="STYLE"},Gk=function(r){return r.tagName==="SCRIPT"},ka=function(r){return r.tagName==="TEXTAREA"},Sa=function(r){return r.tagName==="SELECT"},_b=function(r){return r.tagName==="SLOT"},K_=function(r){return r.tagName.indexOf("-")>0},Vk=function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(s){var i=this.counters[s];return i&&i.length?i[i.length-1]:1},r.prototype.getCounterValues=function(s){var i=this.counters[s];return i||[]},r.prototype.pop=function(s){var i=this;s.forEach(function(n){return i.counters[n].pop()})},r.prototype.parse=function(s){var i=this,n=s.counterIncrement,c=s.counterReset,a=!0;n!==null&&n.forEach(function(p){var d=i.counters[p.counter];d&&p.increment!==0&&(a=!1,d.length||d.push(1),d[Math.max(0,d.length-1)]+=p.increment)});var h=[];return a&&c.forEach(function(p){var d=i.counters[p.counter];h.push(p.counter),d||(d=i.counters[p.counter]=[]),d.push(p.reset)}),h},r}(),W_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},z_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Kk={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Wk={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ys=function(r,s,i,n,c,a){return r<s||r>i?Kn(r,c,a.length>0):n.integers.reduce(function(h,p,d){for(;r>=p;)r-=p,h+=n.values[d];return h},"")+a},Cb=function(r,s,i,n){var c="";do i||r--,c=n(r)+c,r/=s;while(r*s>=s);return c},qe=function(r,s,i,n,c){var a=i-s+1;return(r<0?"-":"")+(Cb(Math.abs(r),a,n,function(h){return Ze(Math.floor(h%a)+s)})+c)},Pi=function(r,s,i){i===void 0&&(i=". ");var n=s.length;return Cb(Math.abs(r),n,!1,function(c){return s[Math.floor(c%n)]})+i},Zs=1,Vr=2,Kr=4,Fn=8,wr=function(r,s,i,n,c,a){if(r<-9999||r>9999)return Kn(r,4,c.length>0);var h=Math.abs(r),p=c;if(h===0)return s[0]+p;for(var d=0;h>0&&d<=4;d++){var g=h%10;g===0&&dt(a,Zs)&&p!==""?p=s[g]+p:g>1||g===1&&d===0||g===1&&d===1&&dt(a,Vr)||g===1&&d===1&&dt(a,Kr)&&r>100||g===1&&d>1&&dt(a,Fn)?p=s[g]+(d>0?i[d-1]:"")+p:g===1&&d>0&&(p=i[d-1]+p),h=Math.floor(h/10)}return(r<0?n:"")+p},X_="",Y_="",J_="",ag="",Kn=function(r,s,i){var n=i?". ":"",c=i?"":"",a=i?", ":"",h=i?" ":"";switch(s){case 0:return""+h;case 1:return""+h;case 2:return""+h;case 5:var p=qe(r,48,57,!0,n);return p.length<4?"0"+p:p;case 4:return Pi(r,"",c);case 6:return Ys(r,1,3999,W_,3,n).toLowerCase();case 7:return Ys(r,1,3999,W_,3,n);case 8:return qe(r,945,969,!1,n);case 9:return qe(r,97,122,!1,n);case 10:return qe(r,65,90,!1,n);case 11:return qe(r,1632,1641,!0,n);case 12:case 49:return Ys(r,1,9999,z_,3,n);case 35:return Ys(r,1,9999,z_,3,n).toLowerCase();case 13:return qe(r,2534,2543,!0,n);case 14:case 30:return qe(r,6112,6121,!0,n);case 15:return Pi(r,"",c);case 16:return Pi(r,"",c);case 17:case 48:return wr(r,"",X_,"",c,Vr|Kr|Fn);case 47:return wr(r,"",Y_,"",c,Zs|Vr|Kr|Fn);case 42:return wr(r,"",X_,"",c,Vr|Kr|Fn);case 41:return wr(r,"",Y_,"",c,Zs|Vr|Kr|Fn);case 26:return wr(r,"","",J_,c,0);case 25:return wr(r,"","",J_,c,Zs|Vr|Kr);case 31:return wr(r,"","",ag,a,Zs|Vr|Kr);case 33:return wr(r,"","",ag,a,0);case 32:return wr(r,"","",ag,a,Zs|Vr|Kr);case 18:return qe(r,2406,2415,!0,n);case 20:return Ys(r,1,19999,Wk,3,n);case 21:return qe(r,2790,2799,!0,n);case 22:return qe(r,2662,2671,!0,n);case 22:return Ys(r,1,10999,Kk,3,n);case 23:return Pi(r,"");case 24:return Pi(r,"");case 27:return qe(r,3302,3311,!0,n);case 28:return Pi(r,"",c);case 29:return Pi(r,"",c);case 34:return qe(r,3792,3801,!0,n);case 37:return qe(r,6160,6169,!0,n);case 38:return qe(r,4160,4169,!0,n);case 39:return qe(r,2918,2927,!0,n);case 40:return qe(r,1776,1785,!0,n);case 43:return qe(r,3046,3055,!0,n);case 44:return qe(r,3174,3183,!0,n);case 45:return qe(r,3664,3673,!0,n);case 46:return qe(r,3872,3881,!0,n);case 3:default:return qe(r,48,57,!0,n)}},bb="data-html2canvas-ignore",j_=function(){function r(s,i,n){if(this.context=s,this.options=n,this.scrolledElements=[],this.referenceElement=i,this.counters=new Vk,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(s,i){var n=this,c=zk(s,i);if(!c.contentWindow)return Promise.reject("Unable to find iframe window");var a=s.defaultView.pageXOffset,h=s.defaultView.pageYOffset,p=c.contentWindow,d=p.document,g=Jk(c).then(function(){return xt(n,void 0,void 0,function(){var f,B;return yt(this,function(w){switch(w.label){case 0:return this.scrolledElements.forEach(eS),p&&(p.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(p.scrollY!==i.top||p.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(p.scrollX-i.left,p.scrollY-i.top,0,0))),f=this.options.onclone,B=this.clonedReferenceElement,typeof B>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:d.fonts&&d.fonts.ready?[4,d.fonts.ready]:[3,2];case 1:w.sent(),w.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Yk(d)]:[3,4];case 3:w.sent(),w.label=4;case 4:return typeof f=="function"?[2,Promise.resolve().then(function(){return f(d,B)}).then(function(){return c})]:[2,c]}})})});return d.open(),d.write(qk(document.doctype)+"<html></html>"),Zk(this.referenceElement.ownerDocument,a,h),d.replaceChild(d.adoptNode(this.documentElement),d.documentElement),d.close(),g},r.prototype.createElementClone=function(s){if(Qg(s,2))debugger;if(Bb(s))return this.createCanvasClone(s);if(G_(s))return this.createVideoClone(s);if(V_(s))return this.createStyleClone(s);var i=s.cloneNode(!1);return Pg(i)&&(Pg(s)&&s.currentSrc&&s.currentSrc!==s.src&&(i.src=s.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),K_(i)?this.createCustomElementClone(i):i},r.prototype.createCustomElementClone=function(s){var i=document.createElement("html2canvascustomelement");return ug(s.style,i),i},r.prototype.createStyleClone=function(s){try{var i=s.sheet;if(i&&i.cssRules){var n=[].slice.call(i.cssRules,0).reduce(function(a,h){return h&&typeof h.cssText=="string"?a+h.cssText:a},""),c=s.cloneNode(!1);return c.textContent=n,c}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return s.cloneNode(!1)},r.prototype.createCanvasClone=function(s){var i;if(this.options.inlineImages&&s.ownerDocument){var n=s.ownerDocument.createElement("img");try{return n.src=s.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",s)}}var c=s.cloneNode(!1);try{c.width=s.width,c.height=s.height;var a=s.getContext("2d"),h=c.getContext("2d");if(h)if(!this.options.allowTaint&&a)h.putImageData(a.getImageData(0,0,s.width,s.height),0,0);else{var p=(i=s.getContext("webgl2"))!==null&&i!==void 0?i:s.getContext("webgl");if(p){var d=p.getContextAttributes();(d==null?void 0:d.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",s)}h.drawImage(s,0,0)}return c}catch{this.context.logger.info("Unable to clone canvas as it is tainted",s)}return c},r.prototype.createVideoClone=function(s){var i=s.ownerDocument.createElement("canvas");i.width=s.offsetWidth,i.height=s.offsetHeight;var n=i.getContext("2d");try{return n&&(n.drawImage(s,0,0,i.width,i.height),this.options.allowTaint||n.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",s)}var c=s.ownerDocument.createElement("canvas");return c.width=s.offsetWidth,c.height=s.offsetHeight,c},r.prototype.appendChildNode=function(s,i,n){(!Ao(i)||!Gk(i)&&!i.hasAttribute(bb)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!Ao(i)||!V_(i))&&s.appendChild(this.cloneNode(i,n))},r.prototype.cloneChildNodes=function(s,i,n){for(var c=this,a=s.shadowRoot?s.shadowRoot.firstChild:s.firstChild;a;a=a.nextSibling)if(Ao(a)&&_b(a)&&typeof a.assignedNodes=="function"){var h=a.assignedNodes();h.length&&h.forEach(function(p){return c.appendChildNode(i,p,n)})}else this.appendChildNode(i,a,n)},r.prototype.cloneNode=function(s,i){if($b(s))return document.createTextNode(s.data);if(!s.ownerDocument)return s.cloneNode(!1);var n=s.ownerDocument.defaultView;if(n&&Ao(s)&&(Hg(s)||wa(s))){var c=this.createElementClone(s);c.style.transitionProperty="none";var a=n.getComputedStyle(s),h=n.getComputedStyle(s,":before"),p=n.getComputedStyle(s,":after");this.referenceElement===s&&Hg(c)&&(this.clonedReferenceElement=c),of(c)&&rS(c);var d=this.counters.parse(new T_(this.context,a)),g=this.resolvePseudoContent(s,c,h,On.BEFORE);K_(s)&&(i=!0),G_(s)||this.cloneChildNodes(s,c,i),g&&c.insertBefore(g,c.firstChild);var f=this.resolvePseudoContent(s,c,p,On.AFTER);return f&&c.appendChild(f),this.counters.pop(d),(a&&(this.options.copyStyles||wa(s))&&!wb(s)||i)&&ug(a,c),(s.scrollTop!==0||s.scrollLeft!==0)&&this.scrolledElements.push([c,s.scrollLeft,s.scrollTop]),(ka(s)||Sa(s))&&(ka(c)||Sa(c))&&(c.value=s.value),c}return s.cloneNode(!1)},r.prototype.resolvePseudoContent=function(s,i,n,c){var a=this;if(n){var h=n.content,p=i.ownerDocument;if(!(!p||!h||h==="none"||h==="-moz-alt-content"||n.display==="none")){this.counters.parse(new T_(this.context,n));var d=new MT(this.context,n),g=p.createElement("html2canvaspseudoelement");ug(n,g),d.content.forEach(function(B){if(B.type===0)g.appendChild(p.createTextNode(B.value));else if(B.type===22){var w=p.createElement("img");w.src=B.value,w.style.opacity="1",g.appendChild(w)}else if(B.type===18){if(B.name==="attr"){var C=B.values.filter(Re);C.length&&g.appendChild(p.createTextNode(s.getAttribute(C[0].value)||""))}else if(B.name==="counter"){var v=B.values.filter(ao),_=v[0],I=v[1];if(_&&Re(_)){var D=a.counters.getCounterValue(_.value),F=I&&Re(I)?Lg.parse(a.context,I.value):3;g.appendChild(p.createTextNode(Kn(D,F,!1)))}}else if(B.name==="counters"){var k=B.values.filter(ao),_=k[0],x=k[1],I=k[2];if(_&&Re(_)){var P=a.counters.getCounterValues(_.value),H=I&&Re(I)?Lg.parse(a.context,I.value):3,Z=x&&x.type===0?x.value:"",L=P.map(function(me){return Kn(me,H,!1)}).join(Z);g.appendChild(p.createTextNode(L))}}}else if(B.type===20)switch(B.value){case"open-quote":g.appendChild(p.createTextNode(I_(d.quotes,a.quoteDepth++,!0)));break;case"close-quote":g.appendChild(p.createTextNode(I_(d.quotes,--a.quoteDepth,!1)));break;default:g.appendChild(p.createTextNode(B.value))}}),g.className=Gg+" "+Vg;var f=c===On.BEFORE?" "+Gg:" "+Vg;return wa(i)?i.className.baseValue+=f:i.className+=f,g}}},r.destroy=function(s){return s.parentNode?(s.parentNode.removeChild(s),!0):!1},r}(),On;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(On||(On={}));var zk=function(r,s){var i=r.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=s.width.toString(),i.height=s.height.toString(),i.scrolling="no",i.setAttribute(bb,"true"),r.body.appendChild(i),i},Xk=function(r){return new Promise(function(s){if(r.complete){s();return}if(!r.src){s();return}r.onload=s,r.onerror=s})},Yk=function(r){return Promise.all([].slice.call(r.images,0).map(Xk))},Jk=function(r){return new Promise(function(s,i){var n=r.contentWindow;if(!n)return i("No window assigned for iframe");var c=n.document;n.onload=r.onload=function(){n.onload=r.onload=null;var a=setInterval(function(){c.body.childNodes.length>0&&c.readyState==="complete"&&(clearInterval(a),s(r))},50)}})},jk=["all","d","content"],ug=function(r,s){for(var i=r.length-1;i>=0;i--){var n=r.item(i);jk.indexOf(n)===-1&&s.style.setProperty(n,r.getPropertyValue(n))}return s},qk=function(r){var s="";return r&&(s+="<!DOCTYPE ",r.name&&(s+=r.name),r.internalSubset&&(s+=r.internalSubset),r.publicId&&(s+='"'+r.publicId+'"'),r.systemId&&(s+='"'+r.systemId+'"'),s+=">"),s},Zk=function(r,s,i){r&&r.defaultView&&(s!==r.defaultView.pageXOffset||i!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(s,i)},eS=function(r){var s=r[0],i=r[1],n=r[2];s.scrollLeft=i,s.scrollTop=n},tS=":before",AS=":after",Gg="___html2canvas___pseudoelement_before",Vg="___html2canvas___pseudoelement_after",q_=`{
    content: "" !important;
    display: none !important;
}`,rS=function(r){iS(r,"."+Gg+tS+q_+`
         .`+Vg+AS+q_)},iS=function(r,s){var i=r.ownerDocument;if(i){var n=i.createElement("style");n.textContent=s,r.appendChild(n)}},vb=function(){function r(){}return r.getOrigin=function(s){var i=r._link;return i?(i.href=s,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},r.isSameOrigin=function(s){return r.getOrigin(s)===r._origin},r.setContext=function(s){r._link=s.document.createElement("a"),r._origin=r.getOrigin(s.location.href)},r._origin="about:blank",r}(),sS=function(){function r(s,i){this.context=s,this._options=i,this._cache={}}return r.prototype.addImage=function(s){var i=Promise.resolve();return this.has(s)||(dg(s)||cS(s))&&(this._cache[s]=this.loadImage(s)).catch(function(){}),i},r.prototype.match=function(s){return this._cache[s]},r.prototype.loadImage=function(s){return xt(this,void 0,void 0,function(){var i,n,c,a,h=this;return yt(this,function(p){switch(p.label){case 0:return i=vb.isSameOrigin(s),n=!hg(s)&&this._options.useCORS===!0&&Ct.SUPPORT_CORS_IMAGES&&!i,c=!hg(s)&&!i&&!dg(s)&&typeof this._options.proxy=="string"&&Ct.SUPPORT_CORS_XHR&&!n,!i&&this._options.allowTaint===!1&&!hg(s)&&!dg(s)&&!c&&!n?[2]:(a=s,c?[4,this.proxy(a)]:[3,2]);case 1:a=p.sent(),p.label=2;case 2:return this.context.logger.debug("Added image "+s.substring(0,256)),[4,new Promise(function(d,g){var f=new Image;f.onload=function(){return d(f)},f.onerror=g,(aS(a)||n)&&(f.crossOrigin="anonymous"),f.src=a,f.complete===!0&&setTimeout(function(){return d(f)},500),h._options.imageTimeout>0&&setTimeout(function(){return g("Timed out ("+h._options.imageTimeout+"ms) loading image")},h._options.imageTimeout)})];case 3:return[2,p.sent()]}})})},r.prototype.has=function(s){return typeof this._cache[s]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(s){var i=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var c=s.substring(0,256);return new Promise(function(a,h){var p=Ct.SUPPORT_RESPONSE_TYPE?"blob":"text",d=new XMLHttpRequest;d.onload=function(){if(d.status===200)if(p==="text")a(d.response);else{var B=new FileReader;B.addEventListener("load",function(){return a(B.result)},!1),B.addEventListener("error",function(w){return h(w)},!1),B.readAsDataURL(d.response)}else h("Failed to proxy resource "+c+" with status code "+d.status)},d.onerror=h;var g=n.indexOf("?")>-1?"&":"?";if(d.open("GET",""+n+g+"url="+encodeURIComponent(s)+"&responseType="+p),p!=="text"&&d instanceof XMLHttpRequest&&(d.responseType=p),i._options.imageTimeout){var f=i._options.imageTimeout;d.timeout=f,d.ontimeout=function(){return h("Timed out ("+f+"ms) proxying "+c)}}d.send()})},r}(),oS=/^data:image\/svg\+xml/i,nS=/^data:image\/.*;base64,/i,lS=/^data:image\/.*/i,cS=function(r){return Ct.SUPPORT_SVG_DRAWING||!uS(r)},hg=function(r){return lS.test(r)},aS=function(r){return nS.test(r)},dg=function(r){return r.substr(0,4)==="blob"},uS=function(r){return r.substr(-3).toLowerCase()==="svg"||oS.test(r)},X=function(){function r(s,i){this.type=0,this.x=s,this.y=i}return r.prototype.add=function(s,i){return new r(this.x+s,this.y+i)},r}(),Js=function(r,s,i){return new X(r.x+(s.x-r.x)*i,r.y+(s.y-r.y)*i)},la=function(){function r(s,i,n,c){this.type=1,this.start=s,this.startControl=i,this.endControl=n,this.end=c}return r.prototype.subdivide=function(s,i){var n=Js(this.start,this.startControl,s),c=Js(this.startControl,this.endControl,s),a=Js(this.endControl,this.end,s),h=Js(n,c,s),p=Js(c,a,s),d=Js(h,p,s);return i?new r(this.start,n,h,d):new r(d,p,a,this.end)},r.prototype.add=function(s,i){return new r(this.start.add(s,i),this.startControl.add(s,i),this.endControl.add(s,i),this.end.add(s,i))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r}(),aA=function(r){return r.type===1},hS=function(){function r(s){var i=s.styles,n=s.bounds,c=kn(i.borderTopLeftRadius,n.width,n.height),a=c[0],h=c[1],p=kn(i.borderTopRightRadius,n.width,n.height),d=p[0],g=p[1],f=kn(i.borderBottomRightRadius,n.width,n.height),B=f[0],w=f[1],C=kn(i.borderBottomLeftRadius,n.width,n.height),v=C[0],_=C[1],I=[];I.push((a+d)/n.width),I.push((v+B)/n.width),I.push((h+_)/n.height),I.push((g+w)/n.height);var D=Math.max.apply(Math,I);D>1&&(a/=D,h/=D,d/=D,g/=D,B/=D,w/=D,v/=D,_/=D);var F=n.width-d,k=n.height-w,x=n.width-B,P=n.height-_,H=i.borderTopWidth,Z=i.borderRightWidth,L=i.borderBottomWidth,G=i.borderLeftWidth,ie=Me(i.paddingTop,s.bounds.width),me=Me(i.paddingRight,s.bounds.width),te=Me(i.paddingBottom,s.bounds.width),ae=Me(i.paddingLeft,s.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||h>0?Ge(n.left+G/3,n.top+H/3,a-G/3,h-H/3,Ie.TOP_LEFT):new X(n.left+G/3,n.top+H/3),this.topRightBorderDoubleOuterBox=a>0||h>0?Ge(n.left+F,n.top+H/3,d-Z/3,g-H/3,Ie.TOP_RIGHT):new X(n.left+n.width-Z/3,n.top+H/3),this.bottomRightBorderDoubleOuterBox=B>0||w>0?Ge(n.left+x,n.top+k,B-Z/3,w-L/3,Ie.BOTTOM_RIGHT):new X(n.left+n.width-Z/3,n.top+n.height-L/3),this.bottomLeftBorderDoubleOuterBox=v>0||_>0?Ge(n.left+G/3,n.top+P,v-G/3,_-L/3,Ie.BOTTOM_LEFT):new X(n.left+G/3,n.top+n.height-L/3),this.topLeftBorderDoubleInnerBox=a>0||h>0?Ge(n.left+G*2/3,n.top+H*2/3,a-G*2/3,h-H*2/3,Ie.TOP_LEFT):new X(n.left+G*2/3,n.top+H*2/3),this.topRightBorderDoubleInnerBox=a>0||h>0?Ge(n.left+F,n.top+H*2/3,d-Z*2/3,g-H*2/3,Ie.TOP_RIGHT):new X(n.left+n.width-Z*2/3,n.top+H*2/3),this.bottomRightBorderDoubleInnerBox=B>0||w>0?Ge(n.left+x,n.top+k,B-Z*2/3,w-L*2/3,Ie.BOTTOM_RIGHT):new X(n.left+n.width-Z*2/3,n.top+n.height-L*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||_>0?Ge(n.left+G*2/3,n.top+P,v-G*2/3,_-L*2/3,Ie.BOTTOM_LEFT):new X(n.left+G*2/3,n.top+n.height-L*2/3),this.topLeftBorderStroke=a>0||h>0?Ge(n.left+G/2,n.top+H/2,a-G/2,h-H/2,Ie.TOP_LEFT):new X(n.left+G/2,n.top+H/2),this.topRightBorderStroke=a>0||h>0?Ge(n.left+F,n.top+H/2,d-Z/2,g-H/2,Ie.TOP_RIGHT):new X(n.left+n.width-Z/2,n.top+H/2),this.bottomRightBorderStroke=B>0||w>0?Ge(n.left+x,n.top+k,B-Z/2,w-L/2,Ie.BOTTOM_RIGHT):new X(n.left+n.width-Z/2,n.top+n.height-L/2),this.bottomLeftBorderStroke=v>0||_>0?Ge(n.left+G/2,n.top+P,v-G/2,_-L/2,Ie.BOTTOM_LEFT):new X(n.left+G/2,n.top+n.height-L/2),this.topLeftBorderBox=a>0||h>0?Ge(n.left,n.top,a,h,Ie.TOP_LEFT):new X(n.left,n.top),this.topRightBorderBox=d>0||g>0?Ge(n.left+F,n.top,d,g,Ie.TOP_RIGHT):new X(n.left+n.width,n.top),this.bottomRightBorderBox=B>0||w>0?Ge(n.left+x,n.top+k,B,w,Ie.BOTTOM_RIGHT):new X(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||_>0?Ge(n.left,n.top+P,v,_,Ie.BOTTOM_LEFT):new X(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||h>0?Ge(n.left+G,n.top+H,Math.max(0,a-G),Math.max(0,h-H),Ie.TOP_LEFT):new X(n.left+G,n.top+H),this.topRightPaddingBox=d>0||g>0?Ge(n.left+Math.min(F,n.width-Z),n.top+H,F>n.width+Z?0:Math.max(0,d-Z),Math.max(0,g-H),Ie.TOP_RIGHT):new X(n.left+n.width-Z,n.top+H),this.bottomRightPaddingBox=B>0||w>0?Ge(n.left+Math.min(x,n.width-G),n.top+Math.min(k,n.height-L),Math.max(0,B-Z),Math.max(0,w-L),Ie.BOTTOM_RIGHT):new X(n.left+n.width-Z,n.top+n.height-L),this.bottomLeftPaddingBox=v>0||_>0?Ge(n.left+G,n.top+Math.min(P,n.height-L),Math.max(0,v-G),Math.max(0,_-L),Ie.BOTTOM_LEFT):new X(n.left+G,n.top+n.height-L),this.topLeftContentBox=a>0||h>0?Ge(n.left+G+ae,n.top+H+ie,Math.max(0,a-(G+ae)),Math.max(0,h-(H+ie)),Ie.TOP_LEFT):new X(n.left+G+ae,n.top+H+ie),this.topRightContentBox=d>0||g>0?Ge(n.left+Math.min(F,n.width+G+ae),n.top+H+ie,F>n.width+G+ae?0:d-G+ae,g-(H+ie),Ie.TOP_RIGHT):new X(n.left+n.width-(Z+me),n.top+H+ie),this.bottomRightContentBox=B>0||w>0?Ge(n.left+Math.min(x,n.width-(G+ae)),n.top+Math.min(k,n.height+H+ie),Math.max(0,B-(Z+me)),w-(L+te),Ie.BOTTOM_RIGHT):new X(n.left+n.width-(Z+me),n.top+n.height-(L+te)),this.bottomLeftContentBox=v>0||_>0?Ge(n.left+G+ae,n.top+P,Math.max(0,v-(G+ae)),_-(L+te),Ie.BOTTOM_LEFT):new X(n.left+G+ae,n.top+n.height-(L+te))}return r}(),Ie;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ie||(Ie={}));var Ge=function(r,s,i,n,c){var a=4*((Math.sqrt(2)-1)/3),h=i*a,p=n*a,d=r+i,g=s+n;switch(c){case Ie.TOP_LEFT:return new la(new X(r,g),new X(r,g-p),new X(d-h,s),new X(d,s));case Ie.TOP_RIGHT:return new la(new X(r,s),new X(r+h,s),new X(d,g-p),new X(d,g));case Ie.BOTTOM_RIGHT:return new la(new X(d,s),new X(d,s+p),new X(r+h,g),new X(r,g));case Ie.BOTTOM_LEFT:default:return new la(new X(d,g),new X(d-h,g),new X(r,s+p),new X(r,s))}},Fa=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},dS=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},Ua=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},pS=function(){function r(s,i,n){this.offsetX=s,this.offsetY=i,this.matrix=n,this.type=0,this.target=6}return r}(),ca=function(){function r(s,i){this.path=s,this.target=i,this.type=1}return r}(),gS=function(){function r(s){this.opacity=s,this.type=2,this.target=6}return r}(),fS=function(r){return r.type===0},Eb=function(r){return r.type===1},$S=function(r){return r.type===2},Z_=function(r,s){return r.length===s.length?r.some(function(i,n){return i===s[n]}):!1},mS=function(r,s,i,n,c){return r.map(function(a,h){switch(h){case 0:return a.add(s,i);case 1:return a.add(s+n,i);case 2:return a.add(s+n,i+c);case 3:return a.add(s,i+c)}return a})},yb=function(){function r(s){this.element=s,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r}(),Ib=function(){function r(s,i){if(this.container=s,this.parent=i,this.effects=[],this.curves=new hS(this.container),this.container.styles.opacity<1&&this.effects.push(new gS(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,c=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new pS(n,c,a))}if(this.container.styles.overflowX!==0){var h=Fa(this.curves),p=Ua(this.curves);Z_(h,p)?this.effects.push(new ca(h,6)):(this.effects.push(new ca(h,2)),this.effects.push(new ca(p,4)))}}return r.prototype.getEffects=function(s){for(var i=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,c=this.effects.slice(0);n;){var a=n.effects.filter(function(d){return!Eb(d)});if(i||n.container.styles.position!==0||!n.parent){if(c.unshift.apply(c,a),i=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var h=Fa(n.curves),p=Ua(n.curves);Z_(h,p)||c.unshift(new ca(p,6))}}else c.unshift.apply(c,a);n=n.parent}return c.filter(function(d){return dt(d.target,s)})},r}(),Kg=function(r,s,i,n){r.container.elements.forEach(function(c){var a=dt(c.flags,4),h=dt(c.flags,2),p=new Ib(c,r);dt(c.styles.display,2048)&&n.push(p);var d=dt(c.flags,8)?[]:n;if(a||h){var g=a||c.styles.isPositioned()?i:s,f=new yb(p);if(c.styles.isPositioned()||c.styles.opacity<1||c.styles.isTransformed()){var B=c.styles.zIndex.order;if(B<0){var w=0;g.negativeZIndex.some(function(v,_){return B>v.element.container.styles.zIndex.order?(w=_,!1):w>0}),g.negativeZIndex.splice(w,0,f)}else if(B>0){var C=0;g.positiveZIndex.some(function(v,_){return B>=v.element.container.styles.zIndex.order?(C=_+1,!1):C>0}),g.positiveZIndex.splice(C,0,f)}else g.zeroOrAutoZIndexOrTransformedOrOpacity.push(f)}else c.styles.isFloating()?g.nonPositionedFloats.push(f):g.nonPositionedInlineLevel.push(f);Kg(p,f,a?f:i,d)}else c.styles.isInlineLevel()?s.inlineLevel.push(p):s.nonInlineLevel.push(p),Kg(p,s,i,d);dt(c.flags,8)&&Tb(c,d)})},Tb=function(r,s){for(var i=r instanceof Ng?r.start:1,n=r instanceof Ng?r.reversed:!1,c=0;c<s.length;c++){var a=s[c];a.container instanceof ub&&typeof a.container.value=="number"&&a.container.value!==0&&(i=a.container.value),a.listValue=Kn(i,a.container.styles.listStyleType,!0),i+=n?-1:1}},BS=function(r){var s=new Ib(r,null),i=new yb(s),n=[];return Kg(s,i,i,n),Tb(s.container,n),i},eC=function(r,s){switch(s){case 0:return dA(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return dA(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return dA(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return dA(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},wS=function(r,s){switch(s){case 0:return dA(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return dA(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return dA(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return dA(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},_S=function(r,s){switch(s){case 0:return dA(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return dA(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return dA(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return dA(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},CS=function(r,s){switch(s){case 0:return aa(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return aa(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return aa(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return aa(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},aa=function(r,s){var i=[];return aA(r)?i.push(r.subdivide(.5,!1)):i.push(r),aA(s)?i.push(s.subdivide(.5,!0)):i.push(s),i},dA=function(r,s,i,n){var c=[];return aA(r)?c.push(r.subdivide(.5,!1)):c.push(r),aA(i)?c.push(i.subdivide(.5,!0)):c.push(i),aA(n)?c.push(n.subdivide(.5,!0).reverse()):c.push(n),aA(s)?c.push(s.subdivide(.5,!1).reverse()):c.push(s),c},kb=function(r){var s=r.bounds,i=r.styles;return s.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},Ra=function(r){var s=r.styles,i=r.bounds,n=Me(s.paddingLeft,i.width),c=Me(s.paddingRight,i.width),a=Me(s.paddingTop,i.width),h=Me(s.paddingBottom,i.width);return i.add(n+s.borderLeftWidth,a+s.borderTopWidth,-(s.borderRightWidth+s.borderLeftWidth+n+c),-(s.borderTopWidth+s.borderBottomWidth+a+h))},bS=function(r,s){return r===0?s.bounds:r===2?Ra(s):kb(s)},vS=function(r,s){return r===0?s.bounds:r===2?Ra(s):kb(s)},pg=function(r,s,i){var n=bS(eo(r.styles.backgroundOrigin,s),r),c=vS(eo(r.styles.backgroundClip,s),r),a=ES(eo(r.styles.backgroundSize,s),i,n),h=a[0],p=a[1],d=kn(eo(r.styles.backgroundPosition,s),n.width-h,n.height-p),g=yS(eo(r.styles.backgroundRepeat,s),d,a,n,c),f=Math.round(n.left+d[0]),B=Math.round(n.top+d[1]);return[g,f,B,h,p]},js=function(r){return Re(r)&&r.value===no.AUTO},ua=function(r){return typeof r=="number"},ES=function(r,s,i){var n=s[0],c=s[1],a=s[2],h=r[0],p=r[1];if(!h)return[0,0];if(ot(h)&&p&&ot(p))return[Me(h,i.width),Me(p,i.height)];var d=ua(a);if(Re(h)&&(h.value===no.CONTAIN||h.value===no.COVER)){if(ua(a)){var g=i.width/i.height;return g<a!=(h.value===no.COVER)?[i.width,i.width/a]:[i.height*a,i.height]}return[i.width,i.height]}var f=ua(n),B=ua(c),w=f||B;if(js(h)&&(!p||js(p))){if(f&&B)return[n,c];if(!d&&!w)return[i.width,i.height];if(w&&d){var C=f?n:c*a,v=B?c:n/a;return[C,v]}var _=f?n:i.width,I=B?c:i.height;return[_,I]}if(d){var D=0,F=0;return ot(h)?D=Me(h,i.width):ot(p)&&(F=Me(p,i.height)),js(h)?D=F*a:(!p||js(p))&&(F=D/a),[D,F]}var k=null,x=null;if(ot(h)?k=Me(h,i.width):p&&ot(p)&&(x=Me(p,i.height)),k!==null&&(!p||js(p))&&(x=f&&B?k/n*c:i.height),x!==null&&js(h)&&(k=f&&B?x/c*n:i.width),k!==null&&x!==null)return[k,x];throw new Error("Unable to calculate background-size for element")},eo=function(r,s){var i=r[s];return typeof i>"u"?r[0]:i},yS=function(r,s,i,n,c){var a=s[0],h=s[1],p=i[0],d=i[1];switch(r){case 2:return[new X(Math.round(n.left),Math.round(n.top+h)),new X(Math.round(n.left+n.width),Math.round(n.top+h)),new X(Math.round(n.left+n.width),Math.round(d+n.top+h)),new X(Math.round(n.left),Math.round(d+n.top+h))];case 3:return[new X(Math.round(n.left+a),Math.round(n.top)),new X(Math.round(n.left+a+p),Math.round(n.top)),new X(Math.round(n.left+a+p),Math.round(n.height+n.top)),new X(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new X(Math.round(n.left+a),Math.round(n.top+h)),new X(Math.round(n.left+a+p),Math.round(n.top+h)),new X(Math.round(n.left+a+p),Math.round(n.top+h+d)),new X(Math.round(n.left+a),Math.round(n.top+h+d))];default:return[new X(Math.round(c.left),Math.round(c.top)),new X(Math.round(c.left+c.width),Math.round(c.top)),new X(Math.round(c.left+c.width),Math.round(c.height+c.top)),new X(Math.round(c.left),Math.round(c.height+c.top))]}},IS="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",tC="Hidden Text",TS=function(){function r(s){this._data={},this._document=s}return r.prototype.parseMetrics=function(s,i){var n=this._document.createElement("div"),c=this._document.createElement("img"),a=this._document.createElement("span"),h=this._document.body;n.style.visibility="hidden",n.style.fontFamily=s,n.style.fontSize=i,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",h.appendChild(n),c.src=IS,c.width=1,c.height=1,c.style.margin="0",c.style.padding="0",c.style.verticalAlign="baseline",a.style.fontFamily=s,a.style.fontSize=i,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(tC)),n.appendChild(a),n.appendChild(c);var p=c.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(tC)),n.style.lineHeight="normal",c.style.verticalAlign="super";var d=c.offsetTop-n.offsetTop+2;return h.removeChild(n),{baseline:p,middle:d}},r.prototype.getMetrics=function(s,i){var n=s+" "+i;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(s,i)),this._data[n]},r}(),Sb=function(){function r(s,i){this.context=s,this.options=i}return r}(),kS=1e4,SS=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this;return c._activeEffects=[],c.canvas=n.canvas?n.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),n.canvas||(c.canvas.width=Math.floor(n.width*n.scale),c.canvas.height=Math.floor(n.height*n.scale),c.canvas.style.width=n.width+"px",c.canvas.style.height=n.height+"px"),c.fontMetrics=new TS(document),c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-n.x,-n.y),c.ctx.textBaseline="bottom",c._activeEffects=[],c.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),c}return s.prototype.applyEffects=function(i){for(var n=this;this._activeEffects.length;)this.popEffect();i.forEach(function(c){return n.applyEffect(c)})},s.prototype.applyEffect=function(i){this.ctx.save(),$S(i)&&(this.ctx.globalAlpha=i.opacity),fS(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),Eb(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},s.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},s.prototype.renderStack=function(i){return xt(this,void 0,void 0,function(){var n;return yt(this,function(c){switch(c.label){case 0:return n=i.element.container.styles,n.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},s.prototype.renderNode=function(i){return xt(this,void 0,void 0,function(){return yt(this,function(n){switch(n.label){case 0:if(dt(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(i)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},s.prototype.renderTextWithLetterSpacing=function(i,n,c){var a=this;if(n===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+c);else{var h=rf(i.text);h.reduce(function(p,d){return a.ctx.fillText(d,p,i.bounds.top+c),p+a.ctx.measureText(d).width},i.bounds.left)}},s.prototype.createFontStyle=function(i){var n=i.fontVariant.filter(function(h){return h==="normal"||h==="small-caps"}).join(""),c=xS(i.fontFamily).join(", "),a=jn(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,n,i.fontWeight,a,c].join(" "),c,a]},s.prototype.renderTextNode=function(i,n){return xt(this,void 0,void 0,function(){var c,a,h,p,d,g,f,B,w=this;return yt(this,function(C){return c=this.createFontStyle(n),a=c[0],h=c[1],p=c[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",d=this.fontMetrics.getMetrics(h,p),g=d.baseline,f=d.middle,B=n.paintOrder,i.textBounds.forEach(function(v){B.forEach(function(_){switch(_){case 0:w.ctx.fillStyle=$t(n.color),w.renderTextWithLetterSpacing(v,n.letterSpacing,g);var I=n.textShadow;I.length&&v.text.trim().length&&(I.slice(0).reverse().forEach(function(D){w.ctx.shadowColor=$t(D.color),w.ctx.shadowOffsetX=D.offsetX.number*w.options.scale,w.ctx.shadowOffsetY=D.offsetY.number*w.options.scale,w.ctx.shadowBlur=D.blur.number,w.renderTextWithLetterSpacing(v,n.letterSpacing,g)}),w.ctx.shadowColor="",w.ctx.shadowOffsetX=0,w.ctx.shadowOffsetY=0,w.ctx.shadowBlur=0),n.textDecorationLine.length&&(w.ctx.fillStyle=$t(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(D){switch(D){case 1:w.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+g),v.bounds.width,1);break;case 2:w.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:w.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+f),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(w.ctx.strokeStyle=$t(n.webkitTextStrokeColor),w.ctx.lineWidth=n.webkitTextStrokeWidth,w.ctx.lineJoin=window.chrome?"miter":"round",w.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+g)),w.ctx.strokeStyle="",w.ctx.lineWidth=0,w.ctx.lineJoin="miter";break}})}),[2]})})},s.prototype.renderReplacedElement=function(i,n,c){if(c&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var a=Ra(i),h=Ua(n);this.path(h),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(c,0,0,i.intrinsicWidth,i.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},s.prototype.renderNodeContent=function(i){return xt(this,void 0,void 0,function(){var n,c,a,h,p,d,F,F,g,f,B,w,x,C,v,P,_,I,D,F,k,x,P;return yt(this,function(H){switch(H.label){case 0:this.applyEffects(i.getEffects(4)),n=i.container,c=i.curves,a=n.styles,h=0,p=n.textNodes,H.label=1;case 1:return h<p.length?(d=p[h],[4,this.renderTextNode(d,a)]):[3,4];case 2:H.sent(),H.label=3;case 3:return h++,[3,1];case 4:if(!(n instanceof lb))return[3,8];H.label=5;case 5:return H.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return F=H.sent(),this.renderReplacedElement(n,c,F),[3,8];case 7:return H.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof cb&&this.renderReplacedElement(n,c,n.canvas),!(n instanceof ab))return[3,12];H.label=9;case 9:return H.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return F=H.sent(),this.renderReplacedElement(n,c,F),[3,12];case 11:return H.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof pb&&n.tree?(g=new s(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,g.render(n.tree)]):[3,14];case 13:f=H.sent(),n.width&&n.height&&this.ctx.drawImage(f,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),H.label=14;case 14:if(n instanceof sf&&(B=Math.min(n.bounds.width,n.bounds.height),n.type===Ia?n.checked&&(this.ctx.save(),this.path([new X(n.bounds.left+B*.39363,n.bounds.top+B*.79),new X(n.bounds.left+B*.16,n.bounds.top+B*.5549),new X(n.bounds.left+B*.27347,n.bounds.top+B*.44071),new X(n.bounds.left+B*.39694,n.bounds.top+B*.5649),new X(n.bounds.left+B*.72983,n.bounds.top+B*.23),new X(n.bounds.left+B*.84,n.bounds.top+B*.34085),new X(n.bounds.left+B*.39363,n.bounds.top+B*.79)]),this.ctx.fillStyle=$t(P_),this.ctx.fill(),this.ctx.restore()):n.type===Ta&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+B/2,n.bounds.top+B/2,B/4,0,Math.PI*2,!0),this.ctx.fillStyle=$t(P_),this.ctx.fill(),this.ctx.restore())),FS(n)&&n.value.length){switch(w=this.createFontStyle(a),x=w[0],C=w[1],v=this.fontMetrics.getMetrics(x,C).baseline,this.ctx.font=x,this.ctx.fillStyle=$t(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=RS(n.styles.textAlign),P=Ra(n),_=0,n.styles.textAlign){case 1:_+=P.width/2;break;case 2:_+=P.width;break}I=P.add(_,0,0,-P.height/2+1),this.ctx.save(),this.path([new X(P.left,P.top),new X(P.left+P.width,P.top),new X(P.left+P.width,P.top+P.height),new X(P.left,P.top+P.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new xn(n.value,I),a.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!dt(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(D=n.styles.listStyleImage,D.type!==0)return[3,18];F=void 0,k=D.url,H.label=15;case 15:return H.trys.push([15,17,,18]),[4,this.context.cache.match(k)];case 16:return F=H.sent(),this.ctx.drawImage(F,n.bounds.left-(F.width+10),n.bounds.top),[3,18];case 17:return H.sent(),this.context.logger.error("Error loading list-style-image "+k),[3,18];case 18:return[3,20];case 19:i.listValue&&n.styles.listStyleType!==-1&&(x=this.createFontStyle(a)[0],this.ctx.font=x,this.ctx.fillStyle=$t(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",P=new vr(n.bounds.left,n.bounds.top+Me(n.styles.paddingTop,n.bounds.width),n.bounds.width,E_(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new xn(i.listValue,P),a.letterSpacing,E_(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),H.label=20;case 20:return[2]}})})},s.prototype.renderStackContent=function(i){return xt(this,void 0,void 0,function(){var n,c,D,a,h,D,p,d,D,g,f,D,B,w,D,C,v,D,_,I,D;return yt(this,function(F){switch(F.label){case 0:if(dt(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:F.sent(),n=0,c=i.negativeZIndex,F.label=2;case 2:return n<c.length?(D=c[n],[4,this.renderStack(D)]):[3,5];case 3:F.sent(),F.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:F.sent(),a=0,h=i.nonInlineLevel,F.label=7;case 7:return a<h.length?(D=h[a],[4,this.renderNode(D)]):[3,10];case 8:F.sent(),F.label=9;case 9:return a++,[3,7];case 10:p=0,d=i.nonPositionedFloats,F.label=11;case 11:return p<d.length?(D=d[p],[4,this.renderStack(D)]):[3,14];case 12:F.sent(),F.label=13;case 13:return p++,[3,11];case 14:g=0,f=i.nonPositionedInlineLevel,F.label=15;case 15:return g<f.length?(D=f[g],[4,this.renderStack(D)]):[3,18];case 16:F.sent(),F.label=17;case 17:return g++,[3,15];case 18:B=0,w=i.inlineLevel,F.label=19;case 19:return B<w.length?(D=w[B],[4,this.renderNode(D)]):[3,22];case 20:F.sent(),F.label=21;case 21:return B++,[3,19];case 22:C=0,v=i.zeroOrAutoZIndexOrTransformedOrOpacity,F.label=23;case 23:return C<v.length?(D=v[C],[4,this.renderStack(D)]):[3,26];case 24:F.sent(),F.label=25;case 25:return C++,[3,23];case 26:_=0,I=i.positiveZIndex,F.label=27;case 27:return _<I.length?(D=I[_],[4,this.renderStack(D)]):[3,30];case 28:F.sent(),F.label=29;case 29:return _++,[3,27];case 30:return[2]}})})},s.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},s.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},s.prototype.formatPath=function(i){var n=this;i.forEach(function(c,a){var h=aA(c)?c.start:c;a===0?n.ctx.moveTo(h.x,h.y):n.ctx.lineTo(h.x,h.y),aA(c)&&n.ctx.bezierCurveTo(c.startControl.x,c.startControl.y,c.endControl.x,c.endControl.y,c.end.x,c.end.y)})},s.prototype.renderRepeat=function(i,n,c,a){this.path(i),this.ctx.fillStyle=n,this.ctx.translate(c,a),this.ctx.fill(),this.ctx.translate(-c,-a)},s.prototype.resizeImage=function(i,n,c){var a;if(i.width===n&&i.height===c)return i;var h=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,p=h.createElement("canvas");p.width=Math.max(1,n),p.height=Math.max(1,c);var d=p.getContext("2d");return d.drawImage(i,0,0,i.width,i.height,0,0,n,c),p},s.prototype.renderBackgroundImage=function(i){return xt(this,void 0,void 0,function(){var n,c,a,h,p,d;return yt(this,function(g){switch(g.label){case 0:n=i.styles.backgroundImage.length-1,c=function(f){var B,w,C,ie,ne,Ne,ae,re,L,v,ie,ne,Ne,ae,re,_,I,D,F,k,x,P,H,Z,L,G,ie,me,te,ae,re,Ve,ne,Ne,kt,Ke,mt,Qt,Mt,Bt,Nt,We;return yt(this,function(nt){switch(nt.label){case 0:if(f.type!==0)return[3,5];B=void 0,w=f.url,nt.label=1;case 1:return nt.trys.push([1,3,,4]),[4,a.context.cache.match(w)];case 2:return B=nt.sent(),[3,4];case 3:return nt.sent(),a.context.logger.error("Error loading background-image "+w),[3,4];case 4:return B&&(C=pg(i,n,[B.width,B.height,B.width/B.height]),ie=C[0],ne=C[1],Ne=C[2],ae=C[3],re=C[4],L=a.ctx.createPattern(a.resizeImage(B,ae,re),"repeat"),a.renderRepeat(ie,L,ne,Ne)),[3,6];case 5:fI(f)?(v=pg(i,n,[null,null,null]),ie=v[0],ne=v[1],Ne=v[2],ae=v[3],re=v[4],_=uI(f.angle,ae,re),I=_[0],D=_[1],F=_[2],k=_[3],x=_[4],P=document.createElement("canvas"),P.width=ae,P.height=re,H=P.getContext("2d"),Z=H.createLinearGradient(D,k,F,x),b_(f.stops,I).forEach(function(lt){return Z.addColorStop(lt.stop,$t(lt.color))}),H.fillStyle=Z,H.fillRect(0,0,ae,re),ae>0&&re>0&&(L=a.ctx.createPattern(P,"repeat"),a.renderRepeat(ie,L,ne,Ne))):$I(f)&&(G=pg(i,n,[null,null,null]),ie=G[0],me=G[1],te=G[2],ae=G[3],re=G[4],Ve=f.position.length===0?[ef]:f.position,ne=Me(Ve[0],ae),Ne=Me(Ve[Ve.length-1],re),kt=hI(f,ne,Ne,ae,re),Ke=kt[0],mt=kt[1],Ke>0&&mt>0&&(Qt=a.ctx.createRadialGradient(me+ne,te+Ne,0,me+ne,te+Ne,Ke),b_(f.stops,Ke*2).forEach(function(lt){return Qt.addColorStop(lt.stop,$t(lt.color))}),a.path(ie),a.ctx.fillStyle=Qt,Ke!==mt?(Mt=i.bounds.left+.5*i.bounds.width,Bt=i.bounds.top+.5*i.bounds.height,Nt=mt/Ke,We=1/Nt,a.ctx.save(),a.ctx.translate(Mt,Bt),a.ctx.transform(1,0,0,Nt,0,0),a.ctx.translate(-Mt,-Bt),a.ctx.fillRect(me,We*(te-Bt)+Bt,ae,re*We),a.ctx.restore()):a.ctx.fill())),nt.label=6;case 6:return n--,[2]}})},a=this,h=0,p=i.styles.backgroundImage.slice(0).reverse(),g.label=1;case 1:return h<p.length?(d=p[h],[5,c(d)]):[3,4];case 2:g.sent(),g.label=3;case 3:return h++,[3,1];case 4:return[2]}})})},s.prototype.renderSolidBorder=function(i,n,c){return xt(this,void 0,void 0,function(){return yt(this,function(a){return this.path(eC(c,n)),this.ctx.fillStyle=$t(i),this.ctx.fill(),[2]})})},s.prototype.renderDoubleBorder=function(i,n,c,a){return xt(this,void 0,void 0,function(){var h,p;return yt(this,function(d){switch(d.label){case 0:return n<3?[4,this.renderSolidBorder(i,c,a)]:[3,2];case 1:return d.sent(),[2];case 2:return h=wS(a,c),this.path(h),this.ctx.fillStyle=$t(i),this.ctx.fill(),p=_S(a,c),this.path(p),this.ctx.fill(),[2]}})})},s.prototype.renderNodeBackgroundAndBorders=function(i){return xt(this,void 0,void 0,function(){var n,c,a,h,p,d,g,f,B=this;return yt(this,function(w){switch(w.label){case 0:return this.applyEffects(i.getEffects(2)),n=i.container.styles,c=!ei(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],h=US(eo(n.backgroundClip,0),i.curves),c||n.boxShadow.length?(this.ctx.save(),this.path(h),this.ctx.clip(),ei(n.backgroundColor)||(this.ctx.fillStyle=$t(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:w.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(C){B.ctx.save();var v=Fa(i.curves),_=C.inset?0:kS,I=mS(v,-_+(C.inset?1:-1)*C.spread.number,(C.inset?1:-1)*C.spread.number,C.spread.number*(C.inset?-2:2),C.spread.number*(C.inset?-2:2));C.inset?(B.path(v),B.ctx.clip(),B.mask(I)):(B.mask(v),B.ctx.clip(),B.path(I)),B.ctx.shadowOffsetX=C.offsetX.number+_,B.ctx.shadowOffsetY=C.offsetY.number,B.ctx.shadowColor=$t(C.color),B.ctx.shadowBlur=C.blur.number,B.ctx.fillStyle=C.inset?$t(C.color):"rgba(0,0,0,1)",B.ctx.fill(),B.ctx.restore()}),w.label=2;case 2:p=0,d=0,g=a,w.label=3;case 3:return d<g.length?(f=g[d],f.style!==0&&!ei(f.color)&&f.width>0?f.style!==2?[3,5]:[4,this.renderDashedDottedBorder(f.color,f.width,p,i.curves,2)]:[3,11]):[3,13];case 4:return w.sent(),[3,11];case 5:return f.style!==3?[3,7]:[4,this.renderDashedDottedBorder(f.color,f.width,p,i.curves,3)];case 6:return w.sent(),[3,11];case 7:return f.style!==4?[3,9]:[4,this.renderDoubleBorder(f.color,f.width,p,i.curves)];case 8:return w.sent(),[3,11];case 9:return[4,this.renderSolidBorder(f.color,p,i.curves)];case 10:w.sent(),w.label=11;case 11:p++,w.label=12;case 12:return d++,[3,3];case 13:return[2]}})})},s.prototype.renderDashedDottedBorder=function(i,n,c,a,h){return xt(this,void 0,void 0,function(){var p,d,g,f,B,w,C,v,_,I,D,F,k,x,P,H,P,H;return yt(this,function(Z){return this.ctx.save(),p=CS(a,c),d=eC(a,c),h===2&&(this.path(d),this.ctx.clip()),aA(d[0])?(g=d[0].start.x,f=d[0].start.y):(g=d[0].x,f=d[0].y),aA(d[1])?(B=d[1].end.x,w=d[1].end.y):(B=d[1].x,w=d[1].y),c===0||c===2?C=Math.abs(g-B):C=Math.abs(f-w),this.ctx.beginPath(),h===3?this.formatPath(p):this.formatPath(d.slice(0,2)),v=n<3?n*3:n*2,_=n<3?n*2:n,h===3&&(v=n,_=n),I=!0,C<=v*2?I=!1:C<=v*2+_?(D=C/(2*v+_),v*=D,_*=D):(F=Math.floor((C+_)/(v+_)),k=(C-F*v)/(F-1),x=(C-(F+1)*v)/F,_=x<=0||Math.abs(_-k)<Math.abs(_-x)?k:x),I&&(h===3?this.ctx.setLineDash([0,v+_]):this.ctx.setLineDash([v,_])),h===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=$t(i),this.ctx.stroke(),this.ctx.setLineDash([]),h===2&&(aA(d[0])&&(P=d[3],H=d[0],this.ctx.beginPath(),this.formatPath([new X(P.end.x,P.end.y),new X(H.start.x,H.start.y)]),this.ctx.stroke()),aA(d[1])&&(P=d[1],H=d[2],this.ctx.beginPath(),this.formatPath([new X(P.end.x,P.end.y),new X(H.start.x,H.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},s.prototype.render=function(i){return xt(this,void 0,void 0,function(){var n;return yt(this,function(c){switch(c.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=$t(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=BS(i),[4,this.renderStack(n)];case 1:return c.sent(),this.applyEffects([]),[2,this.canvas]}})})},s}(Sb),FS=function(r){return r instanceof db||r instanceof hb?!0:r instanceof sf&&r.type!==Ta&&r.type!==Ia},US=function(r,s){switch(r){case 0:return Fa(s);case 2:return dS(s);case 1:default:return Ua(s)}},RS=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},DS=["-apple-system","system-ui"],xS=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(s){return DS.indexOf(s)===-1}):r},OS=function(r){yA(s,r);function s(i,n){var c=r.call(this,i,n)||this;return c.canvas=n.canvas?n.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),c.options=n,c.canvas.width=Math.floor(n.width*n.scale),c.canvas.height=Math.floor(n.height*n.scale),c.canvas.style.width=n.width+"px",c.canvas.style.height=n.height+"px",c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-n.x,-n.y),c.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),c}return s.prototype.render=function(i){return xt(this,void 0,void 0,function(){var n,c;return yt(this,function(a){switch(a.label){case 0:return n=Mg(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,LS(n)];case 1:return c=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=$t(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(c,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},s}(Sb),LS=function(r){return new Promise(function(s,i){var n=new Image;n.onload=function(){s(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},QS=function(){function r(s){var i=s.id,n=s.enabled;this.id=i,this.enabled=n,this.start=Date.now()}return r.prototype.debug=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Gc([this.id,this.getTime()+"ms"],s)):this.info.apply(this,s))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Gc([this.id,this.getTime()+"ms"],s))},r.prototype.warn=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Gc([this.id,this.getTime()+"ms"],s)):this.info.apply(this,s))},r.prototype.error=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Gc([this.id,this.getTime()+"ms"],s)):this.info.apply(this,s))},r.instances={},r}(),MS=function(){function r(s,i){var n;this.windowBounds=i,this.instanceName="#"+r.instanceCount++,this.logger=new QS({id:this.instanceName,enabled:s.logging}),this.cache=(n=s.cache)!==null&&n!==void 0?n:new sS(this,s)}return r.instanceCount=1,r}(),eU=function(r,s){return s===void 0&&(s={}),NS(r,s)};typeof window<"u"&&vb.setContext(window);var NS=function(r,s){return xt(void 0,void 0,void 0,function(){var i,n,c,a,h,p,d,g,f,B,w,C,v,_,I,D,F,k,x,P,Z,H,Z,L,G,ie,me,te,ae,re,Ve,ne,Ne,kt,Ke,mt,Qt,Mt,Bt,Nt;return yt(this,function(We){switch(We.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=r.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(n=i.defaultView,!n)throw new Error("Document is not attached to a Window");return c={allowTaint:(L=s.allowTaint)!==null&&L!==void 0?L:!1,imageTimeout:(G=s.imageTimeout)!==null&&G!==void 0?G:15e3,proxy:s.proxy,useCORS:(ie=s.useCORS)!==null&&ie!==void 0?ie:!1},a=vg({logging:(me=s.logging)!==null&&me!==void 0?me:!0,cache:s.cache},c),h={windowWidth:(te=s.windowWidth)!==null&&te!==void 0?te:n.innerWidth,windowHeight:(ae=s.windowHeight)!==null&&ae!==void 0?ae:n.innerHeight,scrollX:(re=s.scrollX)!==null&&re!==void 0?re:n.pageXOffset,scrollY:(Ve=s.scrollY)!==null&&Ve!==void 0?Ve:n.pageYOffset},p=new vr(h.scrollX,h.scrollY,h.windowWidth,h.windowHeight),d=new MS(a,p),g=(ne=s.foreignObjectRendering)!==null&&ne!==void 0?ne:!1,f={allowTaint:(Ne=s.allowTaint)!==null&&Ne!==void 0?Ne:!1,onclone:s.onclone,ignoreElements:s.ignoreElements,inlineImages:g,copyStyles:g},d.logger.debug("Starting document clone with size "+p.width+"x"+p.height+" scrolled to "+-p.left+","+-p.top),B=new j_(d,r,f),w=B.clonedReferenceElement,w?[4,B.toIFrame(i,p)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return C=We.sent(),v=of(w)||Pk(w)?mE(w.ownerDocument):za(d,w),_=v.width,I=v.height,D=v.left,F=v.top,k=HS(d,w,s.backgroundColor),x={canvas:s.canvas,backgroundColor:k,scale:(Ke=(kt=s.scale)!==null&&kt!==void 0?kt:n.devicePixelRatio)!==null&&Ke!==void 0?Ke:1,x:((mt=s.x)!==null&&mt!==void 0?mt:0)+D,y:((Qt=s.y)!==null&&Qt!==void 0?Qt:0)+F,width:(Mt=s.width)!==null&&Mt!==void 0?Mt:Math.ceil(_),height:(Bt=s.height)!==null&&Bt!==void 0?Bt:Math.ceil(I)},g?(d.logger.debug("Document cloned, using foreign object rendering"),Z=new OS(d,x),[4,Z.render(w)]):[3,3];case 2:return P=We.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+D+","+F+" with size "+_+"x"+I+" using computed rendering"),d.logger.debug("Starting DOM parsing"),H=fb(d,w),k===H.styles.backgroundColor&&(H.styles.backgroundColor=Cr.TRANSPARENT),d.logger.debug("Starting renderer for element at "+x.x+","+x.y+" with size "+x.width+"x"+x.height),Z=new SS(d,x),[4,Z.render(H)];case 4:P=We.sent(),We.label=5;case 5:return(!((Nt=s.removeContainer)!==null&&Nt!==void 0)||Nt)&&(j_.destroy(C)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,P]}})})},HS=function(r,s,i){var n=s.ownerDocument,c=n.documentElement?Rn(r,getComputedStyle(n.documentElement).backgroundColor):Cr.TRANSPARENT,a=n.body?Rn(r,getComputedStyle(n.body).backgroundColor):Cr.TRANSPARENT,h=typeof i=="string"?Rn(r,i):i===null?Cr.TRANSPARENT:4294967295;return s===n.documentElement?ei(c)?ei(a)?h:a:c:h},st;(function(r){r[r.Document=0]="Document",r[r.DocumentType=1]="DocumentType",r[r.Element=2]="Element",r[r.Text=3]="Text",r[r.CDATA=4]="CDATA",r[r.Comment=5]="Comment"})(st||(st={}));function PS(r){return r.nodeType===r.ELEMENT_NODE}function Ln(r){const s=r==null?void 0:r.host;return(s==null?void 0:s.shadowRoot)===r}function Qn(r){return Object.prototype.toString.call(r)==="[object ShadowRoot]"}function GS(r){return r.includes(" background-clip: text;")&&!r.includes(" -webkit-background-clip: text;")&&(r=r.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),r}function VS(r){const{cssText:s}=r;if(s.split('"').length<3)return s;const i=["@import",`url(${JSON.stringify(r.href)})`];return r.layerName===""?i.push("layer"):r.layerName&&i.push(`layer(${r.layerName})`),r.supportsText&&i.push(`supports(${r.supportsText})`),r.media.length&&i.push(r.media.mediaText),i.join(" ")+";"}function Da(r){try{const s=r.rules||r.cssRules;return s?GS(Array.from(s,Fb).join("")):null}catch{return null}}function Fb(r){let s;if(WS(r))try{s=Da(r.styleSheet)||VS(r)}catch{}else if(zS(r)&&r.selectorText.includes(":"))return KS(r.cssText);return s||r.cssText}function KS(r){const s=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return r.replace(s,"$1\\$2")}function WS(r){return"styleSheet"in r}function zS(r){return"selectorText"in r}class Ub{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(s){var i;if(!s)return-1;const n=(i=this.getMeta(s))===null||i===void 0?void 0:i.id;return n??-1}getNode(s){return this.idNodeMap.get(s)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(s){return this.nodeMetaMap.get(s)||null}removeNodeFromMap(s){const i=this.getId(s);this.idNodeMap.delete(i),s.childNodes&&s.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(s){return this.idNodeMap.has(s)}hasNode(s){return this.nodeMetaMap.has(s)}add(s,i){const n=i.id;this.idNodeMap.set(n,s),this.nodeMetaMap.set(s,i)}replace(s,i){const n=this.getNode(s);if(n){const c=this.nodeMetaMap.get(n);c&&this.nodeMetaMap.set(i,c)}this.idNodeMap.set(s,i)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function XS(){return new Ub}function nf({element:r,maskInputOptions:s,tagName:i,type:n,value:c,maskInputFn:a}){let h=c||"";const p=n&&Xi(n);return(s[i.toLowerCase()]||p&&s[p])&&(a?h=a(h,r):h="*".repeat(h.length)),h}function Xi(r){return r.toLowerCase()}const AC="__rrweb_original__";function YS(r){const s=r.getContext("2d");if(!s)return!0;const i=50;for(let n=0;n<r.width;n+=i)for(let c=0;c<r.height;c+=i){const a=s.getImageData,h=AC in a?a[AC]:a;if(new Uint32Array(h.call(s,n,c,Math.min(i,r.width-n),Math.min(i,r.height-c)).data.buffer).some(d=>d!==0))return!1}return!0}function lf(r){const s=r.type;return r.hasAttribute("data-rr-is-password")?"password":s?Xi(s):null}function Rb(r,s){var i;let n;try{n=new URL(r,s??window.location.href)}catch{return null}const c=/\.([0-9a-z]+)(?:$)/i,a=n.pathname.match(c);return(i=a==null?void 0:a[1])!==null&&i!==void 0?i:null}let JS=1;const jS=new RegExp("[^a-z0-9-_:]"),Wn=-2;function Db(){return JS++}function qS(r){if(r instanceof HTMLFormElement)return"form";const s=Xi(r.tagName);return jS.test(s)?"div":s}function ZS(r){let s="";return r.indexOf("//")>-1?s=r.split("/").slice(0,3).join("/"):s=r.split("/")[0],s=s.split("?")[0],s}let qs,rC;const e0=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,t0=/^(?:[a-z+]+:)?\/\//i,A0=/^www\..*/i,r0=/^(data:)([^,]*),(.*)/i;function xa(r,s){return(r||"").replace(e0,(i,n,c,a,h,p)=>{const d=c||h||p,g=n||a||"";if(!d)return i;if(t0.test(d)||A0.test(d))return`url(${g}${d}${g})`;if(r0.test(d))return`url(${g}${d}${g})`;if(d[0]==="/")return`url(${g}${ZS(s)+d}${g})`;const f=s.split("/"),B=d.split("/");f.pop();for(const w of B)w!=="."&&(w===".."?f.pop():f.push(w));return`url(${g}${f.join("/")}${g})`})}const i0=/^[^ \t\n\r\u000c]+/,s0=/^[, \t\n\r\u000c]+/;function o0(r,s){if(s.trim()==="")return s;let i=0;function n(a){let h;const p=a.exec(s.substring(i));return p?(h=p[0],i+=h.length,h):""}const c=[];for(;n(s0),!(i>=s.length);){let a=n(i0);if(a.slice(-1)===",")a=ro(r,a.substring(0,a.length-1)),c.push(a);else{let h="";a=ro(r,a);let p=!1;for(;;){const d=s.charAt(i);if(d===""){c.push((a+h).trim());break}else if(p)d===")"&&(p=!1);else if(d===","){i+=1,c.push((a+h).trim());break}else d==="("&&(p=!0);h+=d,i+=1}}}return c.join(", ")}function ro(r,s){if(!s||s.trim()==="")return s;const i=r.createElement("a");return i.href=s,i.href}function n0(r){return!!(r.tagName==="svg"||r.ownerSVGElement)}function cf(){const r=document.createElement("a");return r.href="",r.href}function xb(r,s,i,n){return n&&(i==="src"||i==="href"&&!(s==="use"&&n[0]==="#")||i==="xlink:href"&&n[0]!=="#"||i==="background"&&(s==="table"||s==="td"||s==="th")?ro(r,n):i==="srcset"?o0(r,n):i==="style"?xa(n,cf()):s==="object"&&i==="data"?ro(r,n):n)}function Ob(r,s,i){return(r==="video"||r==="audio")&&s==="autoplay"}function l0(r,s,i){try{if(typeof s=="string"){if(r.classList.contains(s))return!0}else for(let n=r.classList.length;n--;){const c=r.classList[n];if(s.test(c))return!0}if(i)return r.matches(i)}catch{}return!1}function Oa(r,s,i){if(!r)return!1;if(r.nodeType!==r.ELEMENT_NODE)return i?Oa(r.parentNode,s,i):!1;for(let n=r.classList.length;n--;){const c=r.classList[n];if(s.test(c))return!0}return i?Oa(r.parentNode,s,i):!1}function Lb(r,s,i,n){try{const c=r.nodeType===r.ELEMENT_NODE?r:r.parentElement;if(c===null)return!1;if(typeof s=="string"){if(n){if(c.closest(`.${s}`))return!0}else if(c.classList.contains(s))return!0}else if(Oa(c,s,n))return!0;if(i){if(n){if(c.closest(i))return!0}else if(c.matches(i))return!0}}catch{}return!1}function c0(r,s,i){const n=r.contentWindow;if(!n)return;let c=!1,a;try{a=n.document.readyState}catch{return}if(a!=="complete"){const p=setTimeout(()=>{c||(s(),c=!0)},i);r.addEventListener("load",()=>{clearTimeout(p),c=!0,s()});return}const h="about:blank";if(n.location.href!==h||r.src===h||r.src==="")return setTimeout(s,0),r.addEventListener("load",s);r.addEventListener("load",s)}function a0(r,s,i){let n=!1,c;try{c=r.sheet}catch{return}if(c)return;const a=setTimeout(()=>{n||(s(),n=!0)},i);r.addEventListener("load",()=>{clearTimeout(a),n=!0,s()})}function u0(r,s){const{doc:i,mirror:n,blockClass:c,blockSelector:a,needsMask:h,inlineStylesheet:p,maskInputOptions:d={},maskTextFn:g,maskInputFn:f,dataURLOptions:B={},inlineImages:w,recordCanvas:C,keepIframeSrcFn:v,newlyAddedElement:_=!1}=s,I=h0(i,n);switch(r.nodeType){case r.DOCUMENT_NODE:return r.compatMode!=="CSS1Compat"?{type:st.Document,childNodes:[],compatMode:r.compatMode}:{type:st.Document,childNodes:[]};case r.DOCUMENT_TYPE_NODE:return{type:st.DocumentType,name:r.name,publicId:r.publicId,systemId:r.systemId,rootId:I};case r.ELEMENT_NODE:return p0(r,{doc:i,blockClass:c,blockSelector:a,inlineStylesheet:p,maskInputOptions:d,maskInputFn:f,dataURLOptions:B,inlineImages:w,recordCanvas:C,keepIframeSrcFn:v,newlyAddedElement:_,rootId:I});case r.TEXT_NODE:return d0(r,{needsMask:h,maskTextFn:g,rootId:I});case r.CDATA_SECTION_NODE:return{type:st.CDATA,textContent:"",rootId:I};case r.COMMENT_NODE:return{type:st.Comment,textContent:r.textContent||"",rootId:I};default:return!1}}function h0(r,s){if(!s.hasNode(r))return;const i=s.getId(r);return i===1?void 0:i}function d0(r,s){var i;const{needsMask:n,maskTextFn:c,rootId:a}=s,h=r.parentNode&&r.parentNode.tagName;let p=r.textContent;const d=h==="STYLE"?!0:void 0,g=h==="SCRIPT"?!0:void 0;if(d&&p){try{r.nextSibling||r.previousSibling||!((i=r.parentNode.sheet)===null||i===void 0)&&i.cssRules&&(p=Da(r.parentNode.sheet))}catch(f){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${f}`,r)}p=xa(p,cf())}return g&&(p="SCRIPT_PLACEHOLDER"),!d&&!g&&p&&n&&(p=c?c(p,r.parentElement):p.replace(/[\S]/g,"*")),{type:st.Text,textContent:p||"",isStyle:d,rootId:a}}function p0(r,s){const{doc:i,blockClass:n,blockSelector:c,inlineStylesheet:a,maskInputOptions:h={},maskInputFn:p,dataURLOptions:d={},inlineImages:g,recordCanvas:f,keepIframeSrcFn:B,newlyAddedElement:w=!1,rootId:C}=s,v=l0(r,n,c),_=qS(r);let I={};const D=r.attributes.length;for(let k=0;k<D;k++){const x=r.attributes[k];Ob(_,x.name,x.value)||(I[x.name]=xb(i,_,Xi(x.name),x.value))}if(_==="link"&&a){const k=Array.from(i.styleSheets).find(P=>P.href===r.href);let x=null;k&&(x=Da(k)),x&&(delete I.rel,delete I.href,I._cssText=xa(x,k.href))}if(_==="style"&&r.sheet&&!(r.innerText||r.textContent||"").trim().length){const k=Da(r.sheet);k&&(I._cssText=xa(k,cf()))}if(_==="input"||_==="textarea"||_==="select"){const k=r.value,x=r.checked;I.type!=="radio"&&I.type!=="checkbox"&&I.type!=="submit"&&I.type!=="button"&&k?I.value=nf({element:r,type:lf(r),tagName:_,value:k,maskInputOptions:h,maskInputFn:p}):x&&(I.checked=x)}if(_==="option"&&(r.selected&&!h.select?I.selected=!0:delete I.selected),_==="canvas"&&f){if(r.__context==="2d")YS(r)||(I.rr_dataURL=r.toDataURL(d.type,d.quality));else if(!("__context"in r)){const k=r.toDataURL(d.type,d.quality),x=document.createElement("canvas");x.width=r.width,x.height=r.height;const P=x.toDataURL(d.type,d.quality);k!==P&&(I.rr_dataURL=k)}}if(_==="img"&&g){qs||(qs=i.createElement("canvas"),rC=qs.getContext("2d"));const k=r,x=k.crossOrigin;k.crossOrigin="anonymous";const P=()=>{k.removeEventListener("load",P);try{qs.width=k.naturalWidth,qs.height=k.naturalHeight,rC.drawImage(k,0,0),I.rr_dataURL=qs.toDataURL(d.type,d.quality)}catch(H){console.warn(`Cannot inline img src=${k.currentSrc}! Error: ${H}`)}x?I.crossOrigin=x:k.removeAttribute("crossorigin")};k.complete&&k.naturalWidth!==0?P():k.addEventListener("load",P)}if(_==="audio"||_==="video"){const k=I;k.rr_mediaState=r.paused?"paused":"played",k.rr_mediaCurrentTime=r.currentTime,k.rr_mediaPlaybackRate=r.playbackRate,k.rr_mediaMuted=r.muted,k.rr_mediaLoop=r.loop,k.rr_mediaVolume=r.volume}if(w||(r.scrollLeft&&(I.rr_scrollLeft=r.scrollLeft),r.scrollTop&&(I.rr_scrollTop=r.scrollTop)),v){const{width:k,height:x}=r.getBoundingClientRect();I={class:I.class,rr_width:`${k}px`,rr_height:`${x}px`}}_==="iframe"&&!B(I.src)&&(r.contentDocument||(I.rr_src=I.src),delete I.src);let F;try{customElements.get(_)&&(F=!0)}catch{}return{type:st.Element,tagName:_,attributes:I,childNodes:[],isSVG:n0(r)||void 0,needBlock:v,rootId:C,isCustom:F}}function Qe(r){return r==null?"":r.toLowerCase()}function g0(r,s){if(s.comment&&r.type===st.Comment)return!0;if(r.type===st.Element){if(s.script&&(r.tagName==="script"||r.tagName==="link"&&(r.attributes.rel==="preload"||r.attributes.rel==="modulepreload")&&r.attributes.as==="script"||r.tagName==="link"&&r.attributes.rel==="prefetch"&&typeof r.attributes.href=="string"&&Rb(r.attributes.href)==="js"))return!0;if(s.headFavicon&&(r.tagName==="link"&&r.attributes.rel==="shortcut icon"||r.tagName==="meta"&&(Qe(r.attributes.name).match(/^msapplication-tile(image|color)$/)||Qe(r.attributes.name)==="application-name"||Qe(r.attributes.rel)==="icon"||Qe(r.attributes.rel)==="apple-touch-icon"||Qe(r.attributes.rel)==="shortcut icon")))return!0;if(r.tagName==="meta"){if(s.headMetaDescKeywords&&Qe(r.attributes.name).match(/^description|keywords$/))return!0;if(s.headMetaSocial&&(Qe(r.attributes.property).match(/^(og|twitter|fb):/)||Qe(r.attributes.name).match(/^(og|twitter):/)||Qe(r.attributes.name)==="pinterest"))return!0;if(s.headMetaRobots&&(Qe(r.attributes.name)==="robots"||Qe(r.attributes.name)==="googlebot"||Qe(r.attributes.name)==="bingbot"))return!0;if(s.headMetaHttpEquiv&&r.attributes["http-equiv"]!==void 0)return!0;if(s.headMetaAuthorship&&(Qe(r.attributes.name)==="author"||Qe(r.attributes.name)==="generator"||Qe(r.attributes.name)==="framework"||Qe(r.attributes.name)==="publisher"||Qe(r.attributes.name)==="progid"||Qe(r.attributes.property).match(/^article:/)||Qe(r.attributes.property).match(/^product:/)))return!0;if(s.headMetaVerification&&(Qe(r.attributes.name)==="google-site-verification"||Qe(r.attributes.name)==="yandex-verification"||Qe(r.attributes.name)==="csrf-token"||Qe(r.attributes.name)==="p:domain_verify"||Qe(r.attributes.name)==="verify-v1"||Qe(r.attributes.name)==="verification"||Qe(r.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function io(r,s){const{doc:i,mirror:n,blockClass:c,blockSelector:a,maskTextClass:h,maskTextSelector:p,skipChild:d=!1,inlineStylesheet:g=!0,maskInputOptions:f={},maskTextFn:B,maskInputFn:w,slimDOMOptions:C,dataURLOptions:v={},inlineImages:_=!1,recordCanvas:I=!1,onSerialize:D,onIframeLoad:F,iframeLoadTimeout:k=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:P=5e3,keepIframeSrcFn:H=()=>!1,newlyAddedElement:Z=!1}=s;let{needsMask:L}=s,{preserveWhiteSpace:G=!0}=s;!L&&r.childNodes&&(L=Lb(r,h,p,L===void 0));const ie=u0(r,{doc:i,mirror:n,blockClass:c,blockSelector:a,needsMask:L,inlineStylesheet:g,maskInputOptions:f,maskTextFn:B,maskInputFn:w,dataURLOptions:v,inlineImages:_,recordCanvas:I,keepIframeSrcFn:H,newlyAddedElement:Z});if(!ie)return console.warn(r,"not serialized"),null;let me;n.hasNode(r)?me=n.getId(r):g0(ie,C)||!G&&ie.type===st.Text&&!ie.isStyle&&!ie.textContent.replace(/^\s+|\s+$/gm,"").length?me=Wn:me=Db();const te=Object.assign(ie,{id:me});if(n.add(r,te),me===Wn)return null;D&&D(r);let ae=!d;if(te.type===st.Element){ae=ae&&!te.needBlock,delete te.needBlock;const re=r.shadowRoot;re&&Qn(re)&&(te.isShadowHost=!0)}if((te.type===st.Document||te.type===st.Element)&&ae){C.headWhitespace&&te.type===st.Element&&te.tagName==="head"&&(G=!1);const re={doc:i,mirror:n,blockClass:c,blockSelector:a,needsMask:L,maskTextClass:h,maskTextSelector:p,skipChild:d,inlineStylesheet:g,maskInputOptions:f,maskTextFn:B,maskInputFn:w,slimDOMOptions:C,dataURLOptions:v,inlineImages:_,recordCanvas:I,preserveWhiteSpace:G,onSerialize:D,onIframeLoad:F,iframeLoadTimeout:k,onStylesheetLoad:x,stylesheetLoadTimeout:P,keepIframeSrcFn:H};if(!(te.type===st.Element&&te.tagName==="textarea"&&te.attributes.value!==void 0))for(const Ve of Array.from(r.childNodes)){const ne=io(Ve,re);ne&&te.childNodes.push(ne)}if(PS(r)&&r.shadowRoot)for(const Ve of Array.from(r.shadowRoot.childNodes)){const ne=io(Ve,re);ne&&(Qn(r.shadowRoot)&&(ne.isShadow=!0),te.childNodes.push(ne))}}return r.parentNode&&Ln(r.parentNode)&&Qn(r.parentNode)&&(te.isShadow=!0),te.type===st.Element&&te.tagName==="iframe"&&c0(r,()=>{const re=r.contentDocument;if(re&&F){const Ve=io(re,{doc:re,mirror:n,blockClass:c,blockSelector:a,needsMask:L,maskTextClass:h,maskTextSelector:p,skipChild:!1,inlineStylesheet:g,maskInputOptions:f,maskTextFn:B,maskInputFn:w,slimDOMOptions:C,dataURLOptions:v,inlineImages:_,recordCanvas:I,preserveWhiteSpace:G,onSerialize:D,onIframeLoad:F,iframeLoadTimeout:k,onStylesheetLoad:x,stylesheetLoadTimeout:P,keepIframeSrcFn:H});Ve&&F(r,Ve)}},k),te.type===st.Element&&te.tagName==="link"&&typeof te.attributes.rel=="string"&&(te.attributes.rel==="stylesheet"||te.attributes.rel==="preload"&&typeof te.attributes.href=="string"&&Rb(te.attributes.href)==="css")&&a0(r,()=>{if(x){const re=io(r,{doc:i,mirror:n,blockClass:c,blockSelector:a,needsMask:L,maskTextClass:h,maskTextSelector:p,skipChild:!1,inlineStylesheet:g,maskInputOptions:f,maskTextFn:B,maskInputFn:w,slimDOMOptions:C,dataURLOptions:v,inlineImages:_,recordCanvas:I,preserveWhiteSpace:G,onSerialize:D,onIframeLoad:F,iframeLoadTimeout:k,onStylesheetLoad:x,stylesheetLoadTimeout:P,keepIframeSrcFn:H});re&&x(r,re)}},P),te}function f0(r,s){const{mirror:i=new Ub,blockClass:n="rr-block",blockSelector:c=null,maskTextClass:a="rr-mask",maskTextSelector:h=null,inlineStylesheet:p=!0,inlineImages:d=!1,recordCanvas:g=!1,maskAllInputs:f=!1,maskTextFn:B,maskInputFn:w,slimDOM:C=!1,dataURLOptions:v,preserveWhiteSpace:_,onSerialize:I,onIframeLoad:D,iframeLoadTimeout:F,onStylesheetLoad:k,stylesheetLoadTimeout:x,keepIframeSrcFn:P=()=>!1}=s||{};return io(r,{doc:r,mirror:i,blockClass:n,blockSelector:c,maskTextClass:a,maskTextSelector:h,skipChild:!1,inlineStylesheet:p,maskInputOptions:f===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:f===!1?{password:!0}:f,maskTextFn:B,maskInputFn:w,slimDOMOptions:C===!0||C==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:C==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:C===!1?{}:C,dataURLOptions:v,inlineImages:d,recordCanvas:g,preserveWhiteSpace:_,onSerialize:I,onIframeLoad:D,iframeLoadTimeout:F,onStylesheetLoad:k,stylesheetLoadTimeout:x,keepIframeSrcFn:P,newlyAddedElement:!1})}function Ot(r,s,i=document){const n={capture:!0,passive:!0};return i.addEventListener(r,s,n),()=>i.removeEventListener(r,s,n)}const to=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let iC={map:{},getId(){return console.error(to),-1},getNode(){return console.error(to),null},removeNodeFromMap(){console.error(to)},has(){return console.error(to),!1},reset(){console.error(to)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(iC=new Proxy(iC,{get(r,s,i){return s==="map"&&console.error(to),Reflect.get(r,s,i)}}));function zn(r,s,i={}){let n=null,c=0;return function(...a){const h=Date.now();!c&&i.leading===!1&&(c=h);const p=s-(h-c),d=this;p<=0||p>s?(n&&(clearTimeout(n),n=null),c=h,r.apply(d,a)):!n&&i.trailing!==!1&&(n=setTimeout(()=>{c=i.leading===!1?0:Date.now(),n=null,r.apply(d,a)},p))}}function ru(r,s,i,n,c=window){const a=c.Object.getOwnPropertyDescriptor(r,s);return c.Object.defineProperty(r,s,n?i:{set(h){setTimeout(()=>{i.set.call(this,h)},0),a&&a.set&&a.set.call(this,h)}}),()=>ru(r,s,a||{},!0)}function fo(r,s,i){try{if(!(s in r))return()=>{};const n=r[s],c=i(n);return typeof c=="function"&&(c.prototype=c.prototype||{},Object.defineProperties(c,{__rrweb_original__:{enumerable:!1,value:n}})),r[s]=c,()=>{r[s]=n}}catch{return()=>{}}}let La=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(La=()=>new Date().getTime());function Qb(r){var s,i,n,c,a,h;const p=r.document;return{left:p.scrollingElement?p.scrollingElement.scrollLeft:r.pageXOffset!==void 0?r.pageXOffset:(p==null?void 0:p.documentElement.scrollLeft)||((i=(s=p==null?void 0:p.body)===null||s===void 0?void 0:s.parentElement)===null||i===void 0?void 0:i.scrollLeft)||((n=p==null?void 0:p.body)===null||n===void 0?void 0:n.scrollLeft)||0,top:p.scrollingElement?p.scrollingElement.scrollTop:r.pageYOffset!==void 0?r.pageYOffset:(p==null?void 0:p.documentElement.scrollTop)||((a=(c=p==null?void 0:p.body)===null||c===void 0?void 0:c.parentElement)===null||a===void 0?void 0:a.scrollTop)||((h=p==null?void 0:p.body)===null||h===void 0?void 0:h.scrollTop)||0}}function Mb(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Nb(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Hb(r){return r?r.nodeType===r.ELEMENT_NODE?r:r.parentElement:null}function Lt(r,s,i,n){if(!r)return!1;const c=Hb(r);if(!c)return!1;try{if(typeof s=="string"){if(c.classList.contains(s)||n&&c.closest("."+s)!==null)return!0}else if(Oa(c,s,n))return!0}catch{}return!!(i&&(c.matches(i)||n&&c.closest(i)!==null))}function $0(r,s){return s.getId(r)!==-1}function gg(r,s){return s.getId(r)===Wn}function Pb(r,s){if(Ln(r))return!1;const i=s.getId(r);return s.has(i)?r.parentNode&&r.parentNode.nodeType===r.DOCUMENT_NODE?!1:r.parentNode?Pb(r.parentNode,s):!0:!0}function Wg(r){return!!r.changedTouches}function m0(r=window){"NodeList"in r&&!r.NodeList.prototype.forEach&&(r.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in r&&!r.DOMTokenList.prototype.forEach&&(r.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...s)=>{let i=s[0];if(!(0 in s))throw new TypeError("1 argument is required");do if(this===i)return!0;while(i=i&&i.parentNode);return!1})}function Gb(r,s){return!!(r.nodeName==="IFRAME"&&s.getMeta(r))}function Vb(r,s){return!!(r.nodeName==="LINK"&&r.nodeType===r.ELEMENT_NODE&&r.getAttribute&&r.getAttribute("rel")==="stylesheet"&&s.getMeta(r))}function zg(r){return!!(r!=null&&r.shadowRoot)}class B0{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(s){var i;return(i=this.styleIDMap.get(s))!==null&&i!==void 0?i:-1}has(s){return this.styleIDMap.has(s)}add(s,i){if(this.has(s))return this.getId(s);let n;return i===void 0?n=this.id++:n=i,this.styleIDMap.set(s,n),this.idStyleMap.set(n,s),n}getStyle(s){return this.idStyleMap.get(s)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Kb(r){var s,i;let n=null;return((i=(s=r.getRootNode)===null||s===void 0?void 0:s.call(r))===null||i===void 0?void 0:i.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&r.getRootNode().host&&(n=r.getRootNode().host),n}function w0(r){let s=r,i;for(;i=Kb(s);)s=i;return s}function _0(r){const s=r.ownerDocument;if(!s)return!1;const i=w0(r);return s.contains(i)}function Wb(r){const s=r.ownerDocument;return s?s.contains(r)||_0(r):!1}var _e=(r=>(r[r.DomContentLoaded=0]="DomContentLoaded",r[r.Load=1]="Load",r[r.FullSnapshot=2]="FullSnapshot",r[r.IncrementalSnapshot=3]="IncrementalSnapshot",r[r.Meta=4]="Meta",r[r.Custom=5]="Custom",r[r.Plugin=6]="Plugin",r))(_e||{}),fe=(r=>(r[r.Mutation=0]="Mutation",r[r.MouseMove=1]="MouseMove",r[r.MouseInteraction=2]="MouseInteraction",r[r.Scroll=3]="Scroll",r[r.ViewportResize=4]="ViewportResize",r[r.Input=5]="Input",r[r.TouchMove=6]="TouchMove",r[r.MediaInteraction=7]="MediaInteraction",r[r.StyleSheetRule=8]="StyleSheetRule",r[r.CanvasMutation=9]="CanvasMutation",r[r.Font=10]="Font",r[r.Log=11]="Log",r[r.Drag=12]="Drag",r[r.StyleDeclaration=13]="StyleDeclaration",r[r.Selection=14]="Selection",r[r.AdoptedStyleSheet=15]="AdoptedStyleSheet",r[r.CustomElement=16]="CustomElement",r))(fe||{}),Kt=(r=>(r[r.MouseUp=0]="MouseUp",r[r.MouseDown=1]="MouseDown",r[r.Click=2]="Click",r[r.ContextMenu=3]="ContextMenu",r[r.DblClick=4]="DblClick",r[r.Focus=5]="Focus",r[r.Blur=6]="Blur",r[r.TouchStart=7]="TouchStart",r[r.TouchMove_Departed=8]="TouchMove_Departed",r[r.TouchEnd=9]="TouchEnd",r[r.TouchCancel=10]="TouchCancel",r))(Kt||{}),_r=(r=>(r[r.Mouse=0]="Mouse",r[r.Pen=1]="Pen",r[r.Touch=2]="Touch",r))(_r||{}),uo=(r=>(r[r["2D"]=0]="2D",r[r.WebGL=1]="WebGL",r[r.WebGL2=2]="WebGL2",r))(uo||{});function sC(r){return"__ln"in r}class C0{constructor(){this.length=0,this.head=null,this.tail=null}get(s){if(s>=this.length)throw new Error("Position outside of list range");let i=this.head;for(let n=0;n<s;n++)i=(i==null?void 0:i.next)||null;return i}addNode(s){const i={value:s,previous:null,next:null};if(s.__ln=i,s.previousSibling&&sC(s.previousSibling)){const n=s.previousSibling.__ln.next;i.next=n,i.previous=s.previousSibling.__ln,s.previousSibling.__ln.next=i,n&&(n.previous=i)}else if(s.nextSibling&&sC(s.nextSibling)&&s.nextSibling.__ln.previous){const n=s.nextSibling.__ln.previous;i.previous=n,i.next=s.nextSibling.__ln,s.nextSibling.__ln.previous=i,n&&(n.next=i)}else this.head&&(this.head.previous=i),i.next=this.head,this.head=i;i.next===null&&(this.tail=i),this.length++}removeNode(s){const i=s.__ln;this.head&&(i.previous?(i.previous.next=i.next,i.next?i.next.previous=i.previous:this.tail=i.previous):(this.head=i.next,this.head?this.head.previous=null:this.tail=null),s.__ln&&delete s.__ln,this.length--)}}const oC=(r,s)=>`${r}@${s}`;class b0{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=s=>{s.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const s=[],i=new Set,n=new C0,c=d=>{let g=d,f=Wn;for(;f===Wn;)g=g&&g.nextSibling,f=g&&this.mirror.getId(g);return f},a=d=>{if(!d.parentNode||!Wb(d)||d.parentNode.tagName==="TEXTAREA")return;const g=Ln(d.parentNode)?this.mirror.getId(Kb(d)):this.mirror.getId(d.parentNode),f=c(d);if(g===-1||f===-1)return n.addNode(d);const B=io(d,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:w=>{Gb(w,this.mirror)&&this.iframeManager.addIframe(w),Vb(w,this.mirror)&&this.stylesheetManager.trackLinkElement(w),zg(d)&&this.shadowDomManager.addShadowRoot(d.shadowRoot,this.doc)},onIframeLoad:(w,C)=>{this.iframeManager.attachIframe(w,C),this.shadowDomManager.observeAttachShadow(w)},onStylesheetLoad:(w,C)=>{this.stylesheetManager.attachLinkElement(w,C)}});B&&(s.push({parentId:g,nextId:f,node:B}),i.add(B.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const d of this.movedSet)nC(this.removes,d,this.mirror)&&!this.movedSet.has(d.parentNode)||a(d);for(const d of this.addedSet)!lC(this.droppedSet,d)&&!nC(this.removes,d,this.mirror)||lC(this.movedSet,d)?a(d):this.droppedSet.add(d);let h=null;for(;n.length;){let d=null;if(h){const g=this.mirror.getId(h.value.parentNode),f=c(h.value);g!==-1&&f!==-1&&(d=h)}if(!d){let g=n.tail;for(;g;){const f=g;if(g=g.previous,f){const B=this.mirror.getId(f.value.parentNode);if(c(f.value)===-1)continue;if(B!==-1){d=f;break}else{const C=f.value;if(C.parentNode&&C.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const v=C.parentNode.host;if(this.mirror.getId(v)!==-1){d=f;break}}}}}}if(!d){for(;n.head;)n.removeNode(n.head.value);break}h=d.previous,n.removeNode(d.value),a(d.value)}const p={texts:this.texts.map(d=>{const g=d.node;return g.parentNode&&g.parentNode.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(g.parentNode),{id:this.mirror.getId(g),value:d.value}}).filter(d=>!i.has(d.id)).filter(d=>this.mirror.has(d.id)),attributes:this.attributes.map(d=>{const{attributes:g}=d;if(typeof g.style=="string"){const f=JSON.stringify(d.styleDiff),B=JSON.stringify(d._unchangedStyles);f.length<g.style.length&&(f+B).split("var(").length===g.style.split("var(").length&&(g.style=d.styleDiff)}return{id:this.mirror.getId(d.node),attributes:g}}).filter(d=>!i.has(d.id)).filter(d=>this.mirror.has(d.id)),removes:this.removes,adds:s};!p.texts.length&&!p.attributes.length&&!p.removes.length&&!p.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(p))},this.genTextAreaValueMutation=s=>{let i=this.attributeMap.get(s);i||(i={node:s,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(s,i)),i.attributes.value=Array.from(s.childNodes,n=>n.textContent||"").join("")},this.processMutation=s=>{if(!gg(s.target,this.mirror))switch(s.type){case"characterData":{const i=s.target.textContent;!Lt(s.target,this.blockClass,this.blockSelector,!1)&&i!==s.oldValue&&this.texts.push({value:Lb(s.target,this.maskTextClass,this.maskTextSelector,!0)&&i?this.maskTextFn?this.maskTextFn(i,Hb(s.target)):i.replace(/[\S]/g,"*"):i,node:s.target});break}case"attributes":{const i=s.target;let n=s.attributeName,c=s.target.getAttribute(n);if(n==="value"){const h=lf(i);c=nf({element:i,maskInputOptions:this.maskInputOptions,tagName:i.tagName,type:h,value:c,maskInputFn:this.maskInputFn})}if(Lt(s.target,this.blockClass,this.blockSelector,!1)||c===s.oldValue)return;let a=this.attributeMap.get(s.target);if(i.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(c))if(!i.contentDocument)n="rr_src";else return;if(a||(a={node:s.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(a),this.attributeMap.set(s.target,a)),n==="type"&&i.tagName==="INPUT"&&(s.oldValue||"").toLowerCase()==="password"&&i.setAttribute("data-rr-is-password","true"),!Ob(i.tagName,n)&&(a.attributes[n]=xb(this.doc,Xi(i.tagName),Xi(n),c),n==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const h=this.unattachedDoc.createElement("span");s.oldValue&&h.setAttribute("style",s.oldValue);for(const p of Array.from(i.style)){const d=i.style.getPropertyValue(p),g=i.style.getPropertyPriority(p);d!==h.style.getPropertyValue(p)||g!==h.style.getPropertyPriority(p)?g===""?a.styleDiff[p]=d:a.styleDiff[p]=[d,g]:a._unchangedStyles[p]=[d,g]}for(const p of Array.from(h.style))i.style.getPropertyValue(p)===""&&(a.styleDiff[p]=!1)}break}case"childList":{if(Lt(s.target,this.blockClass,this.blockSelector,!0))return;if(s.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(s.target);return}s.addedNodes.forEach(i=>this.genAdds(i,s.target)),s.removedNodes.forEach(i=>{const n=this.mirror.getId(i),c=Ln(s.target)?this.mirror.getId(s.target.host):this.mirror.getId(s.target);Lt(s.target,this.blockClass,this.blockSelector,!1)||gg(i,this.mirror)||!$0(i,this.mirror)||(this.addedSet.has(i)?(Xg(this.addedSet,i),this.droppedSet.add(i)):this.addedSet.has(s.target)&&n===-1||Pb(s.target,this.mirror)||(this.movedSet.has(i)&&this.movedMap[oC(n,c)]?Xg(this.movedSet,i):this.removes.push({parentId:c,id:n,isShadow:Ln(s.target)&&Qn(s.target)?!0:void 0})),this.mapRemoves.push(i))});break}}},this.genAdds=(s,i)=>{if(!this.processedNodeManager.inOtherBuffer(s,this)&&!(this.addedSet.has(s)||this.movedSet.has(s))){if(this.mirror.hasNode(s)){if(gg(s,this.mirror))return;this.movedSet.add(s);let n=null;i&&this.mirror.hasNode(i)&&(n=this.mirror.getId(i)),n&&n!==-1&&(this.movedMap[oC(this.mirror.getId(s),n)]=!0)}else this.addedSet.add(s),this.droppedSet.delete(s);Lt(s,this.blockClass,this.blockSelector,!1)||(s.childNodes.forEach(n=>this.genAdds(n)),zg(s)&&s.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,s)}))}}}init(s){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(i=>{this[i]=s[i]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Xg(r,s){r.delete(s),s.childNodes.forEach(i=>Xg(r,i))}function nC(r,s,i){return r.length===0?!1:zb(r,s,i)}function zb(r,s,i){const{parentNode:n}=s;if(!n)return!1;const c=i.getId(n);return r.some(a=>a.id===c)?!0:zb(r,n,i)}function lC(r,s){return r.size===0?!1:Xb(r,s)}function Xb(r,s){const{parentNode:i}=s;return i?r.has(i)?!0:Xb(r,i):!1}let Mn;function v0(r){Mn=r}function E0(){Mn=void 0}const $e=r=>Mn?(...i)=>{try{return r(...i)}catch(n){if(Mn&&Mn(n)===!0)return;throw n}}:r,Ki=[];function qn(r){try{if("composedPath"in r){const s=r.composedPath();if(s.length)return s[0]}else if("path"in r&&r.path.length)return r.path[0]}catch{}return r&&r.target}function Yb(r,s){var i,n;const c=new b0;Ki.push(c),c.init(r);let a=window.MutationObserver||window.__rrMutationObserver;const h=(n=(i=window==null?void 0:window.Zone)===null||i===void 0?void 0:i.__symbol__)===null||n===void 0?void 0:n.call(i,"MutationObserver");h&&window[h]&&(a=window[h]);const p=new a($e(c.processMutations.bind(c)));return p.observe(s,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),p}function y0({mousemoveCb:r,sampling:s,doc:i,mirror:n}){if(s.mousemove===!1)return()=>{};const c=typeof s.mousemove=="number"?s.mousemove:50,a=typeof s.mousemoveCallback=="number"?s.mousemoveCallback:500;let h=[],p;const d=zn($e(B=>{const w=Date.now()-p;r(h.map(C=>(C.timeOffset-=w,C)),B),h=[],p=null}),a),g=$e(zn($e(B=>{const w=qn(B),{clientX:C,clientY:v}=Wg(B)?B.changedTouches[0]:B;p||(p=La()),h.push({x:C,y:v,id:n.getId(w),timeOffset:La()-p}),d(typeof DragEvent<"u"&&B instanceof DragEvent?fe.Drag:B instanceof MouseEvent?fe.MouseMove:fe.TouchMove)}),c,{trailing:!1})),f=[Ot("mousemove",g,i),Ot("touchmove",g,i),Ot("drag",g,i)];return $e(()=>{f.forEach(B=>B())})}function I0({mouseInteractionCb:r,doc:s,mirror:i,blockClass:n,blockSelector:c,sampling:a}){if(a.mouseInteraction===!1)return()=>{};const h=a.mouseInteraction===!0||a.mouseInteraction===void 0?{}:a.mouseInteraction,p=[];let d=null;const g=f=>B=>{const w=qn(B);if(Lt(w,n,c,!0))return;let C=null,v=f;if("pointerType"in B){switch(B.pointerType){case"mouse":C=_r.Mouse;break;case"touch":C=_r.Touch;break;case"pen":C=_r.Pen;break}C===_r.Touch?Kt[f]===Kt.MouseDown?v="TouchStart":Kt[f]===Kt.MouseUp&&(v="TouchEnd"):_r.Pen}else Wg(B)&&(C=_r.Touch);C!==null?(d=C,(v.startsWith("Touch")&&C===_r.Touch||v.startsWith("Mouse")&&C===_r.Mouse)&&(C=null)):Kt[f]===Kt.Click&&(C=d,d=null);const _=Wg(B)?B.changedTouches[0]:B;if(!_)return;const I=i.getId(w),{clientX:D,clientY:F}=_;$e(r)(Object.assign({type:Kt[v],id:I,x:D,y:F},C!==null&&{pointerType:C}))};return Object.keys(Kt).filter(f=>Number.isNaN(Number(f))&&!f.endsWith("_Departed")&&h[f]!==!1).forEach(f=>{let B=Xi(f);const w=g(f);if(window.PointerEvent)switch(Kt[f]){case Kt.MouseDown:case Kt.MouseUp:B=B.replace("mouse","pointer");break;case Kt.TouchStart:case Kt.TouchEnd:return}p.push(Ot(B,w,s))}),$e(()=>{p.forEach(f=>f())})}function Jb({scrollCb:r,doc:s,mirror:i,blockClass:n,blockSelector:c,sampling:a}){const h=$e(zn($e(p=>{const d=qn(p);if(!d||Lt(d,n,c,!0))return;const g=i.getId(d);if(d===s&&s.defaultView){const f=Qb(s.defaultView);r({id:g,x:f.left,y:f.top})}else r({id:g,x:d.scrollLeft,y:d.scrollTop})}),a.scroll||100));return Ot("scroll",h,s)}function T0({viewportResizeCb:r},{win:s}){let i=-1,n=-1;const c=$e(zn($e(()=>{const a=Mb(),h=Nb();(i!==a||n!==h)&&(r({width:Number(h),height:Number(a)}),i=a,n=h)}),200));return Ot("resize",c,s)}const k0=["INPUT","TEXTAREA","SELECT"],cC=new WeakMap;function S0({inputCb:r,doc:s,mirror:i,blockClass:n,blockSelector:c,ignoreClass:a,ignoreSelector:h,maskInputOptions:p,maskInputFn:d,sampling:g,userTriggeredOnInput:f}){function B(F){let k=qn(F);const x=F.isTrusted,P=k&&k.tagName;if(k&&P==="OPTION"&&(k=k.parentElement),!k||!P||k0.indexOf(P)<0||Lt(k,n,c,!0)||k.classList.contains(a)||h&&k.matches(h))return;let H=k.value,Z=!1;const L=lf(k)||"";L==="radio"||L==="checkbox"?Z=k.checked:(p[P.toLowerCase()]||p[L])&&(H=nf({element:k,maskInputOptions:p,tagName:P,type:L,value:H,maskInputFn:d})),w(k,f?{text:H,isChecked:Z,userTriggered:x}:{text:H,isChecked:Z});const G=k.name;L==="radio"&&G&&Z&&s.querySelectorAll(`input[type="radio"][name="${G}"]`).forEach(ie=>{if(ie!==k){const me=ie.value;w(ie,f?{text:me,isChecked:!Z,userTriggered:!1}:{text:me,isChecked:!Z})}})}function w(F,k){const x=cC.get(F);if(!x||x.text!==k.text||x.isChecked!==k.isChecked){cC.set(F,k);const P=i.getId(F);$e(r)(Object.assign(Object.assign({},k),{id:P}))}}const v=(g.input==="last"?["change"]:["input","change"]).map(F=>Ot(F,$e(B),s)),_=s.defaultView;if(!_)return()=>{v.forEach(F=>F())};const I=_.Object.getOwnPropertyDescriptor(_.HTMLInputElement.prototype,"value"),D=[[_.HTMLInputElement.prototype,"value"],[_.HTMLInputElement.prototype,"checked"],[_.HTMLSelectElement.prototype,"value"],[_.HTMLTextAreaElement.prototype,"value"],[_.HTMLSelectElement.prototype,"selectedIndex"],[_.HTMLOptionElement.prototype,"selected"]];return I&&I.set&&v.push(...D.map(F=>ru(F[0],F[1],{set(){$e(B)({target:this,isTrusted:!1})}},!1,_))),$e(()=>{v.forEach(F=>F())})}function Qa(r){const s=[];function i(n,c){if(ha("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||ha("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||ha("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||ha("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const h=Array.from(n.parentRule.cssRules).indexOf(n);c.unshift(h)}else if(n.parentStyleSheet){const h=Array.from(n.parentStyleSheet.cssRules).indexOf(n);c.unshift(h)}return c}return i(r,s)}function zr(r,s,i){let n,c;return r?(r.ownerNode?n=s.getId(r.ownerNode):c=i.getId(r),{styleId:c,id:n}):{}}function F0({styleSheetRuleCb:r,mirror:s,stylesheetManager:i},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const c=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(c,{apply:$e((f,B,w)=>{const[C,v]=w,{id:_,styleId:I}=zr(B,s,i.styleMirror);return(_&&_!==-1||I&&I!==-1)&&r({id:_,styleId:I,adds:[{rule:C,index:v}]}),f.apply(B,w)})});const a=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:$e((f,B,w)=>{const[C]=w,{id:v,styleId:_}=zr(B,s,i.styleMirror);return(v&&v!==-1||_&&_!==-1)&&r({id:v,styleId:_,removes:[{index:C}]}),f.apply(B,w)})});let h;n.CSSStyleSheet.prototype.replace&&(h=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(h,{apply:$e((f,B,w)=>{const[C]=w,{id:v,styleId:_}=zr(B,s,i.styleMirror);return(v&&v!==-1||_&&_!==-1)&&r({id:v,styleId:_,replace:C}),f.apply(B,w)})}));let p;n.CSSStyleSheet.prototype.replaceSync&&(p=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(p,{apply:$e((f,B,w)=>{const[C]=w,{id:v,styleId:_}=zr(B,s,i.styleMirror);return(v&&v!==-1||_&&_!==-1)&&r({id:v,styleId:_,replaceSync:C}),f.apply(B,w)})}));const d={};da("CSSGroupingRule")?d.CSSGroupingRule=n.CSSGroupingRule:(da("CSSMediaRule")&&(d.CSSMediaRule=n.CSSMediaRule),da("CSSConditionRule")&&(d.CSSConditionRule=n.CSSConditionRule),da("CSSSupportsRule")&&(d.CSSSupportsRule=n.CSSSupportsRule));const g={};return Object.entries(d).forEach(([f,B])=>{g[f]={insertRule:B.prototype.insertRule,deleteRule:B.prototype.deleteRule},B.prototype.insertRule=new Proxy(g[f].insertRule,{apply:$e((w,C,v)=>{const[_,I]=v,{id:D,styleId:F}=zr(C.parentStyleSheet,s,i.styleMirror);return(D&&D!==-1||F&&F!==-1)&&r({id:D,styleId:F,adds:[{rule:_,index:[...Qa(C),I||0]}]}),w.apply(C,v)})}),B.prototype.deleteRule=new Proxy(g[f].deleteRule,{apply:$e((w,C,v)=>{const[_]=v,{id:I,styleId:D}=zr(C.parentStyleSheet,s,i.styleMirror);return(I&&I!==-1||D&&D!==-1)&&r({id:I,styleId:D,removes:[{index:[...Qa(C),_]}]}),w.apply(C,v)})})}),$e(()=>{n.CSSStyleSheet.prototype.insertRule=c,n.CSSStyleSheet.prototype.deleteRule=a,h&&(n.CSSStyleSheet.prototype.replace=h),p&&(n.CSSStyleSheet.prototype.replaceSync=p),Object.entries(d).forEach(([f,B])=>{B.prototype.insertRule=g[f].insertRule,B.prototype.deleteRule=g[f].deleteRule})})}function jb({mirror:r,stylesheetManager:s},i){var n,c,a;let h=null;i.nodeName==="#document"?h=r.getId(i):h=r.getId(i.host);const p=i.nodeName==="#document"?(n=i.defaultView)===null||n===void 0?void 0:n.Document:(a=(c=i.ownerDocument)===null||c===void 0?void 0:c.defaultView)===null||a===void 0?void 0:a.ShadowRoot,d=p!=null&&p.prototype?Object.getOwnPropertyDescriptor(p==null?void 0:p.prototype,"adoptedStyleSheets"):void 0;return h===null||h===-1||!p||!d?()=>{}:(Object.defineProperty(i,"adoptedStyleSheets",{configurable:d.configurable,enumerable:d.enumerable,get(){var g;return(g=d.get)===null||g===void 0?void 0:g.call(this)},set(g){var f;const B=(f=d.set)===null||f===void 0?void 0:f.call(this,g);if(h!==null&&h!==-1)try{s.adoptStyleSheets(g,h)}catch{}return B}}),$e(()=>{Object.defineProperty(i,"adoptedStyleSheets",{configurable:d.configurable,enumerable:d.enumerable,get:d.get,set:d.set})}))}function U0({styleDeclarationCb:r,mirror:s,ignoreCSSAttributes:i,stylesheetManager:n},{win:c}){const a=c.CSSStyleDeclaration.prototype.setProperty;c.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:$e((p,d,g)=>{var f;const[B,w,C]=g;if(i.has(B))return a.apply(d,[B,w,C]);const{id:v,styleId:_}=zr((f=d.parentRule)===null||f===void 0?void 0:f.parentStyleSheet,s,n.styleMirror);return(v&&v!==-1||_&&_!==-1)&&r({id:v,styleId:_,set:{property:B,value:w,priority:C},index:Qa(d.parentRule)}),p.apply(d,g)})});const h=c.CSSStyleDeclaration.prototype.removeProperty;return c.CSSStyleDeclaration.prototype.removeProperty=new Proxy(h,{apply:$e((p,d,g)=>{var f;const[B]=g;if(i.has(B))return h.apply(d,[B]);const{id:w,styleId:C}=zr((f=d.parentRule)===null||f===void 0?void 0:f.parentStyleSheet,s,n.styleMirror);return(w&&w!==-1||C&&C!==-1)&&r({id:w,styleId:C,remove:{property:B},index:Qa(d.parentRule)}),p.apply(d,g)})}),$e(()=>{c.CSSStyleDeclaration.prototype.setProperty=a,c.CSSStyleDeclaration.prototype.removeProperty=h})}function R0({mediaInteractionCb:r,blockClass:s,blockSelector:i,mirror:n,sampling:c,doc:a}){const h=$e(d=>zn($e(g=>{const f=qn(g);if(!f||Lt(f,s,i,!0))return;const{currentTime:B,volume:w,muted:C,playbackRate:v,loop:_}=f;r({type:d,id:n.getId(f),currentTime:B,volume:w,muted:C,playbackRate:v,loop:_})}),c.media||500)),p=[Ot("play",h(0),a),Ot("pause",h(1),a),Ot("seeked",h(2),a),Ot("volumechange",h(3),a),Ot("ratechange",h(4),a)];return $e(()=>{p.forEach(d=>d())})}function D0({fontCb:r,doc:s}){const i=s.defaultView;if(!i)return()=>{};const n=[],c=new WeakMap,a=i.FontFace;i.FontFace=function(d,g,f){const B=new a(d,g,f);return c.set(B,{family:d,buffer:typeof g!="string",descriptors:f,fontSource:typeof g=="string"?g:JSON.stringify(Array.from(new Uint8Array(g)))}),B};const h=fo(s.fonts,"add",function(p){return function(d){return setTimeout($e(()=>{const g=c.get(d);g&&(r(g),c.delete(d))}),0),p.apply(this,[d])}});return n.push(()=>{i.FontFace=a}),n.push(h),$e(()=>{n.forEach(p=>p())})}function x0(r){const{doc:s,mirror:i,blockClass:n,blockSelector:c,selectionCb:a}=r;let h=!0;const p=$e(()=>{const d=s.getSelection();if(!d||h&&(d!=null&&d.isCollapsed))return;h=d.isCollapsed||!1;const g=[],f=d.rangeCount||0;for(let B=0;B<f;B++){const w=d.getRangeAt(B),{startContainer:C,startOffset:v,endContainer:_,endOffset:I}=w;Lt(C,n,c,!0)||Lt(_,n,c,!0)||g.push({start:i.getId(C),startOffset:v,end:i.getId(_),endOffset:I})}a({ranges:g})});return p(),Ot("selectionchange",p)}function O0({doc:r,customElementCb:s}){const i=r.defaultView;return!i||!i.customElements?()=>{}:fo(i.customElements,"define",function(c){return function(a,h,p){try{s({define:{name:a}})}catch{console.warn(`Custom element callback failed for ${a}`)}return c.apply(this,[a,h,p])}})}function L0(r,s){const{mutationCb:i,mousemoveCb:n,mouseInteractionCb:c,scrollCb:a,viewportResizeCb:h,inputCb:p,mediaInteractionCb:d,styleSheetRuleCb:g,styleDeclarationCb:f,canvasMutationCb:B,fontCb:w,selectionCb:C,customElementCb:v}=r;r.mutationCb=(..._)=>{s.mutation&&s.mutation(..._),i(..._)},r.mousemoveCb=(..._)=>{s.mousemove&&s.mousemove(..._),n(..._)},r.mouseInteractionCb=(..._)=>{s.mouseInteraction&&s.mouseInteraction(..._),c(..._)},r.scrollCb=(..._)=>{s.scroll&&s.scroll(..._),a(..._)},r.viewportResizeCb=(..._)=>{s.viewportResize&&s.viewportResize(..._),h(..._)},r.inputCb=(..._)=>{s.input&&s.input(..._),p(..._)},r.mediaInteractionCb=(..._)=>{s.mediaInteaction&&s.mediaInteaction(..._),d(..._)},r.styleSheetRuleCb=(..._)=>{s.styleSheetRule&&s.styleSheetRule(..._),g(..._)},r.styleDeclarationCb=(..._)=>{s.styleDeclaration&&s.styleDeclaration(..._),f(..._)},r.canvasMutationCb=(..._)=>{s.canvasMutation&&s.canvasMutation(..._),B(..._)},r.fontCb=(..._)=>{s.font&&s.font(..._),w(..._)},r.selectionCb=(..._)=>{s.selection&&s.selection(..._),C(..._)},r.customElementCb=(..._)=>{s.customElement&&s.customElement(..._),v(..._)}}function Q0(r,s={}){const i=r.doc.defaultView;if(!i)return()=>{};L0(r,s);let n;r.recordDOM&&(n=Yb(r,r.doc));const c=y0(r),a=I0(r),h=Jb(r),p=T0(r,{win:i}),d=S0(r),g=R0(r);let f=()=>{},B=()=>{},w=()=>{},C=()=>{};r.recordDOM&&(f=F0(r,{win:i}),B=jb(r,r.doc),w=U0(r,{win:i}),r.collectFonts&&(C=D0(r)));const v=x0(r),_=O0(r),I=[];for(const D of r.plugins)I.push(D.observer(D.callback,i,D.options));return $e(()=>{Ki.forEach(D=>D.reset()),n==null||n.disconnect(),c(),a(),h(),p(),d(),g(),f(),B(),w(),C(),v(),_(),I.forEach(D=>D())})}function ha(r){return typeof window[r]<"u"}function da(r){return!!(typeof window[r]<"u"&&window[r].prototype&&"insertRule"in window[r].prototype&&"deleteRule"in window[r].prototype)}class aC{constructor(s){this.generateIdFn=s,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(s,i,n,c){const a=n||this.getIdToRemoteIdMap(s),h=c||this.getRemoteIdToIdMap(s);let p=a.get(i);return p||(p=this.generateIdFn(),a.set(i,p),h.set(p,i)),p}getIds(s,i){const n=this.getIdToRemoteIdMap(s),c=this.getRemoteIdToIdMap(s);return i.map(a=>this.getId(s,a,n,c))}getRemoteId(s,i,n){const c=n||this.getRemoteIdToIdMap(s);if(typeof i!="number")return i;const a=c.get(i);return a||-1}getRemoteIds(s,i){const n=this.getRemoteIdToIdMap(s);return i.map(c=>this.getRemoteId(s,c,n))}reset(s){if(!s){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(s),this.iframeRemoteIdToIdMap.delete(s)}getIdToRemoteIdMap(s){let i=this.iframeIdToRemoteIdMap.get(s);return i||(i=new Map,this.iframeIdToRemoteIdMap.set(s,i)),i}getRemoteIdToIdMap(s){let i=this.iframeRemoteIdToIdMap.get(s);return i||(i=new Map,this.iframeRemoteIdToIdMap.set(s,i)),i}}class M0{constructor(s){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new aC(Db),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=s.mutationCb,this.wrappedEmit=s.wrappedEmit,this.stylesheetManager=s.stylesheetManager,this.recordCrossOriginIframes=s.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new aC(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=s.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(s){this.iframes.set(s,!0),s.contentWindow&&this.crossOriginIframeMap.set(s.contentWindow,s)}addLoadListener(s){this.loadListener=s}attachIframe(s,i){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(s),nextId:null,node:i}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,s),s.contentDocument&&s.contentDocument.adoptedStyleSheets&&s.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(s.contentDocument.adoptedStyleSheets,this.mirror.getId(s.contentDocument))}handleMessage(s){const i=s;if(i.data.type!=="rrweb"||i.origin!==i.data.origin||!s.source)return;const c=this.crossOriginIframeMap.get(s.source);if(!c)return;const a=this.transformCrossOriginEvent(c,i.data.event);a&&this.wrappedEmit(a,i.data.isCheckout)}transformCrossOriginEvent(s,i){var n;switch(i.type){case _e.FullSnapshot:{this.crossOriginIframeMirror.reset(s),this.crossOriginIframeStyleMirror.reset(s),this.replaceIdOnNode(i.data.node,s);const c=i.data.node.id;return this.crossOriginIframeRootIdMap.set(s,c),this.patchRootIdOnNode(i.data.node,c),{timestamp:i.timestamp,type:_e.IncrementalSnapshot,data:{source:fe.Mutation,adds:[{parentId:this.mirror.getId(s),nextId:null,node:i.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case _e.Meta:case _e.Load:case _e.DomContentLoaded:return!1;case _e.Plugin:return i;case _e.Custom:return this.replaceIds(i.data.payload,s,["id","parentId","previousId","nextId"]),i;case _e.IncrementalSnapshot:switch(i.data.source){case fe.Mutation:return i.data.adds.forEach(c=>{this.replaceIds(c,s,["parentId","nextId","previousId"]),this.replaceIdOnNode(c.node,s);const a=this.crossOriginIframeRootIdMap.get(s);a&&this.patchRootIdOnNode(c.node,a)}),i.data.removes.forEach(c=>{this.replaceIds(c,s,["parentId","id"])}),i.data.attributes.forEach(c=>{this.replaceIds(c,s,["id"])}),i.data.texts.forEach(c=>{this.replaceIds(c,s,["id"])}),i;case fe.Drag:case fe.TouchMove:case fe.MouseMove:return i.data.positions.forEach(c=>{this.replaceIds(c,s,["id"])}),i;case fe.ViewportResize:return!1;case fe.MediaInteraction:case fe.MouseInteraction:case fe.Scroll:case fe.CanvasMutation:case fe.Input:return this.replaceIds(i.data,s,["id"]),i;case fe.StyleSheetRule:case fe.StyleDeclaration:return this.replaceIds(i.data,s,["id"]),this.replaceStyleIds(i.data,s,["styleId"]),i;case fe.Font:return i;case fe.Selection:return i.data.ranges.forEach(c=>{this.replaceIds(c,s,["start","end"])}),i;case fe.AdoptedStyleSheet:return this.replaceIds(i.data,s,["id"]),this.replaceStyleIds(i.data,s,["styleIds"]),(n=i.data.styles)===null||n===void 0||n.forEach(c=>{this.replaceStyleIds(c,s,["styleId"])}),i}}return!1}replace(s,i,n,c){for(const a of c)!Array.isArray(i[a])&&typeof i[a]!="number"||(Array.isArray(i[a])?i[a]=s.getIds(n,i[a]):i[a]=s.getId(n,i[a]));return i}replaceIds(s,i,n){return this.replace(this.crossOriginIframeMirror,s,i,n)}replaceStyleIds(s,i,n){return this.replace(this.crossOriginIframeStyleMirror,s,i,n)}replaceIdOnNode(s,i){this.replaceIds(s,i,["id","rootId"]),"childNodes"in s&&s.childNodes.forEach(n=>{this.replaceIdOnNode(n,i)})}patchRootIdOnNode(s,i){s.type!==st.Document&&!s.rootId&&(s.rootId=i),"childNodes"in s&&s.childNodes.forEach(n=>{this.patchRootIdOnNode(n,i)})}}class N0{constructor(s){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=s.mutationCb,this.scrollCb=s.scrollCb,this.bypassOptions=s.bypassOptions,this.mirror=s.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(s,i){if(!Qn(s)||this.shadowDoms.has(s))return;this.shadowDoms.add(s);const n=Yb(Object.assign(Object.assign({},this.bypassOptions),{doc:i,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),s);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Jb(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:s,mirror:this.mirror}))),setTimeout(()=>{s.adoptedStyleSheets&&s.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(s.adoptedStyleSheets,this.mirror.getId(s.host)),this.restoreHandlers.push(jb({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},s))},0)}observeAttachShadow(s){!s.contentWindow||!s.contentDocument||this.patchAttachShadow(s.contentWindow.Element,s.contentDocument)}patchAttachShadow(s,i){const n=this;this.restoreHandlers.push(fo(s.prototype,"attachShadow",function(c){return function(a){const h=c.call(this,a);return this.shadowRoot&&Wb(this)&&n.addShadowRoot(this.shadowRoot,i),h}}))}reset(){this.restoreHandlers.forEach(s=>{try{s()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function H0(r,s){var i={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&s.indexOf(n)<0&&(i[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(r);c<n.length;c++)s.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(r,n[c])&&(i[n[c]]=r[n[c]]);return i}function P0(r,s,i,n){function c(a){return a instanceof i?a:new i(function(h){h(a)})}return new(i||(i=Promise))(function(a,h){function p(f){try{g(n.next(f))}catch(B){h(B)}}function d(f){try{g(n.throw(f))}catch(B){h(B)}}function g(f){f.done?a(f.value):c(f.value).then(p,d)}g((n=n.apply(r,[])).next())})}var so="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var pa=0;pa<so.length;pa++)G0[so.charCodeAt(pa)]=pa;var V0=function(r){var s=new Uint8Array(r),i,n=s.length,c="";for(i=0;i<n;i+=3)c+=so[s[i]>>2],c+=so[(s[i]&3)<<4|s[i+1]>>4],c+=so[(s[i+1]&15)<<2|s[i+2]>>6],c+=so[s[i+2]&63];return n%3===2?c=c.substring(0,c.length-1)+"=":n%3===1&&(c=c.substring(0,c.length-2)+"=="),c};const uC=new Map;function K0(r,s){let i=uC.get(r);return i||(i=new Map,uC.set(r,i)),i.has(s)||i.set(s,[]),i.get(s)}const qb=(r,s,i)=>{if(!r||!(ev(r,s)||typeof r=="object"))return;const n=r.constructor.name,c=K0(i,n);let a=c.indexOf(r);return a===-1&&(a=c.length,c.push(r)),a};function _a(r,s,i){if(r instanceof Array)return r.map(n=>_a(n,s,i));if(r===null)return r;if(r instanceof Float32Array||r instanceof Float64Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Uint8Array||r instanceof Uint16Array||r instanceof Int16Array||r instanceof Int8Array||r instanceof Uint8ClampedArray)return{rr_type:r.constructor.name,args:[Object.values(r)]};if(r instanceof ArrayBuffer){const n=r.constructor.name,c=V0(r);return{rr_type:n,base64:c}}else{if(r instanceof DataView)return{rr_type:r.constructor.name,args:[_a(r.buffer,s,i),r.byteOffset,r.byteLength]};if(r instanceof HTMLImageElement){const n=r.constructor.name,{src:c}=r;return{rr_type:n,src:c}}else if(r instanceof HTMLCanvasElement){const n="HTMLImageElement",c=r.toDataURL();return{rr_type:n,src:c}}else{if(r instanceof ImageData)return{rr_type:r.constructor.name,args:[_a(r.data,s,i),r.width,r.height]};if(ev(r,s)||typeof r=="object"){const n=r.constructor.name,c=qb(r,s,i);return{rr_type:n,index:c}}}}return r}const Zb=(r,s,i)=>r.map(n=>_a(n,s,i)),ev=(r,s)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(c=>typeof s[c]=="function").find(c=>r instanceof s[c]);function W0(r,s,i,n){const c=[],a=Object.getOwnPropertyNames(s.CanvasRenderingContext2D.prototype);for(const h of a)try{if(typeof s.CanvasRenderingContext2D.prototype[h]!="function")continue;const p=fo(s.CanvasRenderingContext2D.prototype,h,function(d){return function(...g){return Lt(this.canvas,i,n,!0)||setTimeout(()=>{const f=Zb(g,s,this);r(this.canvas,{type:uo["2D"],property:h,args:f})},0),d.apply(this,g)}});c.push(p)}catch{const d=ru(s.CanvasRenderingContext2D.prototype,h,{set(g){r(this.canvas,{type:uo["2D"],property:h,args:[g],setter:!0})}});c.push(d)}return()=>{c.forEach(h=>h())}}function z0(r){return r==="experimental-webgl"?"webgl":r}function hC(r,s,i,n){const c=[];try{const a=fo(r.HTMLCanvasElement.prototype,"getContext",function(h){return function(p,...d){if(!Lt(this,s,i,!0)){const g=z0(p);if("__context"in this||(this.__context=g),n&&["webgl","webgl2"].includes(g))if(d[0]&&typeof d[0]=="object"){const f=d[0];f.preserveDrawingBuffer||(f.preserveDrawingBuffer=!0)}else d.splice(0,1,{preserveDrawingBuffer:!0})}return h.apply(this,[p,...d])}});c.push(a)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{c.forEach(a=>a())}}function dC(r,s,i,n,c,a,h){const p=[],d=Object.getOwnPropertyNames(r);for(const g of d)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(g))try{if(typeof r[g]!="function")continue;const f=fo(r,g,function(B){return function(...w){const C=B.apply(this,w);if(qb(C,h,this),"tagName"in this.canvas&&!Lt(this.canvas,n,c,!0)){const v=Zb(w,h,this),_={type:s,property:g,args:v};i(this.canvas,_)}return C}});p.push(f)}catch{const B=ru(r,g,{set(w){i(this.canvas,{type:s,property:g,args:[w],setter:!0})}});p.push(B)}return p}function X0(r,s,i,n,c){const a=[];return a.push(...dC(s.WebGLRenderingContext.prototype,uo.WebGL,r,i,n,c,s)),typeof s.WebGL2RenderingContext<"u"&&a.push(...dC(s.WebGL2RenderingContext.prototype,uo.WebGL2,r,i,n,c,s)),()=>{a.forEach(h=>h())}}function Y0(r,s){var i=r.toString(),n=i.split(`
`);n.pop(),n.shift();for(var c=n[0].search(/\S/),a=/(['"])__worker_loader_strict__(['"])/g,h=0,p=n.length;h<p;++h)n[h]=n[h].substring(c).replace(a,"$1use strict$2")+`
`;return n}function J0(r,s){var i=Y0(r),n=new Blob(i,{type:"application/javascript"});return URL.createObjectURL(n)}function j0(r,s){var i;return function(c){return i=i||J0(r),new Worker(i,c)}}var q0=j0(function(){(function(){"__worker_loader_strict__";/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function r(g,f,B,w){function C(v){return v instanceof B?v:new B(function(_){_(v)})}return new(B||(B=Promise))(function(v,_){function I(k){try{F(w.next(k))}catch(x){_(x)}}function D(k){try{F(w.throw(k))}catch(x){_(x)}}function F(k){k.done?v(k.value):C(k.value).then(I,D)}F((w=w.apply(g,[])).next())})}for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=typeof Uint8Array>"u"?[]:new Uint8Array(256),n=0;n<s.length;n++)i[s.charCodeAt(n)]=n;var c=function(g){var f=new Uint8Array(g),B,w=f.length,C="";for(B=0;B<w;B+=3)C+=s[f[B]>>2],C+=s[(f[B]&3)<<4|f[B+1]>>4],C+=s[(f[B+1]&15)<<2|f[B+2]>>6],C+=s[f[B+2]&63];return w%3===2?C=C.substring(0,C.length-1)+"=":w%3===1&&(C=C.substring(0,C.length-2)+"=="),C};const a=new Map,h=new Map;function p(g,f,B){return r(this,void 0,void 0,function*(){const w=`${g}-${f}`;if("OffscreenCanvas"in globalThis){if(h.has(w))return h.get(w);const C=new OffscreenCanvas(g,f);C.getContext("2d");const _=yield(yield C.convertToBlob(B)).arrayBuffer(),I=c(_);return h.set(w,I),I}else return""})}const d=self;d.onmessage=function(g){return r(this,void 0,void 0,function*(){if("OffscreenCanvas"in globalThis){const{id:f,bitmap:B,width:w,height:C,dataURLOptions:v}=g.data,_=p(w,C,v),I=new OffscreenCanvas(w,C);I.getContext("2d").drawImage(B,0,0),B.close();const F=yield I.convertToBlob(v),k=F.type,x=yield F.arrayBuffer(),P=c(x);if(!a.has(f)&&(yield _)===P)return a.set(f,P),d.postMessage({id:f});if(a.get(f)===P)return d.postMessage({id:f});d.postMessage({id:f,type:k,base64:P,width:w,height:C}),a.set(f,P)}else return d.postMessage({id:g.data.id})})}})()});class Z0{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(s){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(d,g)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(d)||this.pendingCanvasMutations.set(d,[]),this.pendingCanvasMutations.get(d).push(g)};const{sampling:i="all",win:n,blockClass:c,blockSelector:a,recordCanvas:h,dataURLOptions:p}=s;this.mutationCb=s.mutationCb,this.mirror=s.mirror,h&&i==="all"&&this.initCanvasMutationObserver(n,c,a),h&&typeof i=="number"&&this.initCanvasFPSObserver(i,n,c,a,{dataURLOptions:p})}initCanvasFPSObserver(s,i,n,c,a){const h=hC(i,n,c,!0),p=new Map,d=new q0;d.onmessage=v=>{const{id:_}=v.data;if(p.set(_,!1),!("base64"in v.data))return;const{base64:I,type:D,width:F,height:k}=v.data;this.mutationCb({id:_,type:uo["2D"],commands:[{property:"clearRect",args:[0,0,F,k]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:I}],type:D}]},0,0]}]})};const g=1e3/s;let f=0,B;const w=()=>{const v=[];return i.document.querySelectorAll("canvas").forEach(_=>{Lt(_,n,c,!0)||v.push(_)}),v},C=v=>{if(f&&v-f<g){B=requestAnimationFrame(C);return}f=v,w().forEach(_=>P0(this,void 0,void 0,function*(){var I;const D=this.mirror.getId(_);if(p.get(D)||_.width===0||_.height===0)return;if(p.set(D,!0),["webgl","webgl2"].includes(_.__context)){const k=_.getContext(_.__context);((I=k==null?void 0:k.getContextAttributes())===null||I===void 0?void 0:I.preserveDrawingBuffer)===!1&&k.clear(k.COLOR_BUFFER_BIT)}const F=yield createImageBitmap(_);d.postMessage({id:D,bitmap:F,width:_.width,height:_.height,dataURLOptions:a.dataURLOptions},[F])})),B=requestAnimationFrame(C)};B=requestAnimationFrame(C),this.resetObservers=()=>{h(),cancelAnimationFrame(B)}}initCanvasMutationObserver(s,i,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const c=hC(s,i,n,!1),a=W0(this.processMutation.bind(this),s,i,n),h=X0(this.processMutation.bind(this),s,i,n,this.mirror);this.resetObservers=()=>{c(),a(),h()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const s=i=>{this.rafStamps.latestId=i,requestAnimationFrame(s)};requestAnimationFrame(s)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((s,i)=>{const n=this.mirror.getId(i);this.flushPendingCanvasMutationFor(i,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(s,i){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(s);if(!n||i===-1)return;const c=n.map(h=>H0(h,["type"])),{type:a}=n[0];this.mutationCb({id:i,type:a,commands:c}),this.pendingCanvasMutations.delete(s)}}class eF{constructor(s){this.trackedLinkElements=new WeakSet,this.styleMirror=new B0,this.mutationCb=s.mutationCb,this.adoptedStyleSheetCb=s.adoptedStyleSheetCb}attachLinkElement(s,i){"_cssText"in i.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:i.id,attributes:i.attributes}]}),this.trackLinkElement(s)}trackLinkElement(s){this.trackedLinkElements.has(s)||(this.trackedLinkElements.add(s),this.trackStylesheetInLinkElement(s))}adoptStyleSheets(s,i){if(s.length===0)return;const n={id:i,styleIds:[]},c=[];for(const a of s){let h;this.styleMirror.has(a)?h=this.styleMirror.getId(a):(h=this.styleMirror.add(a),c.push({styleId:h,rules:Array.from(a.rules||CSSRule,(p,d)=>({rule:Fb(p),index:d}))})),n.styleIds.push(h)}c.length>0&&(n.styles=c),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(s){}}class tF{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(s,i){const n=this.nodeMap.get(s);return n&&Array.from(n).some(c=>c!==i)}add(s,i){this.nodeMap.set(s,(this.nodeMap.get(s)||new Set).add(i))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function it(r){return Object.assign(Object.assign({},r),{timestamp:La()})}let je,Ca,fg,Ma=!1;const bA=XS();function Zn(r={}){const{emit:s,checkoutEveryNms:i,checkoutEveryNth:n,blockClass:c="rr-block",blockSelector:a=null,ignoreClass:h="rr-ignore",ignoreSelector:p=null,maskTextClass:d="rr-mask",maskTextSelector:g=null,inlineStylesheet:f=!0,maskAllInputs:B,maskInputOptions:w,slimDOMOptions:C,maskInputFn:v,maskTextFn:_,hooks:I,packFn:D,sampling:F={},dataURLOptions:k={},mousemoveWait:x,recordDOM:P=!0,recordCanvas:H=!1,recordCrossOriginIframes:Z=!1,recordAfter:L=r.recordAfter==="DOMContentLoaded"?r.recordAfter:"load",userTriggeredOnInput:G=!1,collectFonts:ie=!1,inlineImages:me=!1,plugins:te,keepIframeSrcFn:ae=()=>!1,ignoreCSSAttributes:re=new Set([]),errorHandler:Ve}=r;v0(Ve);const ne=Z?window.parent===window:!0;let Ne=!1;if(!ne)try{window.parent.document&&(Ne=!1)}catch{Ne=!0}if(ne&&!s)throw new Error("emit function is required");x!==void 0&&F.mousemove===void 0&&(F.mousemove=x),bA.reset();const kt=B===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:w!==void 0?w:{password:!0},Ke=C===!0||C==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:C==="all",headMetaDescKeywords:C==="all"}:C||{};m0();let mt,Qt=0;const Mt=ee=>{for(const ue of te||[])ue.eventProcessor&&(ee=ue.eventProcessor(ee));return D&&!Ne&&(ee=D(ee)),ee};je=(ee,ue)=>{var Te;if(!((Te=Ki[0])===null||Te===void 0)&&Te.isFrozen()&&ee.type!==_e.FullSnapshot&&!(ee.type===_e.IncrementalSnapshot&&ee.data.source===fe.Mutation)&&Ki.forEach(Oe=>Oe.unfreeze()),ne)s==null||s(Mt(ee),ue);else if(Ne){const Oe={type:"rrweb",event:Mt(ee),origin:window.location.origin,isCheckout:ue};window.parent.postMessage(Oe,"*")}if(ee.type===_e.FullSnapshot)mt=ee,Qt=0;else if(ee.type===_e.IncrementalSnapshot){if(ee.data.source===fe.Mutation&&ee.data.isAttachIframe)return;Qt++;const Oe=n&&Qt>=n,St=i&&ee.timestamp-mt.timestamp>i;(Oe||St)&&Ca(!0)}};const Bt=ee=>{je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.Mutation},ee)}))},Nt=ee=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.Scroll},ee)})),We=ee=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.CanvasMutation},ee)})),nt=ee=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.AdoptedStyleSheet},ee)})),lt=new eF({mutationCb:Bt,adoptedStyleSheetCb:nt}),Ht=new M0({mirror:bA,mutationCb:Bt,stylesheetManager:lt,recordCrossOriginIframes:Z,wrappedEmit:je});for(const ee of te||[])ee.getMirror&&ee.getMirror({nodeMirror:bA,crossOriginIframeMirror:Ht.crossOriginIframeMirror,crossOriginIframeStyleMirror:Ht.crossOriginIframeStyleMirror});const ni=new tF;fg=new Z0({recordCanvas:H,mutationCb:We,win:window,blockClass:c,blockSelector:a,mirror:bA,sampling:F.canvas,dataURLOptions:k});const j=new N0({mutationCb:Bt,scrollCb:Nt,bypassOptions:{blockClass:c,blockSelector:a,maskTextClass:d,maskTextSelector:g,inlineStylesheet:f,maskInputOptions:kt,dataURLOptions:k,maskTextFn:_,maskInputFn:v,recordCanvas:H,inlineImages:me,sampling:F,slimDOMOptions:Ke,iframeManager:Ht,stylesheetManager:lt,canvasManager:fg,keepIframeSrcFn:ae,processedNodeManager:ni},mirror:bA});Ca=(ee=!1)=>{if(!P)return;je(it({type:_e.Meta,data:{href:window.location.href,width:Nb(),height:Mb()}}),ee),lt.reset(),j.init(),Ki.forEach(Te=>Te.lock());const ue=f0(document,{mirror:bA,blockClass:c,blockSelector:a,maskTextClass:d,maskTextSelector:g,inlineStylesheet:f,maskAllInputs:kt,maskTextFn:_,slimDOM:Ke,dataURLOptions:k,recordCanvas:H,inlineImages:me,onSerialize:Te=>{Gb(Te,bA)&&Ht.addIframe(Te),Vb(Te,bA)&&lt.trackLinkElement(Te),zg(Te)&&j.addShadowRoot(Te.shadowRoot,document)},onIframeLoad:(Te,Oe)=>{Ht.attachIframe(Te,Oe),j.observeAttachShadow(Te)},onStylesheetLoad:(Te,Oe)=>{lt.attachLinkElement(Te,Oe)},keepIframeSrcFn:ae});if(!ue)return console.warn("Failed to snapshot the document");je(it({type:_e.FullSnapshot,data:{node:ue,initialOffset:Qb(window)}}),ee),Ki.forEach(Te=>Te.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&lt.adoptStyleSheets(document.adoptedStyleSheets,bA.getId(document))};try{const ee=[],ue=Oe=>{var St;return $e(Q0)({mutationCb:Bt,mousemoveCb:(be,pt)=>je(it({type:_e.IncrementalSnapshot,data:{source:pt,positions:be}})),mouseInteractionCb:be=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.MouseInteraction},be)})),scrollCb:Nt,viewportResizeCb:be=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.ViewportResize},be)})),inputCb:be=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.Input},be)})),mediaInteractionCb:be=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.MediaInteraction},be)})),styleSheetRuleCb:be=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.StyleSheetRule},be)})),styleDeclarationCb:be=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.StyleDeclaration},be)})),canvasMutationCb:We,fontCb:be=>je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.Font},be)})),selectionCb:be=>{je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.Selection},be)}))},customElementCb:be=>{je(it({type:_e.IncrementalSnapshot,data:Object.assign({source:fe.CustomElement},be)}))},blockClass:c,ignoreClass:h,ignoreSelector:p,maskTextClass:d,maskTextSelector:g,maskInputOptions:kt,inlineStylesheet:f,sampling:F,recordDOM:P,recordCanvas:H,inlineImages:me,userTriggeredOnInput:G,collectFonts:ie,doc:Oe,maskInputFn:v,maskTextFn:_,keepIframeSrcFn:ae,blockSelector:a,slimDOMOptions:Ke,dataURLOptions:k,mirror:bA,iframeManager:Ht,stylesheetManager:lt,shadowDomManager:j,processedNodeManager:ni,canvasManager:fg,ignoreCSSAttributes:re,plugins:((St=te==null?void 0:te.filter(be=>be.observer))===null||St===void 0?void 0:St.map(be=>({observer:be.observer,options:be.options,callback:pt=>je(it({type:_e.Plugin,data:{plugin:be.name,payload:pt}}))})))||[]},I)};Ht.addLoadListener(Oe=>{try{ee.push(ue(Oe.contentDocument))}catch(St){console.warn(St)}});const Te=()=>{Ca(),ee.push(ue(document)),Ma=!0};return document.readyState==="interactive"||document.readyState==="complete"?Te():(ee.push(Ot("DOMContentLoaded",()=>{je(it({type:_e.DomContentLoaded,data:{}})),L==="DOMContentLoaded"&&Te()})),ee.push(Ot("load",()=>{je(it({type:_e.Load,data:{}})),L==="load"&&Te()},window))),()=>{ee.forEach(Oe=>Oe()),ni.destroy(),Ma=!1,E0()}}catch(ee){console.warn(ee)}}Zn.addCustomEvent=(r,s)=>{if(!Ma)throw new Error("please add custom event after start recording");je(it({type:_e.Custom,data:{tag:r,payload:s}}))};Zn.freezePage=()=>{Ki.forEach(r=>r.freeze())};Zn.takeFullSnapshot=r=>{if(!Ma)throw new Error("please take full snapshot after start recording");Ca(r)};Zn.mirror=bA;var tv=(r=>(r[r.DomContentLoaded=0]="DomContentLoaded",r[r.Load=1]="Load",r[r.FullSnapshot=2]="FullSnapshot",r[r.IncrementalSnapshot=3]="IncrementalSnapshot",r[r.Meta=4]="Meta",r[r.Custom=5]="Custom",r[r.Plugin=6]="Plugin",r))(tv||{}),KA=(r=>(r[r.Mutation=0]="Mutation",r[r.MouseMove=1]="MouseMove",r[r.MouseInteraction=2]="MouseInteraction",r[r.Scroll=3]="Scroll",r[r.ViewportResize=4]="ViewportResize",r[r.Input=5]="Input",r[r.TouchMove=6]="TouchMove",r[r.MediaInteraction=7]="MediaInteraction",r[r.StyleSheetRule=8]="StyleSheetRule",r[r.CanvasMutation=9]="CanvasMutation",r[r.Font=10]="Font",r[r.Log=11]="Log",r[r.Drag=12]="Drag",r[r.StyleDeclaration=13]="StyleDeclaration",r[r.Selection=14]="Selection",r[r.AdoptedStyleSheet=15]="AdoptedStyleSheet",r[r.CustomElement=16]="CustomElement",r))(KA||{}),zA={DEBUG:!1,LIB_VERSION:"2.58.0"},Ae;if(typeof window>"u"){var pC={hostname:""};Ae={navigator:{userAgent:"",onLine:!0},document:{location:pC,referrer:""},screen:{width:0,height:0},location:pC}}else Ae=window;var gC=Ae.setImmediate,Ai,Yg,Jg,Av=Object.prototype.toString,AF=typeof gC<"u"?function(s){return gC(s)}:setTimeout;try{Object.defineProperty({},"x",{}),Ai=function(s,i,n,c){return Object.defineProperty(s,i,{value:n,writable:!0,configurable:c!==!1})}}catch{Ai=function(i,n,c){return i[n]=c,i}}Jg=function(){var s,i,n;function c(a,h){this.fn=a,this.self=h,this.next=void 0}return{add:function(h,p){n=new c(h,p),i?i.next=n:s=n,i=n,n=void 0},drain:function(){var h=s;for(s=i=Yg=void 0;h;)h.fn.call(h.self),h=h.next}}}();function Na(r,s){Jg.add(r,s),Yg||(Yg=AF(Jg.drain))}function rv(r){var s,i=typeof r;return r!==null&&(i==="object"||i==="function")&&(s=r.then),typeof s=="function"?s:!1}function af(){for(var r=0;r<this.chain.length;r++)rF(this,this.state===1?this.chain[r].success:this.chain[r].failure,this.chain[r]);this.chain.length=0}function rF(r,s,i){var n,c;try{s===!1?i.reject(r.msg):(s===!0?n=r.msg:n=s.call(void 0,r.msg),n===i.promise?i.reject(TypeError("Promise-chain cycle")):(c=rv(n))?c.call(n,i.resolve,i.reject):i.resolve(n))}catch(a){i.reject(a)}}function iv(r){var s,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(s=rv(r))?Na(function(){var n=new fC(i);try{s.call(r,function(){iv.apply(n,arguments)},function(){Nn.apply(n,arguments)})}catch(c){Nn.call(n,c)}}):(i.msg=r,i.state=1,i.chain.length>0&&Na(af,i))}catch(n){Nn.call(new fC(i),n)}}}function Nn(r){var s=this;s.triggered||(s.triggered=!0,s.def&&(s=s.def),s.msg=r,s.state=2,s.chain.length>0&&Na(af,s))}function sv(r,s,i,n){for(var c=0;c<s.length;c++)(function(h){r.resolve(s[h]).then(function(d){i(h,d)},n)})(c)}function fC(r){this.def=r,this.triggered=!1}function iF(r){this.promise=r,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function ii(r){if(typeof r!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var s=new iF(this);this.then=function(n,c){var a={success:typeof n=="function"?n:!0,failure:typeof c=="function"?c:!1};return a.promise=new this.constructor(function(p,d){if(typeof p!="function"||typeof d!="function")throw TypeError("Not a function");a.resolve=p,a.reject=d}),s.chain.push(a),s.state!==0&&Na(af,s),a.promise},this.catch=function(n){return this.then(void 0,n)};try{r.call(void 0,function(n){iv.call(s,n)},function(n){Nn.call(s,n)})}catch(i){Nn.call(s,i)}}var ov=Ai({},"constructor",ii,!1);ii.prototype=ov;Ai(ov,"__NPO__",0,!1);Ai(ii,"resolve",function(s){var i=this;return s&&typeof s=="object"&&s.__NPO__===1?s:new i(function(c,a){if(typeof c!="function"||typeof a!="function")throw TypeError("Not a function");c(s)})});Ai(ii,"reject",function(s){return new this(function(n,c){if(typeof n!="function"||typeof c!="function")throw TypeError("Not a function");c(s)})});Ai(ii,"all",function(s){var i=this;return Av.call(s)!=="[object Array]"?i.reject(TypeError("Not an array")):s.length===0?i.resolve([]):new i(function(c,a){if(typeof c!="function"||typeof a!="function")throw TypeError("Not a function");var h=s.length,p=Array(h),d=0;sv(i,s,function(f,B){p[f]=B,++d===h&&c(p)},a)})});Ai(ii,"race",function(s){var i=this;return Av.call(s)!=="[object Array]"?i.reject(TypeError("Not an array")):new i(function(c,a){if(typeof c!="function"||typeof a!="function")throw TypeError("Not a function");sv(i,s,function(p,d){c(d)},a)})});var et;typeof Promise<"u"&&Promise.toString().indexOf("[native code]")!==-1?et=Promise:et=ii;var Hn=24*60*60*1e3,$g=8*1e3,iu=Array.prototype,sF=Function.prototype,nv=Object.prototype,jr=iu.slice,el=nv.toString,su=nv.hasOwnProperty,rt=Ae.console,qr=Ae.navigator,xe=Ae.document,ga=Ae.opera,Ha=Ae.screen,WA=qr.userAgent,mg=sF.bind,$C=iu.forEach,mC=iu.indexOf,BC=iu.map,oF=Array.isArray,jg={},$={trim:function(r){return r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},ye={log:function(){if(zA.DEBUG&&!$.isUndefined(rt)&&rt)try{rt.log.apply(rt,arguments)}catch{$.each(arguments,function(s){rt.log(s)})}},warn:function(){if(zA.DEBUG&&!$.isUndefined(rt)&&rt){var r=["Mixpanel warning:"].concat($.toArray(arguments));try{rt.warn.apply(rt,r)}catch{$.each(r,function(i){rt.warn(i)})}}},error:function(){if(zA.DEBUG&&!$.isUndefined(rt)&&rt){var r=["Mixpanel error:"].concat($.toArray(arguments));try{rt.error.apply(rt,r)}catch{$.each(r,function(i){rt.error(i)})}}},critical:function(){if(!$.isUndefined(rt)&&rt){var r=["Mixpanel error:"].concat($.toArray(arguments));try{rt.error.apply(rt,r)}catch{$.each(r,function(i){rt.error(i)})}}}},Bg=function(r,s){return function(){return arguments[0]="["+s+"] "+arguments[0],r.apply(ye,arguments)}},tl=function(r){return{log:Bg(ye.log,r),error:Bg(ye.error,r),critical:Bg(ye.critical,r)}};$.bind=function(r,s){var i,n;if(mg&&r.bind===mg)return mg.apply(r,jr.call(arguments,1));if(!$.isFunction(r))throw new TypeError;return i=jr.call(arguments,2),n=function(){if(!(this instanceof n))return r.apply(s,i.concat(jr.call(arguments)));var c={};c.prototype=r.prototype;var a=new c;c.prototype=null;var h=r.apply(a,i.concat(jr.call(arguments)));return Object(h)===h?h:a},n};$.each=function(r,s,i){if(r!=null){if($C&&r.forEach===$C)r.forEach(s,i);else if(r.length===+r.length){for(var n=0,c=r.length;n<c;n++)if(n in r&&s.call(i,r[n],n,r)===jg)return}else for(var a in r)if(su.call(r,a)&&s.call(i,r[a],a,r)===jg)return}};$.extend=function(r){return $.each(jr.call(arguments,1),function(s){for(var i in s)s[i]!==void 0&&(r[i]=s[i])}),r};$.isArray=oF||function(r){return el.call(r)==="[object Array]"};$.isFunction=function(r){try{return/^\s*\bfunction\b/.test(r)}catch{return!1}};$.isArguments=function(r){return!!(r&&su.call(r,"callee"))};$.toArray=function(r){return r?r.toArray?r.toArray():$.isArray(r)||$.isArguments(r)?jr.call(r):$.values(r):[]};$.map=function(r,s,i){if(BC&&r.map===BC)return r.map(s,i);var n=[];return $.each(r,function(c){n.push(s.call(i,c))}),n};$.keys=function(r){var s=[];return r===null||$.each(r,function(i,n){s[s.length]=n}),s};$.values=function(r){var s=[];return r===null||$.each(r,function(i){s[s.length]=i}),s};$.include=function(r,s){var i=!1;return r===null?i:mC&&r.indexOf===mC?r.indexOf(s)!=-1:($.each(r,function(n){if(i||(i=n===s))return jg}),i)};$.includes=function(r,s){return r.indexOf(s)!==-1};$.inherit=function(r,s){return r.prototype=new s,r.prototype.constructor=r,r.superclass=s.prototype,r};$.isObject=function(r){return r===Object(r)&&!$.isArray(r)};$.isEmptyObject=function(r){if($.isObject(r)){for(var s in r)if(su.call(r,s))return!1;return!0}return!1};$.isUndefined=function(r){return r===void 0};$.isString=function(r){return el.call(r)=="[object String]"};$.isDate=function(r){return el.call(r)=="[object Date]"};$.isNumber=function(r){return el.call(r)=="[object Number]"};$.isElement=function(r){return!!(r&&r.nodeType===1)};$.encodeDates=function(r){return $.each(r,function(s,i){$.isDate(s)?r[i]=$.formatDate(s):$.isObject(s)&&(r[i]=$.encodeDates(s))}),r};$.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()};$.formatDate=function(r){function s(i){return i<10?"0"+i:i}return r.getUTCFullYear()+"-"+s(r.getUTCMonth()+1)+"-"+s(r.getUTCDate())+"T"+s(r.getUTCHours())+":"+s(r.getUTCMinutes())+":"+s(r.getUTCSeconds())};$.strip_empty_properties=function(r){var s={};return $.each(r,function(i,n){$.isString(i)&&i.length>0&&(s[n]=i)}),s};$.truncate=function(r,s){var i;return typeof r=="string"?i=r.slice(0,s):$.isArray(r)?(i=[],$.each(r,function(n){i.push($.truncate(n,s))})):$.isObject(r)?(i={},$.each(r,function(n,c){i[c]=$.truncate(n,s)})):i=r,i};$.JSONEncode=function(){return function(r){var s=r,i=function(c){var a=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return a.lastIndex=0,a.test(c)?'"'+c.replace(a,function(p){var d=h[p];return typeof d=="string"?d:"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'},n=function(c,a){var h="",p="    ",d=0,g="",f="",B=0,w=h,C=[],v=a[c];switch(v&&typeof v=="object"&&typeof v.toJSON=="function"&&(v=v.toJSON(c)),typeof v){case"string":return i(v);case"number":return isFinite(v)?String(v):"null";case"boolean":case"null":return String(v);case"object":if(!v)return"null";if(h+=p,C=[],el.apply(v)==="[object Array]"){for(B=v.length,d=0;d<B;d+=1)C[d]=n(d,v)||"null";return f=C.length===0?"[]":h?`[
`+h+C.join(`,
`+h)+`
`+w+"]":"["+C.join(",")+"]",h=w,f}for(g in v)su.call(v,g)&&(f=n(g,v),f&&C.push(i(g)+(h?": ":":")+f));return f=C.length===0?"{}":h?"{"+C.join(",")+w+"}":"{"+C.join(",")+"}",h=w,f}};return n("",{"":s})}}();$.JSONDecode=function(){var r,s,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},n,c=function(C){var v=new SyntaxError(C);throw v.at=r,v.text=n,v},a=function(C){return C&&C!==s&&c("Expected '"+C+"' instead of '"+s+"'"),s=n.charAt(r),r+=1,s},h=function(){var C,v="";for(s==="-"&&(v="-",a("-"));s>="0"&&s<="9";)v+=s,a();if(s===".")for(v+=".";a()&&s>="0"&&s<="9";)v+=s;if(s==="e"||s==="E")for(v+=s,a(),(s==="-"||s==="+")&&(v+=s,a());s>="0"&&s<="9";)v+=s,a();if(C=+v,!isFinite(C))c("Bad number");else return C},p=function(){var C,v,_="",I;if(s==='"')for(;a();){if(s==='"')return a(),_;if(s==="\\")if(a(),s==="u"){for(I=0,v=0;v<4&&(C=parseInt(a(),16),!!isFinite(C));v+=1)I=I*16+C;_+=String.fromCharCode(I)}else if(typeof i[s]=="string")_+=i[s];else break;else _+=s}c("Bad string")},d=function(){for(;s&&s<=" ";)a()},g=function(){switch(s){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}c('Unexpected "'+s+'"')},f,B=function(){var C=[];if(s==="["){if(a("["),d(),s==="]")return a("]"),C;for(;s;){if(C.push(f()),d(),s==="]")return a("]"),C;a(","),d()}}c("Bad array")},w=function(){var C,v={};if(s==="{"){if(a("{"),d(),s==="}")return a("}"),v;for(;s;){if(C=p(),d(),a(":"),Object.hasOwnProperty.call(v,C)&&c('Duplicate key "'+C+'"'),v[C]=f(),d(),s==="}")return a("}"),v;a(","),d()}}c("Bad object")};return f=function(){switch(d(),s){case"{":return w();case"[":return B();case'"':return p();case"-":return h();default:return s>="0"&&s<="9"?h():g()}},function(C){var v;return n=C,r=0,s=" ",v=f(),d(),s&&c("Syntax error"),v}}();$.base64Encode=function(r){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,n,c,a,h,p,d,g,f=0,B=0,w="",C=[];if(!r)return r;r=$.utf8Encode(r);do i=r.charCodeAt(f++),n=r.charCodeAt(f++),c=r.charCodeAt(f++),g=i<<16|n<<8|c,a=g>>18&63,h=g>>12&63,p=g>>6&63,d=g&63,C[B++]=s.charAt(a)+s.charAt(h)+s.charAt(p)+s.charAt(d);while(f<r.length);switch(w=C.join(""),r.length%3){case 1:w=w.slice(0,-2)+"==";break;case 2:w=w.slice(0,-1)+"=";break}return w};$.utf8Encode=function(r){r=(r+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var s="",i,n,c=0,a;for(i=n=0,c=r.length,a=0;a<c;a++){var h=r.charCodeAt(a),p=null;h<128?n++:h>127&&h<2048?p=String.fromCharCode(h>>6|192,h&63|128):p=String.fromCharCode(h>>12|224,h>>6&63|128,h&63|128),p!==null&&(n>i&&(s+=r.substring(i,n)),s+=p,i=n=a+1)}return n>i&&(s+=r.substring(i,r.length)),s};$.UUID=function(){var r=function(){var n=1*new Date,c;if(Ae.performance&&Ae.performance.now)c=Ae.performance.now();else for(c=0;n==1*new Date;)c++;return n.toString(16)+Math.floor(c).toString(16)},s=function(){return Math.random().toString(16).replace(".","")},i=function(){var n=WA,c,a,h=[],p=0;function d(g,f){var B,w=0;for(B=0;B<f.length;B++)w|=h[B]<<B*8;return g^w}for(c=0;c<n.length;c++)a=n.charCodeAt(c),h.unshift(a&255),h.length>=4&&(p=d(p,h),h=[]);return h.length>0&&(p=d(p,h)),p.toString(16)};return function(){var n=(Ha.height*Ha.width).toString(16);return r()+"-"+s()+"-"+i()+"-"+n+"-"+r()}}();var wC=["ahrefsbot","ahrefssiteaudit","baiduspider","bingbot","bingpreview","chrome-lighthouse","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];$.isBlockedUA=function(r){var s;for(r=r.toLowerCase(),s=0;s<wC.length;s++)if(r.indexOf(wC[s])!==-1)return!0;return!1};$.HTTPBuildQuery=function(r,s){var i,n,c=[];return $.isUndefined(s)&&(s="&"),$.each(r,function(a,h){i=encodeURIComponent(a.toString()),n=encodeURIComponent(h),c[c.length]=n+"="+i}),c.join(s)};$.getQueryParam=function(r,s){s=s.replace(/[[]/g,"\\[").replace(/[\]]/g,"\\]");var i="[\\?&]"+s+"=([^&#]*)",n=new RegExp(i),c=n.exec(r);if(c===null||c&&typeof c[1]!="string"&&c[1].length)return"";var a=c[1];try{a=decodeURIComponent(a)}catch{ye.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")};$.cookie={get:function(r){for(var s=r+"=",i=xe.cookie.split(";"),n=0;n<i.length;n++){for(var c=i[n];c.charAt(0)==" ";)c=c.substring(1,c.length);if(c.indexOf(s)===0)return decodeURIComponent(c.substring(s.length,c.length))}return null},parse:function(r){var s;try{s=$.JSONDecode($.cookie.get(r))||{}}catch{}return s},set_seconds:function(r,s,i,n,c,a,h){var p="",d="",g="";if(h)p="; domain="+h;else if(n){var f=_C(xe.location.hostname);p=f?"; domain=."+f:""}if(i){var B=new Date;B.setTime(B.getTime()+i*1e3),d="; expires="+B.toGMTString()}a&&(c=!0,g="; SameSite=None"),c&&(g+="; secure"),xe.cookie=r+"="+encodeURIComponent(s)+d+"; path=/"+p+g},set:function(r,s,i,n,c,a,h){var p="",d="",g="";if(h)p="; domain="+h;else if(n){var f=_C(xe.location.hostname);p=f?"; domain=."+f:""}if(i){var B=new Date;B.setTime(B.getTime()+i*24*60*60*1e3),d="; expires="+B.toGMTString()}a&&(c=!0,g="; SameSite=None"),c&&(g+="; secure");var w=r+"="+encodeURIComponent(s)+d+"; path=/"+p+g;return xe.cookie=w,w},remove:function(r,s,i){$.cookie.set(r,"",-1,s,!1,!1,i)}};var wg=null,Pa=function(r,s){if(wg!==null&&!s)return wg;var i=!0;try{r=r||Ae.localStorage;var n="__mplss_"+uf(8),c="xyz";r.setItem(n,c),r.getItem(n)!==c&&(i=!1),r.removeItem(n)}catch{i=!1}return wg=i,i};$.localStorage={is_supported:function(r){var s=Pa(null,r);return s||ye.error("localStorage unsupported; falling back to cookie store"),s},error:function(r){ye.error("localStorage error: "+r)},get:function(r){try{return Ae.localStorage.getItem(r)}catch(s){$.localStorage.error(s)}return null},parse:function(r){try{return $.JSONDecode($.localStorage.get(r))||{}}catch{}return null},set:function(r,s){try{Ae.localStorage.setItem(r,s)}catch(i){$.localStorage.error(i)}},remove:function(r){try{Ae.localStorage.removeItem(r)}catch(s){$.localStorage.error(s)}}};$.register_event=function(){var r=function(n,c,a,h,p){if(!n){ye.error("No valid element provided to register_event");return}if(n.addEventListener&&!h)n.addEventListener(c,a,!!p);else{var d="on"+c,g=n[d];n[d]=s(n,a,g)}};function s(n,c,a){var h=function(p){if(p=p||i(Ae.event),!!p){var d=!0,g,f;return $.isFunction(a)&&(g=a(p)),f=c.call(n,p),(g===!1||f===!1)&&(d=!1),d}};return h}function i(n){return n&&(n.preventDefault=i.preventDefault,n.stopPropagation=i.stopPropagation),n}return i.preventDefault=function(){this.returnValue=!1},i.stopPropagation=function(){this.cancelBubble=!0},r}();var nF=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');$.dom_query=function(){function r(c){return c.all?c.all:c.getElementsByTagName("*")}var s=/[\t\r\n]/g;function i(c,a){var h=" "+a+" ";return(" "+c.className+" ").replace(s," ").indexOf(h)>=0}function n(c){if(!xe.getElementsByTagName)return[];var a=c.split(" "),h,p,d,g,f,B,w,C,v,_,I=[xe];for(B=0;B<a.length;B++){if(h=a[B].replace(/^\s+/,"").replace(/\s+$/,""),h.indexOf("#")>-1){p=h.split("#"),d=p[0];var D=p[1],F=xe.getElementById(D);if(!F||d&&F.nodeName.toLowerCase()!=d)return[];I=[F];continue}if(h.indexOf(".")>-1){p=h.split("."),d=p[0];var k=p[1];for(d||(d="*"),g=[],f=0,w=0;w<I.length;w++)for(d=="*"?v=r(I[w]):v=I[w].getElementsByTagName(d),C=0;C<v.length;C++)g[f++]=v[C];for(I=[],_=0,w=0;w<g.length;w++)g[w].className&&$.isString(g[w].className)&&i(g[w],k)&&(I[_++]=g[w]);continue}var x=h.match(nF);if(x){d=x[1];var P=x[2],H=x[3],Z=x[4];for(d||(d="*"),g=[],f=0,w=0;w<I.length;w++)for(d=="*"?v=r(I[w]):v=I[w].getElementsByTagName(d),C=0;C<v.length;C++)g[f++]=v[C];I=[],_=0;var L;switch(H){case"=":L=function(G){return G.getAttribute(P)==Z};break;case"~":L=function(G){return G.getAttribute(P).match(new RegExp("\\b"+Z+"\\b"))};break;case"|":L=function(G){return G.getAttribute(P).match(new RegExp("^"+Z+"-?"))};break;case"^":L=function(G){return G.getAttribute(P).indexOf(Z)===0};break;case"$":L=function(G){return G.getAttribute(P).lastIndexOf(Z)==G.getAttribute(P).length-Z.length};break;case"*":L=function(G){return G.getAttribute(P).indexOf(Z)>-1};break;default:L=function(G){return G.getAttribute(P)}}for(I=[],_=0,w=0;w<g.length;w++)L(g[w])&&(I[_++]=g[w]);continue}for(d=h,g=[],f=0,w=0;w<I.length;w++)for(v=I[w].getElementsByTagName(d),C=0;C<v.length;C++)g[f++]=v[C];I=g}return I}return function(c){return $.isElement(c)?[c]:$.isObject(c)&&!$.isUndefined(c.length)?c:n.call(this,c)}}();var lF=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","utm_id","utm_source_platform","utm_campaign_id","utm_creative_format","utm_marketing_tactic"],cF=["dclid","fbclid","gclid","ko_click_id","li_fat_id","msclkid","sccid","ttclid","twclid","wbraid"];$.info={campaignParams:function(r){var s="",i={};return $.each(lF,function(n){s=$.getQueryParam(xe.URL,n),s.length?i[n]=s:r!==void 0&&(i[n]=r)}),i},clickParams:function(){var r="",s={};return $.each(cF,function(i){r=$.getQueryParam(xe.URL,i),r.length&&(s[i]=r)}),s},marketingParams:function(){return $.extend($.info.campaignParams(),$.info.clickParams())},searchEngine:function(r){return r.search("https?://(.*)google.([^/?]*)")===0?"google":r.search("https?://(.*)bing.com")===0?"bing":r.search("https?://(.*)yahoo.com")===0?"yahoo":r.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(r){var s=$.info.searchEngine(r),i=s!="yahoo"?"q":"p",n={};if(s!==null){n.$search_engine=s;var c=$.getQueryParam(r,i);c.length&&(n.mp_keyword=c)}return n},browser:function(r,s,i){return s=s||"",i||$.includes(r," OPR/")?$.includes(r,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(r)?"BlackBerry":$.includes(r,"IEMobile")||$.includes(r,"WPDesktop")?"Internet Explorer Mobile":$.includes(r,"SamsungBrowser/")?"Samsung Internet":$.includes(r,"Edge")||$.includes(r,"Edg/")?"Microsoft Edge":$.includes(r,"FBIOS")?"Facebook Mobile":$.includes(r,"Chrome")?"Chrome":$.includes(r,"CriOS")?"Chrome iOS":$.includes(r,"UCWEB")||$.includes(r,"UCBrowser")?"UC Browser":$.includes(r,"FxiOS")?"Firefox iOS":$.includes(s,"Apple")?$.includes(r,"Mobile")?"Mobile Safari":"Safari":$.includes(r,"Android")?"Android Mobile":$.includes(r,"Konqueror")?"Konqueror":$.includes(r,"Firefox")?"Firefox":$.includes(r,"MSIE")||$.includes(r,"Trident/")?"Internet Explorer":$.includes(r,"Gecko")?"Mozilla":""},browserVersion:function(r,s,i){var n=$.info.browser(r,s,i),c={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},a=c[n];if(a===void 0)return null;var h=r.match(a);return h?parseFloat(h[h.length-2]):null},os:function(){var r=WA;return/Windows/i.test(r)?/Phone/.test(r)||/WPDesktop/.test(r)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(r)?"iOS":/Android/.test(r)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(r)?"BlackBerry":/Mac/i.test(r)?"Mac OS X":/Linux/.test(r)?"Linux":/CrOS/.test(r)?"Chrome OS":""},device:function(r){return/Windows Phone/i.test(r)||/WPDesktop/.test(r)?"Windows Phone":/iPad/.test(r)?"iPad":/iPod/.test(r)?"iPod Touch":/iPhone/.test(r)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(r)?"BlackBerry":/Android/.test(r)?"Android":""},referringDomain:function(r){var s=r.split("/");return s.length>=3?s[2]:""},currentUrl:function(){return Ae.location.href},properties:function(r){return typeof r!="object"&&(r={}),$.extend($.strip_empty_properties({$os:$.info.os(),$browser:$.info.browser(WA,qr.vendor,ga),$referrer:xe.referrer,$referring_domain:$.info.referringDomain(xe.referrer),$device:$.info.device(WA)}),{$current_url:$.info.currentUrl(),$browser_version:$.info.browserVersion(WA,qr.vendor,ga),$screen_height:Ha.height,$screen_width:Ha.width,mp_lib:"web",$lib_version:zA.LIB_VERSION,$insert_id:uf(),time:$.timestamp()/1e3},$.strip_empty_properties(r))},people_properties:function(){return $.extend($.strip_empty_properties({$os:$.info.os(),$browser:$.info.browser(WA,qr.vendor,ga)}),{$browser_version:$.info.browserVersion(WA,qr.vendor,ga)})},mpPageViewProperties:function(){return $.strip_empty_properties({current_page_title:xe.title,current_domain:Ae.location.hostname,current_url_path:Ae.location.pathname,current_url_protocol:Ae.location.protocol,current_url_search:Ae.location.search})}};var uf=function(r){var s=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return r?s.substring(0,r):s},aF=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,uF=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,_C=function(r){var s=uF,i=r.split("."),n=i[i.length-1];(n.length>4||n==="com"||n==="org")&&(s=aF);var c=r.match(s);return c?c[0]:""},hF=function(){var r=Ae.navigator.onLine;return $.isUndefined(r)||r},Ga=null,Va=null;typeof JSON<"u"&&(Ga=JSON.stringify,Va=JSON.parse);Ga=Ga||$.JSONEncode;Va=Va||$.JSONDecode;$.toArray=$.toArray;$.isObject=$.isObject;$.JSONEncode=$.JSONEncode;$.JSONDecode=$.JSONDecode;$.isBlockedUA=$.isBlockedUA;$.isEmptyObject=$.isEmptyObject;$.info=$.info;$.info.device=$.info.device;$.info.browser=$.info.browser;$.info.browserVersion=$.info.browserVersion;$.info.properties=$.info.properties;$.NPO=ii;var dF="__mp_opt_in_out_";function pF(r,s){av(!0,r,s)}function gF(r,s){av(!1,r,s)}function fF(r,s){return cv(r,s)==="1"}function lv(r,s){if(mF(s))return ye.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var i=cv(r,s)==="0";return i&&ye.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),i}function si(r){return pf(r,function(s){return this.get_config(s)})}function oi(r){return pf(r,function(s){return this._get_config(s)})}function $o(r){return pf(r,function(s){return this._get_config(s)})}function $F(r,s){s=s||{},hf(s).remove(df(r,s),!!s.crossSubdomainCookie,s.cookieDomain)}function hf(r){return r=r||{},r.persistenceType==="localStorage"?$.localStorage:$.cookie}function df(r,s){return s=s||{},(s.persistencePrefix||dF)+r}function cv(r,s){return hf(s).get(df(r,s))}function mF(r){if(r&&r.ignoreDnt)return!1;var s=r&&r.window||Ae,i=s.navigator||{},n=!1;return $.each([i.doNotTrack,i.msDoNotTrack,s.doNotTrack],function(c){$.includes([!0,1,"1","yes"],c)&&(n=!0)}),n}function av(r,s,i){if(!$.isString(s)||!s.length){ye.error("gdpr."+(r?"optIn":"optOut")+" called with an invalid token");return}i=i||{},hf(i).set(df(s,i),r?1:0,$.isNumber(i.cookieExpiration)?i.cookieExpiration:null,!!i.crossSubdomainCookie,!!i.secureCookie,!!i.crossSiteCookie,i.cookieDomain),i.track&&r&&i.track(i.trackEventName||"$opt_in",i.trackProperties,{send_immediately:!0})}function pf(r,s){return function(){var i=!1;try{var n=s.call(this,"token"),c=s.call(this,"ignore_dnt"),a=s.call(this,"opt_out_tracking_persistence_type"),h=s.call(this,"opt_out_tracking_cookie_prefix"),p=s.call(this,"window");n&&(i=lv(n,{ignoreDnt:c,persistenceType:a,persistencePrefix:h,window:p}))}catch(g){ye.error("Unexpected error when checking tracking opt-out status: "+g)}if(!i)return r.apply(this,arguments);var d=arguments[arguments.length-1];typeof d=="function"&&d(0)}}var BF=tl("lock"),uv=function(r,s){s=s||{},this.storageKey=r,this.storage=s.storage||window.localStorage,this.pollIntervalMS=s.pollIntervalMS||100,this.timeoutMS=s.timeoutMS||2e3,this.promiseImpl=s.promiseImpl||et};uv.prototype.withLock=function(r,s){var i=this.promiseImpl;return new i($.bind(function(n,c){var a=s||new Date().getTime()+"|"+Math.random(),h=new Date().getTime(),p=this.storageKey,d=this.pollIntervalMS,g=this.timeoutMS,f=this.storage,B=p+":X",w=p+":Y",C=p+":Z",v=function(k){if(new Date().getTime()-h>g){BF.error("Timeout waiting for mutex on "+p+"; clearing lock. ["+a+"]"),f.removeItem(C),f.removeItem(w),D();return}setTimeout(function(){try{k()}catch(x){c(x)}},d*(Math.random()+.1))},_=function(k,x){k()?x():v(function(){_(k,x)})},I=function(){var k=f.getItem(w);return k&&k!==a?!1:(f.setItem(w,a),f.getItem(w)===a?!0:(Pa(f,!0)||c(new Error("localStorage support dropped while acquiring lock")),!1))},D=function(){f.setItem(B,a),_(I,function(){if(f.getItem(B)===a){F();return}v(function(){if(f.getItem(w)!==a){D();return}_(function(){return!f.getItem(C)},F)})})},F=function(){f.setItem(C,"1");var k=function(){f.removeItem(C),f.getItem(w)===a&&f.removeItem(w),f.getItem(B)===a&&f.removeItem(B)};r().then(function(x){k(),n(x)}).catch(function(x){k(),c(x)})};try{if(Pa(f,!0))D();else throw new Error("localStorage support check failed")}catch(k){c(k)}},this))};var Al=function(r){this.storage=r||localStorage};Al.prototype.init=function(){return et.resolve()};Al.prototype.setItem=function(r,s){return new et($.bind(function(i,n){try{this.storage.setItem(r,s)}catch(c){n(c)}i()},this))};Al.prototype.getItem=function(r){return new et($.bind(function(s,i){var n;try{n=this.storage.getItem(r)}catch(c){i(c)}s(n)},this))};Al.prototype.removeItem=function(r){return new et($.bind(function(s,i){try{this.storage.removeItem(r)}catch(n){i(n)}s()},this))};var CC=tl("batch"),Er=function(r,s){s=s||{},this.storageKey=r,this.usePersistence=s.usePersistence,this.usePersistence&&(this.queueStorage=s.queueStorage||new Al,this.lock=new uv(r,{storage:s.sharedLockStorage||window.localStorage}),this.queueStorage.init()),this.reportError=s.errorReporter||$.bind(CC.error,CC),this.pid=s.pid||null,this.memQueue=[],this.initialized=!1};Er.prototype.ensureInit=function(){return this.initialized?et.resolve():this.queueStorage.init().then($.bind(function(){this.initialized=!0},this)).catch($.bind(function(r){this.reportError("Error initializing queue persistence. Disabling persistence",r),this.initialized=!0,this.usePersistence=!1},this))};Er.prototype.enqueue=function(r,s){var i={id:uf(),flushAfter:new Date().getTime()+s*2,payload:r};if(this.usePersistence){var n=$.bind(function(){return this.ensureInit().then($.bind(function(){return this.readFromStorage()},this)).then($.bind(function(c){return c.push(i),this.saveToStorage(c)},this)).then($.bind(function(c){return c&&this.memQueue.push(i),c},this)).catch($.bind(function(c){return this.reportError("Error enqueueing item",c,r),!1},this))},this);return this.lock.withLock(n,this.pid).catch($.bind(function(c){return this.reportError("Error acquiring storage lock",c),!1},this))}else return this.memQueue.push(i),et.resolve(!0)};Er.prototype.fillBatch=function(r){var s=this.memQueue.slice(0,r);return this.usePersistence&&s.length<r?this.ensureInit().then($.bind(function(){return this.readFromStorage()},this)).then($.bind(function(i){if(i.length){var n={};$.each(s,function(h){n[h.id]=!0});for(var c=0;c<i.length;c++){var a=i[c];if(new Date().getTime()>a.flushAfter&&!n[a.id]&&(a.orphaned=!0,s.push(a),s.length>=r))break}}return s},this)):et.resolve(s)};var bC=function(r,s){var i=[];return $.each(r,function(n){n.id&&!s[n.id]&&i.push(n)}),i};Er.prototype.removeItemsByID=function(r){var s={};if($.each(r,function(n){s[n]=!0}),this.memQueue=bC(this.memQueue,s),this.usePersistence){var i=$.bind(function(){return this.ensureInit().then($.bind(function(){return this.readFromStorage()},this)).then($.bind(function(n){return n=bC(n,s),this.saveToStorage(n)},this)).then($.bind(function(){return this.readFromStorage()},this)).then($.bind(function(n){for(var c=0;c<n.length;c++){var a=n[c];if(a.id&&s[a.id])throw new Error("Item not removed from storage")}return!0},this)).catch($.bind(function(n){return this.reportError("Error removing items",n,r),!1},this))},this);return this.lock.withLock(i,this.pid).catch($.bind(function(n){return this.reportError("Error acquiring storage lock",n),Pa(this.queueStorage.storage,!0)?!1:i().then($.bind(function(c){return c||this.queueStorage.removeItem(this.storageKey).then(function(){return c})},this)).catch($.bind(function(c){return this.reportError("Error clearing queue",c),!1},this))},this))}else return et.resolve(!0)};var vC=function(r,s){var i=[];return $.each(r,function(n){var c=n.id;if(c in s){var a=s[c];a!==null&&(n.payload=a,i.push(n))}else i.push(n)}),i};Er.prototype.updatePayloads=function(r){return this.memQueue=vC(this.memQueue,r),this.usePersistence?this.lock.withLock($.bind(function(){return this.ensureInit().then($.bind(function(){return this.readFromStorage()},this)).then($.bind(function(i){return i=vC(i,r),this.saveToStorage(i)},this)).catch($.bind(function(i){return this.reportError("Error updating items",r,i),!1},this))},this),this.pid).catch($.bind(function(s){return this.reportError("Error acquiring storage lock",s),!1},this)):et.resolve(!0)};Er.prototype.readFromStorage=function(){return this.ensureInit().then($.bind(function(){return this.queueStorage.getItem(this.storageKey)},this)).then($.bind(function(r){return r&&(r=Va(r),$.isArray(r)||(this.reportError("Invalid storage entry:",r),r=null)),r||[]},this)).catch($.bind(function(r){return this.reportError("Error retrieving queue",r),[]},this))};Er.prototype.saveToStorage=function(r){try{var s=Ga(r)}catch(i){return this.reportError("Error serializing queue",i),et.resolve(!1)}return this.ensureInit().then($.bind(function(){return this.queueStorage.setItem(this.storageKey,s)},this)).then(function(){return!0}).catch($.bind(function(i){return this.reportError("Error saving queue",i),!1},this))};Er.prototype.clear=function(){return this.memQueue=[],this.usePersistence?this.ensureInit().then($.bind(function(){return this.queueStorage.removeItem(this.storageKey)},this)):et.resolve()};var wF=10*60*1e3,Pn=tl("batch"),pA=function(r,s){this.errorReporter=s.errorReporter,this.queue=new Er(r,{errorReporter:$.bind(this.reportError,this),queueStorage:s.queueStorage,sharedLockStorage:s.sharedLockStorage,usePersistence:s.usePersistence}),this.libConfig=s.libConfig,this.sendRequest=s.sendRequestFunc,this.beforeSendHook=s.beforeSendHook,this.stopAllBatching=s.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0,this.itemIdsSentSuccessfully={},this.flushOnlyOnInterval=s.flushOnlyOnInterval||!1};pA.prototype.enqueue=function(r){return this.queue.enqueue(r,this.flushInterval)};pA.prototype.start=function(){return this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()};pA.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)};pA.prototype.clear=function(){return this.queue.clear()};pA.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size};pA.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)};pA.prototype.scheduleFlush=function(r){this.flushInterval=r,this.stopped||(this.timeoutID=setTimeout($.bind(function(){this.stopped||this.flush()},this),this.flushInterval))};pA.prototype.sendRequestPromise=function(r,s){return new et($.bind(function(i){this.sendRequest(r,s,i)},this))};pA.prototype.flush=function(r){if(this.requestInProgress)return Pn.log("Flush: Request already in progress"),et.resolve();this.requestInProgress=!0,r=r||{};var s=this.libConfig.batch_request_timeout_ms,i=new Date().getTime(),n=this.batchSize;return this.queue.fillBatch(n).then($.bind(function(c){var a=c.length===n,h=[],p={};if($.each(c,function(B){var w=B.payload;if(this.beforeSendHook&&!B.orphaned&&(w=this.beforeSendHook(w)),w){w.event&&w.properties&&(w.properties=$.extend({},w.properties,{mp_sent_by_lib_version:zA.LIB_VERSION}));var C=!0,v=B.id;v?(this.itemIdsSentSuccessfully[v]||0)>5&&(this.reportError("[dupe] item ID sent too many times, not sending",{item:B,batchSize:c.length,timesSent:this.itemIdsSentSuccessfully[v]}),C=!1):this.reportError("[dupe] found item with no ID",{item:B}),C&&h.push(w)}p[B.id]=w},this),h.length<1)return this.requestInProgress=!1,this.resetFlush(),et.resolve();var d=$.bind(function(){return this.queue.removeItemsByID($.map(c,function(B){return B.id})).then($.bind(function(B){return $.each(c,$.bind(function(w){var C=w.id;C?(this.itemIdsSentSuccessfully[C]=this.itemIdsSentSuccessfully[C]||0,this.itemIdsSentSuccessfully[C]++,this.itemIdsSentSuccessfully[C]>5&&this.reportError("[dupe] item ID sent too many times",{item:w,batchSize:c.length,timesSent:this.itemIdsSentSuccessfully[C]})):this.reportError("[dupe] found item with no ID while removing",{item:w})},this)),B?(this.consecutiveRemovalFailures=0,this.flushOnlyOnInterval&&!a?(this.resetFlush(),et.resolve()):this.flush()):(++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush(),et.resolve())},this))},this),g=$.bind(function(B){this.requestInProgress=!1;try{if(r.unloading)return this.queue.updatePayloads(p);if($.isObject(B)&&B.error==="timeout"&&new Date().getTime()-i>=s)return this.reportError("Network timeout; retrying"),this.flush();if($.isObject(B)&&(B.httpStatusCode>=500||B.httpStatusCode===429||B.httpStatusCode<=0&&!hF()||B.error==="timeout")){var w=this.flushInterval*2;return B.retryAfter&&(w=parseInt(B.retryAfter,10)*1e3||w),w=Math.min(wF,w),this.reportError("Error; retry in "+w+" ms"),this.scheduleFlush(w),et.resolve()}else if($.isObject(B)&&B.httpStatusCode===413)if(c.length>1){var C=Math.max(1,Math.floor(n/2));return this.batchSize=Math.min(this.batchSize,C,c.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush(),et.resolve()}else return this.reportError("Single-event request too large; dropping",c),this.resetBatchSize(),d();else return d()}catch(v){this.reportError("Error handling API response",v),this.resetFlush()}},this),f={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:s};return r.unloading&&(f.transport="sendBeacon"),Pn.log("MIXPANEL REQUEST:",h),this.sendRequestPromise(h,f).then(g)},this)).catch($.bind(function(c){this.reportError("Error flushing request queue",c),this.resetFlush()},this))};pA.prototype.reportError=function(r,s){if(Pn.error.apply(Pn.error,arguments),this.errorReporter)try{s instanceof Error||(s=new Error(r)),this.errorReporter(r,s)}catch(i){Pn.error(i)}};var lo=tl("recorder"),EC=Ae.CompressionStream,_F={batch_size:1e3,batch_flush_interval_ms:10*1e3,batch_request_timeout_ms:90*1e3,batch_autostart:!0},CF=new Set([KA.MouseMove,KA.MouseInteraction,KA.Scroll,KA.ViewportResize,KA.Input,KA.TouchMove,KA.MediaInteraction,KA.Drag,KA.Selection]);function bF(r){return r.type===tv.IncrementalSnapshot&&CF.has(r.data.source)}var IA=function(r){this._mixpanel=r.mixpanelInstance,this._onIdleTimeout=r.onIdleTimeout,this._onMaxLengthReached=r.onMaxLengthReached,this._rrwebRecord=r.rrwebRecord,this.replayId=r.replayId,this._stopRecording=null,this.seqNo=0,this.replayStartTime=null,this.replayStartUrl=null,this.batchStartUrl=null,this.idleTimeoutId=null,this.maxTimeoutId=null,this.recordMaxMs=Hn,this.recordMinMs=0;var s="__mprec_"+this.getConfig("token")+"_"+this.replayId;this.batcher=new pA(s,{errorReporter:$.bind(this.reportError,this),flushOnlyOnInterval:!0,libConfig:_F,sendRequestFunc:$.bind(this.flushEventsWithOptOut,this),usePersistence:!1})};IA.prototype.getConfig=function(r){return this._mixpanel.get_config(r)};IA.prototype.get_config=function(r){return this.getConfig(r)};IA.prototype.startRecording=function(r){if(this._stopRecording!==null){lo.log("Recording already in progress, skipping startRecording.");return}this.recordMaxMs=this.getConfig("record_max_ms"),this.recordMaxMs>Hn&&(this.recordMaxMs=Hn,lo.critical("record_max_ms cannot be greater than "+Hn+"ms. Capping value.")),this.recordMinMs=this.getConfig("record_min_ms"),this.recordMinMs>$g&&(this.recordMinMs=$g,lo.critical("record_min_ms cannot be greater than "+$g+"ms. Capping value.")),this.replayStartTime=new Date().getTime(),this.batchStartUrl=$.info.currentUrl(),this.replayStartUrl=$.info.currentUrl(),r||this.recordMinMs>0?this.batcher.stop():this.batcher.start();var s=$.bind(function(){clearTimeout(this.idleTimeoutId),this.idleTimeoutId=setTimeout(this._onIdleTimeout,this.getConfig("record_idle_timeout_ms"))},this),i=this.getConfig("record_block_selector");if((i===""||i===null)&&(i=void 0),this._stopRecording=this._rrwebRecord({emit:$.bind(function(n){this.batcher.enqueue(n),bF(n)&&(this.batcher.stopped&&new Date().getTime()-this.replayStartTime>=this.recordMinMs&&this.batcher.start(),s())},this),blockClass:this.getConfig("record_block_class"),blockSelector:i,collectFonts:this.getConfig("record_collect_fonts"),dataURLOptions:{type:"image/webp",quality:.6},maskAllInputs:!0,maskTextClass:this.getConfig("record_mask_text_class"),maskTextSelector:this.getConfig("record_mask_text_selector"),recordCanvas:this.getConfig("record_canvas"),sampling:{canvas:15}}),typeof this._stopRecording!="function"){this.reportError("rrweb failed to start, skipping this recording."),this._stopRecording=null,this.stopRecording();return}s(),this.maxTimeoutId=setTimeout($.bind(this._onMaxLengthReached,this),this.recordMaxMs)};IA.prototype.stopRecording=function(){if(!this.isRrwebStopped()){try{this._stopRecording()}catch(r){this.reportError("Error with rrweb stopRecording",r)}this._stopRecording=null}this.batcher.stopped?this.batcher.clear():(this.batcher.flush(),this.batcher.stop()),clearTimeout(this.idleTimeoutId),clearTimeout(this.maxTimeoutId)};IA.prototype.isRrwebStopped=function(){return this._stopRecording===null};IA.prototype.flushEventsWithOptOut=function(r,s,i){this._flushEvents(r,s,i,$.bind(this._onOptOut,this))};IA.prototype._onOptOut=function(r){r===0&&this.stopRecording()};IA.prototype._sendRequest=function(r,s,i,n){var c=$.bind(function(a,h){a.status===200&&this.replayId===r&&(this.seqNo++,this.batchStartUrl=$.info.currentUrl()),n({status:0,httpStatusCode:a.status,responseBody:h,retryAfter:a.headers.get("Retry-After")})},this);Ae.fetch(this.getConfig("api_host")+"/"+this.getConfig("api_routes").record+"?"+new URLSearchParams(s),{method:"POST",headers:{Authorization:"Basic "+btoa(this.getConfig("token")+":"),"Content-Type":"application/octet-stream"},body:i}).then(function(a){a.json().then(function(h){c(a,h)}).catch(function(h){n({error:h})})}).catch(function(a){n({error:a,httpStatusCode:0})})};IA.prototype._flushEvents=si(function(r,s,i){const n=r.length;if(n>0){var c=this.replayId,a=r[0].timestamp;(this.seqNo===0||!this.replayStartTime)&&(this.seqNo!==0&&this.reportError("Replay start time not set but seqNo is not 0. Using current batch start time as a fallback."),this.replayStartTime=a);var h=r[n-1].timestamp-this.replayStartTime,p={$current_url:this.batchStartUrl,$lib_version:zA.LIB_VERSION,batch_start_time:a/1e3,distinct_id:String(this._mixpanel.get_distinct_id()),mp_lib:"web",replay_id:c,replay_length_ms:h,replay_start_time:this.replayStartTime/1e3,replay_start_url:this.replayStartUrl,seq:this.seqNo},d=$.JSONEncode(r),g=this._mixpanel.get_property("$device_id");g&&(p.$device_id=g);var f=this._mixpanel.get_property("$user_id");if(f&&(p.$user_id=f),EC){var B=new Blob([d],{type:"application/json"}).stream(),w=B.pipeThrough(new EC("gzip"));new Response(w).blob().then($.bind(function(C){p.format="gzip",this._sendRequest(c,p,C,i)},this))}else p.format="body",this._sendRequest(c,p,d,i)}});IA.prototype.reportError=function(r,s){lo.error.apply(lo.error,arguments);try{!s&&!(r instanceof Error)&&(r=new Error(r)),this.getConfig("error_reporter")(r,s)}catch(i){lo.error(i)}};var _g=tl("recorder"),mo=function(r){this._mixpanel=r,this.activeRecording=null};mo.prototype.startRecording=function(r){if(this.activeRecording&&!this.activeRecording.isRrwebStopped()){_g.log("Recording already in progress, skipping startRecording.");return}var s=$.bind(function(){_g.log("Idle timeout reached, restarting recording."),this.resetRecording()},this),i=$.bind(function(){_g.log("Max recording length reached, stopping recording."),this.resetRecording()},this);this.activeRecording=new IA({mixpanelInstance:this._mixpanel,onIdleTimeout:s,onMaxLengthReached:i,replayId:$.UUID(),rrwebRecord:Zn}),this.activeRecording.startRecording(r)};mo.prototype.stopRecording=function(){this.activeRecording&&(this.activeRecording.stopRecording(),this.activeRecording=null)};mo.prototype.resetRecording=function(){this.stopRecording(),this.startRecording(!0)};mo.prototype.getActiveReplayId=function(){return this.activeRecording&&!this.activeRecording.isRrwebStopped()?this.activeRecording.replayId:null};Object.defineProperty(mo.prototype,"replayId",{get:function(){return this.getActiveReplayId()}});Ae.__mp_recorder=mo;var yr=function(){};yr.prototype.create_properties=function(){};yr.prototype.event_handler=function(){};yr.prototype.after_track_handler=function(){};yr.prototype.init=function(r){return this.mp=r,this};yr.prototype.track=function(r,s,i,n){var c=this,a=$.dom_query(r);if(a.length===0){ye.error("The DOM query ("+r+") returned 0 elements");return}return $.each(a,function(h){$.register_event(h,this.override_event,function(p){var d={},g=c.create_properties(i,this),f=c.mp.get_config("track_links_timeout");c.event_handler(p,this,d),window.setTimeout(c.track_callback(n,g,d,!0),f),c.mp.track(s,g,c.track_callback(n,g,d))})},this),!0};yr.prototype.track_callback=function(r,s,i,n){n=n||!1;var c=this;return function(){i.callback_fired||(i.callback_fired=!0,!(r&&r(n,s)===!1)&&c.after_track_handler(s,i,n))}};yr.prototype.create_properties=function(r,s){var i;return typeof r=="function"?i=r(s):i=$.extend({},r),i};var ho=function(){this.override_event="click"};$.inherit(ho,yr);ho.prototype.create_properties=function(r,s){var i=ho.superclass.create_properties.apply(this,arguments);return s.href&&(i.url=s.href),i};ho.prototype.event_handler=function(r,s,i){i.new_tab=r.which===2||r.metaKey||r.ctrlKey||s.target==="_blank",i.href=s.href,i.new_tab||r.preventDefault()};ho.prototype.after_track_handler=function(r,s){s.new_tab||setTimeout(function(){window.location=s.href},0)};var ou=function(){this.override_event="submit"};$.inherit(ou,yr);ou.prototype.event_handler=function(r,s,i){i.element=s,r.preventDefault()};ou.prototype.after_track_handler=function(r,s){setTimeout(function(){s.element.submit()},0)};var ri="$set",po="$set_once",vA="$unset",Yi="$add",XA="$append",Ji="$union",br="$remove",vF="$delete",hv={set_action:function(r,s){var i={},n={};return $.isObject(r)?$.each(r,function(c,a){this._is_reserved_property(a)||(n[a]=c)},this):n[r]=s,i[ri]=n,i},unset_action:function(r){var s={},i=[];return $.isArray(r)||(r=[r]),$.each(r,function(n){this._is_reserved_property(n)||i.push(n)},this),s[vA]=i,s},set_once_action:function(r,s){var i={},n={};return $.isObject(r)?$.each(r,function(c,a){this._is_reserved_property(a)||(n[a]=c)},this):n[r]=s,i[po]=n,i},union_action:function(r,s){var i={},n={};return $.isObject(r)?$.each(r,function(c,a){this._is_reserved_property(a)||(n[a]=$.isArray(c)?c:[c])},this):n[r]=$.isArray(s)?s:[s],i[Ji]=n,i},append_action:function(r,s){var i={},n={};return $.isObject(r)?$.each(r,function(c,a){this._is_reserved_property(a)||(n[a]=c)},this):n[r]=s,i[XA]=n,i},remove_action:function(r,s){var i={},n={};return $.isObject(r)?$.each(r,function(c,a){this._is_reserved_property(a)||(n[a]=c)},this):n[r]=s,i[br]=n,i},delete_action:function(){var r={};return r[vF]="",r}},He=function(){};$.extend(He.prototype,hv);He.prototype._init=function(r,s,i){this._mixpanel=r,this._group_key=s,this._group_id=i};He.prototype.set=$o(function(r,s,i){var n=this.set_action(r,s);return $.isObject(r)&&(i=s),this._send_request(n,i)});He.prototype.set_once=$o(function(r,s,i){var n=this.set_once_action(r,s);return $.isObject(r)&&(i=s),this._send_request(n,i)});He.prototype.unset=$o(function(r,s){var i=this.unset_action(r);return this._send_request(i,s)});He.prototype.union=$o(function(r,s,i){$.isObject(r)&&(i=s);var n=this.union_action(r,s);return this._send_request(n,i)});He.prototype.delete=$o(function(r){var s=this.delete_action();return this._send_request(s,r)});He.prototype.remove=$o(function(r,s,i){var n=this.remove_action(r,s);return this._send_request(n,i)});He.prototype._send_request=function(r,s){r.$group_key=this._group_key,r.$group_id=this._group_id,r.$token=this._get_config("token");var i=$.encodeDates(r);return this._mixpanel._track_or_batch({type:"groups",data:i,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").groups,batcher:this._mixpanel.request_batchers.groups},s)};He.prototype._is_reserved_property=function(r){return r==="$group_key"||r==="$group_id"};He.prototype._get_config=function(r){return this._mixpanel.get_config(r)};He.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id};He.prototype.remove=He.prototype.remove;He.prototype.set=He.prototype.set;He.prototype.set_once=He.prototype.set_once;He.prototype.union=He.prototype.union;He.prototype.unset=He.prototype.unset;He.prototype.toString=He.prototype.toString;var oe=function(){};$.extend(oe.prototype,hv);oe.prototype._init=function(r){this._mixpanel=r};oe.prototype.set=oi(function(r,s,i){var n=this.set_action(r,s);return $.isObject(r)&&(i=s),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),n[ri]=$.extend({},$.info.people_properties(),n[ri]),this._send_request(n,i)});oe.prototype.set_once=oi(function(r,s,i){var n=this.set_once_action(r,s);return $.isObject(r)&&(i=s),this._send_request(n,i)});oe.prototype.unset=oi(function(r,s){var i=this.unset_action(r);return this._send_request(i,s)});oe.prototype.increment=oi(function(r,s,i){var n={},c={};return $.isObject(r)?($.each(r,function(a,h){if(!this._is_reserved_property(h))if(isNaN(parseFloat(a))){ye.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else c[h]=a},this),i=s):($.isUndefined(s)&&(s=1),c[r]=s),n[Yi]=c,this._send_request(n,i)});oe.prototype.append=oi(function(r,s,i){$.isObject(r)&&(i=s);var n=this.append_action(r,s);return this._send_request(n,i)});oe.prototype.remove=oi(function(r,s,i){$.isObject(r)&&(i=s);var n=this.remove_action(r,s);return this._send_request(n,i)});oe.prototype.union=oi(function(r,s,i){$.isObject(r)&&(i=s);var n=this.union_action(r,s);return this._send_request(n,i)});oe.prototype.track_charge=oi(function(r,s,i){if(!$.isNumber(r)&&(r=parseFloat(r),isNaN(r))){ye.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",$.extend({$amount:r},s),i)});oe.prototype.clear_charges=function(r){return this.set("$transactions",[],r)};oe.prototype.delete_user=function(){if(!this._identify_called()){ye.error("mixpanel.people.delete_user() requires you to call identify() first");return}var r={$delete:this._mixpanel.get_distinct_id()};return this._send_request(r)};oe.prototype.toString=function(){return this._mixpanel.toString()+".people"};oe.prototype._send_request=function(r,s){r.$token=this._get_config("token"),r.$distinct_id=this._mixpanel.get_distinct_id();var i=this._mixpanel.get_property("$device_id"),n=this._mixpanel.get_property("$user_id"),c=this._mixpanel.get_property("$had_persisted_distinct_id");i&&(r.$device_id=i),n&&(r.$user_id=n),c&&(r.$had_persisted_distinct_id=c);var a=$.encodeDates(r);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:a,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").engage,batcher:this._mixpanel.request_batchers.people},s):(this._enqueue(r),$.isUndefined(s)||(this._get_config("verbose")?s({status:-1,error:null}):s(-1)),$.truncate(a,255))};oe.prototype._get_config=function(r){return this._mixpanel.get_config(r)};oe.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0};oe.prototype._enqueue=function(r){ri in r?this._mixpanel.persistence._add_to_people_queue(ri,r):po in r?this._mixpanel.persistence._add_to_people_queue(po,r):vA in r?this._mixpanel.persistence._add_to_people_queue(vA,r):Yi in r?this._mixpanel.persistence._add_to_people_queue(Yi,r):XA in r?this._mixpanel.persistence._add_to_people_queue(XA,r):br in r?this._mixpanel.persistence._add_to_people_queue(br,r):Ji in r?this._mixpanel.persistence._add_to_people_queue(Ji,r):ye.error("Invalid call to _enqueue():",r)};oe.prototype._flush_one_queue=function(r,s,i,n){var c=this,a=$.extend({},this._mixpanel.persistence.load_queue(r)),h=a;!$.isUndefined(a)&&$.isObject(a)&&!$.isEmptyObject(a)&&(c._mixpanel.persistence._pop_from_people_queue(r,a),c._mixpanel.persistence.save(),n&&(h=n(a)),s.call(c,h,function(p,d){p===0&&c._mixpanel.persistence._add_to_people_queue(r,a),$.isUndefined(i)||i(p,d)}))};oe.prototype._flush=function(r,s,i,n,c,a,h){var p=this;this._flush_one_queue(ri,this.set,r),this._flush_one_queue(po,this.set_once,n),this._flush_one_queue(vA,this.unset,a,function(I){return $.keys(I)}),this._flush_one_queue(Yi,this.increment,s),this._flush_one_queue(Ji,this.union,c);var d=this._mixpanel.persistence.load_queue(XA);if(!$.isUndefined(d)&&$.isArray(d)&&d.length)for(var g,f=function(I,D){I===0&&p._mixpanel.persistence._add_to_people_queue(XA,g),$.isUndefined(i)||i(I,D)},B=d.length-1;B>=0;B--)d=this._mixpanel.persistence.load_queue(XA),g=d.pop(),p._mixpanel.persistence.save(),$.isEmptyObject(g)||p.append(g,f);var w=this._mixpanel.persistence.load_queue(br);if(!$.isUndefined(w)&&$.isArray(w)&&w.length)for(var C,v=function(I,D){I===0&&p._mixpanel.persistence._add_to_people_queue(br,C),$.isUndefined(h)||h(I,D)},_=w.length-1;_>=0;_--)w=this._mixpanel.persistence.load_queue(br),C=w.pop(),p._mixpanel.persistence.save(),$.isEmptyObject(C)||p.remove(C,v)};oe.prototype._is_reserved_property=function(r){return r==="$distinct_id"||r==="$token"||r==="$device_id"||r==="$user_id"||r==="$had_persisted_distinct_id"};oe.prototype.set=oe.prototype.set;oe.prototype.set_once=oe.prototype.set_once;oe.prototype.unset=oe.prototype.unset;oe.prototype.increment=oe.prototype.increment;oe.prototype.append=oe.prototype.append;oe.prototype.remove=oe.prototype.remove;oe.prototype.union=oe.prototype.union;oe.prototype.track_charge=oe.prototype.track_charge;oe.prototype.clear_charges=oe.prototype.clear_charges;oe.prototype.delete_user=oe.prototype.delete_user;oe.prototype.toString=oe.prototype.toString;var gf="__mps",ff="__mpso",$f="__mpus",mf="__mpa",Bf="__mpap",wf="__mpr",_f="__mpu",dv="$people_distinct_id",Ka="__alias",Xn="__timers",EF=[gf,ff,$f,mf,Bf,wf,_f,dv,Ka,Xn],he=function(r){this.props={},this.campaign_params_saved=!1,r.persistence_name?this.name="mp_"+r.persistence_name:this.name="mp_"+r.token+"_mixpanel";var s=r.persistence;s!=="cookie"&&s!=="localStorage"&&(ye.critical("Unknown persistence type "+s+"; falling back to cookie"),s=r.persistence="cookie"),s==="localStorage"&&$.localStorage.is_supported()?this.storage=$.localStorage:this.storage=$.cookie,this.load(),this.update_config(r),this.upgrade(),this.save()};he.prototype.properties=function(){var r={};return this.load(),$.each(this.props,function(s,i){$.include(EF,i)||(r[i]=s)}),r};he.prototype.load=function(){if(!this.disabled){var r=this.storage.parse(this.name);r&&(this.props=$.extend({},r))}};he.prototype.upgrade=function(){var r,s;this.storage===$.localStorage?(r=$.cookie.parse(this.name),$.cookie.remove(this.name),$.cookie.remove(this.name,!0),r&&this.register_once(r)):this.storage===$.cookie&&(s=$.localStorage.parse(this.name),$.localStorage.remove(this.name),s&&this.register_once(s))};he.prototype.save=function(){this.disabled||this.storage.set(this.name,$.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)};he.prototype.load_prop=function(r){return this.load(),this.props[r]};he.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)};he.prototype.clear=function(){this.remove(),this.props={}};he.prototype.register_once=function(r,s,i){return $.isObject(r)?(typeof s>"u"&&(s="None"),this.expire_days=typeof i>"u"?this.default_expiry:i,this.load(),$.each(r,function(n,c){(!this.props.hasOwnProperty(c)||this.props[c]===s)&&(this.props[c]=n)},this),this.save(),!0):!1};he.prototype.register=function(r,s){return $.isObject(r)?(this.expire_days=typeof s>"u"?this.default_expiry:s,this.load(),$.extend(this.props,r),this.save(),!0):!1};he.prototype.unregister=function(r){this.load(),r in this.props&&(delete this.props[r],this.save())};he.prototype.update_search_keyword=function(r){this.register($.info.searchInfo(r))};he.prototype.update_referrer_info=function(r){this.register_once({$initial_referrer:r||"$direct",$initial_referring_domain:$.info.referringDomain(r)||"$direct"},"")};he.prototype.get_referrer_info=function(){return $.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};he.prototype.update_config=function(r){this.default_expiry=this.expire_days=r.cookie_expiration,this.set_disabled(r.disable_persistence),this.set_cookie_domain(r.cookie_domain),this.set_cross_site(r.cross_site_cookie),this.set_cross_subdomain(r.cross_subdomain_cookie),this.set_secure(r.secure_cookie)};he.prototype.set_disabled=function(r){this.disabled=r,this.disabled?this.remove():this.save()};he.prototype.set_cookie_domain=function(r){r!==this.cookie_domain&&(this.remove(),this.cookie_domain=r,this.save())};he.prototype.set_cross_site=function(r){r!==this.cross_site&&(this.cross_site=r,this.remove(),this.save())};he.prototype.set_cross_subdomain=function(r){r!==this.cross_subdomain&&(this.cross_subdomain=r,this.remove(),this.save())};he.prototype.get_cross_subdomain=function(){return this.cross_subdomain};he.prototype.set_secure=function(r){r!==this.secure&&(this.secure=!!r,this.remove(),this.save())};he.prototype._add_to_people_queue=function(r,s){var i=this._get_queue_key(r),n=s[r],c=this._get_or_create_queue(ri),a=this._get_or_create_queue(po),h=this._get_or_create_queue(vA),p=this._get_or_create_queue(Yi),d=this._get_or_create_queue(Ji),g=this._get_or_create_queue(br,[]),f=this._get_or_create_queue(XA,[]);i===gf?($.extend(c,n),this._pop_from_people_queue(Yi,n),this._pop_from_people_queue(Ji,n),this._pop_from_people_queue(vA,n)):i===ff?($.each(n,function(B,w){w in a||(a[w]=B)}),this._pop_from_people_queue(vA,n)):i===$f?$.each(n,function(B){$.each([c,a,p,d],function(w){B in w&&delete w[B]}),$.each(f,function(w){B in w&&delete w[B]}),h[B]=!0}):i===mf?($.each(n,function(B,w){w in c?c[w]+=B:(w in p||(p[w]=0),p[w]+=B)},this),this._pop_from_people_queue(vA,n)):i===_f?($.each(n,function(B,w){$.isArray(B)&&(w in d||(d[w]=[]),d[w]=d[w].concat(B))}),this._pop_from_people_queue(vA,n)):i===wf?(g.push(n),this._pop_from_people_queue(XA,n)):i===Bf&&(f.push(n),this._pop_from_people_queue(vA,n)),ye.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),ye.log(s),this.save()};he.prototype._pop_from_people_queue=function(r,s){var i=this.props[this._get_queue_key(r)];$.isUndefined(i)||$.each(s,function(n,c){r===XA||r===br?$.each(i,function(a){a[c]===n&&delete a[c]}):delete i[c]},this)};he.prototype.load_queue=function(r){return this.load_prop(this._get_queue_key(r))};he.prototype._get_queue_key=function(r){if(r===ri)return gf;if(r===po)return ff;if(r===vA)return $f;if(r===Yi)return mf;if(r===XA)return Bf;if(r===br)return wf;if(r===Ji)return _f;ye.error("Invalid queue:",r)};he.prototype._get_or_create_queue=function(r,s){var i=this._get_queue_key(r);return s=$.isUndefined(s)?{}:s,this.props[i]||(this.props[i]=s)};he.prototype.set_event_timer=function(r,s){var i=this.load_prop(Xn)||{};i[r]=s,this.props[Xn]=i,this.save()};he.prototype.remove_event_timer=function(r){var s=this.load_prop(Xn)||{},i=s[r];return $.isUndefined(i)||(delete this.props[Xn][r],this.save()),i};var Cf,pv=function(r,s){throw new Error(r+" not available in this build.")},It,gv=0,yF=1,IF=function(r){return r},Yn=function(){},uA="mixpanel",fv="base64",TF="json",bf="$device:",co=Ae.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,$v=!co&&WA.indexOf("MSIE")===-1&&WA.indexOf("Mozilla")===-1,Wa=null;qr.sendBeacon&&(Wa=function(){return qr.sendBeacon.apply(qr,arguments)});var mv={track:"track/",engage:"engage/",groups:"groups/",record:"record/"},yC={api_host:"https://api-js.mixpanel.com",api_routes:mv,api_method:"POST",api_transport:"XHR",api_payload_format:fv,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:Yn,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:Yn,mp_loader:null,track_marketing:!0,track_pageview:!1,skip_first_touch_marketing:!1,store_google:!0,stop_utm_persistence:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{},record_block_class:new RegExp("^(mp-block|fs-exclude|amp-block|rr-block|ph-no-capture)$"),record_block_selector:"img, video",record_canvas:!1,record_collect_fonts:!1,record_idle_timeout_ms:30*60*1e3,record_mask_text_class:new RegExp("^(mp-mask|fs-mask|amp-mask|rr-mask|ph-mask)$"),record_mask_text_selector:"*",record_max_ms:Hn,record_min_ms:0,record_sessions_percent:0,recorder_src:"https://cdn.mxpnl.com/libs/mixpanel-recorder.min.js"},Bv=!1,U=function(){},qg=function(r,s,i){var n,c=i===uA?It:It[i];if(c&&Cf===gv)n=c;else{if(c&&!$.isArray(c)){ye.error("You have already initialized "+i);return}n=new U}if(n._cached_groups={},n._init(r,s,i),n.people=new oe,n.people._init(n),!n.get_config("skip_first_touch_marketing")){var a=$.info.campaignParams(null),h={},p=!1;$.each(a,function(d,g){h["initial_"+g]=d,d&&(p=!0)}),p&&n.people.set_once(h)}return zA.DEBUG=zA.DEBUG||n.get_config("debug"),!$.isUndefined(c)&&$.isArray(c)&&(n._execute_array.call(n.people,c.people),n._execute_array(c)),n};U.prototype.init=function(r,s,i){if($.isUndefined(i)){this.report_error("You must name your new library: init(token, config, name)");return}if(i===uA){this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var n=qg(r,s,i);return It[i]=n,n._loaded(),n};U.prototype._init=function(r,s,i){s=s||{},this.__loaded=!0,this.config={};var n={};if(!("api_payload_format"in s)){var c=s.api_host||yC.api_host;c.match(/\.mixpanel\.com/)&&(n.api_payload_format=TF)}if(this.set_config($.extend({},yC,n,s,{name:i,token:r,callback_fn:(i===uA?i:uA+"."+i)+"._jsc"})),this._jsc=Yn,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!$.localStorage.is_supported(!0)||!co)this._batch_requests=!1,ye.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"),$.each(this.get_batcher_configs(),function(d){ye.log("Clearing batch queue "+d.queue_key),$.localStorage.remove(d.queue_key)});else if(this.init_batchers(),Wa&&Ae.addEventListener){var a=$.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);Ae.addEventListener("pagehide",function(d){d.persisted&&a()}),Ae.addEventListener("visibilitychange",function(){xe.visibilityState==="hidden"&&a()})}}this.persistence=this.cookie=new he(this.config),this.unpersisted_superprops={},this._gdpr_init();var h=$.UUID();this.get_distinct_id()||this.register_once({distinct_id:bf+h,$device_id:h},"");var p=this.get_config("track_pageview");p&&this._init_url_change_tracking(p),this.get_config("record_sessions_percent")>0&&Math.random()*100<=this.get_config("record_sessions_percent")&&this.start_session_recording()};U.prototype.start_session_recording=si(function(){if(!Ae.MutationObserver){ye.critical("Browser does not support MutationObserver; skipping session recording");return}var r=$.bind(function(){this._recorder=this._recorder||new Ae.__mp_recorder(this),this._recorder.startRecording()},this);$.isUndefined(Ae.__mp_recorder)?pv(this.get_config("recorder_src"),r):r()});U.prototype.stop_session_recording=function(){this._recorder?this._recorder.stopRecording():ye.critical("Session recorder module not loaded")};U.prototype.get_session_recording_properties=function(){var r={},s=this._get_session_replay_id();return s&&(r.$mp_replay_id=s),r};U.prototype.get_session_replay_url=function(){var r=null,s=this._get_session_replay_id();if(s){var i=$.HTTPBuildQuery({replay_id:s,distinct_id:this.get_distinct_id(),token:this.get_config("token")});r="https://mixpanel.com/projects/replay-redirect?"+i}return r};U.prototype._get_session_replay_id=function(){var r=null;return this._recorder&&(r=this._recorder.replayId),r||null};U.prototype._loaded=function(){if(this.get_config("loaded")(this),this._set_default_superprops(),this.people.set_once(this.persistence.get_referrer_info()),this.get_config("store_google")&&this.get_config("stop_utm_persistence")){var r=$.info.campaignParams(null);$.each(r,(function(s,i){this.unregister(i)}).bind(this))}};U.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(xe.referrer),this.get_config("store_google")&&!this.get_config("stop_utm_persistence")&&this.register($.info.campaignParams()),this.get_config("save_referrer")&&this.persistence.update_referrer_info(xe.referrer)};U.prototype._dom_loaded=function(){$.each(this.__dom_loaded_queue,function(r){this._track_dom.apply(this,r)},this),this.has_opted_out_tracking()||$.each(this.__request_queue,function(r){this._send_request.apply(this,r)},this),delete this.__dom_loaded_queue,delete this.__request_queue};U.prototype._track_dom=function(r,s){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!Bv)return this.__dom_loaded_queue.push([r,s]),!1;var i=new r().init(this);return i.track.apply(i,s)};U.prototype._init_url_change_tracking=function(r){var s="",i=this.track_pageview();if(i&&(s=$.info.currentUrl()),$.include(["full-url","url-with-path-and-query-string","url-with-path"],r)){Ae.addEventListener("popstate",function(){Ae.dispatchEvent(new Event("mp_locationchange"))}),Ae.addEventListener("hashchange",function(){Ae.dispatchEvent(new Event("mp_locationchange"))});var n=Ae.history.pushState;typeof n=="function"&&(Ae.history.pushState=function(a,h,p){n.call(Ae.history,a,h,p),Ae.dispatchEvent(new Event("mp_locationchange"))});var c=Ae.history.replaceState;typeof c=="function"&&(Ae.history.replaceState=function(a,h,p){c.call(Ae.history,a,h,p),Ae.dispatchEvent(new Event("mp_locationchange"))}),Ae.addEventListener("mp_locationchange",(function(){var a=$.info.currentUrl(),h=!1;if(r==="full-url"?h=a!==s:r==="url-with-path-and-query-string"?h=a.split("#")[0]!==s.split("#")[0]:r==="url-with-path"&&(h=a.split("#")[0].split("?")[0]!==s.split("#")[0].split("?")[0]),h){var p=this.track_pageview();p&&(s=a)}}).bind(this))}};U.prototype._prepare_callback=function(r,s){if($.isUndefined(r))return null;if(co){var i=function(h){r(h,s)};return i}else{var n=this._jsc,c=""+Math.floor(Math.random()*1e8),a=this.get_config("callback_fn")+"["+c+"]";return n[c]=function(h){delete n[c],r(h,s)},a}};U.prototype._send_request=function(r,s,i,n){var c=!0;if($v)return this.__request_queue.push(arguments),c;var a={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},h=null;!n&&($.isFunction(i)||typeof i=="string")&&(n=i,i=null),i=$.extend(a,i||{}),co||(i.method="GET");var p=i.method==="POST",d=Wa&&p&&i.transport.toLowerCase()==="sendbeacon",g=i.verbose;s.verbose&&(g=!0),this.get_config("test")&&(s.test=1),g&&(s.verbose=1),this.get_config("img")&&(s.img=1),co||(n?s.callback=n:(g||this.get_config("test"))&&(s.callback="(function(){})")),s.ip=this.get_config("ip")?1:0,s._=new Date().getTime().toString(),p&&(h="data="+encodeURIComponent(s.data),delete s.data),r+="?"+$.HTTPBuildQuery(s);var f=this;if("img"in s){var B=xe.createElement("img");B.src=r,xe.body.appendChild(B)}else if(d){try{c=Wa(r,h)}catch(D){f.report_error(D),c=!1}try{n&&n(c?1:0)}catch(D){f.report_error(D)}}else if(co)try{var w=new XMLHttpRequest;w.open(i.method,r,!0);var C=this.get_config("xhr_headers");if(p&&(C["Content-Type"]="application/x-www-form-urlencoded"),$.each(C,function(D,F){w.setRequestHeader(F,D)}),i.timeout_ms&&typeof w.timeout<"u"){w.timeout=i.timeout_ms;var v=new Date().getTime()}w.withCredentials=!0,w.onreadystatechange=function(){if(w.readyState===4)if(w.status===200){if(n)if(g){var D;try{D=$.JSONDecode(w.responseText)}catch(x){if(f.report_error(x),i.ignore_json_errors)D=w.responseText;else return}n(D)}else n(Number(w.responseText))}else{var F;if(w.timeout&&!w.status&&new Date().getTime()-v>=w.timeout?F="timeout":F="Bad HTTP status: "+w.status+" "+w.statusText,f.report_error(F),n)if(g){var k=w.responseHeaders||{};n({status:0,httpStatusCode:w.status,error:F,retryAfter:k["Retry-After"]})}else n(0)}},w.send(h)}catch(D){f.report_error(D),c=!1}else{var _=xe.createElement("script");_.type="text/javascript",_.async=!0,_.defer=!0,_.src=r;var I=xe.getElementsByTagName("script")[0];I.parentNode.insertBefore(_,I)}return c};U.prototype._execute_array=function(r){var s,i=[],n=[],c=[];$.each(r,function(h){h&&(s=h[0],$.isArray(s)?c.push(h):typeof h=="function"?h.call(this):$.isArray(h)&&s==="alias"?i.push(h):$.isArray(h)&&s.indexOf("track")!==-1&&typeof this[s]=="function"?c.push(h):n.push(h))},this);var a=function(h,p){$.each(h,function(d){if($.isArray(d[0])){var g=p;$.each(d,function(f){g=g[f[0]].apply(g,f.slice(1))})}else this[d[0]].apply(this,d.slice(1))},p)};a(i,this),a(n,this),a(c,this)};U.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events};U.prototype.get_batcher_configs=function(){var r="__mpq_"+this.get_config("token"),s=this.get_config("api_routes");return this._batcher_configs=this._batcher_configs||{events:{type:"events",endpoint:"/"+s.track,queue_key:r+"_ev"},people:{type:"people",endpoint:"/"+s.engage,queue_key:r+"_pp"},groups:{type:"groups",endpoint:"/"+s.groups,queue_key:r+"_gr"}},this._batcher_configs};U.prototype.init_batchers=function(){if(!this.are_batchers_initialized()){var r=$.bind(function(i){return new pA(i.queue_key,{libConfig:this.config,errorReporter:this.get_config("error_reporter"),sendRequestFunc:$.bind(function(n,c,a){this._send_request(this.get_config("api_host")+i.endpoint,this._encode_data_for_request(n),c,this._prepare_callback(a,n))},this),beforeSendHook:$.bind(function(n){return this._run_hook("before_send_"+i.type,n)},this),stopAllBatchingFunc:$.bind(this.stop_batch_senders,this),usePersistence:!0})},this),s=this.get_batcher_configs();this.request_batchers={events:r(s.events),people:r(s.people),groups:r(s.groups)}}this.get_config("batch_autostart")&&this.start_batch_senders()};U.prototype.start_batch_senders=function(){this._batchers_were_started=!0,this.are_batchers_initialized()&&(this._batch_requests=!0,$.each(this.request_batchers,function(r){r.start()}))};U.prototype.stop_batch_senders=function(){this._batch_requests=!1,$.each(this.request_batchers,function(r){r.stop(),r.clear()})};U.prototype.push=function(r){this._execute_array([r])};U.prototype.disable=function(r){typeof r>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(r)};U.prototype._encode_data_for_request=function(r){var s=$.JSONEncode(r);return this.get_config("api_payload_format")===fv&&(s=$.base64Encode(s)),{data:s}};U.prototype._track_or_batch=function(r,s){var i=$.truncate(r.data,255),n=r.endpoint,c=r.batcher,a=r.should_send_immediately,h=r.send_request_options||{};s=s||Yn;var p=!0,d=$.bind(function(){return h.skip_hooks||(i=this._run_hook("before_send_"+r.type,i)),i?(ye.log("MIXPANEL REQUEST:"),ye.log(i),this._send_request(n,this._encode_data_for_request(i),h,this._prepare_callback(s,i))):null},this);return this._batch_requests&&!a?c.enqueue(i).then(function(g){g?s(1,i):d()}):p=d(),p&&i};U.prototype.track=si(function(r,s,i,n){!n&&typeof i=="function"&&(n=i,i=null),i=i||{};var c=i.transport;c&&(i.transport=c);var a=i.send_immediately;if(typeof n!="function"&&(n=Yn),$.isUndefined(r)){this.report_error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(r)){n(0);return}s=$.extend({},s),s.token=this.get_config("token");var h=this.persistence.remove_event_timer(r);if(!$.isUndefined(h)){var p=new Date().getTime()-h;s.$duration=parseFloat((p/1e3).toFixed(3))}this._set_default_superprops();var d=this.get_config("track_marketing")?$.info.marketingParams():{};s=$.extend({},$.info.properties({mp_loader:this.get_config("mp_loader")}),d,this.persistence.properties(),this.unpersisted_superprops,this.get_session_recording_properties(),s);var g=this.get_config("property_blacklist");$.isArray(g)?$.each(g,function(w){delete s[w]}):this.report_error("Invalid value for property_blacklist config: "+g);var f={event:r,properties:s},B=this._track_or_batch({type:"events",data:f,endpoint:this.get_config("api_host")+"/"+this.get_config("api_routes").track,batcher:this.request_batchers.events,should_send_immediately:a,send_request_options:i},n);return B});U.prototype.set_group=si(function(r,s,i){$.isArray(s)||(s=[s]);var n={};return n[r]=s,this.register(n),this.people.set(r,s,i)});U.prototype.add_group=si(function(r,s,i){var n=this.get_property(r),c={};return n===void 0?(c[r]=[s],this.register(c)):n.indexOf(s)===-1&&(n.push(s),c[r]=n,this.register(c)),this.people.union(r,s,i)});U.prototype.remove_group=si(function(r,s,i){var n=this.get_property(r);if(n!==void 0){var c=n.indexOf(s);c>-1&&(n.splice(c,1),this.register({group_key:n})),n.length===0&&this.unregister(r)}return this.people.remove(r,s,i)});U.prototype.track_with_groups=si(function(r,s,i,n){var c=$.extend({},s||{});return $.each(i,function(a,h){a!=null&&(c[h]=a)}),this.track(r,c,n)});U.prototype._create_map_key=function(r,s){return r+"_"+JSON.stringify(s)};U.prototype._remove_group_from_cache=function(r,s){delete this._cached_groups[this._create_map_key(r,s)]};U.prototype.get_group=function(r,s){var i=this._create_map_key(r,s),n=this._cached_groups[i];return(n===void 0||n._group_key!==r||n._group_id!==s)&&(n=new He,n._init(this,r,s),this._cached_groups[i]=n),n};U.prototype.track_pageview=si(function(r,s){typeof r!="object"&&(r={}),s=s||{};var i=s.event_name||"$mp_web_page_view",n=$.extend($.info.mpPageViewProperties(),$.info.campaignParams(),$.info.clickParams()),c=$.extend({},n,r);return this.track(i,c)});U.prototype.track_links=function(){return this._track_dom.call(this,ho,arguments)};U.prototype.track_forms=function(){return this._track_dom.call(this,ou,arguments)};U.prototype.time_event=function(r){if($.isUndefined(r)){this.report_error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(r)||this.persistence.set_event_timer(r,new Date().getTime())};var kF={persistent:!0},vf=function(r){var s;return $.isObject(r)?s=r:$.isUndefined(r)?s={}:s={days:r},$.extend({},kF,s)};U.prototype.register=function(r,s){var i=vf(s);i.persistent?this.persistence.register(r,i.days):$.extend(this.unpersisted_superprops,r)};U.prototype.register_once=function(r,s,i){var n=vf(i);n.persistent?this.persistence.register_once(r,s,n.days):(typeof s>"u"&&(s="None"),$.each(r,function(c,a){(!this.unpersisted_superprops.hasOwnProperty(a)||this.unpersisted_superprops[a]===s)&&(this.unpersisted_superprops[a]=c)},this))};U.prototype.unregister=function(r,s){s=vf(s),s.persistent?this.persistence.unregister(r):delete this.unpersisted_superprops[r]};U.prototype._register_single=function(r,s){var i={};i[r]=s,this.register(i)};U.prototype.identify=function(r,s,i,n,c,a,h,p){var d=this.get_distinct_id();if(r&&d!==r){if(typeof r=="string"&&r.indexOf(bf)===0)return this.report_error("distinct_id cannot have $device: prefix"),-1;this.register({$user_id:r})}if(!this.get_property("$device_id")){var g=d;this.register_once({$had_persisted_distinct_id:!0,$device_id:g},"")}r!==d&&r!==this.get_property(Ka)&&(this.unregister(Ka),this.register({distinct_id:r})),this._flags.identify_called=!0,this.people._flush(s,i,n,c,a,h,p),r!==d&&this.track("$identify",{distinct_id:r,$anon_distinct_id:d},{skip_hooks:!0})};U.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var r=$.UUID();this.register_once({distinct_id:bf+r,$device_id:r},"")};U.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};U.prototype.alias=function(r,s){if(r===this.get_property(dv))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var i=this;return $.isUndefined(s)&&(s=this.get_distinct_id()),r!==s?(this._register_single(Ka,r),this.track("$create_alias",{alias:r,distinct_id:s},{skip_hooks:!0},function(){i.identify(r)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(r),-1)};U.prototype.name_tag=function(r){this._register_single("mp_name_tag",r)};U.prototype.set_config=function(r){if($.isObject(r)){$.extend(this.config,r);var s=r.batch_size;s&&$.each(this.request_batchers,function(i){i.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),zA.DEBUG=zA.DEBUG||this.get_config("debug")}};U.prototype.get_config=function(r){return this.config[r]};U.prototype._run_hook=function(r){var s=(this.config.hooks[r]||IF).apply(this,jr.call(arguments,1));return typeof s>"u"&&(this.report_error(r+" hook did not return a value"),s=null),s};U.prototype.get_property=function(r){return this.persistence.load_prop([r])};U.prototype.toString=function(){var r=this.get_config("name");return r!==uA&&(r=uA+"."+r),r};U.prototype._event_is_disabled=function(r){return $.isBlockedUA(WA)||this._flags.disable_all_events||$.include(this.__disabled_events,r)};U.prototype._gdpr_init=function(){var r=this.get_config("opt_out_tracking_persistence_type")==="localStorage";r&&$.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||$.cookie.get("mp_optout"))&&($.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};U.prototype._gdpr_update_persistence=function(r){var s;if(r&&r.clear_persistence)s=!0;else if(r&&r.enable_persistence)s=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==s&&this.persistence.set_disabled(s),s?this.stop_batch_senders():this._batchers_were_started&&this.start_batch_senders()};U.prototype._gdpr_call_func=function(r,s){return s=$.extend({track:$.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},s),$.localStorage.is_supported()||(s.persistence_type="cookie"),r(this.get_config("token"),{track:s.track,trackEventName:s.track_event_name,trackProperties:s.track_properties,persistenceType:s.persistence_type,persistencePrefix:s.cookie_prefix,cookieDomain:s.cookie_domain,cookieExpiration:s.cookie_expiration,crossSiteCookie:s.cross_site_cookie,crossSubdomainCookie:s.cross_subdomain_cookie,secureCookie:s.secure_cookie,ignoreDnt:s.ignore_dnt})};U.prototype.opt_in_tracking=function(r){r=$.extend({enable_persistence:!0},r),this._gdpr_call_func(pF,r),this._gdpr_update_persistence(r)};U.prototype.opt_out_tracking=function(r){r=$.extend({clear_persistence:!0,delete_user:!0},r),r.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(gF,r),this._gdpr_update_persistence(r)};U.prototype.has_opted_in_tracking=function(r){return this._gdpr_call_func(fF,r)};U.prototype.has_opted_out_tracking=function(r){return this._gdpr_call_func(lv,r)};U.prototype.clear_opt_in_out_tracking=function(r){r=$.extend({enable_persistence:!0},r),this._gdpr_call_func($F,r),this._gdpr_update_persistence(r)};U.prototype.report_error=function(r,s){ye.error.apply(ye.error,arguments);try{!s&&!(r instanceof Error)&&(r=new Error(r)),this.get_config("error_reporter")(r,s)}catch(i){ye.error(i)}};U.prototype.init=U.prototype.init;U.prototype.reset=U.prototype.reset;U.prototype.disable=U.prototype.disable;U.prototype.time_event=U.prototype.time_event;U.prototype.track=U.prototype.track;U.prototype.track_links=U.prototype.track_links;U.prototype.track_forms=U.prototype.track_forms;U.prototype.track_pageview=U.prototype.track_pageview;U.prototype.register=U.prototype.register;U.prototype.register_once=U.prototype.register_once;U.prototype.unregister=U.prototype.unregister;U.prototype.identify=U.prototype.identify;U.prototype.alias=U.prototype.alias;U.prototype.name_tag=U.prototype.name_tag;U.prototype.set_config=U.prototype.set_config;U.prototype.get_config=U.prototype.get_config;U.prototype.get_property=U.prototype.get_property;U.prototype.get_distinct_id=U.prototype.get_distinct_id;U.prototype.toString=U.prototype.toString;U.prototype.opt_out_tracking=U.prototype.opt_out_tracking;U.prototype.opt_in_tracking=U.prototype.opt_in_tracking;U.prototype.has_opted_out_tracking=U.prototype.has_opted_out_tracking;U.prototype.has_opted_in_tracking=U.prototype.has_opted_in_tracking;U.prototype.clear_opt_in_out_tracking=U.prototype.clear_opt_in_out_tracking;U.prototype.get_group=U.prototype.get_group;U.prototype.set_group=U.prototype.set_group;U.prototype.add_group=U.prototype.add_group;U.prototype.remove_group=U.prototype.remove_group;U.prototype.track_with_groups=U.prototype.track_with_groups;U.prototype.start_batch_senders=U.prototype.start_batch_senders;U.prototype.stop_batch_senders=U.prototype.stop_batch_senders;U.prototype.start_session_recording=U.prototype.start_session_recording;U.prototype.stop_session_recording=U.prototype.stop_session_recording;U.prototype.get_session_recording_properties=U.prototype.get_session_recording_properties;U.prototype.get_session_replay_url=U.prototype.get_session_replay_url;U.prototype.DEFAULT_API_ROUTES=mv;he.prototype.properties=he.prototype.properties;he.prototype.update_search_keyword=he.prototype.update_search_keyword;he.prototype.update_referrer_info=he.prototype.update_referrer_info;he.prototype.get_cross_subdomain=he.prototype.get_cross_subdomain;he.prototype.clear=he.prototype.clear;var oo={},SF=function(){$.each(oo,function(r,s){s!==uA&&(It[s]=r)}),It._=$},FF=function(){It.init=function(r,s,i){if(i)return It[i]||(It[i]=oo[i]=qg(r,s,i),It[i]._loaded()),It[i];var n=It;oo[uA]?n=oo[uA]:r&&(n=qg(r,s,uA),n._loaded(),oo[uA]=n),It=n,Cf===yF&&(Ae[uA]=It),SF()}},UF=function(){function r(){r.done||(r.done=!0,Bv=!0,$v=!1,$.each(oo,function(n){n._dom_loaded()}))}function s(){try{xe.documentElement.doScroll("left")}catch{setTimeout(s,1);return}r()}if(xe.addEventListener)xe.readyState==="complete"?r():xe.addEventListener("DOMContentLoaded",r,!1);else if(xe.attachEvent){xe.attachEvent("onreadystatechange",r);var i=!1;try{i=Ae.frameElement===null}catch{}xe.documentElement.doScroll&&i&&s()}$.register_event(Ae,"load",r,!0)};function RF(r){return pv=r,Cf=gv,It=new U,FF(),It.init(),UF(),It}function DF(r,s){s()}var xF=RF(DF);const OF=!0,vn=(r,s)=>{const i={debug:!OF,userId:localStorage.getItem("userId")||"anonymous",timeStamp:new Date().toISOString()};xF.track(r,{...i,...s})};export{GF as B,qF as a,KF as b,XF as c,PF as d,VF as e,jF as f,JF as g,ZF as h,YF as i,NF as j,HF as k,eU as l,$E as m,zF as n,fa as r,vn as t,WF as u};
