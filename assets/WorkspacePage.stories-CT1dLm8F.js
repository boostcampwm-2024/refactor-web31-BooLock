import{j as a}from"./jsx-runtime-DR9Q75dM.js";import"./Banner-Cmxe5cZT.js";import"./HomeHeader-BEuy5WEy.js";import"./WorkspaceList-D7pm9AH5.js";import"./WorkspaceHeader-BsqWRZc_.js";import"./EmptyWorkspace-DiTFbhfD.js";import"./WorkspaceGrid-Do4f3pvJ.js";import{u as D,d as L,Q as j,b as P}from"./CssPropsSelectBox-DpUj8ou8.js";import"./WorkspaceModal-BKu8np3m.js";import"./PreviewBox-gSDsTLqR.js";import{C as M}from"./CoachMark-U5X_zwzO.js";import"./WorkspaceHeaderButtons-CmNbEJ5e.js";import{W as I}from"./WorkspacePageHeader-DNF2LPbW.js";import"./CssCategoryBar-CVQaxhkR.js";import"./CssOptionItemList-CtN0KeVr.js";import"./CssPropsSelectBoxHeader-puqjAboO.js";import{I as O}from"./ImageTagModal-BeKOEr9y.js";import{r as c}from"./index-DRjF_FHU.js";import{r as w,u as E,c as B,f as W,i as v,g as R,a as T}from"./html2canvas.esm-D1fnD2iC.js";import{B as k,i as q,j as F,f as N,h as Q,k as _,w as A,l as H}from"./HoveredEmptyWorkspace-DMCV2Fde.js";import"./index-D1AAVYfs.js";import{a as U,b as K}from"./index-x70cJmE6.js";import{u as X}from"./useCoachMarkStore-Bn0-Ay5q.js";import"./plus-C7enkl2d.js";import"./SquareButton-eIFPi1Hz.js";import"./Logo-DlHd6_yt.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import"./Loading-CVQUyNmW.js";import"./Spinner-CHbqakIa.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import"./WorkspaceLoadError-BuktD2D2.js";import"./NotHoveredEmptyWorkspace-loFxOJJf.js";import"./CssCategoryButton-D2idemFI.js";import"./client-Dbo3a7kb.js";import"./ImageTagModalHeader-DRiIRUzt.js";import"./ImageTagModalImg-BJAMLe19.js";import"./ImageTagModalButton-DJiJ58eG.js";import"./ImageTagModalListItem-D30WR0c8.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./ModalConfirm-BDuYJlbG.js";import"./CodeViewer-D_DSBhbX.js";import"./CodeContent-DoxBelqC.js";import"./CodeViewer.module-CZ8GGqUa.js";import"./LineNumbers-eZdDlBqZ.js";import"./question-BUxmZXrP.js";import"./cssCategoryList-CHFX1k4S.js";import"./react-72mb-naO.js";function z(e,t){return D({...e,enabled:!0,suspense:!0,throwOnError:L,placeholderData:void 0},j)}const G=e=>{k[e]||(k[e]={init:function(){this.appendDummyInput().appendField(new q(w(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss"),this.showContextMenu=t=>{if(this.getSvgRoot().transform.baseVal[0].matrix.e!==8)return;const i=this.generateContextMenu();F.show(t,i,this.RTL)}}})},J=e=>{const t=H(),o=N()||Q(),{initCssPropertyObj:i}=E(),{initClassBlockList:r}=B(),{setCanvasInfo:p,setName:m}=W(),{resetChangedStatusState:n}=v(),{setIsResetCssChecked:u}=R(),{setInitialImageMap:y,setInitialImageList:S}=T(),{data:s,isPending:b,isError:f}=z({queryKey:A.detail(e),queryFn:()=>(n(),t.getWorkspace(o,e))});return c.useEffect(()=>{!f||!s||!s.workspaceDto||(m(s.workspaceDto.name),Object.keys(s.workspaceDto.totalCssPropertyObj).forEach(d=>{G(d)}),i(s.workspaceDto.totalCssPropertyObj),r(Object.keys(s.workspaceDto.totalCssPropertyObj).map(d=>w(d))),p(s.workspaceDto.canvas),_.contents=s.workspaceDto.classBlockList?JSON.parse(s.workspaceDto.classBlockList):[],u(s.workspaceDto.isCssReset),y(s.workspaceDto.imageMap),S(s.workspaceDto.imageList))},[f,s]),{data:s,isPending:b,isError:f}},V=()=>{const{isBlockChanged:e,isCssChanged:t}=v(),o=U(({currentLocation:n,nextLocation:u})=>n.pathname!==u.pathname&&(e||t)),i="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";c.useEffect(()=>{o.state==="blocked"&&(window.confirm(i)?o.proceed():o.reset())},[o.state,e,t]);const r=n=>{n.preventDefault()},p=()=>{window.addEventListener("beforeunload",r)},m=()=>{window.removeEventListener("beforeunload",r)};c.useEffect(()=>(e||t?p():m(),()=>{m()}),[e,t])},x=()=>{const{workspaceId:e}=K();J(e),V();const{currentStep:t,isCoachMarkOpen:o,openCoachMark:i}=X(),r=document.querySelector(".blocklyToolboxDiv");return c.useLayoutEffect(()=>{localStorage.getItem("isCoachMarkDismissed")||i()},[]),c.useEffect(()=>{r&&(t<=1?r.classList.add("coachMarkHighlight"):r.classList.remove("coachMarkHighlight"))},[t,r]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex h-screen flex-col",children:[o&&a.jsx(M,{}),a.jsx(I,{}),a.jsx(P,{})]}),a.jsx(O,{})]})};x.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const ze={title:"pages/WorkspacePage",component:x,parameters:{layout:"fullscreen"},decorators:[e=>a.jsx("div",{className:"h-screen w-screen",children:a.jsx(e,{})})],tags:["autodocs"]},l={args:{}};var h,g,C;l.parameters={...l.parameters,docs:{...(h=l.parameters)==null?void 0:h.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(C=(g=l.parameters)==null?void 0:g.docs)==null?void 0:C.source}}};const Ge=["Default"];export{l as Default,Ge as __namedExportsOrder,ze as default};
