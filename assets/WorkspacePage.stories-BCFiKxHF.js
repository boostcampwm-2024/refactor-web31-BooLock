import{j as a}from"./jsx-runtime-DR9Q75dM.js";import"./Banner-Cmxe5cZT.js";import"./HomeHeader-Bi2tFyvJ.js";import"./WorkspaceList-C39SSTkf.js";import"./WorkspaceHeader-BRH82iFt.js";import"./EmptyWorkspace-Bid2kymg.js";import"./WorkspaceGrid-Do4f3pvJ.js";import{u as b,d as D,Q as M,b as L}from"./CssPropsSelectBox-D8FaByCB.js";import"./WorkspaceModal-BJQZuZJF.js";import"./PreviewBox-CZtNv7_M.js";import{C as j}from"./CoachMark-PMRMyvmb.js";import"./WorkspaceHeaderButtons-CzlNvRdw.js";import{W as O}from"./WorkspacePageHeader-CCRgRXov.js";import"./CssCategoryBar-CgnjJsxd.js";import"./CssOptionItemList-DmhqggDA.js";import"./CssPropsSelectBoxHeader-DffaLX_G.js";import{I as P}from"./ImageTagModal-OwRHYmKl.js";import{r as m}from"./index-DRjF_FHU.js";import{r as w,u as I,c as E,f as B,i as v,g as W,a as R}from"./mixpanel-Bz6MsQbQ.js";import{B as k,l as T,m as q,j as F,k as N,n as Q,w as _,o as A,u as H}from"./HoveredEmptyWorkspace-DcR-ykMt.js";import"./index-D1AAVYfs.js";import{a as U,b as K}from"./index-x70cJmE6.js";import{u as X}from"./useCoachMarkStore-Bn0-Ay5q.js";import"./plus-C7enkl2d.js";import"./SquareButton-eIFPi1Hz.js";import"./Logo-BbusgMO-.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import"./Loading-CVQUyNmW.js";import"./Spinner-m3P6xpUg.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import"./WorkspaceLoadError-BuktD2D2.js";import"./NotHoveredEmptyWorkspace-loFxOJJf.js";import"./CssCategoryButton-Cb0moDQb.js";import"./client-Dbo3a7kb.js";import"./ImageTagModalHeader-BmpzU2ne.js";import"./ImageTagModalImg-BJAMLe19.js";import"./ImageTagModalButton-DJiJ58eG.js";import"./ImageTagModalListItem-D30WR0c8.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./ModalConfirm-BDuYJlbG.js";import"./CodeViewer-dG1omHtV.js";import"./LineNumbers-B_2_ToYE.js";import"./cssCategoryList-CHFX1k4S.js";import"./react-72mb-naO.js";function z(e,s){return b({...e,enabled:!0,suspense:!0,throwOnError:D,placeholderData:void 0},M)}const G=e=>{k[e]||(k[e]={init:function(){this.appendDummyInput().appendField(new T(w(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss"),this.showContextMenu=s=>{if(this.getSvgRoot().transform.baseVal[0].matrix.e!==8)return;const n=this.generateContextMenu();q.show(s,n,this.RTL)}}})},J=e=>{const s=A(),t=F()||N(),n=I(p=>p.initCssPropertyObj),{initClassBlockList:r}=E(),{setCanvasInfo:i,setName:l}=B(),{resetChangedStatusState:c}=v(),{setIsResetCssChecked:f}=W(),{setInitialImageMap:x,setInitialImageList:y}=R(),{data:o,isError:d}=z({queryKey:_.detail(e),queryFn:()=>(c(),s.getWorkspace(t,e))});m.useEffect(()=>{d||!o||!o.workspaceDto||(l(o.workspaceDto.name),Object.keys(o.workspaceDto.totalCssPropertyObj).forEach(p=>{G(p)}),n(o.workspaceDto.totalCssPropertyObj),r(Object.keys(o.workspaceDto.totalCssPropertyObj).map(p=>w(p))),i(o.workspaceDto.canvas),Q.contents=o.workspaceDto.classBlockList?JSON.parse(o.workspaceDto.classBlockList):[],f(o.workspaceDto.isCssReset),x(o.workspaceDto.imageMap),y(o.workspaceDto.imageList))},[d,o])},V=()=>{const{isBlockChanged:e,isCssChanged:s}=v(),t=U(({currentLocation:c,nextLocation:f})=>c.pathname!==f.pathname&&(e||s)),n="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";m.useEffect(()=>{t.state==="blocked"&&(window.confirm(n)?t.proceed():t.reset())},[t.state,e,s]);const r=c=>{c.preventDefault()},i=()=>{window.addEventListener("beforeunload",r)},l=()=>{window.removeEventListener("beforeunload",r)};m.useEffect(()=>(e||s?i():l(),()=>{l()}),[e,s])},S=()=>{const{workspaceId:e}=K();J(e),V();const{currentStep:s,isCoachMarkOpen:t,openCoachMark:n}=X(H(i=>({currentStep:i.currentStep,isCoachMarkOpen:i.isCoachMarkOpen,openCoachMark:i.openCoachMark}))),r=document.querySelector(".blocklyToolboxDiv");return m.useLayoutEffect(()=>{localStorage.getItem("isCoachMarkDismissed")||n()},[]),m.useEffect(()=>{r&&(s<=1?r.classList.add("coachMarkHighlight"):r.classList.remove("coachMarkHighlight"))},[s,r]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex h-screen flex-col",children:[t&&a.jsx(j,{}),a.jsx(O,{currentStep:s}),a.jsx(L,{})]}),a.jsx(P,{})]})};S.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const Ue={title:"pages/WorkspacePage",component:S,parameters:{layout:"fullscreen"},decorators:[e=>a.jsx("div",{className:"h-screen w-screen",children:a.jsx(e,{})})],tags:["autodocs"]},u={args:{}};var h,C,g;u.parameters={...u.parameters,docs:{...(h=u.parameters)==null?void 0:h.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(g=(C=u.parameters)==null?void 0:C.docs)==null?void 0:g.source}}};const Ke=["Default"];export{u as Default,Ke as __namedExportsOrder,Ue as default};
