import{j as a}from"./jsx-runtime-DR9Q75dM.js";import"./Banner-Cmxe5cZT.js";import"./HomeHeader-BCMMxaeh.js";import"./WorkspaceList-BoTcdKNj.js";import"./WorkspaceHeader-CdtsD02S.js";import"./EmptyWorkspace-DP8HTIqs.js";import"./WorkspaceGrid-Do4f3pvJ.js";import{u as v,d as D,Q as M,b as j}from"./CssPropsSelectBox-DgE7rvuL.js";import"./WorkspaceModal-Bo2Gjhat.js";import"./PreviewBox-BIeCGXN5.js";import{C as O}from"./CoachMark-9XbcFmdF.js";import"./WorkspaceHeaderButtons-BnE-ilZt.js";import{W as I}from"./WorkspacePageHeader-xcfvMnUC.js";import"./CssCategoryBar-BevuSkY1.js";import"./CssOptionItemList-CtOKv4jd.js";import"./CssPropsSelectBoxHeader-D53UfWIo.js";import{I as L}from"./ImageTagModal-DB06SwLN.js";import{r as m}from"./index-DRjF_FHU.js";import{r as g,u as P,c as E,f as W,i as S,g as B,a as R}from"./mixpanel-Bz6MsQbQ.js";import{B as k,l as T,m as q,j as F,k as N,n as Q,w as _,o as A,u as H,p as U}from"./HoveredEmptyWorkspace-Dg5Z5-eq.js";import"./index-D1AAVYfs.js";import{a as K,b as X}from"./index-x70cJmE6.js";import{u as z}from"./useCoachMarkStore-Bn0-Ay5q.js";import"./plus-C7enkl2d.js";import"./SquareButton-eIFPi1Hz.js";import"./Logo-BbusgMO-.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import"./Loading-CVQUyNmW.js";import"./Spinner-m3P6xpUg.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import"./WorkspaceLoadError-BuktD2D2.js";import"./NotHoveredEmptyWorkspace-loFxOJJf.js";import"./CssCategoryButton-Cb0moDQb.js";import"./client-Dbo3a7kb.js";import"./ImageTagModalHeader-BmpzU2ne.js";import"./ImageTagModalImg-BJAMLe19.js";import"./ImageTagModalButton-DJiJ58eG.js";import"./ImageTagModalListItem-D30WR0c8.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./ModalConfirm-BDuYJlbG.js";import"./CodeViewer-dG1omHtV.js";import"./LineNumbers-B_2_ToYE.js";import"./cssCategoryList-CHFX1k4S.js";import"./react-72mb-naO.js";function G(e,s){return v({...e,enabled:!0,suspense:!0,throwOnError:D,placeholderData:void 0},M)}const J=e=>{k[e]||(k[e]={init:function(){this.appendDummyInput().appendField(new T(g(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss"),this.showContextMenu=s=>{if(this.getSvgRoot().transform.baseVal[0].matrix.e!==8)return;const i=this.generateContextMenu();q.show(s,i,this.RTL)}}})},V=e=>{const s=A(),o=F()||N(),i=P(p=>p.initCssPropertyObj),{initClassBlockList:n}=E(),{setCanvasInfo:r,setName:c}=W(),{resetChangedStatusState:u}=S(),{setIsResetCssChecked:x}=B(),{setInitialImageMap:y,setInitialImageList:b}=R(),{data:t,isError:d}=G({queryKey:_.detail(e),queryFn:()=>(u(),s.getWorkspace(o,e))});m.useEffect(()=>{d||!t||!t.workspaceDto||(c(t.workspaceDto.name),Object.keys(t.workspaceDto.totalCssPropertyObj).forEach(p=>{J(p)}),i(t.workspaceDto.totalCssPropertyObj),n(Object.keys(t.workspaceDto.totalCssPropertyObj).map(p=>g(p))),r(t.workspaceDto.canvas),Q.contents=t.workspaceDto.classBlockList?JSON.parse(t.workspaceDto.classBlockList):[],x(t.workspaceDto.isCssReset),y(t.workspaceDto.imageMap),b(t.workspaceDto.imageList))},[d,t])},Y=()=>{const{handleSave:e}=H(),{isBlockChanged:s,isCssChanged:o}=S(),i=K(({currentLocation:c,nextLocation:u})=>c.pathname!==u.pathname&&(s||o)),n="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";m.useEffect(()=>{i.state==="blocked"&&e()},[i.state,s,o]);const r=c=>{s||o?(c.preventDefault(),alert(n)):e()};m.useEffect(()=>(window.addEventListener("beforeunload",r),window.removeEventListener("beforeunload",r)),[s,o])},w=()=>{const{workspaceId:e}=X();V(e),Y();const{currentStep:s,isCoachMarkOpen:o,openCoachMark:i}=z(U(r=>({currentStep:r.currentStep,isCoachMarkOpen:r.isCoachMarkOpen,openCoachMark:r.openCoachMark}))),n=document.querySelector(".blocklyToolboxDiv");return m.useLayoutEffect(()=>{localStorage.getItem("isCoachMarkDismissed")||i()},[]),m.useEffect(()=>{n&&(s<=1?n.classList.add("coachMarkHighlight"):n.classList.remove("coachMarkHighlight"))},[s,n]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex h-screen flex-col",children:[o&&a.jsx(O,{}),a.jsx(I,{currentStep:s}),a.jsx(j,{})]}),a.jsx(L,{})]})};w.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const Ke={title:"pages/WorkspacePage",component:w,parameters:{layout:"fullscreen"},decorators:[e=>a.jsx("div",{className:"h-screen w-screen",children:a.jsx(e,{})})],tags:["autodocs"]},l={args:{}};var f,h,C;l.parameters={...l.parameters,docs:{...(f=l.parameters)==null?void 0:f.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(C=(h=l.parameters)==null?void 0:h.docs)==null?void 0:C.source}}};const Xe=["Default"];export{l as Default,Xe as __namedExportsOrder,Ke as default};
