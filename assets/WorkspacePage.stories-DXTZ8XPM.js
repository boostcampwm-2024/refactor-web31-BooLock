import{j as a}from"./jsx-runtime-DR9Q75dM.js";import"./Banner-Cmxe5cZT.js";import"./HomeHeader-DhJwOzpt.js";import"./WorkspaceList-D_vQnd6u.js";import"./WorkspaceHeader-hE8cptA-.js";import"./EmptyWorkspace-DUUeiV4_.js";import"./WorkspaceGrid-Do4f3pvJ.js";import{u as D,d as M,Q as L,b as j}from"./CssPropsSelectBox-CwT5IS6b.js";import"./WorkspaceModal-BMJZRNvm.js";import"./PreviewBox-Bvn_0S72.js";import{C as O}from"./CoachMark-EdljgqLm.js";import"./WorkspaceHeaderButtons-DjEP8kro.js";import{W as P}from"./WorkspacePageHeader-uwWTbPmi.js";import"./CssCategoryBar-W7c4KKb3.js";import"./CssOptionItemList-nsjD3Rh-.js";import"./CssPropsSelectBoxHeader-B-VAQu07.js";import{I}from"./ImageTagModal-DEUBZtwb.js";import{r as p}from"./index-DRjF_FHU.js";import{r as w,u as E,c as B,f as W,i as v,g as R,a as T}from"./mixpanel-BYnboQeE.js";import{B as k,j as q,k as F,h as N,i as Q,l as _,w as A,m as H,u as U}from"./HoveredEmptyWorkspace-CeZW0uca.js";import"./index-D1AAVYfs.js";import{a as K,b as X}from"./index-x70cJmE6.js";import{u as z}from"./useCoachMarkStore-Bn0-Ay5q.js";import"./plus-C7enkl2d.js";import"./SquareButton-eIFPi1Hz.js";import"./Logo-BbusgMO-.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import"./Loading-CVQUyNmW.js";import"./Spinner-Ddn5mi22.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import"./WorkspaceLoadError-BuktD2D2.js";import"./NotHoveredEmptyWorkspace-loFxOJJf.js";import"./CssCategoryButton-Ctai2tKd.js";import"./client-Dbo3a7kb.js";import"./ImageTagModalHeader-CJTUWoJB.js";import"./ImageTagModalImg-BJAMLe19.js";import"./ImageTagModalButton-DJiJ58eG.js";import"./ImageTagModalListItem-D30WR0c8.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./ModalConfirm-BDuYJlbG.js";import"./CodeViewer-dG1omHtV.js";import"./LineNumbers-B_2_ToYE.js";import"./cssCategoryList-CHFX1k4S.js";import"./react-72mb-naO.js";import"./question-BUxmZXrP.js";function G(e,o){return D({...e,enabled:!0,suspense:!0,throwOnError:M,placeholderData:void 0},L)}const J=e=>{k[e]||(k[e]={init:function(){this.appendDummyInput().appendField(new q(w(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss"),this.showContextMenu=o=>{if(this.getSvgRoot().transform.baseVal[0].matrix.e!==8)return;const n=this.generateContextMenu();F.show(o,n,this.RTL)}}})},V=e=>{const o=H(),t=N()||Q(),{initCssPropertyObj:n}=E(),{initClassBlockList:r}=B(),{setCanvasInfo:i,setName:m}=W(),{resetChangedStatusState:c}=v(),{setIsResetCssChecked:u}=R(),{setInitialImageMap:x,setInitialImageList:y}=T(),{data:s,isPending:b,isError:d}=G({queryKey:A.detail(e),queryFn:()=>(c(),o.getWorkspace(t,e))});return p.useEffect(()=>{d||!s||!s.workspaceDto||(m(s.workspaceDto.name),Object.keys(s.workspaceDto.totalCssPropertyObj).forEach(f=>{J(f)}),n(s.workspaceDto.totalCssPropertyObj),r(Object.keys(s.workspaceDto.totalCssPropertyObj).map(f=>w(f))),i(s.workspaceDto.canvas),_.contents=s.workspaceDto.classBlockList?JSON.parse(s.workspaceDto.classBlockList):[],u(s.workspaceDto.isCssReset),x(s.workspaceDto.imageMap),y(s.workspaceDto.imageList))},[d,s]),{data:s,isPending:b,isError:d}},Y=()=>{const{isBlockChanged:e,isCssChanged:o}=v(),t=K(({currentLocation:c,nextLocation:u})=>c.pathname!==u.pathname&&(e||o)),n="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";p.useEffect(()=>{t.state==="blocked"&&(window.confirm(n)?t.proceed():t.reset())},[t.state,e,o]);const r=c=>{c.preventDefault()},i=()=>{window.addEventListener("beforeunload",r)},m=()=>{window.removeEventListener("beforeunload",r)};p.useEffect(()=>(e||o?i():m(),()=>{m()}),[e,o])},S=()=>{const{workspaceId:e}=X();V(e),Y();const{currentStep:o,isCoachMarkOpen:t,openCoachMark:n}=z(U(i=>({currentStep:i.currentStep,isCoachMarkOpen:i.isCoachMarkOpen,openCoachMark:i.openCoachMark}))),r=document.querySelector(".blocklyToolboxDiv");return p.useLayoutEffect(()=>{localStorage.getItem("isCoachMarkDismissed")||n()},[]),p.useEffect(()=>{r&&(o<=1?r.classList.add("coachMarkHighlight"):r.classList.remove("coachMarkHighlight"))},[o,r]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex h-screen flex-col",children:[t&&a.jsx(O,{}),a.jsx(P,{currentStep:o}),a.jsx(j,{})]}),a.jsx(I,{})]})};S.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const Xe={title:"pages/WorkspacePage",component:S,parameters:{layout:"fullscreen"},decorators:[e=>a.jsx("div",{className:"h-screen w-screen",children:a.jsx(e,{})})],tags:["autodocs"]},l={args:{}};var h,C,g;l.parameters={...l.parameters,docs:{...(h=l.parameters)==null?void 0:h.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(g=(C=l.parameters)==null?void 0:C.docs)==null?void 0:g.source}}};const ze=["Default"];export{l as Default,ze as __namedExportsOrder,Xe as default};
