import{j as r}from"./jsx-runtime-DR9Q75dM.js";import"./Banner-Cmxe5cZT.js";import"./HomeHeader-Dv9ndyKU.js";import"./WorkspaceList-mM6z9TM5.js";import"./WorkspaceHeader-i8QIc62I.js";import"./EmptyWorkspace-UUEsRstB.js";import"./WorkspaceGrid-Do4f3pvJ.js";import{u as D,d as j,Q as M,b as I}from"./CssPropsSelectBox-CWHvOB2w.js";import"./WorkspaceModal-Q7xrTMKn.js";import"./PreviewBox-BtdyIPHw.js";import{C as L}from"./CoachMark-BS8VMUGL.js";import"./WorkspaceHeaderButtons-vKdqZTsi.js";import{W as O}from"./WorkspacePageHeader-C-DBVThR.js";import"./CssCategoryBar-B0-cvXAP.js";import"./CssOptionItemList-Ae29i55f.js";import"./CssPropsSelectBoxHeader-DzcCq6E0.js";import{I as P}from"./ImageTagModal-C2Kjjiuv.js";import{r as p}from"./index-DRjF_FHU.js";import{r as C,u as E,c as W,f as B,i as w,g as R,a as T}from"./mixpanel-BmArcrZN.js";import{B as f,i as q,j as F,f as N,h as Q,k as _,w as A,l as H,u as U}from"./HoveredEmptyWorkspace-rO-1QHSC.js";import"./index-D1AAVYfs.js";import{a as K,b as X}from"./index-x70cJmE6.js";import{u as z}from"./useCoachMarkStore-Bn0-Ay5q.js";import"./plus-C7enkl2d.js";import"./SquareButton-eIFPi1Hz.js";import"./Logo-DlHd6_yt.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import"./Loading-CVQUyNmW.js";import"./Spinner-CYAHg-cz.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import"./WorkspaceLoadError-BuktD2D2.js";import"./NotHoveredEmptyWorkspace-loFxOJJf.js";import"./CssCategoryButton-BKXJIKib.js";import"./client-Dbo3a7kb.js";import"./ImageTagModalHeader-BocVd_br.js";import"./ImageTagModalImg-BJAMLe19.js";import"./ImageTagModalButton-DJiJ58eG.js";import"./ImageTagModalListItem-D30WR0c8.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./ModalConfirm-BDuYJlbG.js";import"./CodeViewer-dG1omHtV.js";import"./LineNumbers-B_2_ToYE.js";import"./question-BUxmZXrP.js";import"./cssCategoryList-CHFX1k4S.js";import"./react-72mb-naO.js";function G(e,t){return D({...e,enabled:!0,suspense:!0,throwOnError:j,placeholderData:void 0},M)}const J=e=>{f[e]||(f[e]={init:function(){this.appendDummyInput().appendField(new q(C(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss"),this.showContextMenu=t=>{if(this.getSvgRoot().transform.baseVal[0].matrix.e!==8)return;const a=this.generateContextMenu();F.show(t,a,this.RTL)}}})},V=e=>{const t=H(),o=N()||Q(),{initCssPropertyObj:a}=E(),{initClassBlockList:i}=W(),{setCanvasInfo:n,setName:c}=B(),{resetChangedStatusState:l}=w(),{setIsResetCssChecked:x}=R(),{setInitialImageMap:y,setInitialImageList:b}=T(),{data:s,isPending:v,isError:u}=G({queryKey:A.detail(e),queryFn:()=>(l(),t.getWorkspace(o,e))});return p.useEffect(()=>{u||!s||!s.workspaceDto||(c(s.workspaceDto.name),Object.keys(s.workspaceDto.totalCssPropertyObj).forEach(d=>{J(d)}),a(s.workspaceDto.totalCssPropertyObj),i(Object.keys(s.workspaceDto.totalCssPropertyObj).map(d=>C(d))),n(s.workspaceDto.canvas),_.contents=s.workspaceDto.classBlockList?JSON.parse(s.workspaceDto.classBlockList):[],x(s.workspaceDto.isCssReset),y(s.workspaceDto.imageMap),b(s.workspaceDto.imageList))},[u,s]),{data:s,isPending:v,isError:u}},Y=()=>{const{handleSave:e}=U(),{isBlockChanged:t,isCssChanged:o}=w(),a=K(({currentLocation:c,nextLocation:l})=>c.pathname!==l.pathname&&(t||o)),i="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";p.useEffect(()=>{a.state==="blocked"&&e()},[a.state,t,o]);const n=c=>{t||o?(c.preventDefault(),alert(i)):e()};p.useEffect(()=>(window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[t,o])},S=()=>{const{workspaceId:e}=X();V(e),Y();const{currentStep:t,isCoachMarkOpen:o,openCoachMark:a}=z(),i=document.querySelector(".blocklyToolboxDiv");return p.useLayoutEffect(()=>{localStorage.getItem("isCoachMarkDismissed")||a()},[]),p.useEffect(()=>{i&&(t<=1?i.classList.add("coachMarkHighlight"):i.classList.remove("coachMarkHighlight"))},[t,i]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex h-screen flex-col",children:[o&&r.jsx(L,{}),r.jsx(O,{}),r.jsx(I,{})]}),r.jsx(P,{})]})};S.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const Xe={title:"pages/WorkspacePage",component:S,parameters:{layout:"fullscreen"},decorators:[e=>r.jsx("div",{className:"h-screen w-screen",children:r.jsx(e,{})})],tags:["autodocs"]},m={args:{}};var k,h,g;m.parameters={...m.parameters,docs:{...(k=m.parameters)==null?void 0:k.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(g=(h=m.parameters)==null?void 0:h.docs)==null?void 0:g.source}}};const ze=["Default"];export{m as Default,ze as __namedExportsOrder,Xe as default};
